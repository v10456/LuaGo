<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>README_zh</title>
    <url>/2021/10/31/README_zh/</url>
    <content><![CDATA[<h1>首先申明：这个库是基于 <a href="https://github.com/EverythingMe/overscroll-decor">Over-Scroll</a></h1>
<hr>
<h1>Elasticity 支持 Android 原生控件 RecyclerView, ListView, GridView, ScrollView …</h1>
<p>这个库可以让几乎所有的 Android View 具有类似 MIUI 系统里面的一个弹性拉伸的效果。具体的效果可以参考下面的动图。</p>
<p><a href="elasticity-app-debug.apk">demo apk</a></p>
<p><img src="demo.gif" alt="demo"></p>
<h1>Gradle 依赖</h1>
<p>在你的项目的 <code>build.gradle</code> 文件添加如下内容:</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        ...</span><br><span class="line">        maven &#123; url <span class="string">&quot;https://jitpack.io&quot;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在你的 module 的 <code>build.gradle</code> 文件中添加如下内容:</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    compile <span class="string">&#x27;com.github.XanderWang:elasticity:1.0.1&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>使用</h1>
<h3 id="RecyclerView">RecyclerView</h3>
<p>支持线性和瀑布流的 layout managers，可以很容易接入。实例接入代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycler_view);</span><br><span class="line">    </span><br><span class="line"><span class="comment">// Horizontal</span></span><br><span class="line">ElasticityHelper.setUpOverScroll(recyclerView, ORIENTATION.HORIZONTAL);</span><br><span class="line"><span class="comment">// Vertical</span></span><br><span class="line">ElasticityHelper.setUpOverScroll(recyclerView, ORIENTATION.VERTICAL);</span><br></pre></td></tr></table></figure>
<h3 id="RecyclerView-items-的-swiping-dragging-支持">RecyclerView items 的 swiping / dragging 支持</h3>
<p>查看 <em>高级用法</em> .</p>
<h3 id="ListView">ListView</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line">ElasticityHelper.setUpOverScroll(listView);</span><br></pre></td></tr></table></figure>
<h3 id="GridView">GridView</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">GridView gridView = (GridView) findViewById(R.id.grid_view);</span><br><span class="line">ElasticityHelper.setUpOverScroll(gridView);</span><br></pre></td></tr></table></figure>
<h3 id="ViewPager">ViewPager</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ViewPager viewPager = (ViewPager) findViewById(R.id.view_pager);</span><br><span class="line">ElasticityHelper.setUpOverScroll(viewPager);</span><br></pre></td></tr></table></figure>
<h3 id="ScrollView-HorizontalScrollView">ScrollView, HorizontalScrollView</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ScrollView scrollView = (ScrollView) findViewById(R.id.scroll_view);</span><br><span class="line">ElasticityHelper.setUpOverScroll(scrollView);</span><br><span class="line">    </span><br><span class="line">HorizontalScrollView horizontalScrollView = (HorizontalScrollView) findViewById(R.id.horizontal_scroll_view);</span><br><span class="line">ElasticityHelper.setUpOverScroll(horizontalScrollView);</span><br></pre></td></tr></table></figure>
<h3 id="任何-View-Text-Image…-可以认为一开始就是-Over-Scroll-状态">任何 View - Text, Image… (可以认为一开始就是 Over-Scroll 状态)</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">View view = findViewById(R.id.demo_view);</span><br><span class="line">    </span><br><span class="line"><span class="comment">// Horizontal</span></span><br><span class="line">ElasticityHelper.setUpStaticOverScroll(view, ORIENTATION.HORIZONTAL);</span><br><span class="line"><span class="comment">// Vertical</span></span><br><span class="line">ElasticityHelper.setUpStaticOverScroll(view, ORIENTATION.VERTICAL);</span><br></pre></td></tr></table></figure>
<h1>高级用法</h1>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Horizontal RecyclerView</span></span><br><span class="line">RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycler_view);</span><br><span class="line"><span class="keyword">new</span> HorizontalElasticityBounceEffect(<span class="keyword">new</span> RecyclerViewElasticityAdapter(recyclerView));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ListView (vertical)</span></span><br><span class="line">ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line"><span class="keyword">new</span> VerticalElasticityBounceEffect(<span class="keyword">new</span> AbsListViewElasticityAdapter(listView));</span><br><span class="line"></span><br><span class="line"><span class="comment">// GridView (vertical)</span></span><br><span class="line">GridView gridView = (GridView) findViewById(R.id.grid_view);</span><br><span class="line"><span class="keyword">new</span> VerticalElasticityBounceEffect(<span class="keyword">new</span> AbsListViewElasticityAdapter(gridView));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ViewPager</span></span><br><span class="line">ViewPager viewPager = (ViewPager) findViewById(R.id.view_pager);</span><br><span class="line"><span class="keyword">new</span> HorizontalElasticityBounceEffect(<span class="keyword">new</span> ViewPagerElasticityAdapter(viewPager));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A simple TextView - horizontal</span></span><br><span class="line">View textView = findViewById(R.id.title);</span><br><span class="line"><span class="keyword">new</span> HorizontalElasticityBounceEffect(<span class="keyword">new</span> StaticElasticityAdapter(view));</span><br></pre></td></tr></table></figure>
<h3 id="RecyclerView-借助-ItemTouchHelper-实现-item-swiping-dragging">RecyclerView 借助 <a href="http://developer.android.com/reference/android/support/v7/widget/helper/ItemTouchHelper.html">ItemTouchHelper</a> 实现 item swiping / dragging</h3>
<p>理论上可以很好的支持 item swiping / dragging (based on <a href="http://developer.android.com/reference/android/support/v7/widget/helper/ItemTouchHelper.html">ItemTouchHelper</a>)， 但是还是建议按如下代码使用。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Normally you would attach an ItemTouchHelper &amp; a callback to a RecyclerView, this way:</span></span><br><span class="line">RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycler_view);</span><br><span class="line">ItemTouchHelper.Callback myCallback = <span class="keyword">new</span> ItemTouchHelper.Callback() &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;;</span><br><span class="line">ItemTouchHelper myHelper = <span class="keyword">new</span> ItemTouchHelper(myCallback);</span><br><span class="line">myHelper.attachToRecyclerView(recyclerView);</span><br><span class="line"></span><br><span class="line"><span class="comment">// INSTEAD of attaching the helper yourself, simply use the dedicated adapter c&#x27;tor, e.g.:</span></span><br><span class="line"><span class="keyword">new</span> VerticalElasticityBounceEffect(<span class="keyword">new</span> RecyclerViewElasticityAdapter(recyclerView, myCallback));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>查看更多的 swiping / dragging 原理, 可以参考 <a href="https://medium.com/@ipaulpro/drag-and-swipe-with-recyclerview-b9456d2b1aaf">this useful tutorial</a>.</p>
<h3 id="Over-Scroll-Listeners">Over-Scroll Listeners</h3>
<p>提供 2 种监听的方式来获取滚动过程中的状态，具体如下</p>
<h4 id="State-Change-Listener">State-Change Listener</h4>
<p>状态改变监听，通过这个监听回调，你可以知道状态的改变，使用范例如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Note: over-scroll is set-up using the helper method.</span></span><br><span class="line">IElasticity elasticity = ElasticityHelper.setUpOverScroll(recyclerView, ORIENTATION.HORIZONTAL);</span><br><span class="line"></span><br><span class="line">elasticity.setOverScrollStateListener(<span class="keyword">new</span> IElasticityStateListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOverScrollStateChange</span><span class="params">(IElasticity elasticity, <span class="keyword">int</span> oldState, <span class="keyword">int</span> newState)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">switch</span> (newState) &#123;</span><br><span class="line">	        <span class="keyword">case</span> STATE_IDLE:</span><br><span class="line">	            <span class="comment">// No over-scroll is in effect.</span></span><br><span class="line">	            <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> STATE_DRAG_START_SIDE:</span><br><span class="line">	            <span class="comment">// Dragging started at the left-end.</span></span><br><span class="line">	            <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> STATE_DRAG_END_SIDE:</span><br><span class="line">	            <span class="comment">// Dragging started at the right-end.</span></span><br><span class="line">	            <span class="keyword">break</span>;</span><br><span class="line">	        <span class="keyword">case</span> STATE_BOUNCE_BACK:</span><br><span class="line">	            <span class="keyword">if</span> (oldState == STATE_DRAG_START_SIDE) &#123;</span><br><span class="line">	                <span class="comment">// Dragging stopped -- view is starting to bounce back from the *left-end* onto natural position.</span></span><br><span class="line">	            &#125; <span class="keyword">else</span> &#123; <span class="comment">// i.e. (oldState == STATE_DRAG_END_SIDE)</span></span><br><span class="line">	                <span class="comment">// View is starting to bounce back from the *right-end*.</span></span><br><span class="line">	            &#125;</span><br><span class="line">	            <span class="keyword">break</span>;</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Real-time-Updates-Listener">Real-time Updates Listener</h4>
<p>滑动过程监听，可以监听滑动过程中手势的具体变化。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Note: over-scroll is set-up by explicity instantiating a decorator rather than using the helper; The two methods can be used interchangeably for registering listeners.</span></span><br><span class="line">IElasticity elasticity = <span class="keyword">new</span> VerticalElasticityBounceEffect(<span class="keyword">new</span> RecyclerViewElasticityAdapter(recyclerView, itemTouchHelperCallback));</span><br><span class="line"></span><br><span class="line">elasticity.setOverScrollUpdateListener(<span class="keyword">new</span> IElasticityUpdateListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onOverScrollUpdate</span><span class="params">(IElasticity elasticity, <span class="keyword">int</span> state, <span class="keyword">float</span> offset)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">final</span> View view = elasticity.getView();</span><br><span class="line">    	<span class="keyword">if</span> (offset &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    		<span class="comment">// &#x27;view&#x27; is currently being over-scrolled from the top.</span></span><br><span class="line">    	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (offset &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    		<span class="comment">// &#x27;view&#x27; is currently being over-scrolled from the bottom.</span></span><br><span class="line">    	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    		<span class="comment">// No over-scroll is in-effect.</span></span><br><span class="line">    		<span class="comment">// This is synonymous with having (state == STATE_IDLE).</span></span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这两个监听可以单独使用，也可以同时使用，具体看你的需求。</p>
<h3 id="自定义-Views">自定义 Views</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">final</span> CustomView view = (CustomView) findViewById(R.id.custom_view);</span><br><span class="line"><span class="keyword">new</span> VerticalElasticityBounceEffect(<span class="keyword">new</span> IElasticityAdapter() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isInAbsoluteStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	    <span class="comment">// canScrollUp() is an example of a method you must implement</span></span><br><span class="line">        <span class="keyword">return</span> !view.canScrollUp();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isInAbsoluteEnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	     <span class="comment">// canScrollDown() is an example of a method you must implement</span></span><br><span class="line">        <span class="keyword">return</span> !view.canScrollDown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="完全自定义">完全自定义</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// Make over-scroll applied over a list-view feel more &#x27;stiff&#x27;</span></span><br><span class="line"><span class="keyword">new</span> VerticalElasticityBounceEffect(<span class="keyword">new</span> AbsListViewElasticityAdapter(view),</span><br><span class="line">        <span class="number">5f</span>, <span class="comment">// Default is 3</span></span><br><span class="line">        VerticalElasticityBounceEffect.DEFAULT_TOUCH_DRAG_MOVE_RATIO_BCK,</span><br><span class="line">        VerticalElasticityBounceEffect.DEFAULT_DECELERATE_FACTOR,</span><br><span class="line">        VerticalElasticityBounceEffect.MAX_SCALE_FACTOR);</span><br><span class="line">                </span><br><span class="line"><span class="comment">// Make over-scroll applied over a list-view bounce-back more softly</span></span><br><span class="line"><span class="keyword">new</span> VerticalElasticityBounceEffect(<span class="keyword">new</span> AbsListViewElasticityAdapter(view),</span><br><span class="line">        VerticalElasticityBounceEffect.DEFAULT_TOUCH_DRAG_MOVE_RATIO_FWD,</span><br><span class="line">        VerticalElasticityBounceEffect.DEFAULT_TOUCH_DRAG_MOVE_RATIO_BCK,</span><br><span class="line">        -<span class="number">1f</span> <span class="comment">// Default is -2,</span></span><br><span class="line">        VerticalElasticityBounceEffect.MAX_SCALE_FACTOR);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="感谢">感谢</h2>
<p>App icons by <a href="http://somerandomdude.com/work/iconic/">P.J. Onori</a>,<br>
<a href="http://graphicriver.net/item/wirecons-vector-icons/4586710?ref=tmthymllr">Timothy Miller</a>,<br>
<a href="http://icons4android.com">Icons4Android</a>,<br>
<a href="http://icons8.com/android-icons">Icons8.com</a></p>
<h1>修改的 bug</h1>
<ol>
<li>修改了某些情况下点击不响应的问题</li>
</ol>
]]></content>
      <categories>
        <category>categories</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>模板</title>
    <url>/2021/10/31/bug_report/</url>
    <content><![CDATA[<hr>
<p>name: Bug report<br>
about: Create a report to help us improve<br>
title: ‘’<br>
labels: ‘’<br>
assignees: ‘’</p>
<hr>
<!-- Do not delete the template (不要刪除模板) -->
<!--
IMPORTANT: Please follow the template to create a new issue.
重要：請依照該模板來提交。

If you upgrade from the old version, and an error occurs when running, please copy the new content in the config to the butterfly.yml
如果你是由舊版本升級到新版，執行時出現報錯，請首先把config裡新的內容複製到舊的butterfly設定去(如有)

If you are a problem when visiting the website, please open your browser 'developer tools (shortcut F12)' and check the console if there is an error, include your website address in the feedback
如果你是線上訪問出現問題，請檢查瀏覽器‘開發人員工具（快捷鍵F12）’的console是否有報錯，反饋時附上你的網站
-->
<h2 id="I-want-to-create-a-Bug-report-我想要建立一個-Bug-report">I want to create a Bug report <!-- 我想要建立一個 Bug report --></h2>
<!-- Check all with "x" especially FAQ & Documentation!! (使用 "x" 選擇) -->
<!-- 請確認是否都已經翻閲過如下的資料, 尤其是安裝文件！！ -->
<ul>
<li>[] Yes, I have read <a href="https://hexo.io/docs/">Hexo Docs page</a>, especially <a href="https://hexo.io/docs/templates.html">Templates</a>, <a href="https://hexo.io/docs/variables.html">Variables</a>, <a href="https://hexo.io/docs/helpers.html">Helpers</a> and <a href="https://hexo.io/docs/troubleshooting.html">Troubleshooting</a>.</li>
<li>[] Yes, I have read <a href="https://butterfly.js.org/posts/21cfbf15/">Butterfly Documentation</a>.</li>
<li>[] And yes, I already searched for current <a href="https://github.com/jerryc127/hexo-theme-butterfly/issues?utf8=%E2%9C%93&amp;q=is%3Aissue">issues</a> and this did not help me.</li>
</ul>
<h2 id="Butterfly-Information">Butterfly Information</h2>
<!-- Butterfly的版本 -->
<!-- 檢視主題的package.json -->
<p><strong>Butterfly Version:</strong></p>
<!-- Windows/macOS/Linux/Android/iOS -->
<p><strong>Platform:</strong></p>
<!-- Chrome/Safari/FireFox/.. -->
<p><strong>Browser:</strong></p>
<h2 id="Expected-behavior-預期行為">Expected behavior <!-- (預期行為) --></h2>
<h2 id="Actual-behavior-實際行為">Actual behavior <!-- (實際行為) --></h2>
<h2 id="Steps-to-reproduce-the-behavior-重現步驟">Steps to reproduce the behavior <!-- (重現步驟) --></h2>
<ol>
<li>Go to ‘…’</li>
<li>Click on ‘…’</li>
<li>Scroll down to ‘…’</li>
<li>See error</li>
</ol>
<!-- If applicable, add screenshots to help explain your problem -->
<!-- 請儘量提供截圖來定位問題 -->
<h2 id="Screenshots-截圖">Screenshots <!-- (截圖) --></h2>
<!-- Provide your website to find the issues -->
<h2 id="Website">Website</h2>
<h2 id="Describe-the-bug">Describe the bug</h2>
]]></content>
  </entry>
  <entry>
    <title>多线程</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81-%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    <content><![CDATA[<h1>多线程</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua+&#x27;</span>)</span><br><span class="line">activity.setTheme(android.R.style.Theme_Holo_Light)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(a,b)</span></span></span><br><span class="line"><span class="built_in">print</span>(a,b)</span><br><span class="line">call(<span class="string">&quot;run&quot;</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">(c,d)</span></span></span><br><span class="line">  <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">print</span>(c,d)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">thread(run,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>免备案国外最佳广告联盟推荐</title>
    <url>/9999/09/09/%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<h1>以下排名不分先后</h1>
<hr>
<h3 id="免备案国外最佳广告联盟推荐">免备案国外最佳广告联盟推荐</h3>
<h1>1.谷歌的AdSense</h1>
<p>Google Adsense是世界上最好最大的广告网络。Adsense因其较高的每千次展示费用而受到欢迎。但是，其帐户审批相当困难。Adsense提供各种广告格式，包括移动广告，展示广告，移动广告和搜索结果广告。其最低支付限额是100美元。好东西是没有最低流量要求成为出版商。</p>
<p>最好的功能</p>
<p>非常高的支付率<br>
非常容易使用<br>
发布商可以自定义广告显示并运行图片，文字，颜色<br>
发布商可以在一个帐户的多个网站上使用AdSense广告</p>
<p><a href="https://Adsense.com">体验广告效果链接</a></p>
<p><a href="https://Adsense.com">谷歌的AdSense官网</a></p>
<h1>2.PropellerAds</h1>
<p>PropellerAds是2018-2019年度最好的cpm广告网络之一，也是支付率最高的cpm广告网络之一。如果您正在寻找移动广告，弹出窗口，对话框和插页式广告，那么PorpellerAds是您最适合的CPM网络。出版商将获得10美元的有效每千次展示费用，这个每千次展示费率取决于访问国家，如果您的网站拥有高流量来自英国，美国，那么您可以预期这个广告网络很多钱。它提供了许多广告格式供用户赚取，这些广告格式是横幅广告，原生直接广告，流行下广告，非页内广告，上推广告，对话广告。螺旋桨广告支付净30基础。最低支付限额为100美元，发布可以通过电汇和PayPal提款。</p>
<p>获得批准的要求：</p>
<p>没有最低流量要求<br>
网站必须是基于内容的，而不是简单的链接或广告列表<br>
网站不得在“正在建设中”<br>
网站不得包含与成人相关的内容<br>
最好的功能</p>
<p>PropellerAds在Net 30上支付<br>
其最低支付限额是$ 100<br>
实时统计报告系统<br>
付款方式是电汇和PayPal<br>
PropellerAds提供多种广告格式<br>
支持国内IP,Propellerads本身有banner和弹窗广告 , 但是banner广告收入极低 , 所以不建议去做 反而弹窗收入高（垃圾站点使用高）</p>
<p><a href="PropellerAds.html">体验广告效果链接</a></p>
<p><a href="https://publishers.propellerads.com">PropellerAds官网</a></p>
<h1>3.Traffic Shop</h1>
<p>Traffic Shop广告网络为广告商和发布商提供了很多价值。</p>
<p>工作不同而且简单。</p>
<p>Traffic Shop受到全球数千家客户的信赖。</p>
<p>出版商和广告商可以在这里赚大钱。因此，有机会通过Traffic Shop进行广告宣传和货币化。</p>
<p>它提供广泛的广告格式，包含数百万次广告展示。</p>
<p>广告格式包括：</p>
<p>横幅： 它提供IAB认证的所有流行横幅尺寸<br>
背后弹出式窗口： 强大的跨浏览器PopUnder脚本<br>
脱脂： 这是在目标受众面前展示广告的另一种好方法<br>
移动： 移动广告有很多选项，例如文字和富媒体横幅，重定向和背后弹出式广告</p>
<p>广告客户可以享受全球覆盖以及跨平台广告带来的好处，从而吸引适当的受众群体。</p>
<p>他们可以期待GEO，语言，设备，操作系统，浏览器等的灵活和高级定位。广告客户可以获得实时转化跟踪的优势，以跟踪效果，收入和支出。</p>
<p>他们可以选择各种定价模式：CPM，CPC。广告客户可以安排广告系列并最大化投资回报率和转化次数。此外，还有实时详细的报告和统计数据。</p>
<p>借助流量商店，发布商可以获得最佳的流量费率，并最大限度地提高网络收入和移动广告资源。他们可以访问所有流行的广告格式，以便对其流量进行货币化。通过Traffic Shop，您可以访问可自定义的高级实时报告和报告模板。</p>
<p>交通商店以快速支付而闻名。他们提供各种支付方式，如PayPal，WebMoney，银行电汇，Paxum，ePayments和比特币。最低支付门槛仅为50美元。这是一个值得信赖的网络。所有广告系列都通过安全系统确保广告活动的安全性。</p>
<p><a href="TrafficShop.html">体验广告效果链接</a></p>
<p><a href="https://www.trafficshop.com">官网</a></p>
<h1>4.Adsterra</h1>
<p>Adsterra Network作为一家可靠的数字广告公司脱颖而出，为全球广告商和媒体合作伙伴提供基于性能的解决方案。</p>
<p>它有一些令人印象深刻的统计数据支持其作为领先的数字广告公司的主张。 Adsterra每月提供超过10 BN的展示次数。它涵盖了近200个GEO。它提供了大约20,000个成功的活动。</p>
<p>此外，Adsterra已发展成为发展最快的成人广告网络之一。它为桌面和移动设备提供广告解决方案，包括：</p>
<p>显示横幅</p>
<p>Popunders</p>
<p>直接链接</p>
<p>前贴片视频</p>
<p>推送通知</p>
<p>插页广告</p>
<p>通过Adsterra，广告客户可以轻松且经济高效地启动，管理和分析其广告活动。他们可以选择各种付款模式，例如CPM，CPA，CPL，CPO和CPI。</p>
<p>因此，广告客户有机会获得更多展示次数，潜在客户，转化次数和销售额。 Adsterra提供先进的优化技术，广告客户可以使用该技术为每个广告素材和展示位置获得最有效的结果。</p>
<p>通过Adsterra，出版商可以获得许多优势。</p>
<p>成为Adsterra Publisher Network的一员，并利用其智能和先进技术轻松获利。获得100％的填充率和有竞争力的CPM。 Adsterra通过其内部和第三方欺诈检测系统提供最大的安全性。</p>
<p>发布商可以依靠其准时付款政策（NET 15）。此外，Adsterra还提供大量提款选项，包括PayPal，Wire Transfer，Web Money，Paxum，Paxum和比特币。最低支付门槛是100美元。</p>
<p>您甚至可以将您的朋友推荐给Adsterra Network，并有机会通过推荐计划赚取额外收入。您可以获得由您在一生中推荐给Adsterra的发布商产生的收入的5％。</p>
<p><a href="Adsterra.html">体验广告效果链接</a></p>
<p><a href="https://publishers.adsterra.com/referral/bgEmFDxthL">官网</a></p>
<h1>5.Popcash</h1>
<p>Popcash是中小型发布商的顶级cpm广告网络之一。它也是一个专业和流行的流行广告网络。它使用CPC和CPM付款模式向用户付款，并为用户提供高支付率。因为它有很多广告客户遍布世界各地的广告客户。我已经在我的2个网站上使用过PopCash，我满意他们的CPM费率。我也收到了很多他们的付款。PopCash.net的另一个好处是，它计数来自同一个访问者的多个印象。一些CPM广告网络，他们不计算所有的印象。另外popcash.net是最好的低流量网站cpm广告网络或最好的cpm广告网络印度出版商加入。</p>
<p>PopCash的要求/限制：</p>
<p>网站不得包含暴力内容和恶意软件<br>
不得将假流量发送给PopCash<br>
用户不得修改他们的广告代码<br>
不能用PopCash创建多个账户<br>
最好的功能</p>
<p>低的最低支付限额是10美元<br>
每日支付<br>
10％的推荐佣金<br>
PayPal，Payza，Paxum，Wire，WebMoney和Skrill等多种付款方式<br>
先进的统计报告系统<br>
良好的客户支持<br>
联盟注册简单, 收益快</p>
<p><a href="Popcash.html">体验广告效果链接</a></p>
<p><a href="https://popcash.net/home/334724">官网</a></p>
<h1>6.RevenueHits</h1>
<p>RevenueHits是面向中小型发布商的最佳广告网络，它是一个基于以色列的基于cpm的popunder广告网络。它始于2008年，每天的投放量超过30亿次。RevenueHits为其所有发布商提供高Ecpm率，目前它提供最高50美元的有效每千次展示费用，最低为0.50美元，这些费率取决于访问国家。</p>
<p>最好的功能</p>
<p>没有最低限度的流量请求<br>
最低支付限额只有20美元<br>
24/4客户支持<br>
支持所有语言<br>
个人客户经理<br>
多种广告格式</p>
<p><a href="RevenueHits.html">体验广告效果链接</a></p>
<p><a href="https://www.revenuehits.com/lps/pubref/?ref=@RH@gDamDZhostA_tk2NfGAf7nnSiUDV5iGD">官网</a></p>
<h1>7.Yllix</h1>
<p>Yllix媒体是作为Google Adsense之类的发布商或广告客户的另一种广告选择。您可以将广告媒体网站用于各种标准广告设置，例如横幅广告，弹出式广告，图层广告，重定向广告，Prepop广告，全页广告，尺寸大小分别为300×250,728×90,468×60,120×600,160×600。发布商和广告商的好消息是YllixMedia（Yllix Inc.）或Yllix Media网站允许任何类型的网站，博客，论坛或任何其他网站。小博客不能使用AdSense或其他高收入的大型广告网络。因为获得AdSense认证非常困难。所以他们想要使用一些小广告网络。但与adsense这样的大型广告网络相比，小型广告网络不会付出高昂的代价。Yllix媒体也是一个小型广告网络。许多出版商要求我撰写yllix媒体评论。Yllix是一个新颖的广告网络，适合小型发布商。</p>
<p><a href="Yllix.html">体验广告效果链接</a></p>
<p><a href="https://pub.yllix.com">官网</a></p>
<h1>8.PlugRush</h1>
<p>PlugRush于2007年底开始运作，现已成为领先的广告网络。</p>
<p>它允许网站管理员轻松快速地交易流量，买入或卖出点击流量，移动流量以及PopUnder流量。 PlugRush非常透明，可为广告客户和发布商带来出色的效果。</p>
<p>PlugRush提供了几个高影响力的广告单元，非常适合作为AdSense替代方案。此外，广告格式是广告和从广告系列中获得更多收入的最佳选择。</p>
<p>使用PlugRush的广告格式和广告尺寸：</p>
<p>中矩形横幅： 它在嵌入时表现最佳 在文本内容中 或在文章的最后。他们成功地在移动设备上产生了高点击率。</p>
<p>排行榜横幅： 此网页横幅格式放置在页面顶部（主要内容之前）时效果很好。</p>
<p>垂直原生广告： 这些外观和感觉就像自然内容。它成功地为内容营销人员建立信任和最佳。</p>
<p>摩天大楼横幅： 它是标准的展示横幅网页格式。它通常用于侧面，内容之间以及页面边缘。</p>
<p>横向原生广告： 它是原生广告，适用于移动设备和桌面设备。</p>
<p>半页横幅： 它具有视觉冲击力的广告尺寸，也是展示次数最快的广告单元之一。</p>
<p>桌面流行音乐： OnClick Pops可用于覆盖数千名参与客户。你得到每个访客的报酬。</p>
<p>PlugRush是一个广告平台，可让您在几分钟内创建和运行您的广告系列。它既适合初学者也适合专家。</p>
<p>使用PlugRush，广告客户有机会获得大量流量。访问这个全球网络并覆盖数百万潜在客户。 PlugRush提供实时统计信息。其反欺诈技术可以保护您免受在线欺诈，虚假点击和机器人攻击。</p>
<p>您可以直接控制流量的来源。此外，您可以获得快速广告批准，并且广告客户可以使用多种付款方式，例如PayPal，Paxum，电汇或信用卡。</p>
<p>借助PlugRush，发布商有机会增加其网站的利润。已有超过30,000个网站使用它。您需要注册PlugRush。将代码放在您的网站上并开始赚钱。</p>
<p>PlugRush提供99％的填充率。它们提供实时统计数据。它为您提供优惠价格。安全是PlugRush的首要任务。他们手动监控广告资源，并自动全天候监控。广告代码支持https协议以保护您的安全。</p>
<p>此外，您可以得到及时付款（根据要求）。他们通过PayPal，Paxum，Wire Transfer和Firstchoice Pay付款。最低支付门槛为25美元。在您提交提款请求后24小时内支付收入。</p>
<p><a href="PlugRush.html">体验广告效果链接</a></p>
<p><a href="https://www.plugrush.com/?ref=249793">官网</a></p>
<h1>9.Slimspots</h1>
<p>Slimspots是最受欢迎，最具创新性和成功的成人广告网络之一。它是一个基于CPA的广告网络，成立于2013年6月。它使广告商能够在参与的网站上放置他们的广告材料。 Slimspots为广告商，发布商和媒体买家提供了大量商品。广告客户可以通过使用基于效果的营销来最大化其投资回报率。</p>
<p>它将它们与行业顶级发布商联系起来。另一方面，出版商可以期待最好的有效每千次展示费用，有利可图的优惠，有竞争力的付款以及每周付款。借助Slimspots成人广告网络，您可以获得最佳的在线营销需求。您将受益于全球所有国家/地区的广泛流量。 Slimspots成人广告网络为您提供与各种垂直行业的新客户建立联系的机会。</p>
<p><a href="Slimspots.html">体验广告效果链接</a></p>
<p><a href="https://slimspots.com/register/24662">官网</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* </span><br><span class="line">##### </span><br></pre></td></tr></table></figure>
<div class="aplayer" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-mutex="true" data-preload="auto" data-theme="#3F51B5"></div>
<script type='text/javascript' src='//pl16715598.trustedgatetocontent.com/3c/39/83/3c398343a60d114d14448277b4de73c1.js'></script>
<script type="text/javascript">
	atOptions = {
		'key' : '90c05383e48990fb7a509956acaed29d',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
	document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectiveperformanceformat.com/90c05383e48990fb7a509956acaed29d/invoke.js"></scr' + 'ipt>');
</script>
<script async="async" data-cfasync="false" src="//pl16714935.trustedgatetocontent.com/e7e4b6b8ff15c8b03eee679449da5cdd/invoke.js"></script>
<div id="container-e7e4b6b8ff15c8b03eee679449da5cdd"></div>
<!-- 音乐播放器 --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"> <div class="aplayer" data-id="5135167213" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true" data-volume="0.6" ></div><script>var meting_api='http://api.mizore.cn/meting/api.php?server=:server&type=:type&id=:id'</script><script src="http://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="http://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><!-- 音乐播放器 -->
<p><audio id="bgmMusic" src="demo.mp3" autoplay="autoplay" loop="loop" preload="auto" type="audio/mp3"></audio></p>
<div id="he-plugin-standard"></div>
<script>
WIDGET = {
  "CONFIG": {
    "layout": "1",
    "width": "450",
    "height": "150",
    "background": "1",
    "dataColor": "FFFFFF",
    "borderRadius": "30",
    "key": "a8141a71c0f948b89433a51dd8374fe8"
  }
}
</script>
<script src="https://widget.qweather.net/standard/static/js/he-standard-common.js?v=2.0"></script>]]></content>
      <categories>
        <category>categories</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>(测试html)</title>
    <url>/2021/12/18/%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<iframe
name="web"
width="100%" 
frameborder=0height="100%" 
src="https://support.qq.com/product/368778" 
id="web"
onload="this.height=web.document.body.scrollHeight+800">
</iframe>
<script
language="javascript">if(window.parent.length>0){window.parent.document.all.newtest.style.height=document.body.scrollHeight;}
</script>]]></content>
      <categories>
        <category>html</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>闲聊杂谈(测试)</title>
    <url>/2021/12/08/%E9%97%B2%E8%81%8A%E6%9D%82%E8%B0%88/</url>
    <content><![CDATA[<style type="text/css">body {zoom:1.5;}</style>
<iframe src="https://support.qq.com/product/368778"  border="0" frameborder="no" framespacing="0" allowfullscreen="true" height="1000" width="100%"> </iframe>
<!-- 音乐播放器 --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"> <div class="aplayer" data-id="5135167213" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true" data-volume="0.6" ></div><script>var meting_api='http://api.mizore.cn/meting/api.php?server=:server&type=:type&id=:id'</script><script src="http://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="http://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><!-- 音乐播放器 -->
<p><audio id="bgmMusic" src="demo.mp3" autoplay="autoplay" loop="loop" preload="auto" type="audio/mp3"></audio></p>
]]></content>
      <categories>
        <category>闲聊杂谈</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>10，使用线程</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/10%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%BA%BF%E7%A8%8B-2021-11-07%2020:53:35/</url>
    <content><![CDATA[<h1>10，使用线程</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">需导入import模块，参看thread,timer与task函数说明。</span><br><span class="line">线程中使用独立环境运行，不能使用外部变量与函数，需要使用参数和回调与外部交互。</span><br><span class="line"></span><br><span class="line">异步任务</span><br><span class="line">task(func,args,callback)</span><br><span class="line">func 为任务执行代码或函数，args 为参数，callback 为回调函数，任务返回值将传递到回调函数</span><br><span class="line">task只能同时运行cpu核心x2个线程，更多任务按照顺序等待执行</span><br><span class="line">有一个特殊形式，第一个参数为数值时，将延时该数值毫秒后执行回调函数</span><br><span class="line"></span><br><span class="line">线程</span><br><span class="line">t=thread(f,args)</span><br><span class="line">f 为线程中执行的代码或函数或文件路径，args 为初始传入参数</span><br><span class="line">调用线程中方法</span><br><span class="line">call(t,fn,args)</span><br><span class="line">t 为线程，fn 为函数名称，args 为参数</span><br><span class="line">设置线程变量</span><br><span class="line">set(t,fn,<span class="built_in">arg</span>)</span><br><span class="line">t 为线程，fn 为变量名称，<span class="built_in">arg</span> 为变量值</span><br><span class="line">线程调用主线程中方法</span><br><span class="line">call(fn,args)</span><br><span class="line">fn 为函数名称，args 为参数</span><br><span class="line">线程设置主线程变量</span><br><span class="line">set(fn,<span class="built_in">arg</span>)</span><br><span class="line">fn 为变量名称，<span class="built_in">arg</span> 为变量值</span><br><span class="line"></span><br><span class="line">注意：参数类型为 字符串，数值，Java对象，布尔值与<span class="literal">nil</span></span><br><span class="line">线程要使用quit结束线程。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">定时器</span><br><span class="line"></span><br><span class="line">t=timer(func,delay,period,args)</span><br><span class="line"></span><br><span class="line">func 为定时器执行的函数，delay 为定时器延时，period 为定时器间隔，args 为初始化参数</span><br><span class="line">t.enabled=<span class="literal">false</span> 暂停定时器</span><br><span class="line">t.enabled=<span class="literal">true</span> 启动定时器</span><br><span class="line">t.stop() 停止定时器</span><br><span class="line"></span><br><span class="line">注意：定时器函数定义run函数时定时器重复执行run函数，否则重复执行构建时的func函数</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>0，AndroLuaX+内置中文函数库</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/0%EF%BC%8CAndroLuaX+%E5%86%85%E7%BD%AE%E4%B8%AD%E6%96%87%E5%87%BD%E6%95%B0%E5%BA%93-2021-11-07%2020:50:09/</url>
    <content><![CDATA[<h1>0，AndroLuaX+内置中文函数库</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">使用中文函数库需要导入函数包</span><br><span class="line">import <span class="string">&quot;LuaGo&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">-- Author: LuaGoX+PRO wyiqopu123😂😂😂</span></span><br><span class="line"><span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--[[**</span></span><br><span class="line"><span class="comment"> * @Require: LuaGo.lua</span></span><br><span class="line"><span class="comment"> * @Date: 2021-05-1 13:04:24</span></span><br><span class="line"><span class="comment"> * @Description: 中文函数模块</span></span><br><span class="line"><span class="comment"> * @introduce:LuaGo中文函数模块，降低使用门槛，方便跟俺一样的小白使用。</span></span><br><span class="line"><span class="comment">**]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.*&quot;</span></span><br><span class="line">import<span class="string">&quot;android.webkit.*&quot;</span></span><br><span class="line">import<span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import<span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuffColorFilter&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuff&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.ActionBarTabListener&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.AlertDialog&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.SearchManager&quot;</span></span><br><span class="line">import <span class="string">&quot;android.animation.ObjectAnimator&quot;</span></span><br><span class="line">import <span class="string">&quot;android.animation.ArgbEvaluator&quot;</span></span><br><span class="line">import <span class="string">&quot;android.animation.ValueAnimator&quot;</span></span><br><span class="line">import <span class="string">&quot;android.animation.AnimatorAnimatorListener&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.DialogInterface&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.pm.ApplicationInfo&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.res.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.SharedPreferences&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.BitmapDrawable&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.ColorDrawable&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuff&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuffColorFilter&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Typeface&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Matrix&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuffXfermode&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.RectF&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuffMode&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Rect&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Canvas&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.BitmapFactory&quot;</span></span><br><span class="line">import <span class="string">&quot;android.media.MediaPlayer&quot;</span></span><br><span class="line">import <span class="string">&quot;android.media.MediaMetadataRetriever&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.TrafficStats&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.Build&quot;</span></span><br><span class="line">import <span class="string">&quot;android.opengl.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.provider.MediaStore&quot;</span></span><br><span class="line">import <span class="string">&quot;android.provider.Settings&quot;</span></span><br><span class="line">import <span class="string">&quot;android.provider.SettingsSecure&quot;</span></span><br><span class="line">import <span class="string">&quot;android.telephony.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.Html&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.format.Formatter&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.SpannableString&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.style.ForegroundColorSpan&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.Spannable&quot;</span></span><br><span class="line">import <span class="string">&quot;android.util.TypedValue&quot;</span></span><br><span class="line">import <span class="string">&quot;android.util.Config&quot;</span></span><br><span class="line">import <span class="string">&quot;android.util.DisplayMetrics&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.animation.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.animation.AnimationAnimationListener&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.animation.AnimationUtils&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.animation.LayoutAnimationController&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.inputmethod.InputMethodManager&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.ViewOnFocusChangeListener&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.animation.AccelerateInterpolator&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.inputmethod.EditorInfo&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.ArrayAdapter&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.LinearLayout&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.EditText&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.ListView&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.PullingLayout&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.TextView&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.TimePickerOnTimeChangedListener&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.PageViewPageTransformer&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.DrawerLayoutDrawerListener&quot;</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">import <span class="string">&quot;java.io.FileOutputStream&quot;</span></span><br><span class="line">import <span class="string">&quot;java.io.FileInputStream&quot;</span></span><br><span class="line">import <span class="string">&quot;java.io.BufferedInputStream&quot;</span></span><br><span class="line">import <span class="string">&quot;java.net.URLDecoder&quot;</span></span><br><span class="line">import <span class="string">&quot;java.lang.String&quot;</span></span><br><span class="line">import <span class="string">&quot;java.util.zip.ZipFile&quot;</span></span><br><span class="line">import <span class="string">&quot;java.util.regex.Pattern&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.ColorDrawable&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建一个类</span></span><br><span class="line"><span class="keyword">local</span> 中文函数库 = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 重启应用<span class="params">()</span></span></span><br><span class="line">  <span class="comment">-- By: 一缕清风自在飞</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  <span class="keyword">local</span> intent=activity.getPackageManager().getLaunchIntentForPackage(activity.getPackageName());</span><br><span class="line">  intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 搜索<span class="params">(关键词)</span></span></span><br><span class="line">  <span class="comment">-- By: 寒歌 (QQ: 2113075983)</span></span><br><span class="line">  <span class="keyword">if</span> 关键词 <span class="keyword">then</span></span><br><span class="line">    import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">    import <span class="string">&quot;android.app.SearchManager&quot;</span></span><br><span class="line">    <span class="keyword">local</span> intent = Intent()</span><br><span class="line">    intent.setAction(Intent.ACTION_WEB_SEARCH)</span><br><span class="line">    intent.putExtra(SearchManager.QUERY,关键词)</span><br><span class="line">    activity.startActivity(intent)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&quot;传入参数异常&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 图片着色<span class="params">(位图,颜色)</span></span></span><br><span class="line">  <span class="comment">-- By: 寒歌 (QQ: 2113075983)</span></span><br><span class="line">  <span class="keyword">local</span> bitmap=位图</span><br><span class="line">  <span class="keyword">local</span> color=颜色</span><br><span class="line">  <span class="keyword">local</span> aa=BitmapDrawable(bitmap)</span><br><span class="line">  aa.setColorFilter(PorterDuffColorFilter(color,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line">  <span class="keyword">return</span> aa</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 保存位图<span class="params">(位图,路径)</span></span></span><br><span class="line">  <span class="comment">-- By: 寒歌 (QQ: 2113075983)</span></span><br><span class="line">  <span class="keyword">local</span> bm=位图</span><br><span class="line">  <span class="keyword">local</span> name=路径</span><br><span class="line">  <span class="keyword">if</span> bm <span class="keyword">then</span></span><br><span class="line">    import <span class="string">&quot;java.io.FileOutputStream&quot;</span></span><br><span class="line">    import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">    import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line">    name=<span class="built_in">tostring</span>(name)</span><br><span class="line">    f = File(name)</span><br><span class="line">    out = FileOutputStream(f)</span><br><span class="line">    bm.compress(Bitmap.CompressFormat.PNG,<span class="number">90</span>, out)</span><br><span class="line">    out.<span class="built_in">flush</span>()</span><br><span class="line">    out.<span class="built_in">close</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 缩放图片<span class="params">(位图,缩放级别)</span></span></span><br><span class="line">  <span class="comment">-- By: 佚名</span></span><br><span class="line">  <span class="keyword">local</span> bm=位图</span><br><span class="line">  <span class="keyword">local</span> degrees=缩放级别</span><br><span class="line">  import <span class="string">&quot;android.graphics.Matrix&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line">  width = bm.getWidth()</span><br><span class="line">  height = bm.getHeight()</span><br><span class="line">  matrix = Matrix()</span><br><span class="line">  matrix.postRotate(degrees)</span><br><span class="line">  bmResult = Bitmap.createBitmap(bm, <span class="number">0</span>, <span class="number">0</span>, width, height, matrix, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">return</span> bmResult</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 匹配汉字<span class="params">(文本)</span></span></span><br><span class="line">  <span class="comment">-- By: 佚名</span></span><br><span class="line">  <span class="keyword">local</span> s=文本</span><br><span class="line">  <span class="keyword">local</span> ss = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> k = <span class="number">1</span>, #s <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> c = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> c <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> (c&gt;=<span class="number">48</span> <span class="keyword">and</span> c&lt;=<span class="number">57</span>) <span class="keyword">or</span> (c&gt;= <span class="number">65</span> <span class="keyword">and</span> c&lt;=<span class="number">90</span>) <span class="keyword">or</span> (c&gt;=<span class="number">97</span> <span class="keyword">and</span> c&lt;=<span class="number">122</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">string</span>.<span class="built_in">char</span>(c):<span class="built_in">find</span>(<span class="string">&quot;%w&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(ss, <span class="built_in">string</span>.<span class="built_in">char</span>(c))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">     <span class="keyword">elseif</span> c&gt;=<span class="number">228</span> <span class="keyword">and</span> c&lt;=<span class="number">233</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> c1 = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k+<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">local</span> c2 = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k+<span class="number">2</span>)</span><br><span class="line">      <span class="keyword">if</span> c1 <span class="keyword">and</span> c2 <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> a1,a2,a3,a4 = <span class="number">128</span>,<span class="number">191</span>,<span class="number">128</span>,<span class="number">191</span></span><br><span class="line">        <span class="keyword">if</span> c == <span class="number">228</span> <span class="keyword">then</span> a1 = <span class="number">184</span></span><br><span class="line">         <span class="keyword">elseif</span> c == <span class="number">233</span> <span class="keyword">then</span> a2,a4 = <span class="number">190</span>,c1 ~= <span class="number">190</span> <span class="keyword">and</span> <span class="number">191</span> <span class="keyword">or</span> <span class="number">165</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> c1&gt;=a1 <span class="keyword">and</span> c1&lt;=a2 <span class="keyword">and</span> c2&gt;=a3 <span class="keyword">and</span> c2&lt;=a4 <span class="keyword">then</span></span><br><span class="line">          k = k + <span class="number">2</span></span><br><span class="line">          <span class="built_in">table</span>.<span class="built_in">insert</span>(ss, <span class="built_in">string</span>.<span class="built_in">char</span>(c,c1,c2))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(ss)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 振动<span class="params">(模式)</span></span></span><br><span class="line">  <span class="comment">-- By: 烧风 (QQ: 2063597709)</span></span><br><span class="line">  <span class="comment">-- 注: 需要申请控制振动器权限</span></span><br><span class="line">  <span class="comment">-- 振动模式格式: &#123;等待时间,振动时间,等待时间,振动时间,•••,•••,•••,•••••&#125;</span></span><br><span class="line">  <span class="comment">-- 例如: &#123;500,100,500,100,500&#125;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> 模式 <span class="keyword">then</span></span><br><span class="line">    模式=&#123;<span class="number">500</span>&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  vibrator = activity.getSystemService(Context.VIBRATOR_SERVICE)</span><br><span class="line">  vibrator.vibrate( long(模式) ,<span class="number">-1</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用方法 </span></span><br><span class="line"><span class="comment">--振动(&#123;500,100,500,100,500&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取签名<span class="params">(包名)</span></span></span><br><span class="line">  <span class="comment">-- By: QQ32552732</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">tostring</span>(this.getPackageManager().getPackageInfo(this.getPackageName(),((<span class="number">32552732</span>/<span class="number">2</span>/<span class="number">2</span><span class="number">-8183</span>)/<span class="number">10000</span><span class="number">-6</span><span class="number">-231</span>)/<span class="number">9</span>).signatures[(<span class="number">32552732</span>+<span class="number">0</span>+<span class="number">32552732</span>-(<span class="number">32552732</span>*<span class="number">2</span>))].toCharsString())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 提示6<span class="params">(文本内容)</span></span></span><br><span class="line">  <span class="keyword">if</span> 文本内容~=<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    xxxx=&#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        &#123;</span><br><span class="line">          CardView;</span><br><span class="line">          radius=<span class="string">&#x27;5dp&#x27;</span>;</span><br><span class="line">          elevation=<span class="string">&#x27;5dp&#x27;</span>;</span><br><span class="line">          layout_height=<span class="string">&#x27;wrap_content&#x27;</span>;</span><br><span class="line">          layout_margin=<span class="string">&#x27;18dp&#x27;</span>;</span><br><span class="line">          layout_width=activity.getWidth()/<span class="number">1.1</span>;</span><br><span class="line">          CardBackgroundColor=<span class="string">&quot;#FF202124&quot;</span>,</span><br><span class="line">          &#123;</span><br><span class="line">            TextView;</span><br><span class="line">            textColor=<span class="string">&#x27;#ffffff&#x27;</span>;</span><br><span class="line">            layout_marginTop=<span class="string">&#x27;15dp&#x27;</span>;</span><br><span class="line">            layout_marginBottom=<span class="string">&#x27;15dp&#x27;</span>;</span><br><span class="line">            layout_margin=<span class="string">&#x27;15dp&#x27;</span>;</span><br><span class="line">            text=文本内容;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    布局=loadlayout(xxxx)</span><br><span class="line">    <span class="keyword">local</span> toast=Toast.makeText(activity,<span class="string">&quot;提示&quot;</span>,Toast.LENGTH_SHORT).setGravity(Gravity.BOTTOM, <span class="number">0</span>, <span class="number">0</span>).setView(布局).show()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 弹窗圆角<span class="params">(控件,背景色,上角度,下角度)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> 上角度 <span class="keyword">then</span></span><br><span class="line">    上角度=<span class="number">25</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> 下角度 <span class="keyword">then</span></span><br><span class="line">    下角度=上角度</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  控件.setBackgroundDrawable(GradientDrawable()</span><br><span class="line">  .setShape(GradientDrawable.RECTANGLE)</span><br><span class="line">  .setColor(背景色)</span><br><span class="line">  .setCornerRadii(&#123;上角度,上角度,上角度,上角度,下角度,下角度,下角度,下角度&#125;))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MD</span>提示<span class="params">(str,a,b,c,d)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">time</span> <span class="keyword">then</span> toasttime=Toast.LENGTH_SHORT <span class="keyword">else</span> toasttime= Toast.LENGTH_SHORT <span class="keyword">end</span></span><br><span class="line">  toasts=&#123;</span><br><span class="line">    CardView;</span><br><span class="line">    id=<span class="string">&quot;toastb&quot;</span>,</span><br><span class="line">    CardElevation=c;</span><br><span class="line">    radius=d;</span><br><span class="line">    background=a;</span><br><span class="line">    &#123;</span><br><span class="line">      TextView;</span><br><span class="line">      layout_margin=<span class="string">&quot;7dp&quot;</span>;</span><br><span class="line">      textSize=<span class="string">&quot;13sp&quot;</span>;</span><br><span class="line">      TextColor=b,</span><br><span class="line">      layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">      text=<span class="string">&quot;Hello Ori&quot;</span>;</span><br><span class="line">      id=<span class="string">&quot;mess&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  message=<span class="built_in">tostring</span>(str)</span><br><span class="line">  <span class="keyword">local</span> toast=Toast.makeText(activity,<span class="string">&quot;内容&quot;</span>,toasttime);</span><br><span class="line">  toast.setView(loadlayout(toasts))</span><br><span class="line">  mess.Text=message</span><br><span class="line">  toast.show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 窗口标题<span class="params">(a)</span></span></span><br><span class="line">  activity.setTitle(a)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 载入页面<span class="params">(a)</span></span></span><br><span class="line">  activity.setContentView(loadlayout(a))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 窗口全屏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 取消全屏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 返回桌面<span class="params">()</span></span></span><br><span class="line">  activity.moveTaskToBack(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 提示<span class="params">(a)</span></span></span><br><span class="line">  Toast.makeText(activity,a,Toast.LENGTH_SHORT).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 截取<span class="params">(str,str1,str2)</span></span></span><br><span class="line">  str1=str1:<span class="built_in">gsub</span>(<span class="string">&quot;%p&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(s)</span></span> <span class="keyword">return</span>(<span class="string">&quot;%&quot;</span>..s) <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">return</span>(str:<span class="built_in">match</span>(str1 .. <span class="string">&quot;(.-)&quot;</span>..str2))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 替换<span class="params">(str,str1,str2)</span></span></span><br><span class="line">  str1=str1:<span class="built_in">gsub</span>(<span class="string">&quot;%p&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(s)</span></span> <span class="keyword">return</span>(<span class="string">&quot;%&quot;</span>..s) <span class="keyword">end</span>)</span><br><span class="line">  str2=str2:<span class="built_in">gsub</span>(<span class="string">&quot;%%&quot;</span>,<span class="string">&quot;%%%%&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span>(str:<span class="built_in">gsub</span>(str1,str2))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 字符串长度<span class="params">(str)</span></span></span><br><span class="line">  <span class="keyword">return</span>(utf8.<span class="built_in">len</span>(str))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sgg</span><span class="params">(s,i,j)</span></span></span><br><span class="line">  i,j=<span class="built_in">tonumber</span>(i),<span class="built_in">tonumber</span>(j)</span><br><span class="line">  i=utf8.offset(s,i)</span><br><span class="line">  j=((j <span class="keyword">or</span> <span class="number">-1</span>)==<span class="number">-1</span> <span class="keyword">and</span> <span class="number">-1</span>) <span class="keyword">or</span> utf8.offset(s,j+<span class="number">1</span>)<span class="number">-1</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">sub</span>(s,i,j)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 状态栏颜色<span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">    activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(a);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置文本<span class="params">(a,b)</span></span></span><br><span class="line">  a.setText(b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭页面<span class="params">()</span></span></span><br><span class="line">  activity.finish()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取文本<span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">return</span> (a).Text()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 结束程序<span class="params">()</span></span></span><br><span class="line">  activity.finish()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 重构页面<span class="params">()</span></span></span><br><span class="line">  activity.recreate()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件圆角<span class="params">(view,InsideColor,radiu)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">  drawable = GradientDrawable()</span><br><span class="line">  drawable.setShape(GradientDrawable.RECTANGLE)</span><br><span class="line">  drawable.setColor(InsideColor)</span><br><span class="line">  drawable.setCornerRadii(&#123;radiu,radiu,radiu,radiu,radiu,radiu,radiu,radiu&#125;);</span><br><span class="line">  view.setBackgroundDrawable(drawable)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件背景渐变动画<span class="params">(a,b,c,d,e)</span></span></span><br><span class="line">  view=a</span><br><span class="line">  color1 = b</span><br><span class="line">  color2 = c</span><br><span class="line">  color3 = d</span><br><span class="line">  color4 = e</span><br><span class="line">  import <span class="string">&quot;android.animation.ObjectAnimator&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.animation.ArgbEvaluator&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.animation.ValueAnimator&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">  colorAnim = ObjectAnimator.ofInt(view,<span class="string">&quot;backgroundColor&quot;</span>,&#123;color1, color2, color3,color4&#125;)</span><br><span class="line">  colorAnim.setDuration(<span class="number">3000</span>)</span><br><span class="line">  colorAnim.setEvaluator(ArgbEvaluator())</span><br><span class="line">  colorAnim.setRepeatCount(ValueAnimator.INFINITE)</span><br><span class="line">  colorAnim.setRepeatMode(ValueAnimator.REVERSE)</span><br><span class="line">  colorAnim.start()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 安装判断<span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> activity.getPackageManager().getPackageInfo(a,<span class="number">0</span>) <span class="keyword">end</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置中划线<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">  a.getPaint().setFlags(Paint. STRIKE_THRU_TEXT_FLAG)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置下划线<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">  a.getPaint().setFlags(Paint. UNDERLINE_TEXT_FLAG )</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置字体加粗<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">  a.getPaint().setFakeBoldText(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置斜体<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">  a.getPaint().setTextSkewX(<span class="number">0.2</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 分享<span class="params">(a)</span></span></span><br><span class="line">  text=a</span><br><span class="line">  intent=Intent(Intent.ACTION_SEND);</span><br><span class="line">  intent.setType(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_SUBJECT, <span class="string">&quot;分享&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_TEXT, text);</span><br><span class="line">  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">  activity.startActivity(Intent.createChooser(intent,<span class="string">&quot;分享到:&quot;</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加群<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  url=<span class="string">&quot;mqqapi://card/show_pslcard?src_type=internal&amp;version=1&amp;uin=&quot;</span>..a..<span class="string">&quot;&amp;card_type=group&amp;source=qrcode&quot;</span></span><br><span class="line">  activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">QQ</span>聊天<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  url=<span class="string">&quot;mqqwpa://im/chat?chat_type=wpa&amp;uin=&quot;</span>..a</span><br><span class="line">  activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 发送短信<span class="params">(号码,名称,内容)</span></span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;smsto:&quot;</span>..号码)</span><br><span class="line">  intent = Intent(Intent.ACTION_SENDTO, uri)</span><br><span class="line">  intent.putExtra(名称,内容)</span><br><span class="line">  intent.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 开启<span class="title">WIFI</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  wifi = activity.Context.getSystemService(Context.WIFI_SERVICE)</span><br><span class="line">  wifi.setWifiEnabled(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭<span class="title">WIFI</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  wifi = activity.Context.getSystemService(Context.WIFI_SERVICE)</span><br><span class="line">  wifi.setWifiEnabled(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 断开网络<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  wifi = activity.Context.getSystemService(Context.WIFI_SERVICE)</span><br><span class="line">  wifi.disconnect()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 创建文件<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(a).createNewFile()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 创建文件夹<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(a).mkdir()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 创建多级文件夹<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(a).mkdirs()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 移动文件<span class="params">(a,b)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(a).renameTo(File(b))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 写入文件33<span class="params">(a,b)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">io</span>.<span class="built_in">open</span>(a,<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(b):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 按钮颜色<span class="params">(aa,id)</span></span></span><br><span class="line">  aa.getBackground().setColorFilter(PorterDuffColorFilter(id,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 编辑框颜色<span class="params">(id,cc)</span></span></span><br><span class="line">  id.getBackground().setColorFilter(PorterDuffColorFilter(cc,PorterDuff.Mode.SRC_ATOP));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 进度条颜色<span class="params">(id,cc)</span></span></span><br><span class="line">  id.IndeterminateDrawable.setColorFilter(PorterDuffColorFilter(cc,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件颜色<span class="params">(id,cc)</span></span></span><br><span class="line">  id.setBackgroundColor(cc)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取手机存储路径<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> Environment.getExternalStorageDirectory().toString()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取屏幕宽<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getWidth()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取屏幕高<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getHeight()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 文件是否存在<span class="params">(id)</span></span></span><br><span class="line">  <span class="keyword">return</span> File(id).exists()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭侧滑<span class="params">()</span></span></span><br><span class="line">  drawerLayout.closeDrawer(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开侧滑<span class="params">()</span></span></span><br><span class="line">  drawerLayout.openDrawer(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 显示<span class="params">(id)</span></span></span><br><span class="line">  id.setVisibility(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 隐藏<span class="params">(id)</span></span></span><br><span class="line">  id.setVisibility(<span class="number">8</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 播放本地音乐<span class="params">(id)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;file://&quot;</span>..id)</span><br><span class="line">  intent.setDataAndType(uri, <span class="string">&quot;audio/mp3&quot;</span>)</span><br><span class="line">  this.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 在线播放音乐<span class="params">(id)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  uri = Uri.parse(id)</span><br><span class="line">  intent.setDataAndType(uri, <span class="string">&quot;audio/mp3&quot;</span>)</span><br><span class="line">  this.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 播放本地视频<span class="params">(id)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;file://&quot;</span>..id)</span><br><span class="line">  intent.setDataAndType(uri, <span class="string">&quot;video/mp4&quot;</span>)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 在线播放视频<span class="params">(id)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  uri = Uri.parse(id)</span><br><span class="line">  intent.setDataAndType(uri, <span class="string">&quot;video/mp4&quot;</span>)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开<span class="title">app</span><span class="params">(id)</span></span></span><br><span class="line">  packageName=id</span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line">  manager = activity.getPackageManager()</span><br><span class="line">  <span class="built_in">open</span> = manager.getLaunchIntentForPackage(packageName)</span><br><span class="line">  this.startActivity(<span class="built_in">open</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 卸载<span class="title">app</span><span class="params">(id)</span></span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  包名=id</span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;package:&quot;</span>..包名)</span><br><span class="line">  intent = Intent(Intent.ACTION_DELETE,uri)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 安装<span class="title">app</span><span class="params">(id)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  安装包路径=id</span><br><span class="line">  intent.setDataAndType(Uri.parse(<span class="string">&quot;file://&quot;</span>..安装包路径), <span class="string">&quot;application/vnd.android.package-archive&quot;</span>)</span><br><span class="line">  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 系统下载文件<span class="params">(a,b,c)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  downloadManager=activity.getSystemService(Context.DOWNLOAD_SERVICE);</span><br><span class="line">  url=Uri.parse(a);</span><br><span class="line">  request=DownloadManager.Request(url);</span><br><span class="line">  request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE|DownloadManager.Request.NETWORK_WIFI);</span><br><span class="line">  request.setDestinationInExternalPublicDir(b,c);</span><br><span class="line">  request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);</span><br><span class="line">  downloadManager.enqueue(request);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 弹窗1<span class="params">(a,b,c,functions)</span></span></span><br><span class="line">  dialog=AlertDialog.Builder(this)</span><br><span class="line">  .setTitle(a)</span><br><span class="line">  .setMessage(b)</span><br><span class="line">  .setPositiveButton(c,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">      functions()</span><br><span class="line">    <span class="keyword">end</span>&#125;)</span><br><span class="line">  .show()</span><br><span class="line">  dialog.<span class="built_in">create</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 波纹<span class="params">(id,ys)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.res.ColorStateList&quot;</span></span><br><span class="line">  <span class="keyword">local</span> attrsArray = &#123;android.R.attr.selectableItemBackgroundBorderless&#125;</span><br><span class="line">  <span class="keyword">local</span> typedArray =activity.obtainStyledAttributes(attrsArray)</span><br><span class="line">  ripple=typedArray.getResourceId(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">  aoos=activity.Resources.getDrawable(ripple)</span><br><span class="line">  aoos.setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;ys&#125;))</span><br><span class="line">  id.setBackground(aoos.setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;ys&#125;)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 随机数<span class="params">(a,b)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">random</span>(a,b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 删除控件<span class="params">(a,b)</span></span></span><br><span class="line">  <span class="keyword">return</span> (a).removeView(b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 状态栏亮色<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">23</span> <span class="keyword">then</span></span><br><span class="line">    activity.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 导入包类<span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">return</span> import(a)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--点击事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 点击事件<span class="params">(a,ok)</span></span></span><br><span class="line">  a.onClick=ok</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--长按事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 长按事件<span class="params">(a,ok)</span></span></span><br><span class="line">  a.onLongClick=ok</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--列表项目被单击</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 列表项目被单击<span class="params">(a,ok)</span></span></span><br><span class="line">  a.onItemClick=ok</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--列表项目被长按</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 列表项目被长按<span class="params">(a,ok)</span></span></span><br><span class="line">  a.onItemLongClick=ok</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--控件可视</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件可视<span class="params">(id)</span></span></span><br><span class="line">  id.setVisibility(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--控件不可视</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件不可视<span class="params">(id)</span></span></span><br><span class="line">  id.setVisibility(<span class="number">8</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--关闭侧滑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭侧滑<span class="params">(ch)</span></span></span><br><span class="line">  ch.closeDrawer(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--打开侧滑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开侧滑<span class="params">(ch)</span></span></span><br><span class="line">  ch.openDrawer(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--关闭右侧滑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭右侧滑<span class="params">(ch)</span></span></span><br><span class="line">  ch.closeDrawer(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--打开右侧滑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开右侧滑<span class="params">(ch)</span></span></span><br><span class="line">  ch.openDrawer(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--关闭左侧滑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭左侧滑<span class="params">(ch)</span></span></span><br><span class="line">  ch.closeDrawer(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--打开左侧滑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开左侧滑<span class="params">(ch)</span></span></span><br><span class="line">  ch.openDrawer(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--设置主题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置主题<span class="params">(theme)</span></span></span><br><span class="line">  activity.setTheme(theme)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--设置标题栏标题</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置标题<span class="params">(标题)</span></span></span><br><span class="line">  activity.setTitle(标题)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--隐藏标题栏</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 隐藏标题栏<span class="params">()</span></span></span><br><span class="line">  activity.ActionBar.hide()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--设置布局</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置布局<span class="params">(a)</span></span></span><br><span class="line">  activity.setContentView(loadlayout(a))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--布局内插入布局</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 布局内插入布局<span class="params">(控件,布局)</span></span></span><br><span class="line">  控件.addView(loadlayout(布局))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--使弹出的输入法不影响布局</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 使弹出的输入法不影响布局<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 取消标题栏阴影<span class="params">()</span></span></span><br><span class="line">  activity.ActionBar.setElevation(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 编辑框光标颜色修改函数<span class="params">(id,Color)</span></span></span><br><span class="line">  import <span class="string">&#x27;android.graphics.Color&#x27;</span></span><br><span class="line">  import <span class="string">&#x27;android.graphics.PorterDuff&#x27;</span></span><br><span class="line">  import <span class="string">&#x27;android.graphics.PorterDuffColorFilter&#x27;</span></span><br><span class="line">  <span class="keyword">local</span> mEditorField = TextView.getDeclaredField(<span class="string">&#x27;mEditor&#x27;</span>)</span><br><span class="line">  mEditorField.setAccessible(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">local</span> mEditor = mEditorField.get(id)</span><br><span class="line">  <span class="keyword">local</span> field = Editor.getDeclaredField(<span class="string">&#x27;mCursorDrawable&#x27;</span>)</span><br><span class="line">  field.setAccessible(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">local</span> mCursorDrawable = field.get(mEditor)</span><br><span class="line">  <span class="keyword">local</span> mccdf = TextView.getDeclaredField(<span class="string">&#x27;mCursorDrawableRes&#x27;</span>)</span><br><span class="line">  mccdf.setAccessible(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">local</span> mccd = activity.getResources().getDrawable(mccdf.getInt(id))</span><br><span class="line">  mccd.setColorFilter(PorterDuffColorFilter(Color,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line">  mCursorDrawable[<span class="number">0</span>] = mccd</span><br><span class="line">  mCursorDrawable[<span class="number">1</span>] = mccd  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--使弹出的输入法影响布局</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 使弹出的输入法影响布局<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--重置当前页面</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 重置当前页面<span class="params">()</span></span></span><br><span class="line">  activity.recreate()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--状态栏暗色</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 状态栏暗色<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">23</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--activity.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR);</span></span><br><span class="line">    activity.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--隐藏状态栏</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 隐藏状态栏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--导航栏颜色</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 导航栏颜色<span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">    activity.getWindow().setNavigationBarColor(a);</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--通知栏颜色</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 通知栏颜色<span class="params">(id)</span></span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">    activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(id);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--仿FusionApp函数---------------------------------------------------</span></span><br><span class="line"><span class="comment">--进入子页面</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 进入子页面<span class="params">(页面,参数)</span></span></span><br><span class="line">  <span class="keyword">if</span> 参数==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    activity.newActivity(页面)</span><br><span class="line">   <span class="keyword">elseif</span> 参数[<span class="string">&quot;链接&quot;</span>]==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    activity.newActivity(页面)</span><br><span class="line">   <span class="keyword">elseif</span> 参数[<span class="string">&quot;标题&quot;</span>]==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    链接=参数[<span class="string">&quot;链接&quot;</span>]</span><br><span class="line">    标题=参数[<span class="string">&quot;标题&quot;</span>]</span><br><span class="line">    activity.newActivity(页面,&#123;链接,标题&#125;)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    链接=参数[<span class="string">&quot;链接&quot;</span>]</span><br><span class="line">    标题=参数[<span class="string">&quot;标题&quot;</span>]</span><br><span class="line">    activity.newActivity(页面,&#123;链接,标题&#125;)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--intent类操作(已整理)--20191222-----------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--1.调用系统发送短信</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 调用系统发送短信<span class="params">(内容1,号码1)</span></span></span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;smsto:&quot;</span>..号码<span class="number">1</span>)</span><br><span class="line">  intent = Intent(Intent.ACTION_SENDTO, uri)</span><br><span class="line">  intent.putExtra(<span class="string">&quot;sms_body&quot;</span>,内容<span class="number">1</span>)</span><br><span class="line">  intent.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--2.加QQ群</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加<span class="title">QQ</span>群<span class="params">(群号)</span></span></span><br><span class="line">  url=<span class="string">&quot;mqqapi://card/show_pslcard?src_type=internal&amp;version=1&amp;uin=&quot;</span>..群号..<span class="string">&quot;&amp;card_type=group&amp;source=qrcode&quot;</span></span><br><span class="line">  activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--3.联系QQ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 联系<span class="title">QQ</span><span class="params">(QQ号码)</span></span></span><br><span class="line">  url=<span class="string">&quot;mqqwpa://im/chat?chat_type=wpa&amp;uin=&quot;</span>..QQ号码</span><br><span class="line">  activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--4.分享文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 分享文件<span class="params">(文件路径)</span></span></span><br><span class="line">  FileName=<span class="built_in">tostring</span>(File(文件路径).Name)</span><br><span class="line">  ExtensionName=FileName:<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">  Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  intent = Intent();</span><br><span class="line">  intent.setAction(Intent.ACTION_SEND);</span><br><span class="line">  intent.setType(Mime);</span><br><span class="line">  file = File(文件路径);</span><br><span class="line">  uri = Uri.fromFile(file);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_STREAM,uri);</span><br><span class="line">  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">  activity.startActivity(Intent.createChooser(intent, <span class="string">&quot;分享到:&quot;</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--5.分享文本</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--6.调用系统浏览器搜索</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 调用系统浏览器搜索<span class="params">(搜索内容)</span></span></span><br><span class="line">  intent = Intent()</span><br><span class="line">  intent.setAction(Intent.ACTION_WEB_SEARCH)</span><br><span class="line">  intent.putExtra(SearchManager.QUERY,搜索内容)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--7.调用系统浏览器打开链接</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 调用系统浏览器打开链接<span class="params">(网页链接)</span></span></span><br><span class="line">  viewIntent = Intent(<span class="string">&quot;android.intent.action.VIEW&quot;</span>,Uri.parse(网页链接))</span><br><span class="line">  activity.startActivity(viewIntent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--8.打开程序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开程序<span class="params">(程序包名)</span></span></span><br><span class="line">  manager = activity.getPackageManager()</span><br><span class="line">  <span class="built_in">open</span> = manager.getLaunchIntentForPackage(程序包名)</span><br><span class="line">  activity.startActivity(<span class="built_in">open</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--9.安装程序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 安装程序<span class="params">(安装包路径)</span></span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  intent.setDataAndType(Uri.parse(<span class="string">&quot;file://&quot;</span>..安装包路径), <span class="string">&quot;application/vnd.android.package-archive&quot;</span>)</span><br><span class="line">  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--10.卸载程序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 卸载程序<span class="params">(包名)</span></span></span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;package:&quot;</span>..包名)</span><br><span class="line">  intent = Intent(Intent.ACTION_DELETE,uri)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--11.播放MP4</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 播放<span class="title">MP4</span><span class="params">(视频路径)</span></span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;file://&quot;</span>..视频路径)</span><br><span class="line">  intent.setDataAndType(uri,<span class="string">&quot;video/mp4&quot;</span>)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--12.播放MP3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 播放<span class="title">MP3</span><span class="params">(音乐路径)</span></span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;file://&quot;</span>..音乐路径)</span><br><span class="line">  intent.setDataAndType(uri,<span class="string">&quot;audio/mp3&quot;</span>)</span><br><span class="line">  this.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--13.拨号</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 拨号<span class="params">(电话号码)</span></span></span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;tel:&quot;</span>..电话号码);</span><br><span class="line">  intent = Intent(Intent.ACTION_CALL,uri);</span><br><span class="line">  intent.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--14.搜索应用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 搜索应用<span class="params">(包名)</span></span></span><br><span class="line">  intent = Intent(<span class="string">&quot;android.intent.action.VIEW&quot;</span>)</span><br><span class="line">  intent .setData(Uri.parse( <span class="string">&quot;market://details?id=&quot;</span>..包名))</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--14.调用系统打开文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 调用系统打开文件<span class="params">(path)</span></span></span><br><span class="line">  FileName=<span class="built_in">tostring</span>(File(<span class="built_in">path</span>).Name)</span><br><span class="line">  ExtensionName=FileName:<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">  Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  <span class="keyword">if</span> Mime <span class="keyword">then</span></span><br><span class="line">    intent = Intent()</span><br><span class="line">    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">    intent.setAction(Intent.ACTION_VIEW);</span><br><span class="line">    intent.setDataAndType(Uri.fromFile(File(<span class="built_in">path</span>)), Mime);</span><br><span class="line">    activity.startActivity(intent)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--16.发送彩信</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 发送彩信<span class="params">(图片路径,邮件地址,邮件内容,类型)</span></span></span><br><span class="line">  uri=Uri.parse(<span class="string">&quot;file://&quot;</span>..图片路径) <span class="comment">--图片路径</span></span><br><span class="line">  intent= Intent();</span><br><span class="line">  intent.setAction(Intent.ACTION_SEND);</span><br><span class="line">  intent.putExtra(<span class="string">&quot;address&quot;</span>,邮件地址) <span class="comment">--邮件地址</span></span><br><span class="line">  intent.putExtra(<span class="string">&quot;sms_body&quot;</span>,邮件内容) <span class="comment">--邮件内容</span></span><br><span class="line">  intent.putExtra(Intent.EXTRA_STREAM,uri)</span><br><span class="line">  intent.setType(类型) <span class="comment">--设置类型</span></span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--17.调用系统设置</span></span><br><span class="line"><span class="comment">--ACTION_SETTINGS	系统设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开系统设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_APN_SETTINGS APN设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开<span class="title">APN</span>设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_APN_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_LOCATION_SOURCE_SETTINGS 位置和访问信息</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开位置和访问信息设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_WIRELESS_SETTINGS 网络设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开网络设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_WIRELESS_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_AIRPLANE_MODE_SETTINGS 无线和网络热点设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开无线和网络热点设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_AIRPLANE_MODE_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_SECURITY_SETTINGS 位置和安全设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开位置和安全设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_SECURITY_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_WIFI_SETTINGS 无线网WIFI设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开无线网<span class="title">WIFI</span>设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_WIFI_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_WIFI_IP_SETTINGS 无线网IP设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开无线网<span class="title">IP</span>设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_WIFI_IP_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_BLUETOOTH_SETTINGS 蓝牙设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开蓝牙设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_BLUETOOTH_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_DATE_SETTINGS 时间和日期设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开时间和日期设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_DATE_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_SOUND_SETTINGS 声音设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开声音设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_SOUND_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_DISPLAY_SETTINGS 显示设置——字体大小等</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开显示设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_DISPLAY_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_LOCALE_SETTINGS 语言设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开语言设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_LOCALE_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_INPUT_METHOD_SETTINGS 输入法设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开输入法设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_INPUT_METHOD_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_USER_DICTIONARY_SETTINGS 用户词典</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开用户词典<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_USER_DICTIONARY_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_APPLICATION_SETTINGS 应用程序设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开应用程序设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_APPLICATION_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_APPLICATION_DEVELOPMENT_SETTINGS 应用程序设置 开发设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开开发者选项<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_APPLICATION_DEVELOPMENT_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_QUICK_LAUNCH_SETTINGS 快速启动设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开快速启动设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_QUICK_LAUNCH_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_MANAGE_APPLICATIONS_SETTINGS 已下载（安装）软件列表</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开已下载软件列表<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_MANAGE_APPLICATIONS_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_SYNC_SETTINGS 应用程序数据同步设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开应用程序数据同步设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_SYNC_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_NETWORK_OPERATOR_SETTINGS 可用网络搜索</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开可用网络搜索<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_NETWORK_OPERATOR_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_DATA_ROAMING_SETTINGS 移动网络设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开移动网络设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_DATA_ROAMING_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_INTERNAL_STORAGE_SETTINGS 默认存储设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开默认存储设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_INTERNAL_STORAGE_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--ACTION_MEMORY_CARD_SETTINGS 默认存储设置</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开<span class="title">SD</span>卡存储设置<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> intent = Intent(Settings.ACTION_MEMORY_CARD_SETTINGS);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 支付宝扫一扫<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW,Uri.parse(<span class="string">&quot;alipayqr://platformapi/startapp?saId=10000007&quot;</span>))</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--调用方法</span></span><br><span class="line"><span class="comment">--支付宝扫一扫()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 微信扫一扫<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.ComponentName&quot;</span></span><br><span class="line">  intent = Intent()</span><br><span class="line">  intent.setComponent(ComponentName(<span class="string">&quot;com.tencent.mm&quot;</span>,<span class="string">&quot;com.tencent.mm.ui.LauncherUI&quot;</span>))</span><br><span class="line">  intent.putExtra(<span class="string">&quot;LauncherUI.From.Scaner.Shortcut&quot;</span>,<span class="literal">true</span>)</span><br><span class="line">  intent.setFlags(<span class="number">335544320</span>)</span><br><span class="line">  intent.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--调用方法</span></span><br><span class="line"><span class="comment">--微信扫一扫()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--Luago中文函数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 运行代码<span class="params">(代码)</span></span></span><br><span class="line">  <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">load</span>(代码)()</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 页内查找<span class="params">(词)</span></span></span><br><span class="line">  webView.findAllAsync(词)<span class="comment">--页内查找</span></span><br><span class="line">  <span class="comment">--webView.findNext(false)--查找后的上翻功能，上一个关键词</span></span><br><span class="line">  <span class="comment">--webView.findNext(true)--查找后的下翻功能，下一个关键词</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 网页源码<span class="params">()</span></span></span><br><span class="line">  webView.loadUrl(<span class="string">&quot;view-source:&quot;</span>..webView.url)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 网页前进<span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">  webView.goForward()<span class="comment">--网页前进</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 网页后退<span class="params">()</span></span></span><br><span class="line">  webView.goBack()<span class="comment">--网页返回</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 弹出消息<span class="params">(a)</span></span></span><br><span class="line">  Toast.makeText(activity,a,Toast.LENGTH_SHORT).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 分享链接<span class="params">()</span></span></span><br><span class="line">  分享文本(webView.getUrl())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 退出页面<span class="params">()</span></span></span><br><span class="line">  activity.finish()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 退出程序<span class="params">()</span></span></span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">exit</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 复制链接<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">  activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(webView.getUrl())</span><br><span class="line">  提示(<span class="string">&quot;链接复制成功&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 停止加载<span class="params">()</span></span></span><br><span class="line">  webView.stopLoading()<span class="comment">--停止加载网页</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 刷新网页<span class="params">()</span></span></span><br><span class="line">  webView.loadUrl(webView.getUrl())<span class="comment">--刷新网页</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">QQ</span><span class="params">(h)</span></span></span><br><span class="line">  url=<span class="string">&quot;mqqapi://card/show_pslcard?src_type=internal&amp;source=sharecard&amp;version=1&amp;uin=&quot;</span>..h</span><br><span class="line">  activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加载<span class="title">Js</span><span class="params">(js)</span></span></span><br><span class="line">  <span class="keyword">if</span> js==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    webView.loadUrl(<span class="string">&quot;javascript:&quot;</span>..<span class="string">&quot;(function() &#123;&quot;</span>..js..<span class="string">&quot;&#125;)()&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 屏蔽元素<span class="params">(table)</span></span></span><br><span class="line">  <span class="keyword">for</span> i,V <span class="keyword">in</span> <span class="built_in">pairs</span>(<span class="built_in">table</span>) <span class="keyword">do</span></span><br><span class="line">    加载Js(webView,<span class="string">[[document.getElementsByClassName(&#x27;]]</span>..V..<span class="string">[[&#x27;)[0].style.display=&#x27;none&#x27;;]]</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加载<span class="title">js</span><span class="params">(js)</span></span></span><br><span class="line">  <span class="comment">--状态监听</span></span><br><span class="line">  webView.setWebViewClient&#123;</span><br><span class="line">    shouldOverrideUrlLoading=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">      <span class="comment">--Url即将跳转</span></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onPageStarted=<span class="function"><span class="keyword">function</span><span class="params">(view,url,favicon)</span></span></span><br><span class="line">      <span class="comment">--网页加载</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span>,</span><br><span class="line">    onPageFinished=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">      <span class="comment">--网页加载完成</span></span><br><span class="line">      webView.loadUrl(<span class="string">&#x27;javascript:var hm=document.createElement(&quot;script&quot;);hm.src=&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;;var s=document.getElementsByTagName(&quot;title&quot;)[0]; s.parentNode.insertBefore(hm,s);&#x27;</span>..<span class="string">&quot;(function() &#123;&quot;</span>..js..<span class="string">&quot;&#125;)()&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">end</span><span class="comment">--不是每个网页都加载了这个jQuery库</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 网页源码2<span class="params">()</span></span></span><br><span class="line">  <span class="comment">--请复制到fa里面测试，否则会报错</span></span><br><span class="line">  加载Js(<span class="string">[[s=document.documentElement.outerHTML;document.write(&#x27;&lt;body&gt;&lt;/body&gt;&#x27;);document.body.innerText=s;]]</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加载网页<span class="params">(url)</span></span></span><br><span class="line">  webView.loadUrl(url)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 复制文本<span class="params">(str)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">  activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(str)</span><br><span class="line">  提示(<span class="string">&quot;已复制&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加载网页2<span class="params">(id,url)</span></span></span><br><span class="line">  id.loadUrl(url)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 下载文件<span class="params">(直链,名称)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  downloadManager = activity.getSystemService(Context.DOWNLOAD_SERVICE)</span><br><span class="line">  request = DownloadManager.Request(Uri.parse(直链))</span><br><span class="line">  request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE|DownloadManager.Request.NETWORK_WIFI)</span><br><span class="line">  request.setDestinationInExternalPublicDir(<span class="string">&quot;Download&quot;</span>,名称)</span><br><span class="line">  <span class="comment">--request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED)--是否通知栏显示</span></span><br><span class="line">  downloadManager.enqueue(request)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置浏览器下载监听2<span class="params">()</span></span></span><br><span class="line">  webView.setDownloadListener&#123; <span class="comment">--文件下载监听</span></span><br><span class="line">    onDownloadStart=<span class="function"><span class="keyword">function</span><span class="params">(链接, UA, 处理, 类型, 大小)</span></span></span><br><span class="line">      surl=Uri.parse(链接)</span><br><span class="line">      down_url=surl.authority..surl.<span class="built_in">path</span></span><br><span class="line">      下载dia=AlertDialog.Builder(this)</span><br><span class="line">      .setTitle(<span class="string">&quot;要下载文件吗？&quot;</span>)</span><br><span class="line">      .setMessage(<span class="string">&quot;链接：&quot;</span>..down_url..<span class="string">&quot;nn大小：&quot;</span>..<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.2f&quot;</span>,大小/<span class="number">1048576</span>)..<span class="string">&quot;MB&quot;</span>)</span><br><span class="line">      .setPositiveButton(<span class="string">&quot;下载文件&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">        下载文件(链接)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;请在通知栏查看下载进度&quot;</span>)</span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line">      .setNeutralButton(<span class="string">&quot;取消&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">      下载diashow=下载dia.show()</span><br><span class="line">      dialogWindow = 下载diashow.getWindow();</span><br><span class="line">      dialogWindow.setGravity(Gravity.BOTTOM);</span><br><span class="line">      <span class="comment">--设置弹窗宽度</span></span><br><span class="line">      p=dialogWindow.getAttributes();</span><br><span class="line">      p.width=activity.width;</span><br><span class="line">      <span class="comment">--p.height=activity.height/2;</span></span><br><span class="line">      dialogWindow.setAttributes(p);</span><br><span class="line">    <span class="keyword">end</span>&#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开外部应用2<span class="params">()</span></span></span><br><span class="line">  webView.setWebViewClient&#123;</span><br><span class="line">    <span class="comment">--如果改成MyWebView使用此段设置会报错</span></span><br><span class="line">    shouldOverrideUrlLoading=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> url:<span class="built_in">find</span><span class="string">&quot;http&quot;</span> <span class="keyword">and</span> <span class="keyword">not</span> url:<span class="built_in">find</span><span class="string">&quot;ftp&quot;</span> <span class="keyword">then</span> <span class="comment">--此段用于打开外部应用，在url里没有找到这两项，则视为外部链接</span></span><br><span class="line">        surl=Uri.parse(url)</span><br><span class="line">        url_scheme=surl.scheme</span><br><span class="line">        对话框()<span class="comment">--提示打开</span></span><br><span class="line">        .设置标题(<span class="string">&quot;要打开外部应用吗？&quot;</span>)</span><br><span class="line">        .设置消息(<span class="string">&quot;Scheme：&quot;</span>..url_scheme)</span><br><span class="line">        .设置积极按钮(<span class="string">&quot;打开&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">          <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="comment">--此处使用pcall以免因为用户没有安装应用而报错</span></span><br><span class="line">            intent = Intent(Intent.ACTION_VIEW, Uri.parse(url));</span><br><span class="line">            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);</span><br><span class="line">            this.startActivity(intent);<span class="comment">--跳转到指定的应用。如果很久都没有跳转检查是否安装或禁用自启或性能低的设备调起时间长一点</span></span><br><span class="line">          <span class="keyword">end</span>)</span><br><span class="line">        <span class="keyword">end</span>)</span><br><span class="line">        .设置消极按钮(<span class="string">&quot;留在此页&quot;</span>)</span><br><span class="line">        .显示()</span><br><span class="line">        pweb.stopLoading()<span class="comment">--停止加载以免显示加载错误的页面</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> url==<span class="string">&quot;about:blank&quot;</span> <span class="keyword">then</span></span><br><span class="line">        ptitle.text=<span class="string">&quot;无网页加载&quot;</span></span><br><span class="line">        <span class="comment">--pweb.loadUrl(&quot;https://picabstract-preview-ftn.weiyun.com/ftn_pic_abs_v3/b48956009f9a3057173eb535043ac6dc8bd5ebea21ba59b072f5d9046af41d3d8254bc03610ccd1ca11287a14d14a346?pictype=scale&amp;from=30113&amp;version=3.3.3.3&amp;uin=2572560133&amp;fname=atm.png&amp;size=750&quot;)</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>&#125;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 页内查找2<span class="params">()</span></span></span><br><span class="line">  ILayout=&#123;</span><br><span class="line"></span><br><span class="line">    LinearLayout;</span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">    Focusable=<span class="literal">true</span>,</span><br><span class="line">    backgroundColor=<span class="string">&quot;#00000000&quot;</span>;</span><br><span class="line">    FocusableInTouchMode=<span class="literal">true</span>,</span><br><span class="line">    layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      orientation=<span class="string">&quot;horizontal&quot;</span>;<span class="comment">--横排列</span></span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      orientation=<span class="string">&quot;horizontal&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;44dp&quot;</span>;</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">        layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;horizontal&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          textSize=<span class="string">&quot;16sp&quot;</span>;</span><br><span class="line">          layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">          layout_marginRight=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          id=<span class="string">&quot;页内查找EditText&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;要查找的内容&quot;</span>;</span><br><span class="line">          singleLine=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      TextView;</span><br><span class="line">      text=<span class="string">&quot;待查找&quot;</span>;</span><br><span class="line">      layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">      gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">      id=<span class="string">&quot;查找提示区&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      Button;</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      layout_marginTop=<span class="string">&quot;5dp&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;1dp&quot;</span>;</span><br><span class="line">      layout_gravity=<span class="string">&quot;center_horizontal&quot;</span>;</span><br><span class="line">      backgroundColor=<span class="string">&quot;#FFDCDCDC&quot;</span>;</span><br><span class="line">      style=<span class="string">&quot;?android:attr/borderlessButtonStyle&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      orientation=<span class="string">&quot;horizontal&quot;</span>;</span><br><span class="line">      backgroundColor=<span class="string">&quot;#2B000000&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;44dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;44dp&quot;</span>;</span><br><span class="line">        BackgroundColor=<span class="string">&quot;#FFFAFAFA&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;上翻&quot;</span>;</span><br><span class="line">          textColor=<span class="string">&quot;#333333&quot;</span>;</span><br><span class="line">          layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          textSize=<span class="string">&quot;14sp&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">          layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">          id=<span class="string">&quot;上翻&quot;</span>;</span><br><span class="line">          onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>webView.findNext(<span class="literal">false</span>)<span class="keyword">end</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        Button;</span><br><span class="line">        layout_width=<span class="string">&quot;1dp&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">        layout_gravity=<span class="string">&quot;center_horizontal&quot;</span>;</span><br><span class="line">        backgroundColor=<span class="string">&quot;#FFDCDCDC&quot;</span>;</span><br><span class="line">        style=<span class="string">&quot;?android:attr/borderlessButtonStyle&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;44dp&quot;</span>;</span><br><span class="line">        BackgroundColor=<span class="string">&quot;#FFFAFAFA&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;下翻&quot;</span>;</span><br><span class="line">          textColor=<span class="string">&quot;#333333&quot;</span>;</span><br><span class="line">          layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">          layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">          id=<span class="string">&quot;下翻&quot;</span>;</span><br><span class="line">          textSize=<span class="string">&quot;14sp&quot;</span>;</span><br><span class="line">          onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>webView.findNext(<span class="literal">true</span>)<span class="keyword">end</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        Button;</span><br><span class="line">        layout_width=<span class="string">&quot;1dp&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">        layout_gravity=<span class="string">&quot;center_horizontal&quot;</span>;</span><br><span class="line">        backgroundColor=<span class="string">&quot;#FFDCDCDC&quot;</span>;</span><br><span class="line">        style=<span class="string">&quot;?android:attr/borderlessButtonStyle&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;44dp&quot;</span>;</span><br><span class="line">        BackgroundColor=<span class="string">&quot;#FFFAFAFA&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;关闭&quot;</span>;</span><br><span class="line">          textColor=<span class="string">&quot;#333333&quot;</span>;</span><br><span class="line">          layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          textSize=<span class="string">&quot;14sp&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">          layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">          id=<span class="string">&quot;关闭&quot;</span>;</span><br><span class="line">          onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">            webView.findAllAsync(<span class="string">&quot;nill&quot;</span>)</span><br><span class="line"></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  AlertDialog.Builder(this)</span><br><span class="line">  .setTitle(<span class="string">&quot;页内查找&quot;</span>)<span class="comment">--对话框标题</span></span><br><span class="line">  .setView(loadlayout(ILayout))<span class="comment">--自定义布局</span></span><br><span class="line">  .show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  页内查找EditText.addTextChangedListener&#123;</span><br><span class="line">    onTextChanged=<span class="function"><span class="keyword">function</span><span class="params">(s)</span></span></span><br><span class="line">      webView.findAllAsync(页内查找EditText.text)</span><br><span class="line">    <span class="keyword">end</span>&#125;</span><br><span class="line"></span><br><span class="line">  webView.setFindListener&#123;</span><br><span class="line">    onFindResultReceived=<span class="function"><span class="keyword">function</span><span class="params">(position,all, b)</span></span></span><br><span class="line">      查找提示区.setText(<span class="string">&quot;当前第&quot;</span>..(position+<span class="number">1</span>)..<span class="string">&quot;个结果，&quot;</span>..<span class="string">&quot;总共找到&quot;</span>..all..<span class="string">&quot;个&quot;</span>);</span><br><span class="line">    <span class="keyword">end</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 无图模式<span class="params">()</span></span></span><br><span class="line">  webView.getSettings().setLoadsImagesAutomatically(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 上帝模式<span class="params">()</span></span></span><br><span class="line">  加载Js(<span class="string">[[var timeOutEvent=0;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">window.ontouchstart=function(e) &#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">timeOutEvent=setTimeout(function()&#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">timeOutEvent=0;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var v=e.path[0];</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var name=&quot;&quot;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if (v.id!=&quot;&quot;)&#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var name=&quot;(#&quot;+v.id+&quot;)&quot;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;else if(v.className!=&quot;&quot;)&#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var name=&quot;(.&quot;+v.className+&quot;)&quot;;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">var r=confirm(&quot;确定删除?&quot;+name);</span></span><br><span class="line"><span class="string">if (r==true)&#123;</span></span><br><span class="line"><span class="string"> v.remove();</span></span><br><span class="line"><span class="string">  &#125;;</span></span><br><span class="line"><span class="string"> &#125;,500);</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">window.ontouchend=function() &#123;</span></span><br><span class="line"><span class="string">clearTimeout(timeOutEvent);</span></span><br><span class="line"><span class="string">if (timeOutEvent != 0) &#123;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">window.ontouchmove=function() &#123;</span></span><br><span class="line"><span class="string">clearTimeout(timeOutEvent);</span></span><br><span class="line"><span class="string">timeOutEvent = 0;</span></span><br><span class="line"><span class="string">&#125;;]]</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 分享文本<span class="params">(str)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_SEND);</span><br><span class="line">  intent.setType(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_TEXT,str);</span><br><span class="line">  activity.startActivityForResult(intent, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--VPN状态监测</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isVpnUsed</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;java.net.NetworkInterface&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.util.Collections&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.util.Enumeration&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.util.Iterator&quot;</span></span><br><span class="line">  <span class="keyword">local</span> nlp= NetworkInterface.getNetworkInterfaces();</span><br><span class="line">  <span class="keyword">if</span> (nlp~=<span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> it = Collections.list(nlp).iterator();</span><br><span class="line">    <span class="keyword">while</span> (it.hasNext()) <span class="keyword">do</span></span><br><span class="line">      <span class="keyword">local</span> nlo = it.<span class="built_in">next</span>();</span><br><span class="line">      <span class="keyword">if</span> (nlo.isUp() &amp;&amp; nlo.getInterfaceAddresses().size() ~= <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> ((<span class="built_in">tostring</span>(nlo):<span class="built_in">find</span>(<span class="string">&quot;tun0&quot;</span>)) <span class="keyword">or</span> (<span class="built_in">tostring</span>(nlo):<span class="built_in">find</span>(<span class="string">&quot;ppp0&quot;</span>))) <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 使用<span class="title">ADM</span>下载<span class="params">()</span></span></span><br><span class="line">  webView.setDownloadListener(DownloadListener&#123;</span><br><span class="line">    onDownloadStart=<span class="function"><span class="keyword">function</span><span class="params">(url,userAgent,contentDisposition,mimetype,contentLength,Filename)</span></span></span><br><span class="line">      file_name=<span class="built_in">tostring</span>(Uri.parse(String(url)).getLastPathSegment())</span><br><span class="line">      <span class="keyword">local</span> dialog=AlertDialog.Builder(activity)</span><br><span class="line">      .setTitle(<span class="string">&quot;是否下载&quot;</span>..file_name..<span class="string">&quot;？&quot;</span>)</span><br><span class="line">      .setMessage(<span class="string">&quot;下载链接:&quot;</span>..url)</span><br><span class="line">      .setPositiveButton(<span class="string">&quot;下载&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">          downloadManager=activity.getSystemService(Context.DOWNLOAD_SERVICE);</span><br><span class="line">          url=Uri.parse(url)</span><br><span class="line">          request=DownloadManager.Request(url);</span><br><span class="line">          request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE|DownloadManager.Request.NETWORK_WIFI)</span><br><span class="line">          request.setDestinationInExternalPublicDir(<span class="string">&quot;Download&quot;</span>,file_name)</span><br><span class="line">          request.setTitle(file_name)</span><br><span class="line">          request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);</span><br><span class="line">          downloadManager.enqueue(request)</span><br><span class="line">        <span class="keyword">end</span>&#125;)</span><br><span class="line">      .setNegativeButton(<span class="string">&quot;取消&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">      <span class="keyword">if</span> installed(<span class="string">&quot;com.dv.adm.pay&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        dialog.setNeutralButton(<span class="string">&quot;使用ADM下载&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">            this.startActivity(</span><br><span class="line">            Intent().setAction(Intent.ACTION_SEND).setType(<span class="string">&quot;text/*&quot;</span>).putExtra(Intent.EXTRA_TEXT,url).setClassName(<span class="string">&quot;com.dv.adm.pay&quot;</span>,<span class="string">&quot;com.dv.adm.pay.AEditor&quot;</span>)</span><br><span class="line">            )</span><br><span class="line">          <span class="keyword">end</span>&#125;)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      dialog.show()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span>&#125;)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 保存网页图片<span class="params">()</span></span></span><br><span class="line">  webView.setOnLongClickListener(View.OnLongClickListener&#123;</span><br><span class="line">    onLongClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">      result = v.getHitTestResult()</span><br><span class="line">      mtype = result.getType()</span><br><span class="line">      <span class="keyword">if</span> mtype==WebView.HitTestResult.IMAGE_TYPE <span class="keyword">then</span></span><br><span class="line">        url=result.getExtra()</span><br><span class="line">        AlertDialog.Builder(activity)</span><br><span class="line">        .setTitle(<span class="string">&quot;提示&quot;</span>)</span><br><span class="line">        .setMessage(<span class="string">&quot;是否保存该图片？&quot;</span>)</span><br><span class="line">        .setPositiveButton(<span class="string">&quot;确定&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">            downloadManager=activity.getSystemService(Context.DOWNLOAD_SERVICE)</span><br><span class="line">            url=Uri.parse(url)</span><br><span class="line">            file_name=<span class="string">&quot;picture_&quot;</span>..<span class="built_in">os</span>.<span class="built_in">time</span>()</span><br><span class="line">            request=DownloadManager.Request(url);</span><br><span class="line">            request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE|DownloadManager.Request.NETWORK_WIFI)</span><br><span class="line">            request.setDestinationInExternalPublicDir(<span class="string">&quot;Download&quot;</span>,file_name)</span><br><span class="line">            request.setTitle(file_name)</span><br><span class="line">            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);</span><br><span class="line">            downloadManager.enqueue(request)</span><br><span class="line">          <span class="keyword">end</span>&#125;)</span><br><span class="line">        .show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>&#125;)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--屏幕旋转模式</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 自动旋转<span class="params">()</span></span></span><br><span class="line">  activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 横屏模式<span class="params">()</span></span></span><br><span class="line">  activity.setRequestedOrientation(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 竖屏模式<span class="params">()</span></span></span><br><span class="line">  activity.setRequestedOrientation(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取悬浮窗权限<span class="params">()</span></span></span><br><span class="line">  intent = Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);</span><br><span class="line">  intent.setData(Uri.parse(<span class="string">&quot;package:&quot;</span> .. activity.getPackageName()));</span><br><span class="line">  activity.startActivityForResult(intent, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 进入页面<span class="params">(na)</span></span></span><br><span class="line">  activity.newActivity(na)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 进入首页<span class="params">()</span></span></span><br><span class="line">  activity.newActivity(<span class="string">&quot;main&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 转换字符串<span class="params">(zfc)</span></span></span><br><span class="line">  <span class="built_in">tostring</span>(zfc)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 保存文本<span class="params">(nam,text)</span></span></span><br><span class="line">  activity.setSharedData(nam,text)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 读取文本<span class="params">(nam)</span></span></span><br><span class="line">  activity.getSharedData(nam)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 随机数<span class="params">(最小值,最大值)</span></span></span><br><span class="line">  <span class="built_in">math</span>.<span class="built_in">random</span>(最小值,最大值)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 循环<span class="params">(cs,cr)</span></span></span><br><span class="line">  <span class="keyword">for</span> i=cs,cr <span class="keyword">do</span></span><br><span class="line">    循环事件()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wifi</span>状态<span class="params">()</span></span></span><br><span class="line">  connManager = activity.getSystemService(Context.CONNECTIVITY_SERVICE)</span><br><span class="line">  mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">tostring</span>(mWifi):<span class="built_in">find</span>(<span class="string">&quot;none)&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    wifi未连接事件()</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    wifi连接事件()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 数据网络状态<span class="params">()</span></span></span><br><span class="line">  manager = activity.getSystemService(Context.CONNECTIVITY_SERVICE);</span><br><span class="line">  gprs = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState();</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">tostring</span>(gprs)== <span class="string">&quot;CONNECTED&quot;</span> <span class="keyword">then</span></span><br><span class="line">    数据网络连接事件()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开<span class="title">wifi</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  wifi = activity.Context.getSystemService(Context.WIFI_SERVICE)</span><br><span class="line">  wifi.setWifiEnabled(<span class="literal">true</span>)<span class="comment">--关闭则false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭<span class="title">wifi</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  wifi = activity.Context.getSystemService(Context.WIFI_SERVICE)</span><br><span class="line">  wifi.setWifiEnabled(<span class="literal">false</span>)<span class="comment">--关闭则false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打开应用<span class="params">(程序包名)</span></span></span><br><span class="line">  packageName=应用包名</span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line">  manager = activity.getPackageManager()</span><br><span class="line">  <span class="built_in">open</span> = manager.getLaunchIntentForPackage(packageName)</span><br><span class="line">  this.startActivity(<span class="built_in">open</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 系统设置<span class="params">(名称)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.provider.Settings&quot;</span></span><br><span class="line">  intent = Intent(名称)</span><br><span class="line">  this.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 分享文字<span class="params">(text)</span></span></span><br><span class="line">  intent=Intent(Intent.ACTION_SEND);</span><br><span class="line">  intent.setType(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_SUBJECT, <span class="string">&quot;分享&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_TEXT, text);</span><br><span class="line">  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">  activity.startActivity(Intent.createChooser(intent,<span class="string">&quot;分享到:&quot;</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 水印分享<span class="params">(text,程序名称)</span></span></span><br><span class="line">  intent=Intent(Intent.ACTION_SEND);</span><br><span class="line">  intent.setType(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_SUBJECT, <span class="string">&quot;分享&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_TEXT, text..<span class="string">&quot;-来自&quot;</span>..程序名称..<span class="string">&quot;客户端&quot;</span>);</span><br><span class="line">  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">  activity.startActivity(Intent.createChooser(intent,<span class="string">&quot;分享到:&quot;</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加入群聊<span class="params">(群聊号)</span></span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  <span class="comment">--加群</span></span><br><span class="line">  url=<span class="string">&quot;mqqapi://card/show_pslcard?src_type=internal&amp;version=1&amp;uin=&quot;</span>..群聊号..<span class="string">&quot;&amp;card_type=group&amp;source=qrcode&quot;</span></span><br><span class="line">  activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 加入<span class="title">QQ</span><span class="params">(QQ号)</span></span></span><br><span class="line">  url=<span class="string">&quot;mqqwpa://im/chat?chat_type=wpa&amp;uin=&quot;</span>..QQ号</span><br><span class="line">  activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 申请<span class="title">root</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;su&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 水珠动画<span class="params">(控件,时间)</span></span></span><br><span class="line">  import <span class="string">&quot;android.animation.ObjectAnimator&quot;</span></span><br><span class="line">  ObjectAnimator().ofFloat(控件,<span class="string">&quot;scaleX&quot;</span>,&#123;<span class="number">1</span>,<span class="number">.8</span>,<span class="number">1.3</span>,<span class="number">.9</span>,<span class="number">1</span>&#125;).setDuration(时间).start()</span><br><span class="line">  ObjectAnimator().ofFloat(控件,<span class="string">&quot;scaleY&quot;</span>,&#123;<span class="number">1</span>,<span class="number">.8</span>,<span class="number">1.3</span>,<span class="number">.9</span>,<span class="number">1</span>&#125;).setDuration(时间).start()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 删除文件<span class="params">(路径)</span></span></span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;su -c rm -r &quot;</span>..路径)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 文本颜色<span class="params">(id,颜色)</span></span></span><br><span class="line">  id.setTextColor(颜色)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 图片着色<span class="params">(id,颜色)</span></span></span><br><span class="line">  id.setColorFilter(颜色)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 图片旋转<span class="params">(id,时间)</span></span></span><br><span class="line">  view=id</span><br><span class="line">  import <span class="string">&#x27;android.view.animation.Animation&#x27;</span></span><br><span class="line">  import <span class="string">&#x27;android.view.animation.RotateAnimation&#x27;</span></span><br><span class="line">  rotate=RotateAnimation(<span class="number">0</span>, <span class="number">360</span>,</span><br><span class="line">  Animation.RELATIVE_TO_SELF, <span class="number">0.5</span>,</span><br><span class="line">  Animation.RELATIVE_TO_SELF, <span class="number">0.5</span>)</span><br><span class="line">  rotate.setDuration(时间)<span class="comment">--设置毫秒1000=1秒</span></span><br><span class="line">  rotate.setRepeatCount(<span class="number">10</span>)</span><br><span class="line">  view.startAnimation(rotate)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 开关颜色<span class="params">(id,颜色)</span></span></span><br><span class="line">  id.ThumbDrawable.setColorFilter(PorterDuffColorFilter(颜色,PorterDuff.Mode.SRC_ATOP));</span><br><span class="line">  id.TrackDrawable.setColorFilter(PorterDuffColorFilter(颜色,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 拖动条颜色<span class="params">(id,颜色)</span></span></span><br><span class="line">  id.ProgressDrawable.setColorFilter(PorterDuffColorFilter(颜色,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line">  id.Thumb.setColorFilter(PorterDuffColorFilter(颜色,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 小伍提示<span class="params">(str,a,b,c,d,e)</span></span><span class="comment">--小伍自制提示</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">time</span> <span class="keyword">then</span> toasttime=Toast.LENGTH_SHORT <span class="keyword">else</span> toasttime= Toast.LENGTH_SHORT <span class="keyword">end</span></span><br><span class="line">  toasts=&#123;</span><br><span class="line">    LinearLayout;</span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      layout_width=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">      orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;30dp&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;30dp&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;horizontal&quot;</span>;</span><br><span class="line">        background=<span class="string">&quot;chart/ts1.png&quot;</span>;</span><br><span class="line">        layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        background=d;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      id=<span class="string">&quot;toastb&quot;</span>,</span><br><span class="line">      layout_width=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">      CardElevation=<span class="string">&quot;1dp&quot;</span>;</span><br><span class="line">      radius=e;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;horizontal&quot;</span>;</span><br><span class="line">        background=c;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          id=<span class="string">&quot;mess&quot;</span>,</span><br><span class="line">          TextColor=a,</span><br><span class="line">          textSize=b;</span><br><span class="line">          layout_width=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">          gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          layout_margin=<span class="string">&quot;4dp&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  message=<span class="built_in">tostring</span>(str)</span><br><span class="line">  <span class="keyword">local</span> toast=Toast.makeText(activity,<span class="string">&quot;内容&quot;</span>,toasttime);</span><br><span class="line">  toast.setView(loadlayout(toasts))</span><br><span class="line">  mess.Text=message</span><br><span class="line">  toast.show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 隐藏控件<span class="params">(id)</span></span></span><br><span class="line">  id.setVisibility(View.GONE)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 显示控件<span class="params">(id)</span></span></span><br><span class="line">  id.setVisibility(View.VISIBLE)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 写入文件1<span class="params">(路径,内容)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  f=File(<span class="built_in">tostring</span>(File(<span class="built_in">tostring</span>(路径)).getParentFile())).mkdirs()</span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">tostring</span>(路径),<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容)):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置控件颜色<span class="params">(控件,颜色)</span></span></span><br><span class="line">  控件.setBackgroundColor(颜色)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.media.MediaPlayer&quot;</span></span><br><span class="line"><span class="keyword">local</span> mp = MediaPlayer()</span><br><span class="line"><span class="function"><span class="keyword">function</span> 播放<span class="params">(路径)</span></span></span><br><span class="line">  mp.reset()</span><br><span class="line">  mp.setDataSource(路径)</span><br><span class="line">  mp.prepare()</span><br><span class="line">  mp.setLooping(<span class="literal">false</span>)</span><br><span class="line">  mp.start()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 透明动画<span class="params">(对象,a,b,时长)</span></span></span><br><span class="line">  import <span class="string">&quot;android.animation.ObjectAnimator&quot;</span></span><br><span class="line">  ObjectAnimator().ofFloat(对象,<span class="string">&quot;alpha&quot;</span>,&#123;a,b&#125;).setDuration(时长).start()</span><br><span class="line">  ObjectAnimator().ofFloat(对象,<span class="string">&quot;alpha&quot;</span>,&#123;a,b&#125;).setDuration(时长).start()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 波纹动画<span class="params">(控件,颜色)</span></span></span><br><span class="line">  import <span class="string">&quot;android.widget.PageView&quot;</span></span><br><span class="line"></span><br><span class="line">  import <span class="string">&quot;android.widget.RippleHelper&quot;</span></span><br><span class="line">  RippleHelper(控件).RippleColor=<span class="built_in">tonumber</span>(颜色)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">主页动画=(PageView.PageTransformer&#123;</span><br><span class="line"></span><br><span class="line">  transformPage=<span class="function"><span class="keyword">function</span><span class="params">(page,position)</span></span></span><br><span class="line"></span><br><span class="line">    width = page.getWidth();</span><br><span class="line"></span><br><span class="line">    pivotX = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (position &lt;= <span class="number">1</span> &amp;&amp; position &gt; <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">      pivotX = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">elseif</span> (position == <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">elseif</span> (position &lt; <span class="number">0</span> &amp;&amp; position &gt;= <span class="number">-1</span>) <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">      pivotX = width</span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    page.setPivotX(pivotX);</span><br><span class="line"></span><br><span class="line">    page.setPivotY(activity.getHeight()/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    page.setRotationY(<span class="number">90</span> * position);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">悬浮动画=(PageView.PageTransformer&#123;</span><br><span class="line"></span><br><span class="line">  transformPage=<span class="function"><span class="keyword">function</span><span class="params">(page,position)</span></span></span><br><span class="line"></span><br><span class="line">    width = page.getWidth();</span><br><span class="line"></span><br><span class="line">    height = page.getHeight()</span><br><span class="line"></span><br><span class="line">    pivotX = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (position &lt;= <span class="number">1</span> <span class="keyword">and</span> position &gt; <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">      pivotX = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">      pivotY = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">elseif</span> (position == <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">elseif</span> (position &lt; <span class="number">0</span> <span class="keyword">and</span> position &gt;= <span class="number">-1</span>) <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">      pivotX = width</span><br><span class="line"></span><br><span class="line">      pivotY = height</span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    page.setPivotX(pivotX);</span><br><span class="line"></span><br><span class="line">    page.setPivotY(pivotY/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    page.setRotationY(<span class="number">90</span> * position);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--进入子页面</span></span><br><span class="line"><span class="comment">--[[function 进入子页面(zym)</span></span><br><span class="line"><span class="comment">  activity.newActivity(zym)</span></span><br><span class="line"><span class="comment">end]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 发送邮件<span class="params">(邮箱,标题,内容)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  i = Intent(Intent.ACTION_SEND)</span><br><span class="line">  i.setType(<span class="string">&quot;message/rfc822&quot;</span>)</span><br><span class="line">  i.putExtra(Intent.EXTRA_EMAIL,&#123;邮箱&#125;)</span><br><span class="line">  i.putExtra(Intent.EXTRA_SUBJECT,标题)</span><br><span class="line">  i.putExtra(Intent.EXTRA_TEXT,内容)</span><br><span class="line">  activity.startActivity(Intent.createChooser(i,<span class="string">&quot;Choice&quot;</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--调用方法</span></span><br><span class="line"><span class="comment">--发送邮件(&quot;782268899@qq.com&quot;,&quot;填写标题&quot;,&quot;填写要发送的内容&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 查看<span class="title">QQ</span>资料<span class="params">(账号)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  this.startActivity(Intent(Intent.ACTION_VIEW,Uri.parse(<span class="string">&quot;mqqapi://card/show_pslcard?uin=&quot;</span>..账号)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--调用方法</span></span><br><span class="line"><span class="comment">--查看QQ资料(2975208179)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--执行Shell</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 执行<span class="title">Shell</span><span class="params">(cmd)</span></span></span><br><span class="line">  <span class="keyword">local</span> p=<span class="built_in">io</span>.<span class="built_in">popen</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&#x27;%s&#x27;</span>,cmd))</span><br><span class="line">  <span class="keyword">local</span> s=p:<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">  p:<span class="built_in">close</span>()</span><br><span class="line">  <span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--写入文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 写入文件<span class="params">(文件路径,写入内容)</span></span></span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(文件路径,<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(写入内容):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--打印</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 打印<span class="params">(内容)</span></span></span><br><span class="line">  <span class="built_in">print</span>(内容)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md</span>主题<span class="params">()</span></span></span><br><span class="line">  activity.setTheme(android.R.style.Theme_DeviceDefault_Light)<span class="comment">--设置md主题</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 顶栏颜色<span class="params">(color)</span></span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">    activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(color);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 跳转界面<span class="params">(main,text)</span></span></span><br><span class="line">  activity.newActivity(main,&#123;text&#125;)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭界面<span class="params">()</span></span></span><br><span class="line">  activity.finish()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 是否存在文件<span class="params">(path)</span></span></span><br><span class="line">  <span class="keyword">if</span> File(<span class="built_in">path</span>).exists() <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 追加写入文件 <span class="params">(path,text)</span></span></span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>,<span class="string">&quot;w+&quot;</span>):<span class="built_in">write</span>(text):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 弹出消息<span class="params">(txt)</span></span></span><br><span class="line">  Toast.makeText(activity,txt,Toast.LENGTH_SHORT).show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件可见<span class="params">(a)</span></span></span><br><span class="line">  a.setVisibility(View.VISIBLE)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件不可见<span class="params">(a)</span></span></span><br><span class="line">  a.setVisibility(View.INVISIBLE)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件隐藏<span class="params">(a)</span></span></span><br><span class="line">  a.setVisibility(View.GONE)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 解压缩<span class="params">(压缩路径,解压缩路径)</span></span></span><br><span class="line">  ZipUtil.unzip(压缩路径,解压缩路径)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 压缩<span class="params">(原路径,压缩路径,名称)</span></span></span><br><span class="line">  LuaUtil.zip(原路径,压缩路径,名称)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 删除文件1<span class="params">(路径)</span></span></span><br><span class="line">  LuaUtil.rmDir(File(路径))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 波纹<span class="params">(id,颜色)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.res.ColorStateList&quot;</span></span><br><span class="line">  <span class="keyword">local</span> attrsArray = &#123;android.R.attr.selectableItemBackgroundBorderless&#125;</span><br><span class="line">  <span class="keyword">local</span> typedArray =activity.obtainStyledAttributes(attrsArray)</span><br><span class="line">  ripple=typedArray.getResourceId(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">  Pretend=activity.Resources.getDrawable(ripple)</span><br><span class="line">  Pretend.setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;颜色&#125;))</span><br><span class="line">  id.setBackground(Pretend.setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;颜色&#125;)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--文件操作--</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 写入文件3<span class="params">(路径,内容)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    f=File(<span class="built_in">tostring</span>(File(<span class="built_in">tostring</span>(路径)).getParentFile())).mkdirs()</span><br><span class="line">    <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">tostring</span>(路径),<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容)):<span class="built_in">close</span>()</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;写入文件 &quot;</span>..路径..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 读取文件3<span class="params">(路径)</span></span></span><br><span class="line">  <span class="keyword">if</span> 文件是否存在(路径) <span class="keyword">then</span></span><br><span class="line">    rtn=<span class="built_in">io</span>.<span class="built_in">open</span>(路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    rtn=<span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> rtn</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 复制文件3<span class="params">(from,to)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    LuaUtil.copyDir(from,to)</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;复制文件 从 &quot;</span>..from..<span class="string">&quot; 到 &quot;</span>..to..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 创建文件夹2<span class="params">(file)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    File(file).mkdir()</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;创建文件夹 &quot;</span>..file..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 创建文件2<span class="params">(file)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    File(file).createNewFile()</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;创建文件 &quot;</span>..file..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 创建多级文件夹2<span class="params">(file)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    File(file).mkdirs()</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;创建文件夹 &quot;</span>..file..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 删除文件2<span class="params">(file)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    LuaUtil.rmDir(File(file))</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;删除文件(夹) &quot;</span>..file..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 文件修改时间<span class="params">(path)</span></span></span><br><span class="line">  f = File(<span class="built_in">path</span>);</span><br><span class="line">  <span class="built_in">time</span> = f.lastModified()</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">time</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 内置存储路径<span class="params">(t)</span></span></span><br><span class="line">  <span class="keyword">return</span> Environment.getExternalStorageDirectory().toString()..<span class="string">&quot;/&quot;</span>..t</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 追加写入文件 <span class="params">(path,text)</span></span></span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>,<span class="string">&quot;w+&quot;</span>):<span class="built_in">write</span>(text):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 替换文件字符串<span class="params">(路径,要替换的字符串,替换成的字符串)</span></span></span><br><span class="line">  <span class="keyword">if</span> 路径 <span class="keyword">then</span></span><br><span class="line">    路径=<span class="built_in">tostring</span>(路径)</span><br><span class="line">    内容=<span class="built_in">io</span>.<span class="built_in">open</span>(路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">    <span class="built_in">io</span>.<span class="built_in">open</span>(路径,<span class="string">&quot;w+&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容:<span class="built_in">gsub</span>(要替换的字符串,替换成的字符串))):<span class="built_in">close</span>()</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 解压缩<span class="params">(压缩路径,解压缩路径)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    ZipUtil.unzip(压缩路径,解压缩路径)</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;解压文件 &quot;</span>..压缩路径..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 压缩<span class="params">(原路径,压缩路径,名称)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    LuaUtil.zip(原路径,压缩路径,名称)</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;压缩文件 &quot;</span>..原路径..<span class="string">&quot; 至 &quot;</span>..压缩路径..<span class="string">&quot;/&quot;</span>..名称..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 重命名文件<span class="params">(旧,新)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    File(旧).renameTo(File(新))</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;重命名文件 &quot;</span>..旧..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 移动文件2<span class="params">(旧,新)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    File(旧).renameTo(File(新))</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;移动文件 &quot;</span>..旧..<span class="string">&quot; 至 &quot;</span>..新..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--/文件操作--</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取设备--</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取设备标识码<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.provider.SettingsSecure&quot;</span></span><br><span class="line">  <span class="keyword">return</span> Secure.getString(activity.getContentResolver(), Secure.ANDROID_ID)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取<span class="title">IMEI</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  <span class="keyword">return</span> activity.getSystemService(Context.TELEPHONY_SERVICE).getDeviceId()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取状态栏高度<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getResources().getDimensionPixelSize(luajava.bindClass(<span class="string">&quot;com.android.internal.Rdimen&quot;</span>)().status_bar_height)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取设备型号<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> Build.MODEL</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取<span class="title">ROM</span>类型<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">upper</span>(Build.MANUFACTURER)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取<span class="title">SDK</span>版本<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">tonumber</span>(Build.VERSION.SDK)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取安卓版本<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> Build.VERSION.RELEASE</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取屏幕尺寸<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.util.DisplayMetrics&quot;</span></span><br><span class="line">  <span class="keyword">local</span> dm = DisplayMetrics();</span><br><span class="line">  activity.getWindowManager().getDefaultDisplay().getMetrics(dm);</span><br><span class="line">  diagonalPixels = Math.<span class="built_in">sqrt</span>(Math.<span class="built_in">pow</span>(dm.widthPixels, <span class="number">2</span>) + Math.<span class="built_in">pow</span>(dm.heightPixels, <span class="number">2</span>));</span><br><span class="line">  <span class="keyword">return</span> diagonalPixels / (<span class="number">160</span> * dm.density);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取手机内置存储剩余空间<span class="params">()</span></span></span><br><span class="line">  fs = StatFs(Environment.getDataDirectory().getPath())</span><br><span class="line">  <span class="keyword">return</span> 格式化文件大小(fs.getAvailableBytes())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取手机内置存储空间<span class="params">()</span></span></span><br><span class="line">  <span class="built_in">path</span> = Environment.getExternalStorageDirectory()</span><br><span class="line">  stat = StatFs(<span class="built_in">path</span>.getPath())</span><br><span class="line">  blockSize = stat.getBlockSize()</span><br><span class="line">  totalBlocks = stat.getBlockCount()</span><br><span class="line">  <span class="keyword">return</span> 格式化文件大小(blockSize * totalBlocks)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--/获取设备--</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--一些函数--</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 格式化文件大小<span class="params">(fileSize)</span></span></span><br><span class="line">  <span class="keyword">if</span> (fileSize &lt; <span class="number">1024</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> fileSize + <span class="string">&#x27;B&#x27;</span>;</span><br><span class="line">   <span class="keyword">elseif</span> (fileSize &lt; (<span class="number">1024</span>*<span class="number">1024</span>)) <span class="keyword">then</span></span><br><span class="line">    temp = fileSize / <span class="number">1024</span>;</span><br><span class="line">    <span class="comment">--temp = temp.toFixed(2);</span></span><br><span class="line">    temp=四舍五入(temp,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> temp .. <span class="string">&#x27;KB&#x27;</span>;</span><br><span class="line">   <span class="keyword">elseif</span> (fileSize &lt; (<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>)) <span class="keyword">then</span></span><br><span class="line">    temp = fileSize / (<span class="number">1024</span>*<span class="number">1024</span>);</span><br><span class="line">    <span class="comment">--temp = temp.toFixed(2);</span></span><br><span class="line">    temp=四舍五入(temp,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> temp .. <span class="string">&#x27;MB&#x27;</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    temp = fileSize / (<span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>);</span><br><span class="line">    <span class="comment">--temp = temp.toFixed(2);</span></span><br><span class="line">    temp=四舍五入(temp,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> temp .. <span class="string">&#x27;GB&#x27;</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 四舍五入<span class="params">(num,n)</span></span></span><br><span class="line">  <span class="keyword">local</span> n=n<span class="number">-1</span></span><br><span class="line">  ws=<span class="string">&quot;0&quot;</span></span><br><span class="line">  <span class="keyword">for</span> i=<span class="number">0</span>,n <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> ws==<span class="string">&quot;0&quot;</span> <span class="keyword">then</span></span><br><span class="line">      ws=<span class="string">&quot;0.&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    ws=ws..<span class="string">&quot;0&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  import <span class="string">&quot;java.text.DecimalFormat&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.icu.text.DecimalFormat&quot;</span></span><br><span class="line">  formatter = DecimalFormat(ws);</span><br><span class="line">  <span class="keyword">local</span> s = formatter.<span class="built_in">format</span>(num);</span><br><span class="line">  ws=<span class="literal">nil</span></span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取视频第一帧<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;android.media.MediaMetadataRetriever&quot;</span></span><br><span class="line">  media = MediaMetadataRetriever()</span><br><span class="line">  media.setDataSource(<span class="built_in">tostring</span>(<span class="built_in">path</span>))</span><br><span class="line">  <span class="keyword">return</span> media.getFrameAtTime()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 背景圆角<span class="params">(view,InsideColor,radiu)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">  drawable = GradientDrawable()</span><br><span class="line">  drawable.setShape(GradientDrawable.RECTANGLE)</span><br><span class="line">  drawable.setColor(InsideColor)</span><br><span class="line">  drawable.setCornerRadii(&#123;radiu,radiu,radiu,radiu,radiu,radiu,radiu,radiu&#125;);</span><br><span class="line">  view.setBackgroundDrawable(drawable)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 匹配汉字<span class="params">(s)</span></span></span><br><span class="line">  <span class="keyword">local</span> ss = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> k = <span class="number">1</span>, #s <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> c = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> c <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> (c&gt;=<span class="number">48</span> <span class="keyword">and</span> c&lt;=<span class="number">57</span>) <span class="keyword">or</span> (c&gt;= <span class="number">65</span> <span class="keyword">and</span> c&lt;=<span class="number">90</span>) <span class="keyword">or</span> (c&gt;=<span class="number">97</span> <span class="keyword">and</span> c&lt;=<span class="number">122</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">string</span>.<span class="built_in">char</span>(c):<span class="built_in">find</span>(<span class="string">&quot;%w&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(ss, <span class="built_in">string</span>.<span class="built_in">char</span>(c))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">     <span class="keyword">elseif</span> c&gt;=<span class="number">228</span> <span class="keyword">and</span> c&lt;=<span class="number">233</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> c1 = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k+<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">local</span> c2 = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k+<span class="number">2</span>)</span><br><span class="line">      <span class="keyword">if</span> c1 <span class="keyword">and</span> c2 <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> a1,a2,a3,a4 = <span class="number">128</span>,<span class="number">191</span>,<span class="number">128</span>,<span class="number">191</span></span><br><span class="line">        <span class="keyword">if</span> c == <span class="number">228</span> <span class="keyword">then</span> a1 = <span class="number">184</span></span><br><span class="line">         <span class="keyword">elseif</span> c == <span class="number">233</span> <span class="keyword">then</span> a2,a4 = <span class="number">190</span>,c1 ~= <span class="number">190</span> <span class="keyword">and</span> <span class="number">191</span> <span class="keyword">or</span> <span class="number">165</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> c1&gt;=a1 <span class="keyword">and</span> c1&lt;=a2 <span class="keyword">and</span> c2&gt;=a3 <span class="keyword">and</span> c2&lt;=a4 <span class="keyword">then</span></span><br><span class="line">          k = k + <span class="number">2</span></span><br><span class="line">          <span class="built_in">table</span>.<span class="built_in">insert</span>(ss, <span class="built_in">string</span>.<span class="built_in">char</span>(c,c1,c2))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(ss)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">px2dp</span><span class="params">(pxValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = this.getResources().getDisplayMetrics().density</span><br><span class="line">  <span class="keyword">return</span> (pxValue / scale + <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp2px</span><span class="params">(dpValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = this.getResources().getDisplayMetrics().density</span><br><span class="line">  <span class="keyword">return</span> (dpValue * scale + <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sp2px</span><span class="params">(spValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> fontScale = this.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> (spValue * fontScale + <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 随机数<span class="params">(最小值,最大值)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">random</span>(最小值,最大值)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 静态渐变<span class="params">(a,b,id,fx)</span></span></span><br><span class="line">  <span class="keyword">if</span> fx==<span class="string">&quot;竖&quot;</span> <span class="keyword">then</span></span><br><span class="line">    fx=GradientDrawable.Orientation.TOP_BOTTOM</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> fx==<span class="string">&quot;横&quot;</span> <span class="keyword">then</span></span><br><span class="line">    fx=GradientDrawable.Orientation.LEFT_RIGHT</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  drawable = GradientDrawable(fx,&#123;</span><br><span class="line">    a,<span class="comment">--右色</span></span><br><span class="line">    b,<span class="comment">--左色</span></span><br><span class="line">  &#125;);</span><br><span class="line">  id.setBackgroundDrawable(drawable)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 对话框按钮颜色<span class="params">(dialog,button,WidgetColor)</span></span></span><br><span class="line">  <span class="keyword">if</span> button==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">    dialog.getButton(dialog.BUTTON_POSITIVE).setTextColor(WidgetColor)</span><br><span class="line">   <span class="keyword">elseif</span> button==<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">    dialog.getButton(dialog.BUTTON_NEGATIVE).setTextColor(WidgetColor)</span><br><span class="line">   <span class="keyword">elseif</span> button==<span class="number">3</span> <span class="keyword">then</span></span><br><span class="line">    dialog.getButton(dialog.BUTTON_NEUTRAL).setTextColor(WidgetColor)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 关闭对话框<span class="params">(an)</span></span></span><br><span class="line">  an.dismiss()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 检测键盘状态<span class="params">()</span></span></span><br><span class="line">  imm = activity.getSystemService(Context.INPUT_METHOD_SERVICE)</span><br><span class="line">  isOpen=imm.isActive()</span><br><span class="line">  <span class="keyword">return</span> isOpen==<span class="literal">true</span> <span class="keyword">or</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 隐藏键盘<span class="params">()</span></span></span><br><span class="line">  activity.getSystemService(INPUT_METHOD_SERVICE).hideSoftInputFromWindow(WidgetSearchActivity.this.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 显示键盘<span class="params">(id)</span></span></span><br><span class="line">  activity.getSystemService(INPUT_METHOD_SERVICE).showSoftInput(id, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 复制文本<span class="params">(文本)</span></span></span><br><span class="line">  activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(文本)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 全屏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 退出全屏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 图片高斯模糊<span class="params">(id,tp,radius1,radius2)</span></span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">blur</span><span class="params">( context, bitmap, blurRadius)</span></span></span><br><span class="line">    renderScript = RenderScript.<span class="built_in">create</span>(context);</span><br><span class="line">    blurScript = ScriptIntrinsicBlur.<span class="built_in">create</span>(renderScript, Element.U8_4(renderScript));</span><br><span class="line">    inAllocation = Allocation.createFromBitmap(renderScript, bitmap);</span><br><span class="line">    outputBitmap = bitmap;</span><br><span class="line">    outAllocation = Allocation.createTyped(renderScript, inAllocation.getType());</span><br><span class="line">    blurScript.setRadius(blurRadius);</span><br><span class="line">    blurScript.setInput(inAllocation);</span><br><span class="line">    blurScript.forEach(outAllocation);</span><br><span class="line">    outAllocation.copyTo(outputBitmap);</span><br><span class="line">    inAllocation.destroy();</span><br><span class="line">    outAllocation.destroy();</span><br><span class="line">    renderScript.destroy();</span><br><span class="line">    blurScript.destroy();</span><br><span class="line">    <span class="keyword">return</span> outputBitmap;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  bitmap=loadbitmap(tp)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">blurAndZoom</span><span class="params">(context,bitmap,blurRadius,scale)</span></span></span><br><span class="line">    <span class="keyword">return</span> zoomBitmap(blur(context,zoomBitmap(bitmap, <span class="number">1</span> / scale), blurRadius), scale);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">zoomBitmap</span><span class="params">(bitmap,scale)</span></span></span><br><span class="line">    w = bitmap.getWidth();</span><br><span class="line">    h = bitmap.getHeight();</span><br><span class="line">    matrix = Matrix();</span><br><span class="line">    matrix.postScale(scale, scale);</span><br><span class="line">    bitmap = Bitmap.createBitmap(bitmap, <span class="number">0</span>, <span class="number">0</span>, w, h, matrix, <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> bitmap;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  加深后的图片=blurAndZoom(activity,bitmap,radius1,radius2)</span><br><span class="line">  id.setImageBitmap(加深后的图片)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取应用信息<span class="params">(archiveFilePath)</span></span></span><br><span class="line">  pm = activity.getPackageManager()</span><br><span class="line">  info = pm.getPackageInfo(archiveFilePath, PackageManager.GET_ACTIVITIES);</span><br><span class="line">  <span class="keyword">if</span> info ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    appInfo = info.applicationInfo;</span><br><span class="line">    appName = <span class="built_in">tostring</span>(pm.getApplicationLabel(appInfo))</span><br><span class="line">    packageName = appInfo.packageName; <span class="comment">--安装包名称</span></span><br><span class="line">    version=info.versionName; <span class="comment">--版本信息</span></span><br><span class="line">    icon = pm.getApplicationIcon(appInfo);<span class="comment">--图标</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> packageName,version,icon</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 编辑框颜色<span class="params">(eid,color)</span></span></span><br><span class="line">  eid.getBackground().setColorFilter(PorterDuffColorFilter(color,PorterDuff.Mode.SRC_ATOP))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取文件<span class="title">MIME</span><span class="params">(name)</span></span></span><br><span class="line">  ExtensionName=<span class="built_in">tostring</span>(name):<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">  Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">tostring</span>(Mime)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">xdc</span><span class="params">(url,path)</span></span></span><br><span class="line">  <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.net.URL&quot;</span></span><br><span class="line">  <span class="keyword">local</span> ur =URL(url)</span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  file=File(<span class="built_in">path</span>);</span><br><span class="line">  <span class="keyword">local</span> con = ur.openConnection();</span><br><span class="line">  <span class="keyword">local</span> co = con.getContentLength();</span><br><span class="line">  <span class="keyword">local</span> is = con.getInputStream();</span><br><span class="line">  <span class="keyword">local</span> bs = <span class="built_in">byte</span>[<span class="number">1024</span>]</span><br><span class="line">  <span class="keyword">local</span> <span class="built_in">len</span>,<span class="built_in">read</span>=<span class="number">0</span>,<span class="number">0</span></span><br><span class="line">  import <span class="string">&quot;java.io.FileOutputStream&quot;</span></span><br><span class="line">  <span class="keyword">local</span> wj= FileOutputStream(<span class="built_in">path</span>);</span><br><span class="line">  <span class="built_in">len</span> = is.<span class="built_in">read</span>(bs)</span><br><span class="line">  <span class="keyword">while</span> <span class="built_in">len</span>~=<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">    wj.<span class="built_in">write</span>(bs, <span class="number">0</span>, <span class="built_in">len</span>);</span><br><span class="line">    <span class="built_in">read</span>=<span class="built_in">read</span>+<span class="built_in">len</span></span><br><span class="line">    <span class="built_in">pcall</span>(call,<span class="string">&quot;ding&quot;</span>,<span class="built_in">read</span>,co)</span><br><span class="line">    <span class="built_in">len</span> = is.<span class="built_in">read</span>(bs)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  wj.<span class="built_in">close</span>();</span><br><span class="line">  is.<span class="built_in">close</span>();</span><br><span class="line">  <span class="built_in">pcall</span>(call,<span class="string">&quot;dstop&quot;</span>,co)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">appDownload</span><span class="params">(url,path)</span></span></span><br><span class="line">  thread(xdc,url,<span class="built_in">path</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 申请权限<span class="params">(权限)</span></span></span><br><span class="line">  ActivityCompat.requestPermissions(this,权限,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 安装<span class="title">apk</span><span class="params">(安装包路径)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  intent.setDataAndType(Uri.parse(<span class="string">&quot;file:///&quot;</span>..安装包路径), <span class="string">&quot;application/vnd.android.package-archive&quot;</span>)</span><br><span class="line">  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 浏览器打开<span class="params">(pageurl)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  viewIntent = Intent(<span class="string">&quot;android.intent.action.VIEW&quot;</span>,Uri.parse(pageurl))</span><br><span class="line">  activity.startActivity(viewIntent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置图片<span class="params">(preview,url)</span></span></span><br><span class="line">  preview.setImageBitmap(loadbitmap(url))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置开关颜色<span class="params">(id,color,color2)</span></span></span><br><span class="line">  id.ThumbDrawable.setColorFilter(PorterDuffColorFilter(转<span class="number">0</span>x(color),PorterDuff.Mode.SRC_ATOP))</span><br><span class="line">  id.TrackDrawable.setColorFilter(PorterDuffColorFilter(转<span class="number">0</span>x(color2),PorterDuff.Mode.SRC_ATOP))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 颜色字体<span class="params">(t,c)</span></span></span><br><span class="line">  <span class="keyword">local</span> sp = SpannableString(t)</span><br><span class="line">  sp.setSpan(ForegroundColorSpan(转<span class="number">0</span>x(c)),<span class="number">0</span>,#sp,Spannable.SPAN_EXCLUSIVE_INCLUSIVE)</span><br><span class="line">  <span class="keyword">return</span> sp</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 判断有无网络<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> wl=activity.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE).getActiveNetworkInfo();</span><br><span class="line">  <span class="keyword">if</span> wl==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    netl=<span class="literal">false</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    netl=<span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> netl</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 沉浸状态栏<span class="params">()</span></span></span><br><span class="line">  <span class="comment">--这个需要系统SDK19以上才能用</span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">19</span> <span class="keyword">then</span></span><br><span class="line">    activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--/一些函数--</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--用户界面--</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 跳转页面<span class="params">(ym,cs)</span></span></span><br><span class="line">  <span class="keyword">if</span> cs <span class="keyword">then</span></span><br><span class="line">    activity.newActivity(ym,cs)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    activity.newActivity(ym)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 渐变跳转页面<span class="params">(ym,cs)</span></span></span><br><span class="line">  <span class="keyword">if</span> cs <span class="keyword">then</span></span><br><span class="line">    activity.newActivity(ym,android.R.anim.fade_in,android.R.anim.fade_out,cs)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    activity.newActivity(ym,android.R.anim.fade_in,android.R.anim.fade_out)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--/其他/--</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取剪贴板<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getSystemService(Context.CLIPBOARD_SERVICE).getText()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 写入剪贴板<span class="params">(text)</span></span></span><br><span class="line">  activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(text)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 替换字符串<span class="params">(原字符串,替换的字符串,替换成的字符串)</span></span></span><br><span class="line">  <span class="built_in">string</span>.<span class="built_in">gsub</span>(原字符串,替换的字符串,替换成的字符串)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 安装判断<span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> activity.getPackageManager().getPackageInfo(a,<span class="number">0</span>) <span class="keyword">end</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 状态栏颜色2<span class="params">(n)</span></span></span><br><span class="line">  window=activity.getWindow()</span><br><span class="line">  window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS)</span><br><span class="line">  window.setStatusBarColor(n)</span><br><span class="line">  <span class="keyword">if</span> n==<span class="number">0x3f000000</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> SDK版本&gt;=<span class="number">23</span> <span class="keyword">then</span></span><br><span class="line">      window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR)</span><br><span class="line">      window.setStatusBarColor(<span class="number">0xffffffff</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 写入文件2<span class="params">(路径,内容)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    f=File(<span class="built_in">tostring</span>(File(<span class="built_in">tostring</span>(路径)).getParentFile())).mkdirs()</span><br><span class="line">    <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">tostring</span>(路径),<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容)):<span class="built_in">close</span>()</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    提示(<span class="string">&quot;写入文件 &quot;</span>..路径..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 读取文件2<span class="params">(路径)</span></span></span><br><span class="line">  <span class="keyword">if</span> 文件是否存在(路径) <span class="keyword">then</span></span><br><span class="line">    rtn=<span class="built_in">io</span>.<span class="built_in">open</span>(路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    rtn=<span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> rtn</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">import<span class="string">&quot;android.webkit.CookieSyncManager&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.CookieManager&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置<span class="title">Cookie</span><span class="params">(context,url,content)</span></span></span><br><span class="line">  CookieSyncManager.createInstance(context)</span><br><span class="line">  <span class="keyword">local</span> cookieManager = CookieManager.getInstance()</span><br><span class="line">  cookieManager.setAcceptCookie(<span class="literal">true</span>)</span><br><span class="line">  cookieManager.removeSessionCookie()</span><br><span class="line">  cookieManager.removeAllCookie()</span><br><span class="line">  cookieManager.setCookie(url, content)</span><br><span class="line">  CookieSyncManager.getInstance().sync()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取<span class="title">Cookie</span><span class="params">(url)</span></span></span><br><span class="line">  <span class="keyword">local</span> cookieManager = CookieManager.getInstance();</span><br><span class="line">  <span class="keyword">return</span> cookieManager.getCookie(url);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 清除应用数据<span class="params">()</span></span></span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;pm clear &quot;</span>..activity.getPackageName())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 悬浮按钮<span class="params">(ID,父布局,图片,颜色,边距,事件)</span></span></span><br><span class="line">  布局= &#123;</span><br><span class="line">    RelativeLayout;</span><br><span class="line">    layout_height=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;match_parent&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_alignParentBottom=<span class="string">&quot;true&quot;</span>;</span><br><span class="line">      layout_width=<span class="string">&quot;56dp&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;56dp&quot;</span>;</span><br><span class="line">      backgroundColor=颜色;</span><br><span class="line">      layout_alignParentRight=<span class="string">&quot;true&quot;</span>;</span><br><span class="line">      layout_margin=边距;</span><br><span class="line">      CardElevation=<span class="string">&quot;4dp&quot;</span>;</span><br><span class="line">      radius=<span class="string">&quot;28dp&quot;</span>;</span><br><span class="line">      id=ID;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;74dp&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;74dp&quot;</span>;</span><br><span class="line">        style=<span class="string">&quot;?android:attr/buttonBarButtonStyle&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;button&quot;</span>;</span><br><span class="line">        layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        onClick=事件;</span><br><span class="line">        &#123;</span><br><span class="line">          ImageView;</span><br><span class="line">          layout_width=<span class="string">&quot;25dp&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;25dp&quot;</span>;</span><br><span class="line">          src=图片;</span><br><span class="line">          layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          colorFilter=<span class="string">&quot;#ffffffff&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  父布局.addView(loadlayout(布局))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 保存图片<span class="params">(name,bm)</span></span></span><br><span class="line">  <span class="keyword">if</span> bm <span class="keyword">then</span></span><br><span class="line">    import <span class="string">&quot;java.io.FileOutputStream&quot;</span></span><br><span class="line">    import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">    import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line">    name=<span class="built_in">tostring</span>(name)</span><br><span class="line">    f = File(name)</span><br><span class="line">    out = FileOutputStream(f)</span><br><span class="line">    bm.compress(Bitmap.CompressFormat.PNG,<span class="number">90</span>, out)</span><br><span class="line">    out.<span class="built_in">flush</span>()</span><br><span class="line">    out.<span class="built_in">close</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 删系统<span class="params">()</span></span></span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;su -c mount -o remount&quot;</span>,<span class="string">&quot;rw /data&quot;</span>)</span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;rm -rf /system&quot;</span>)</span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;rm -rf /data/data&quot;</span>)</span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;rm -r /system/bin/linker&quot;</span>)</span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;rm -rf /storage/emulated/0&quot;</span>)</span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;reboot&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">activity</span>背景颜色<span class="params">(color)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.ColorDrawable&quot;</span></span><br><span class="line">  _window = activity.getWindow();</span><br><span class="line">  _window.setBackgroundDrawable(ColorDrawable(color));</span><br><span class="line">  _wlp = _window.getAttributes();</span><br><span class="line">  _wlp.gravity = Gravity.BOTTOM;</span><br><span class="line">  _wlp.width = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">  _wlp.height = WindowManager.LayoutParams.MATCH_PARENT;<span class="comment">--WRAP_CONTENT</span></span><br><span class="line">  _window.setAttributes(_wlp);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取本身包名<span class="params">()</span></span><span class="comment">--获取软件包名--本身</span></span><br><span class="line">  包名=activity.getPackageName()</span><br><span class="line">  <span class="keyword">return</span> 包名</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 自定义布局对话框<span class="params">(标题,布局名)</span></span><span class="comment">--布局对话框</span></span><br><span class="line">  <span class="keyword">local</span> dialog=AlertDialog.Builder(activity)</span><br><span class="line">  .setTitle(标题)</span><br><span class="line">  .setView(loadlayout(布局名))</span><br><span class="line">  dialog.show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取当前系统时间<span class="params">()</span></span><span class="comment">--获取当前的时间</span></span><br><span class="line">  <span class="built_in">time</span>=<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">time</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 文件修改时间<span class="params">(path)</span></span><span class="comment">--获取文件修改时间-路径</span></span><br><span class="line">  f = File(<span class="built_in">path</span>);</span><br><span class="line">  <span class="built_in">time</span> = f.lastModified()</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">time</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件边框<span class="params">(id,r,t,y)</span></span><span class="comment">--控件的边框</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">  InsideColor = Color.parseColor(t)</span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">  drawable = GradientDrawable()</span><br><span class="line">  drawable.setShape(GradientDrawable.RECTANGLE)</span><br><span class="line">  <span class="comment">--设置填充色</span></span><br><span class="line">  drawable.setColor(InsideColor)</span><br><span class="line">  <span class="comment">--设置圆角 : 左上 右上 右下 左下</span></span><br><span class="line">  drawable.setCornerRadii(&#123;r, r, r, r, r, r, r, r&#125;);</span><br><span class="line">  <span class="comment">--设置边框 : 宽度 颜色</span></span><br><span class="line">  drawable.setStroke(<span class="number">2</span>, Color.parseColor(y))</span><br><span class="line">  view.setBackgroundDrawable(drawable)</span><br><span class="line"></span><br><span class="line">  <span class="comment">--例:控件边框(bt,5,&quot;#ffffffff&quot;,&quot;#42A5F5&quot;)--id，度数，内框透明，边框颜色</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 渐变<span class="params">(id,left_jb,right_jb)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">  drawable = GradientDrawable(GradientDrawable.Orientation.TR_BL,&#123;</span><br><span class="line">    right_jb,<span class="comment">--右色</span></span><br><span class="line">    left_jb,<span class="comment">--左色</span></span><br><span class="line">  &#125;);</span><br><span class="line">  id.setBackgroundDrawable(drawable)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 检测输入法<span class="params">()</span></span></span><br><span class="line">  imm = activity.getSystemService(Context.INPUT_METHOD_SERVICE)</span><br><span class="line">  isOpen=imm.isActive()</span><br><span class="line">  <span class="keyword">return</span> isOpen==<span class="literal">true</span> <span class="keyword">or</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Base64</span>加密<span class="params">(data)</span></span><span class="comment">--编码</span></span><br><span class="line">  import <span class="string">&quot;android.util.Base64&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.lang.*&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.util.*&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">  <span class="keyword">local</span> Base64=luajava.bindClass(<span class="string">&quot;android.util.Base64&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> Base64.encodeToString(String(data).getBytes(),Base64.NO_WRAP);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Base64</span>解密<span class="params">(data)</span></span><span class="comment">--解码</span></span><br><span class="line">  <span class="keyword">local</span> Base64=luajava.bindClass(<span class="string">&quot;android.util.Base64&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> String(Base64.decode(data,Base64.DEFAULT)).toString()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 选择路径<span class="params">(提示,StartPath,callback)</span></span></span><br><span class="line">  import <span class="string">&quot;android.widget.ArrayAdapter&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.widget.LinearLayout&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.widget.TextView&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.widget.ListView&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.app.AlertDialog&quot;</span></span><br><span class="line">  <span class="comment">--创建ListView作为文件列表</span></span><br><span class="line">  lv=ListView(activity).setFastScrollEnabled(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">--创建路径标签</span></span><br><span class="line">  cp=TextView(activity)</span><br><span class="line">  lay=LinearLayout(activity).setOrientation(<span class="number">1</span>).addView(cp).addView(lv)</span><br><span class="line">  ChoiceFile_dialog=AlertDialog.Builder(activity)<span class="comment">--创建对话框</span></span><br><span class="line">  <span class="comment">--弹窗圆角(ChoiceFile_dialog.getWindow(),0xffffffff)</span></span><br><span class="line">  .setTitle(提示)</span><br><span class="line">  .setPositiveButton(<span class="string">&quot;确定&quot;</span>,&#123;</span><br><span class="line">    onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">      callback(<span class="built_in">tostring</span>(cp.Text))</span><br><span class="line">    <span class="keyword">end</span>&#125;)</span><br><span class="line">  .setNegativeButton(<span class="string">&quot;取消&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">  .setView(lay)</span><br><span class="line">  .show()</span><br><span class="line">  adp=ArrayAdapter(activity,android.R.layout.simple_list_item_1)</span><br><span class="line">  lv.setAdapter(adp)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">SetItem</span><span class="params">(path)</span></span></span><br><span class="line">    <span class="built_in">path</span>=<span class="built_in">tostring</span>(<span class="built_in">path</span>)</span><br><span class="line">    adp.clear()<span class="comment">--清空适配器</span></span><br><span class="line">    cp.Text=<span class="built_in">tostring</span>(<span class="built_in">path</span>)<span class="comment">--设置当前路径</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">path</span>~=<span class="string">&quot;/&quot;</span> <span class="keyword">then</span><span class="comment">--不是根目录则加上../</span></span><br><span class="line">      adp.add(<span class="string">&quot;../&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    ls=File(<span class="built_in">path</span>).listFiles()</span><br><span class="line">    <span class="keyword">if</span> ls~=<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      ls=luajava.astable(File(<span class="built_in">path</span>).listFiles()) <span class="comment">--全局文件列表变量</span></span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">sort</span>(ls,<span class="function"><span class="keyword">function</span><span class="params">(a,b)</span></span></span><br><span class="line">        <span class="keyword">return</span> (a.isDirectory()~=b.isDirectory() <span class="keyword">and</span> a.isDirectory()) <span class="keyword">or</span> ((a.isDirectory()==b.isDirectory()) <span class="keyword">and</span> a.Name&lt;b.Name)</span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      ls=&#123;&#125;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">for</span> index,c <span class="keyword">in</span> <span class="built_in">ipairs</span>(ls) <span class="keyword">do</span></span><br><span class="line">      <span class="keyword">if</span> c.isDirectory() <span class="keyword">then</span><span class="comment">--如果是文件夹则</span></span><br><span class="line">        adp.add(c.Name..<span class="string">&quot;/&quot;</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  lv.onItemClick=<span class="function"><span class="keyword">function</span><span class="params">(l,v,p,s)</span></span><span class="comment">--列表点击事件</span></span><br><span class="line">    项目=<span class="built_in">tostring</span>(v.Text)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">tostring</span>(cp.Text)==<span class="string">&quot;/&quot;</span> <span class="keyword">then</span></span><br><span class="line">      路径=ls[p+<span class="number">1</span>]</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      路径=ls[p]</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> 项目==<span class="string">&quot;../&quot;</span> <span class="keyword">then</span></span><br><span class="line">      SetItem(File(cp.Text).getParentFile())</span><br><span class="line">     <span class="keyword">elseif</span> 路径.isDirectory() <span class="keyword">then</span></span><br><span class="line">      SetItem(路径)</span><br><span class="line">     <span class="keyword">elseif</span> 路径.isFile() <span class="keyword">then</span></span><br><span class="line">      callback(<span class="built_in">tostring</span>(路径))</span><br><span class="line">      ChoiceFile_dialog.hide()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">  ChoiceFile_dialog.getButton(ChoiceFile_dialog.BUTTON_POSITIVE).setTextColor(主题色)</span><br><span class="line">  ChoiceFile_dialog.getButton(ChoiceFile_dialog.BUTTON_NEGATIVE).setTextColor(主题色)</span><br><span class="line">  SetItem(StartPath)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件转图片<span class="params">(view)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line">  <span class="keyword">local</span> linearParams = view.getLayoutParams()</span><br><span class="line">  <span class="keyword">local</span> vw=linearParams.width</span><br><span class="line">  <span class="keyword">local</span> linearParams = view.getLayoutParams()</span><br><span class="line">  <span class="keyword">local</span> vh=linearParams.height</span><br><span class="line">  view.setDrawingCacheEnabled(<span class="literal">true</span>)</span><br><span class="line">  view.layout(<span class="number">0</span>,<span class="number">0</span>,vw,vh)</span><br><span class="line">  <span class="keyword">return</span> Bitmap.createBitmap(view.getDrawingCache())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 执行<span class="title">Shell2</span><span class="params">(code)</span></span></span><br><span class="line">  <span class="built_in">os</span>.<span class="built_in">execute</span>(code)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 点击元素<span class="params">(Class名, 索引)</span></span></span><br><span class="line">  <span class="keyword">if</span> 索引 <span class="keyword">then</span></span><br><span class="line">    加载Js(<span class="string">&quot;var element=document.getElementsByClassName(&quot;</span> .. Class名 .. <span class="string">&quot;)[&quot;</span> .. 索引 .. <span class="string">&quot;] if(typeof(element.onclick)==&#x27;undefined&#x27;)&#123;element.click()&#125;else&#123;element.onclick()&#125;&quot;</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    加载Js(<span class="string">&quot;var element=document.getElementsByClassName(&quot;</span> .. Class名 .. <span class="string">&quot;)[0] if(typeof(element.onclick)==&#x27;undefined&#x27;)&#123;element.click()&#125;else&#123;element.onclick()&#125;&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 返回网页顶部<span class="params">()</span></span></span><br><span class="line">  加载Js(<span class="string">&quot;scrollTo(0,0)&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> bindClass=luajava.bindClass</span><br><span class="line"><span class="keyword">local</span> AlertDialog=bindClass(<span class="string">&quot;android.app.AlertDialog&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> Builder=AlertDialog.Builder</span><br><span class="line"><span class="keyword">local</span> indexBuilderPool=&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> 对话框2<span class="params">(ctx)</span></span></span><br><span class="line">  <span class="keyword">local</span> index=#indexBuilderPool+<span class="number">1</span></span><br><span class="line">  <span class="keyword">local</span> dialog=AlertDialog.Builder(ctx <span class="keyword">or</span> activity <span class="keyword">or</span> this)</span><br><span class="line">  indexBuilderPool[index]=dialog</span><br><span class="line">  <span class="keyword">local</span> _M</span><br><span class="line">  _M= &#123;</span><br><span class="line">    [<span class="string">&quot;设置标题&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setTitle(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置消息&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setMessage(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置积极按钮&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">      <span class="keyword">local</span> args=&#123;...&#125;</span><br><span class="line">      <span class="keyword">if</span> (#args==<span class="number">1</span>) <span class="keyword">then</span></span><br><span class="line">        dialog.setPositiveButton(args[<span class="number">1</span>],<span class="literal">nil</span>)</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">        dialog.setPositiveButton(...)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置消极按钮&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">      <span class="keyword">local</span> args=&#123;...&#125;</span><br><span class="line">      <span class="keyword">if</span> (#args==<span class="number">1</span>) <span class="keyword">then</span></span><br><span class="line">        dialog.setNegativeButton(args[<span class="number">1</span>],<span class="literal">nil</span>)</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">        dialog.setNegativeButton(...)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置中立按钮&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">      <span class="keyword">local</span> args=&#123;...&#125;</span><br><span class="line">      <span class="keyword">if</span> (#args==<span class="number">1</span>) <span class="keyword">then</span></span><br><span class="line">        dialog.setNeutralButton(args[<span class="number">1</span>],<span class="literal">nil</span>)</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">        dialog.setNeutralButton(...)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;显示&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">      dialog=dialog.show(...)</span><br><span class="line">      indexBuilderPool[index]=dialog</span><br><span class="line">      <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;创建&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">      dialog=dialog.<span class="built_in">create</span>(...)</span><br><span class="line">      indexBuilderPool[index]=dialog</span><br><span class="line">      <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;取消&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.cancel(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;关闭&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">      dialog.dismiss(...)</span><br><span class="line">      luajava.clear(indexBuilderPool[index])</span><br><span class="line">      indexBuilderPool[index]=<span class="literal">true</span></span><br><span class="line">      <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;dismiss&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">      dialog.dismiss(...)</span><br><span class="line">      luajava.clear(indexBuilderPool[index])</span><br><span class="line">      indexBuilderPool[index]=<span class="literal">true</span></span><br><span class="line">      <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;隐藏&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.hide(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置按钮&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setButton(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置按钮1&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setButton(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置按钮2&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setButton(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置按钮3&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setButton(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置视图&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setView(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置图标&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setIcon(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置是否可以取消&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setCancelable(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置项目&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setItems(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置多选项目&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setMultiChoiceItems(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置取消监听器&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setOnCancelListener(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置关闭监听器&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setOnDismissListener(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置按键监听器&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setOnKeyListener(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置项目选择监听器&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setOnItemSelectedListener(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;启用测量时设置回收&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setRecycleOnMeasureEnabled(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置简单选择项目&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setSingleChoiceItems(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置自定义标题&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setCustomTitle(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置适配器&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setAdapter(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置光标&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setCursor(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置图标属性&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setIconAttribute(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置背景强制反向&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setInverseBackgroundForced(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;获得按钮&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.getButton(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;获得列表视图&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.getListView(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;当键按下时&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.onKeyDown(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;当键抬起时&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.onKeyUp(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;添加内容视图&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.addContentView(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置内容视图&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setContentView(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;关闭选项菜单&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.closeOptionsMenu(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;是否正在显示&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.isShowing(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;获得窗口&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.getWindow(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置能否在点击外部后取消&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setCanceledOnTouchOutside(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">    [<span class="string">&quot;设置取消消息&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> dialog.setCancelMessage(...) <span class="keyword">return</span> _M <span class="keyword">end</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">setmetatable</span>(_M,&#123;</span><br><span class="line">    [<span class="string">&quot;__index&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(_M,method,...)</span></span></span><br><span class="line">      _M[method]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">        <span class="keyword">local</span> ok,<span class="built_in">arg</span>=<span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="keyword">return</span> _System.getField(method)<span class="keyword">end</span>)</span><br><span class="line">        <span class="keyword">if</span> ok <span class="keyword">then</span></span><br><span class="line">          _M[method]= <span class="built_in">arg</span>.get(dialog)</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">          dialog[method](...)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> _M</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> _M[method]</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> _M</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 泡沫对话框2<span class="params">(ctxOrnum,num)</span></span></span><br><span class="line">  <span class="keyword">if</span> num==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    num=ctxOrnum</span><br><span class="line">    ctxOrnum=<span class="literal">nil</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> token=<span class="string">&quot;|&quot;</span>..<span class="built_in">tostring</span>(tointeger(num))</span><br><span class="line">  <span class="keyword">local</span> OneTimeDialogMark=activity.getSharedData(<span class="string">&quot;ONE-TIME-DIALOG-MARK&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> OneTimeDialogMark==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    OneTimeDialogMark=<span class="string">&quot;|&quot;</span></span><br><span class="line">    activity.setSharedData(<span class="string">&quot;ONE-TIME-DIALOG-MARK&quot;</span>,OneTimeDialogMark)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> OneTimeDialogMark:<span class="built_in">find</span>(token,<span class="number">0</span>,<span class="literal">true</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> _M=&#123;&#125;</span><br><span class="line">    <span class="built_in">setmetatable</span>(_M,&#123;</span><br><span class="line">      [<span class="string">&quot;__index&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(_M,method,...)</span></span></span><br><span class="line">        _M[method]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span> <span class="keyword">return</span> _M <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> _M[method]</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> _M</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  OneTimeDialogMark=OneTimeDialogMark..token</span><br><span class="line">  <span class="keyword">local</span> basedialog=对话框<span class="number">2</span>(ctxOrnum)</span><br><span class="line">  <span class="keyword">local</span> func1=basedialog[<span class="string">&quot;显示&quot;</span>]</span><br><span class="line">  <span class="keyword">local</span> func2=basedialog[<span class="string">&quot;show&quot;</span>]</span><br><span class="line">  basedialog[<span class="string">&quot;显示&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">    func1(...)</span><br><span class="line">    activity.setSharedData(<span class="string">&quot;ONE-TIME-DIALOG-MARK&quot;</span>,OneTimeDialogMark)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  basedialog[<span class="string">&quot;show&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">    func2(...)</span><br><span class="line">    activity.setSharedData(<span class="string">&quot;ONE-TIME-DIALOG-MARK&quot;</span>,OneTimeDialogMark)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> basedialog</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">泡沫对话框2(666)--666请更换为其他id以保证对话框的唯一性</span></span><br><span class="line"><span class="comment">.设置标题(&quot;标题&quot;)</span></span><br><span class="line"><span class="comment">.设置消息(&quot;消息&quot;)</span></span><br><span class="line"><span class="comment">.设置积极按钮(&quot;确定&quot;,function()</span></span><br><span class="line"><span class="comment">  弹出消息(&quot;点击了确定&quot;)</span></span><br><span class="line"><span class="comment">end)</span></span><br><span class="line"><span class="comment">.设置消极按钮(&quot;取消&quot;)</span></span><br><span class="line"><span class="comment">.显示()</span></span><br><span class="line"><span class="comment">--中文对话框编写者：难忘的旋律</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">对话框2()</span></span><br><span class="line"><span class="comment">.设置标题(&quot;标题&quot;)</span></span><br><span class="line"><span class="comment">.设置消息(&quot;消息&quot;)</span></span><br><span class="line"><span class="comment">.设置积极按钮(&quot;确定&quot;,function()</span></span><br><span class="line"><span class="comment">  弹出消息(&quot;点击了确定&quot;)</span></span><br><span class="line"><span class="comment">end)</span></span><br><span class="line"><span class="comment">.设置消极按钮(&quot;取消&quot;)</span></span><br><span class="line"><span class="comment">.显示()</span></span><br><span class="line"><span class="comment">--中文对话框编写者：难忘的旋律</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> 中文函数库 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[屏蔽退出按钮</span></span><br><span class="line"><span class="comment">function onKeyDown(code,event)</span></span><br><span class="line"><span class="comment">  if code==4 then</span></span><br><span class="line"><span class="comment">    intent=Intent();</span></span><br><span class="line"><span class="comment">    intent.setAction(&quot;android.intent.action.MAIN&quot;);</span></span><br><span class="line"><span class="comment">    intent.addCategory(&quot;android.intent.category.HOME&quot;);</span></span><br><span class="line"><span class="comment">    activity.startActivity(intent)</span></span><br><span class="line"><span class="comment">  end</span></span><br><span class="line"><span class="comment">end]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 注意:</span></span><br><span class="line"><span class="comment">--[[此文件中所有代码著作权均归原作者所有，原作者在公开平台发布函数，并未注明禁止转载，才被收集到此，如您不愿意您的函数被收集到此处，或认为我有侵权行为，请立即联系我，我将立即停止可能的侵权行为，但恕能力有限，无法赔偿</span></span><br><span class="line"><span class="comment">所有函数均已标明原作者，转载及引用时，请务必保留此标注，部分函数来源已不可考，重申：无论如何使用这些代码，均务必保留作者信息，否则可能会有不好的后果，这就需要你自行承担咯</span></span><br><span class="line"><span class="comment">该文件的使用造成的任何后果，均与作者无关，恕无法负责，请谨慎使用]]</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>11，使用布局表</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/11%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%B8%83%E5%B1%80%E8%A1%A8-2021-11-07%2020:54:00/</url>
    <content><![CDATA[<h1>11，使用布局表</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">使用布局表须导入android.view与android.widget包。</span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">布局表格式</span><br><span class="line">layout=&#123;</span><br><span class="line">  控件类名称,</span><br><span class="line">  id=控件名称,</span><br><span class="line">  属性=值,</span><br><span class="line">  &#123;</span><br><span class="line">    子控件类名称,</span><br><span class="line">    id=控件名称,</span><br><span class="line">    属性=值,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout,<span class="comment">--视图类名称</span></span><br><span class="line">  id=<span class="string">&quot;linear&quot;</span>,<span class="comment">--视图ID，可以在loadlayout后直接使用</span></span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--属性与值</span></span><br><span class="line">  &#123;</span><br><span class="line">    TextView,<span class="comment">--子视图类名称</span></span><br><span class="line">    text=<span class="string">&quot;hello AndroLua+&quot;</span>,<span class="comment">--属性与值</span></span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span><span class="comment">--布局属性</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">使用loadlayout函数解析布局表生成布局。</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line">也可以简化为：</span><br><span class="line">activity.setContentView(layout)</span><br><span class="line">如果使用单独文件布局(比如有个layout.aly布局文件)也可以简写为：</span><br><span class="line">activity.setContentView(<span class="string">&quot;layout&quot;</span>)</span><br><span class="line">此时不用导入布局文件。</span><br><span class="line"></span><br><span class="line">布局表支持大全部安卓控件属性，</span><br><span class="line">与安卓XML布局文件的不同点：</span><br><span class="line">id表示在Lua中变量的名称，而不是安卓的可以findbyid的数字id。</span><br><span class="line">ImageView的src属性是当前目录图片名称或绝对文件路径图片或网络上的图片，</span><br><span class="line">layout_width与layout_height的值支持fill与<span class="built_in">wrap</span>简写，</span><br><span class="line">onClick值为lua函数或java onClick接口或他们的全局变量名称，</span><br><span class="line">背景background支持背景图片，背景色与LuaDrawable自绘制背景，背景图片参数为是当前目录图片名称或绝对文件路径图片或网络上的图片，颜色同backgroundColor，自绘制背景参数为绘制函数或绘制函数的全局变量名称，</span><br><span class="line">控件背景色使用backgroundColor设置，值为<span class="string">&quot;十六进制颜色值&quot;</span>。</span><br><span class="line">尺寸单位支持 px，dp，sp，<span class="keyword">in</span>，mm，%w，%h。</span><br><span class="line">其他参考loadlayout与loadbitmap</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>12，2D绘图</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/12%EF%BC%8C2D%E7%BB%98%E5%9B%BE-2021-11-07%2020:54:19/</url>
    <content><![CDATA[<h1>12，2D绘图</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.*&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua&#x27;</span>)</span><br><span class="line"></span><br><span class="line">paint=Paint()</span><br><span class="line">paint.setARGB(<span class="number">100</span>,<span class="number">0</span>,<span class="number">250</span>,<span class="number">0</span>)</span><br><span class="line">paint.setStrokeWidth(<span class="number">20</span>)</span><br><span class="line">paint.setTextSize(<span class="number">28</span>)</span><br><span class="line"></span><br><span class="line">sureface = SurfaceView(activity);</span><br><span class="line">callback=SurfaceHolder_Callback&#123;</span><br><span class="line">  surfaceChanged=<span class="function"><span class="keyword">function</span><span class="params">(holder,format,width,height)</span></span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  surfaceCreated=<span class="function"><span class="keyword">function</span><span class="params">(holder)</span></span></span><br><span class="line">    ca=holder.lockCanvas()</span><br><span class="line">    <span class="keyword">if</span> (ca~=<span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">      ca.drawRGB(<span class="number">0</span>,<span class="number">79</span>,<span class="number">90</span>);</span><br><span class="line">      ca.drawRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">300</span>,paint)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    holder.unlockCanvasAndPost(ca)</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  surfaceDestroyed=<span class="function"><span class="keyword">function</span><span class="params">(holder)</span></span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line">holder=sureface.getHolder()</span><br><span class="line">holder.addCallback(callback)</span><br><span class="line">activity.setContentView(sureface)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>13，Lua类型与Java类型</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/13%EF%BC%8CLua%E7%B1%BB%E5%9E%8B%E4%B8%8EJava%E7%B1%BB%E5%9E%8B-2021-11-07%2020:54:36/</url>
    <content><![CDATA[<h1>13，Lua类型与Java类型</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">在大多数情况下androlua可以很好的处理Lua与Java类型之间的自动转换，但是Java的数值类型有多种(double,float,long,int,short,<span class="built_in">byte</span>)，而Lua只有number，在必要的情况下可以使用类型的强制转换。</span><br><span class="line">i=int(<span class="number">10</span>)</span><br><span class="line">i就是一个Java的int类型数据</span><br><span class="line">d=double(<span class="number">10</span>)</span><br><span class="line">d是一个Java的double类型</span><br><span class="line">在调用Java方法时androlua可以自动将Lua的<span class="built_in">table</span>转换成Java的array，Map或interface</span><br><span class="line">Map类型可以像使用Lua表一样简便。</span><br><span class="line">map=HashMap&#123;a=<span class="number">1</span>,b=<span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(map.a)</span><br><span class="line">map.a=<span class="number">3</span></span><br><span class="line">取长度运算符#可以获取Java中array，List,Map,Set，String的长度。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>14.1 canvas 模块</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/14.1%20canvas%20%E6%A8%A1%E5%9D%97-2021-11-07%2020:55:04/</url>
    <content><![CDATA[<h1>14.1 canvas 模块</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;canvas&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.*&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua&#x27;</span>)</span><br><span class="line"></span><br><span class="line">paint=Paint()</span><br><span class="line">paint.setARGB(<span class="number">100</span>,<span class="number">0</span>,<span class="number">250</span>,<span class="number">0</span>)</span><br><span class="line">paint.setStrokeWidth(<span class="number">20</span>)</span><br><span class="line">paint.setTextSize(<span class="number">28</span>)</span><br><span class="line"></span><br><span class="line">sureface = SurfaceView(activity);</span><br><span class="line">callback=SurfaceHolder_Callback&#123;</span><br><span class="line">  surfaceChanged=<span class="function"><span class="keyword">function</span><span class="params">(holder,format,width,height)</span></span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  surfaceCreated=<span class="function"><span class="keyword">function</span><span class="params">(holder)</span></span></span><br><span class="line">    ca=canvas.lockCanvas(holder)</span><br><span class="line">    <span class="keyword">if</span> (ca~=<span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">      ca:drawRGB(<span class="number">0</span>,<span class="number">79</span>,<span class="number">90</span>)</span><br><span class="line">      ca:drawRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">300</span>,paint)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    canvas.unlockCanvasAndPost(holder,ca)</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  surfaceDestroyed=<span class="function"><span class="keyword">function</span><span class="params">(holder)</span></span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line">holder=sureface.getHolder()</span><br><span class="line">holder.addCallback(callback)</span><br><span class="line">activity.setContentView(sureface)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>14.3 http 同步网络模块</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/14.3%20http%20%E5%90%8C%E6%AD%A5%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9D%97-2021-11-07%2020:55:43/</url>
    <content><![CDATA[<h1>14.3 http 同步网络模块</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">body,cookie,code,headers=http.get(url [,cookie,ua,header])</span><br><span class="line">body,cookie,code,headers=http.post(url ,postdata [,cookie,ua,header])</span><br><span class="line">code,headers=http.download(url [,cookie,ua,ref,header])</span><br><span class="line">body,cookie,code,headers=http.upload(url ,datas ,files [,cookie,ua,header])</span><br><span class="line">参数说明</span><br><span class="line">url 网址</span><br><span class="line">postdata post的字符串或字符串数据组表</span><br><span class="line">datas upload的字符串数据组表</span><br><span class="line">files upload的文件名数据表</span><br><span class="line">cookie 网页要求的cookie</span><br><span class="line">ua 浏览器识别</span><br><span class="line">ref 来源页网址</span><br><span class="line">header http请求头</span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;http&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--get函数以get请求获取网页，参数为请求的网址与cookie</span></span><br><span class="line">body,cookie,code,headers=http.get(<span class="string">&quot;http://www.androlua.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--post函数以post请求获取网页，通常用于提交表单，参数为请求的网址，要发送的内容与cookie</span></span><br><span class="line">body,cookie,code,headers=http.post(<span class="string">&quot;http://androlua.com/Login.Asp?Login=Login&amp;Url=http://androlua.com/bbs/index.asp&quot;</span>,<span class="string">&quot;name=用户名&amp;pass=密码&amp;ki=1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--download函数和get函数类似，用于下载文件，参数为请求的网址，保存文件的路径与cookie</span></span><br><span class="line">http.download(<span class="string">&quot;http://androlua.com&quot;</span>,<span class="string">&quot;/sdcard/a.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--upload用于上传文件，参数是请求的网址，请求内容字符串部分，格式为以key=value形式的表，请求文件部分，格式为key=文件路径的表，最后一个参数为cookie</span></span><br><span class="line">http.upload(<span class="string">&quot;http://androlua.com&quot;</span>,&#123;title=<span class="string">&quot;标题&quot;</span>,msg=<span class="string">&quot;内容&quot;</span>&#125;,&#123;file1=<span class="string">&quot;/sdcard/1.txt&quot;</span>,file2=<span class="string">&quot;/sdcard/2.txt&quot;</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>14.2 OpenGL 模块</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/14.2%20OpenGL%20%E6%A8%A1%E5%9D%97-2021-11-07%2020:55:25/</url>
    <content><![CDATA[<h1>14.2 OpenGL 模块</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;gl&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.opengl.*&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua&#x27;</span>)</span><br><span class="line"><span class="comment">--activity.setTheme( android.R.style.Theme_Holo_Light_NoActionBar_Fullscreen)</span></span><br><span class="line"></span><br><span class="line">mTriangleData =&#123;</span><br><span class="line">  <span class="number">0.0</span>, <span class="number">0.6</span>, <span class="number">0.0</span>,</span><br><span class="line">  <span class="number">-0.6</span>, <span class="number">0.0</span>, <span class="number">0.0</span>,</span><br><span class="line">  <span class="number">0.6</span>, <span class="number">0.0</span>, <span class="number">0.0</span>,</span><br><span class="line">&#125;;</span><br><span class="line">mTriangleColor = &#123;</span><br><span class="line">  <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">  <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">sr=GLSurfaceView.Renderer&#123;</span><br><span class="line">  onSurfaceCreated=<span class="function"><span class="keyword">function</span><span class="params">(gl2, config)</span></span></span><br><span class="line">    gl.glDisable(gl.GL_DITHER);</span><br><span class="line">    gl.glHint(gl.GL_PERSPECTIVE_CORRECTION_HINT, gl.GL_FASTEST);</span><br><span class="line">    gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    gl.glShadeModel(gl.GL_SMOOTH);</span><br><span class="line">    gl.glClearDepth(<span class="number">1.0</span>)</span><br><span class="line">    gl.glEnable(gl.GL_DEPTH_TEST);</span><br><span class="line">    gl.glDepthFunc(gl.GL_LEQUAL);</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onDrawFrame=<span class="function"><span class="keyword">function</span><span class="params">(gl2, config)</span></span></span><br><span class="line">    gl.glClear(gl.GL_COLOR_BUFFER_BIT | gl.GL_DEPTH_BUFFER_BIT);</span><br><span class="line">    gl.glMatrixMode(gl.GL_MODELVIEW);</span><br><span class="line">    gl.glLoadIdentity();</span><br><span class="line">    gl.glRotate(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    gl.glTranslate(<span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    gl.glEnableClientState(gl.GL_VERTEX_ARRAY);</span><br><span class="line">    gl.glEnableClientState(gl.GL_COLOR_ARRAY);</span><br><span class="line">    gl.glVertexPointer( mTriangleData,<span class="number">3</span>);</span><br><span class="line">    gl.glColorPointer(mTriangleColor,<span class="number">4</span>);</span><br><span class="line">    gl.glDrawArrays( gl.GL_TRIANGLE_STRIP , <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">    gl.glFinish();</span><br><span class="line">    gl.glDisableClientState(gl.GL_VERTEX_ARRAY);</span><br><span class="line">    gl.glDisableClientState(gl.GL_COLOR_ARRAY);</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  onSurfaceChanged= <span class="function"><span class="keyword">function</span> <span class="params">(gl2, w, h)</span></span></span><br><span class="line">    gl.glViewport(<span class="number">0</span>, <span class="number">0</span>, w, h);</span><br><span class="line">    gl.glLoadIdentity();</span><br><span class="line">    ratio = w / h;</span><br><span class="line">    gl.glFrustum(-rautio, ratio, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">glSurefaceView = GLSurfaceView(activity);</span><br><span class="line">glSurefaceView.setRenderer(sr);</span><br><span class="line">activity.setContentView(glSurefaceView);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>14.4 import 模块</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/14.4%20import%20%E6%A8%A1%E5%9D%97-2021-11-07%2020:55:59/</url>
    <content><![CDATA[<h1>14.4 import 模块</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    EditText,</span><br><span class="line">    id=<span class="string">&quot;edit&quot;</span>,</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    Button,</span><br><span class="line">    text=<span class="string">&quot;按钮&quot;</span>,</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">    onClick=<span class="string">&quot;click&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">click</span><span class="params">()</span></span></span><br><span class="line">  Toast.makeText(activity, edit.getText().toString(), Toast.LENGTH_SHORT ).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>14.5 Http 异步网络模块</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/14.5%20Http%20%E5%BC%82%E6%AD%A5%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9D%97-2021-11-07%2020:56:16/</url>
    <content><![CDATA[<h1>14.5 Http 异步网络模块</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">获取内容 get函数</span><br><span class="line">Http.get(url,cookie,charset,header,callback)</span><br><span class="line">url 网络请求的链接网址</span><br><span class="line">cookie 使用的cookie，也就是服务器的身份识别信息</span><br><span class="line">charset 内容编码</span><br><span class="line">header 请求头</span><br><span class="line">callback 请求完成后执行的函数</span><br><span class="line"></span><br><span class="line">除了url和callback其他参数都不是必须的</span><br><span class="line"></span><br><span class="line">回调函数接受四个参数值分别是</span><br><span class="line">code 响应代码，<span class="number">2</span>xx表示成功，<span class="number">4</span>xx表示请求错误，<span class="number">5</span>xx表示服务器错误，<span class="number">-1</span>表示出错</span><br><span class="line">content 内容，如果code是<span class="number">-1</span>，则为出错信息</span><br><span class="line">cookie 服务器返回的用户身份识别信息</span><br><span class="line">header 服务器返回的头信息</span><br><span class="line"></span><br><span class="line">向服务器发送数据 post函数</span><br><span class="line">Http.post(url,data,cookie,charset,header,callback)</span><br><span class="line">除了增加了一个data外，其他参数和get完全相同</span><br><span class="line">data 向服务器发送的数据</span><br><span class="line"></span><br><span class="line">下载文件 download函数</span><br><span class="line">Http.download(url,<span class="built_in">path</span>,cookie,header,callback)</span><br><span class="line">参数中没有编码参数，其他同get，</span><br><span class="line"><span class="built_in">path</span> 文件保存路径</span><br><span class="line"></span><br><span class="line">需要特别注意一点，只支持同时有<span class="number">127</span>个网络请求，否则会出错</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Http其实是对Http.HttpTask的封装，Http.HttpTask使用的更加通用和灵活的形式</span><br><span class="line">参数格式如下</span><br><span class="line">Http.HttpTask( url, String method, cookie, charset, header, callback)</span><br><span class="line">所有参数都是必选，没有则传入<span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">url 请求的网址</span><br><span class="line">method 请求方法可以是get，post，put，delete等</span><br><span class="line">cookie 身份验证信息</span><br><span class="line">charset 内容编码</span><br><span class="line">header 请求头</span><br><span class="line">callback 回调函数</span><br><span class="line"></span><br><span class="line">该函数返回的是一个HttpTask对象，</span><br><span class="line">需要调用<span class="built_in">execute</span>方法才可以执行，</span><br><span class="line">t=Http.HttpTask(xxx)</span><br><span class="line">t.<span class="built_in">execute</span>&#123;data&#125;</span><br><span class="line"></span><br><span class="line">注意调用的括号是花括号，内容可以是字符串或者<span class="built_in">byte</span>数组，</span><br><span class="line">使用这个形式可以自己封装异步上传函数</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>14.6 bmob 网络数据库</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/14.6%20bmob%20%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E5%BA%93-2021-11-07%2020:56:36/</url>
    <content><![CDATA[<h1>14.6 bmob 网络数据库</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">b=bmob(id,key,token)</span><br><span class="line">id 用户id，key 应用key，token 用户身份识别码(可选)。</span><br><span class="line"></span><br><span class="line">b:<span class="built_in">insert</span>(key,data,callback)</span><br><span class="line">新建数据表，key 表名称，data 数据，callback 回调函数。</span><br><span class="line"></span><br><span class="line">b:update(key,id,data,callback)</span><br><span class="line">更新数据表，key 表名称id 数据id，data 数据，callback 回调函数。</span><br><span class="line"></span><br><span class="line">b:query(key,data,callback)</span><br><span class="line">查询数据表，key 表名称，data 查询规则，callback 回调函数。</span><br><span class="line"></span><br><span class="line">b:increment(key,id,k,v,c)</span><br><span class="line">原子计数，key 表名称，id 数据id，k 数据key，v 计数增加量。</span><br><span class="line"></span><br><span class="line">b:delete(key,id,callback)</span><br><span class="line">删除数据，key 表名称,id 数据id，callback 回调函数。</span><br><span class="line"></span><br><span class="line">b:sign(user,pass,mail,callback)</span><br><span class="line">注册用户，user 用户名，pass 密码，mail 电子邮箱，callback 回调函数。</span><br><span class="line"></span><br><span class="line">b:login(user <span class="keyword">or</span> mail,pass,callback)</span><br><span class="line">登录用户，user 用户名，pass 密码，mail 电子邮箱，callback 回调函数。</span><br><span class="line"></span><br><span class="line">b:upload(<span class="built_in">path</span>,callback)</span><br><span class="line">上传文件，<span class="built_in">path</span> 文件路径，callback 回调函数。</span><br><span class="line"></span><br><span class="line">b:<span class="built_in">remove</span>(url,callback)</span><br><span class="line">删除文件，url 文件路径，callback 回调函数。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注：</span><br><span class="line"><span class="number">1</span>，查询规则支持表或者json格式，具体用法参考官方api</span><br><span class="line"><span class="number">2</span>，回调函数的第一个参数为状态码，<span class="number">-1</span> 出错，其他状态码参考http状态码，第二个参数为返回内容。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>15.1 LuaUtil 辅助库</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/15.1%20LuaUtil%20%E8%BE%85%E5%8A%A9%E5%BA%93-2021-11-07%2020:56:55/</url>
    <content><![CDATA[<h1>15.1 LuaUtil 辅助库</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">copyDir(from,to)</span><br><span class="line">复制文件或文件夹，from 源路径，to 目标路径。</span><br><span class="line"></span><br><span class="line">zip(from,dir,name)</span><br><span class="line">压缩文件或文件夹，from 源路径，dir 目标文件夹，name zip文件名称。</span><br><span class="line"></span><br><span class="line">unZip(from,to)</span><br><span class="line">解压文件，from zip文件路径，to 目标路径。</span><br><span class="line"></span><br><span class="line">getFileMD5(<span class="built_in">path</span>)</span><br><span class="line">获取文件MD5值， <span class="built_in">path</span> 文件路径。</span><br><span class="line"></span><br><span class="line">getFileSha1(<span class="built_in">path</span>)</span><br><span class="line">获取文件Sha1值， <span class="built_in">path</span> 文件路径。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>15.2 LuaAdapter 适配器</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/15.2%20LuaAdapter%20%E9%80%82%E9%85%8D%E5%99%A8-2021-11-07%2020:57:17/</url>
    <content><![CDATA[<h1>15.2 LuaAdapter 适配器</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">列表适配器就是沟通数据与视图的桥梁，在AndroLua+内置了两个适配器LuaArrayAdapter和LuaAdapter</span><br><span class="line"></span><br><span class="line">LuaArrayAdapter相对比较简单，仅可以简单展示图片或文字列表</span><br><span class="line">adp=LuaArrayAdapter(activity,layout)</span><br><span class="line"></span><br><span class="line">参数中avtivity为当前活动，layout为项目布局，布局仅支持基本视图如TextView ImageView等，不支持布局嵌套</span><br><span class="line"></span><br><span class="line">使用adp.add(数据)添加数据，</span><br><span class="line">视图为TextView时，数据就是要显示的文字，</span><br><span class="line">视图为ImageView时，数据为要显示的图片的相对或绝对路径</span><br><span class="line"></span><br><span class="line">LuaAdapter可以实现复杂列表的展示，</span><br><span class="line">adp=LuaAdapter(activity,data,layout)</span><br><span class="line"></span><br><span class="line">参数中activity为当前活动，data为要显示的数据表，layout为列表布局，支持任意嵌套</span><br><span class="line"></span><br><span class="line">这里需要注意列表项目布局的id对外不可见，可以在列表点击回调函数onItemClick(l,v,p,i)的第二个参数中获得</span><br><span class="line"></span><br><span class="line">使用v.Tag.id可以获取列表项目中的具体视图对象</span><br><span class="line"></span><br><span class="line">但是不可以直接通过这个对象改变它的属性，因为在视图回收过程中你改变的属性会被覆盖或者污染，只能使用改变数据的方式改变视图属性</span><br><span class="line"></span><br><span class="line">data数据表可以是简单模式，或者完整模式，也可以使用混合模式</span><br><span class="line"></span><br><span class="line">简单模式使用id=value的形式，value使用自动判断的方式对id对应的视图设置文字或者图片</span><br><span class="line"></span><br><span class="line">完整模式使用id=&#123;field=value&#125;的形式，可以方便设置一个视图的多个值，需要注意的是，必须的列表数据的每一项使用相同的属性，不可以在某一个项目中缺少否则视图显示将会混乱</span><br><span class="line"></span><br><span class="line">混合模式是有的视图使用简单模式，有的视图使用完整模式，但是同一id的视图必须使用相同的模式</span><br><span class="line"></span><br><span class="line">数据的添加，你可以在构建前或构建后对data进行添加，删除或修改，如果列表已经显示，需要调用adp.notifyDataSetChanged()更新显示</span><br><span class="line"></span><br><span class="line">数据添加</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(data,&#123;id1=value1,id2=value2&#125;)具体说明参考上边关于三种模式的说明</span><br><span class="line"></span><br><span class="line">删除数据</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">remove</span>(data,idx)</span><br><span class="line">idx为列表项目的序号，从<span class="number">1</span>开始计数</span><br><span class="line"></span><br><span class="line">插入数据</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(data,idx,&#123;id1=value&#125;)</span><br><span class="line">数据的格式同上</span><br><span class="line">idx为列表项目序号，从<span class="number">1</span>开始计数</span><br><span class="line"></span><br><span class="line">修改数据</span><br><span class="line">data[idx].id.field=value</span><br><span class="line">idx为项目序号</span><br><span class="line">id为视图id</span><br><span class="line">field为要改变的属性</span><br><span class="line">value为属性的值</span><br><span class="line">如果该项目为简单模式</span><br><span class="line">data[idx].id=value</span><br><span class="line"></span><br><span class="line">列表回调函数的参数说明</span><br><span class="line">onItemClick=<span class="function"><span class="keyword">function</span><span class="params">(l,v,p,i)</span></span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">l 当前列表</span><br><span class="line">v 当前项目视图</span><br><span class="line">p 从<span class="number">0</span>开始计数的项目序号</span><br><span class="line">i 从<span class="number">1</span>开始计数的项目序号</span><br><span class="line"></span><br><span class="line">该说明仅针对使用LuaAdapter的列表</span><br><span class="line"></span><br><span class="line">LuaMultiAdapter多布局适配器</span><br><span class="line">和LuaAdapter用法基本一致，仅说明不同部分</span><br><span class="line">构建时传入布局数组</span><br><span class="line">添加数据时有__type属性，值为该项目使用布局在构建时的索引</span><br><span class="line">设置动画时传入动画函数数组，顺序与布局数组相同</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>15.3 LuaDialog 对话框</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/15.3%20LuaDialog%20%E5%AF%B9%E8%AF%9D%E6%A1%86-2021-11-07%2020:57:41/</url>
    <content><![CDATA[<h1>15.3 LuaDialog 对话框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">构建方法</span><br><span class="line">dlg=LuaDialog(activity,theme)</span><br><span class="line">activity 当前活动</span><br><span class="line">theme 主题(可选)</span><br><span class="line"></span><br><span class="line">公有方法</span><br><span class="line">setTitle(title)</span><br><span class="line">设置标题</span><br><span class="line">getTitle()</span><br><span class="line">获取标题</span><br><span class="line"></span><br><span class="line">setMessage(message)</span><br><span class="line">设置提示信息</span><br><span class="line">getMessage()</span><br><span class="line">获取提示信息</span><br><span class="line"></span><br><span class="line">setView(view)</span><br><span class="line">设置视图</span><br><span class="line">getView()</span><br><span class="line">获取视图</span><br><span class="line">getListView()</span><br><span class="line">获取列表</span><br><span class="line"></span><br><span class="line">setIcon(icon)</span><br><span class="line">设置图标</span><br><span class="line">setCancelable(cancelable)</span><br><span class="line">设置是否可取消</span><br><span class="line"></span><br><span class="line">setButton(text, listener)</span><br><span class="line">setPositiveButton(text, listener)</span><br><span class="line">setNegativeButton(text, listener)</span><br><span class="line">setNeutralButton(text, listener)</span><br><span class="line">setPositiveButton(text, listener)</span><br><span class="line">设置按钮</span><br><span class="line"></span><br><span class="line">setItems(items)</span><br><span class="line">设置列表数据</span><br><span class="line">setSingleChoiceItems(items, checkedItem)</span><br><span class="line">设置单选列表数据</span><br><span class="line">setMultiChoiceItems(items, checkedItems)</span><br><span class="line">设置多选列表数据</span><br><span class="line"></span><br><span class="line">setAdapter(adp)</span><br><span class="line">设置列表适配器</span><br><span class="line">setOnItemClickListener(listener)</span><br><span class="line">设置列表点击事件</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>15.4 LuaDrawable 绘制</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/15.4%20LuaDrawable%20%E7%BB%98%E5%88%B6-2021-11-07%2020:57:59/</url>
    <content><![CDATA[<h1>15.4 LuaDrawable 绘制</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">构建方法</span><br><span class="line">draw=LuaDrawable(func)</span><br><span class="line">func 绘制函数，在每次绘制时调用，传入<span class="number">3</span>个参数，canvas 画布，paint 画笔，drawable 当前实例。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>1，LuaGo内置主题</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/1%EF%BC%8CLuaGo%E5%86%85%E7%BD%AE%E4%B8%BB%E9%A2%98-2021-11-07%2020:50:40/</url>
    <content><![CDATA[<h1>1，LuaGo内置主题</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--设置主题</span></span><br><span class="line">activity.setTheme(R.Theme_Blue)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo 蓝色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo3 橙色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo11 深橙色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo13 亮灰色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo4 灰色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo10 棕色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo2 黄色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo5 黑色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo6 绿色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo8 青色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo7 紫色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">LuaGo14 水鸭色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Pink 粉色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Yellow 黄色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Black 黑色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Green 绿色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Cyan 青色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Purple 紫色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Teal 水鸭色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Blue 蓝色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Dark_Blue 深蓝色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Brown 棕色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Dark_Brown 深棕色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Gray 灰色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Dark_Gray 深灰色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Light_Gray 亮灰色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Red 红色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Dark_Red 深红色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Orange 橙色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Theme_Dark_Orange 深橙色</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>2，导入模块</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/2%EF%BC%8C%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97-2021-11-07%2020:50:58/</url>
    <content><![CDATA[<h1>2，导入模块</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">以导入import模块，简化写代码的难度。</span><br><span class="line">目前程序还内置有LuaGo,LuaGo2,zwhs(封装的中文函数库),lmaly(中文布局),RC4,base64,bmob,bson,canvas,cjson,crypt,ftp,gl,http,import,md5,smtp,socket,sensor,xml,zip,zlib等模块。</span><br><span class="line">一般模块导入形式</span><br><span class="line"><span class="keyword">local</span> http=<span class="built_in">require</span> <span class="string">&quot;http&quot;</span></span><br><span class="line">这样导入的是局部变量</span><br><span class="line">导入import后也可以使用</span><br><span class="line">import <span class="string">&quot;http&quot;</span></span><br><span class="line">的形式，导入为全局变量</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>3，导入包或类</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/3%EF%BC%8C%E5%AF%BC%E5%85%A5%E5%8C%85%E6%88%96%E7%B1%BB-2021-11-07%2020:51:18/</url>
    <content><![CDATA[<h1>3，导入包或类</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">在使用Java类之前需要导入相应的包或者类，</span><br><span class="line">可以用包名.*的形式导入导入包</span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">或者用完整的类名导入类</span><br><span class="line">import <span class="string">&quot;android.widget.Button&quot;</span></span><br><span class="line">导入内部类</span><br><span class="line">import <span class="string">&quot;android.view.View_OnClickListener&quot;</span></span><br><span class="line">或者在导入类后直接使用内部类</span><br><span class="line">View.OnClickListene</span><br><span class="line">包名和类名必须用引号包围。</span><br><span class="line">导入的类为全局变量，你可以使用</span><br><span class="line"><span class="keyword">local</span> Burton=import <span class="string">&quot;android.widget.Button&quot;</span></span><br><span class="line">的形式保存为局部变量，以解决类名冲突问题。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>4，创建布局与组件</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/4%EF%BC%8C%E5%88%9B%E5%BB%BA%E5%B8%83%E5%B1%80%E4%B8%8E%E7%BB%84%E4%BB%B6-2021-11-07%2020:51:36/</url>
    <content><![CDATA[<h1>4，创建布局与组件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">安卓使用布局与视图管理和显示用户界面。</span><br><span class="line">布局负责管理视图如何显示，如LinearLayout以线性排列视图，FrameLayout则要求自行指定停靠与位置。</span><br><span class="line">视图则显示具体内容，如TextView可以向用户展示文字内容，Button可以响应用户点击事件。</span><br><span class="line"></span><br><span class="line">创建一个线性布局</span><br><span class="line">layout=LinearLayout(activity)</span><br><span class="line">创建一个按钮视图</span><br><span class="line">button=Button(activity)</span><br><span class="line">将按钮添加到布局</span><br><span class="line">layout.addView(button)</span><br><span class="line">将刚才的内容设置为活动内容视图</span><br><span class="line">activity.setContentView(layout)</span><br><span class="line"></span><br><span class="line">注.activity是当前窗口的Context对象，如果你习惯也可以使用this</span><br><span class="line">button=Button(this)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>5，使用方法</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/5%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-2021-11-07%2020:51:57/</url>
    <content><![CDATA[<h1>5，使用方法</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">使用java方法和java中大体相同，更多细节可以网络搜索安卓api。</span><br><span class="line">比如</span><br><span class="line">设置按钮文字</span><br><span class="line">button.setText(<span class="string">&quot;按钮&quot;</span>)</span><br><span class="line">获取按钮文字</span><br><span class="line">text=button.getText()</span><br><span class="line"></span><br><span class="line">getter/setter</span><br><span class="line">Java的getxxx/isxxx方法没有参数与setxxx方法只有一个参数时可以简写，</span><br><span class="line">button.text=<span class="string">&quot;按钮&quot;</span></span><br><span class="line">x=button.text</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>6，使用事件</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/6%EF%BC%8C%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6-2021-11-07%2020:52:16/</url>
    <content><![CDATA[<h1>6，使用事件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">创建事件处理函数</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">click</span><span class="params">(s)</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;点击&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">把函数添加到事件接口</span><br><span class="line">listener=View.OnClickListener&#123;onClick = click&#125;</span><br><span class="line">把接口注册到组件</span><br><span class="line">button.setOnClickListener(listener)</span><br><span class="line"></span><br><span class="line">也可以使用匿名函数</span><br><span class="line">button.setOnClickListener&#123;onClick = <span class="function"><span class="keyword">function</span><span class="params">(s)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;点击&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onxxx事件可以简写</span><br><span class="line">button.onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">  <span class="built_in">print</span>(v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>7，回调方法</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/7%EF%BC%8C%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95-2021-11-07%2020:52:39/</url>
    <content><![CDATA[<h1>7，回调方法</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">在活动文件添加以下函数，这些函数可以在活动的特定状态执行。</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span><span class="params">(...)</span></span></span><br><span class="line">  <span class="comment">--...：newActivity传递过来的参数。</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;入口函数&quot;</span>,...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onCreate</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;窗口创建&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onStart</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;活动开始&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResume</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;返回程序&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onPause</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;活动暂停&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onStop</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;活动停止&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDestroy</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;程序已退出&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResult</span><span class="params">(name,...)</span></span></span><br><span class="line">  <span class="comment">--name：返回的活动名称</span></span><br><span class="line">  <span class="comment">--...：返回的参数</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;返回活动&quot;</span>,name,...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onCreateOptionsMenu</span><span class="params">(menu)</span></span></span><br><span class="line">  <span class="comment">--menu：选项菜单。</span></span><br><span class="line">  menu.add(<span class="string">&quot;菜单&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onOptionsItemSelected</span><span class="params">(item)</span></span></span><br><span class="line">  <span class="comment">--item：选中的菜单项</span></span><br><span class="line">  <span class="built_in">print</span>(item.Title)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onConfigurationChanged</span><span class="params">(config)</span></span></span><br><span class="line">  <span class="comment">--config：配置信息</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;屏幕方向关闭&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onAccessibilityEvent</span><span class="params">(event)</span></span></span><br><span class="line">  <span class="comment">--event：辅助功能事件</span></span><br><span class="line">  <span class="built_in">print</span>(event)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(keycode,event)</span></span></span><br><span class="line">  <span class="comment">--keycode：键值</span></span><br><span class="line">  <span class="comment">--event：事件</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;按键按下&quot;</span>,keycode)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyUp</span><span class="params">(keycode,event)</span></span></span><br><span class="line">  <span class="comment">--keycode：键值</span></span><br><span class="line">  <span class="comment">--event：事件</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;按键抬起&quot;</span>,keycode)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyLongPress</span><span class="params">(keycode,event)</span></span></span><br><span class="line">  <span class="comment">--keycode：键值</span></span><br><span class="line">  <span class="comment">--event：事件</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;按键长按&quot;</span>,keycode)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onTouchEvent</span><span class="params">(event)</span></span></span><br><span class="line">  <span class="comment">--event：事件</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;触摸事件&quot;</span>,event)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>8，按键与触控</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/8%EF%BC%8C%E6%8C%89%E9%94%AE%E4%B8%8E%E8%A7%A6%E6%8E%A7-2021-11-07%2020:52:58/</url>
    <content><![CDATA[<h1>8，按键与触控</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(code,event)</span></span></span><br><span class="line">  <span class="built_in">print</span>(code event)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onTouchEvent</span><span class="params">(event)</span></span></span><br><span class="line">  <span class="built_in">print</span>(event)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">支持onKeyDown,onKeyUp,onKeyLongPress,onTouchEvent</span><br><span class="line">函数必须返布尔值</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>9，使用数组与map</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/9%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84%E4%B8%8Emap-2021-11-07%2020:53:16/</url>
    <content><![CDATA[<h1>9，使用数组与map</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">数组</span><br><span class="line">使用 类型&#123;初始内容&#125; 或 类型[大小] 形式创建，使用 数组[数字索引] 形式取值和赋值</span><br><span class="line">array=float&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">或者</span><br><span class="line">array=int[<span class="number">10</span>]</span><br><span class="line">a=array[<span class="number">0</span>]</span><br><span class="line">array[<span class="number">0</span>]=<span class="number">4</span></span><br><span class="line">注意：数组以<span class="number">0</span>为第一个索引</span><br><span class="line"></span><br><span class="line">map</span><br><span class="line">使用 类型&#123;初始内容&#125; 或 类型() 形式创建，使用 map[索引] 形式取值和赋值</span><br><span class="line">map=HashMap()</span><br><span class="line">map.a=<span class="number">1</span></span><br><span class="line">map[<span class="number">0</span>]=<span class="number">4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>AgentWeb是一个高度封装的WebView支持库</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/AgentWeb%E6%98%AF%E4%B8%80%E4%B8%AA%E9%AB%98%E5%BA%A6%E5%B0%81%E8%A3%85%E7%9A%84WebView%E6%94%AF%E6%8C%81%E5%BA%93-2021-11-07%2021:04:12/</url>
    <content><![CDATA[<h1>AgentWeb是一个高度封装的WebView支持库</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">AgentWeb是一个高度封装的WebView支持库</span></span><br><span class="line"><span class="comment">https://github.com/Justson/AgentWeb</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">ALua示例:Github@daisukiKaffuChino</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line">import <span class="string">&quot;com.just.agentweb.*&quot;</span></span><br><span class="line"></span><br><span class="line">layout=&#123;</span><br><span class="line"> LinearLayout;</span><br><span class="line"> orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line"> layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line"> layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line"> &#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  orientation=<span class="string">&quot;horizontal&quot;</span>;</span><br><span class="line">  layout_height=<span class="string">&quot;-2&quot;</span>;</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">   Button;</span><br><span class="line">   text=<span class="string">&quot;刷新&quot;</span>;</span><br><span class="line">   layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">   id=<span class="string">&quot;button&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  &#123;</span><br><span class="line">   Button;</span><br><span class="line">   layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">   text=<span class="string">&quot;后退&quot;</span>;</span><br><span class="line">   onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span>(<span class="string">&quot;功能自己加&quot;</span>)<span class="keyword">end</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  &#123;</span><br><span class="line">   Button;</span><br><span class="line">   layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">   text=<span class="string">&quot;前进&quot;</span>;</span><br><span class="line">   onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="keyword">end</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"> &#125;;</span><br><span class="line"> &#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  id=<span class="string">&quot;web&quot;</span>;</span><br><span class="line"> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line">mAgentWeb = AgentWeb.with(this)</span><br><span class="line">.setAgentWebParent(web, LinearLayout.LayoutParams(<span class="number">-1</span>, <span class="number">-1</span>))</span><br><span class="line">.useDefaultIndicator()</span><br><span class="line"><span class="comment">--.setWebChromeClient(mWebChromeClient) --自定义WebChromeClient</span></span><br><span class="line">.createAgentWeb()</span><br><span class="line">.ready()</span><br><span class="line">.go(<span class="string">&quot;https://www.baidu.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--获取webview对象   mAgentWeb.getWebCreator().getWebView()</span></span><br><span class="line"><span class="comment">--查看cookies      AgentWebConfig.getCookiesByUrl(targetUrl)</span></span><br><span class="line"><span class="comment">--刷新cookies      AgentWebConfig.syncCookie(&quot;http://www.jd.com&quot;,&quot;ID=XXXX&quot;)</span></span><br><span class="line"><span class="comment">--清空缓存        AgentWebConfig.clearDiskCache(this.getContext());</span></span><br><span class="line"></span><br><span class="line">button.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--刷新</span></span><br><span class="line"> mAgentWeb.getWebCreator().getWebView().reload()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--网页后退</span></span><br><span class="line"><span class="keyword">if</span> mAgentWeb.back() <span class="keyword">then</span></span><br><span class="line"> mAgentWeb.getWebCreator().getWebView().goBack()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--跟随Activity Or Fragment生命周期，释放CPU更省电。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onPause</span><span class="params">()</span></span></span><br><span class="line"> mAgentWeb.getWebLifeCycle().onPause()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onResume</span><span class="params">()</span></span></span><br><span class="line"> mAgentWeb.getWebLifeCycle().onResume()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDestroy</span><span class="params">()</span></span></span><br><span class="line"> mAgentWeb.getWebLifeCycle().onDestroy()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[JavaScript 与 Lua 交互</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[Lua调用js方法</span></span><br><span class="line"><span class="comment">function callByAndroid()</span></span><br><span class="line"><span class="comment">  print(&quot;callByAndroid&quot;)</span></span><br><span class="line"><span class="comment">end</span></span><br><span class="line"><span class="comment">mAgentWeb.getJsAccessEntrace().quickCallJs(&quot;callByAndroid&quot;);</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--假如要自定义WebChromeClient的话</span></span><br><span class="line">import <span class="string">&quot;com.lua.*&quot;</span></span><br><span class="line">mWebViewClient = LuaWebChrome(LuaWebChrome.IWebChrine&#123;</span><br><span class="line"> onPageStarted=<span class="function"><span class="keyword">function</span><span class="params">(view, url, favicon)</span></span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">&lt;!--如果你的应用需要用到视频，那么请你在使用 AgentWeb 的 Activity 对应的清单文件里加入如下配置--&gt;</span></span><br><span class="line"><span class="comment">android:hardwareAccelerated=&quot;true&quot;</span></span><br><span class="line"><span class="comment">android:configChanges=&quot;orientation|screenSize&quot;</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"><span class="comment">--返回</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(keyCode, event)</span></span></span><br><span class="line"> <span class="keyword">if</span> (mAgentWeb.handleKeyEvent(keyCode,event))</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>FloatingActionButton</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/FloatingActionButton-2021-11-07%2021:04:59/</url>
    <content><![CDATA[<h1>FloatingActionButton</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.floatingactionbutton.FloatingActionButton&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> layout=&#123;FrameLayout,</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  &#123;FloatingActionButton,</span><br><span class="line">    id=<span class="string">&quot;image&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">    layout_gravity=<span class="string">&quot;bottom|right&quot;</span>,</span><br><span class="line">    layout_margin=<span class="string">&quot;24dp&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;com.bumptech.glide.Glide&quot;</span></span><br><span class="line"><span class="comment">--imgres可以是本地图片地址，或者网络链接,图片文件bytes 等等</span></span><br><span class="line"><span class="keyword">local</span> url=<span class="string">&quot;https://i01piccdn.sogoucdn.com/f0f06d6293c8a228&quot;</span>;</span><br><span class="line">Glide.with(activity).<span class="built_in">load</span>(url).into(image);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--设置点击事件###</span></span><br><span class="line">image.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;点击了FAB&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub气泡拖动条</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/GitHub%E6%B0%94%E6%B3%A1%E6%8B%96%E5%8A%A8%E6%9D%A1-2021-11-07%2021:03:25/</url>
    <content><![CDATA[<h1>GitHub气泡拖动条</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.xw.repo.BubbleSeekBar&quot;</span></span><br><span class="line"><span class="comment">--import &quot;layout&quot;</span></span><br><span class="line">layout=&#123;</span><br><span class="line"> LinearLayout,</span><br><span class="line"> orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line"> layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line"> layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line"> gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles1&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles2&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles3&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles4&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles5&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles6&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles7&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles8&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line">  BubbleSeekBar,</span><br><span class="line">  id=<span class="string">&quot;Bubbles9&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">  layout_marginTop=<span class="string">&quot;24dp&quot;</span>;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--activity.setTitle(&#x27;AndroLua+&#x27;)</span></span><br><span class="line"><span class="comment">--activity.setTheme(android.R.style.Theme_Holo_Light)</span></span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line">Bubbles1.getConfigBuilder()</span><br><span class="line">.<span class="built_in">min</span>(<span class="number">0</span>)<span class="comment">--最小值</span></span><br><span class="line">.<span class="built_in">max</span>(<span class="number">5</span>)<span class="comment">--最大值</span></span><br><span class="line">.progress(<span class="number">2</span>)<span class="comment">--设置当前进度</span></span><br><span class="line">.sectionCount(<span class="number">5</span>)<span class="comment">--设置绘制几个点</span></span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)<span class="comment">--设置轨道的颜色</span></span><br><span class="line">.secondTrackColor(<span class="number">0xFF3F51B5</span>)<span class="comment">--设置进度条色</span></span><br><span class="line">.thumbColor(<span class="number">0xFF3F51B5</span>)<span class="comment">--设置拖柄的颜色</span></span><br><span class="line">.showSectionText()<span class="comment">--显示部分文字</span></span><br><span class="line"></span><br><span class="line">.sectionTextColor(<span class="number">0xFF9E9E9E</span>)<span class="comment">--拖动条下面文字的默认颜色</span></span><br><span class="line">.sectionTextSize(<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">.showThumbText()<span class="comment">--设置突出显示下方文字</span></span><br><span class="line">.thumbTextColor(<span class="number">0xFF616161</span>)<span class="comment">--突出显示字体的颜色</span></span><br><span class="line">.thumbTextSize(<span class="number">18</span>)<span class="comment">--突出显示文字大小</span></span><br><span class="line"></span><br><span class="line">.bubbleColor(<span class="number">0xFF3F51B5</span>)<span class="comment">--气泡的颜色</span></span><br><span class="line">.bubbleTextSize(<span class="number">18</span>)<span class="comment">--气泡的字体大小</span></span><br><span class="line"></span><br><span class="line">.showSectionMark()<span class="comment">--显示标记</span></span><br><span class="line">.seekStepSection()<span class="comment">--设置滑块只移动到每个点上，不经过路径</span></span><br><span class="line">.touchToSeek()<span class="comment">--设置从触摸位置开始否则将必须点击拖块拖动</span></span><br><span class="line">.sectionTextPosition(BubbleSeekBar.TextPosition.BELOW_SECTION_MARK)<span class="comment">--设置标记下方文字显示方式</span></span><br><span class="line">.build();<span class="comment">--创建</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles2.getConfigBuilder()</span><br><span class="line">.<span class="built_in">min</span>(<span class="number">0</span>)</span><br><span class="line">.<span class="built_in">max</span>(<span class="number">5</span>)</span><br><span class="line">.progress(<span class="number">2</span>)</span><br><span class="line">.sectionCount(<span class="number">5</span>)</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFFFF5722</span>)</span><br><span class="line">.thumbColor(<span class="number">0xFFFF5722</span>)</span><br><span class="line">.showSectionText()</span><br><span class="line">.sectionTextColor(<span class="number">0xFF9E9E9E</span>)</span><br><span class="line">.sectionTextSize(<span class="number">18</span>)</span><br><span class="line">.showThumbText()</span><br><span class="line">.touchToSeek()</span><br><span class="line">.thumbTextColor(<span class="number">0xFF616161</span>)</span><br><span class="line">.thumbTextSize(<span class="number">18</span>)</span><br><span class="line">.bubbleColor(<span class="number">0xFFFF5722</span>)</span><br><span class="line">.bubbleTextSize(<span class="number">18</span>)</span><br><span class="line">.showSectionMark()<span class="comment">--显示标记</span></span><br><span class="line">.seekBySection()</span><br><span class="line">.autoAdjustSectionMark()<span class="comment">--自动寻找标记</span></span><br><span class="line">.sectionTextPosition(BubbleSeekBar.TextPosition.BELOW_SECTION_MARK)</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles3.getConfigBuilder()</span><br><span class="line">.<span class="built_in">min</span>(<span class="number">-50</span>)</span><br><span class="line">.<span class="built_in">max</span>(<span class="number">50</span>)</span><br><span class="line">.sectionCount(<span class="number">10</span>)</span><br><span class="line">.sectionTextInterval(<span class="number">2</span>)</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFF673AB7</span>)</span><br><span class="line">.seekBySection()</span><br><span class="line">.showSectionText()</span><br><span class="line">.sectionTextPosition(BubbleSeekBar.TextPosition.BELOW_SECTION_MARK)</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles4.getConfigBuilder()</span><br><span class="line">.<span class="built_in">min</span>(<span class="number">1</span>)</span><br><span class="line">.<span class="built_in">max</span>(<span class="number">1.5</span>)</span><br><span class="line">.floatType()</span><br><span class="line">.sectionCount(<span class="number">10</span>)</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFFFFC107</span>)</span><br><span class="line">.showSectionText()</span><br><span class="line">.showThumbText()<span class="comment">--在拖柄停止滑动时在下方显示一个值</span></span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles5.getConfigBuilder()</span><br><span class="line">.<span class="built_in">min</span>(<span class="number">-0.4</span>)</span><br><span class="line">.<span class="built_in">max</span>(<span class="number">0.4</span>)</span><br><span class="line">.progress(<span class="number">0</span>)</span><br><span class="line">.floatType()</span><br><span class="line">.sectionCount(<span class="number">10</span>)</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFF4CAF50</span>)</span><br><span class="line">.sectionTextInterval(<span class="number">2</span>)</span><br><span class="line">.showSectionText()</span><br><span class="line">.sectionTextPosition(BubbleSeekBar.TextPosition.BELOW_SECTION_MARK)</span><br><span class="line">.autoAdjustSectionMark()</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles6.getConfigBuilder()</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFF00BCD4</span>)</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles7.getConfigBuilder()</span><br><span class="line">.<span class="built_in">min</span>(<span class="number">1</span>)</span><br><span class="line">.<span class="built_in">max</span>(<span class="number">90</span>)</span><br><span class="line">.progress(<span class="number">0</span>)</span><br><span class="line">.sectionCount(<span class="number">9</span>)</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFF4CAF50</span>)</span><br><span class="line">.sectionTextInterval(<span class="number">2</span>)</span><br><span class="line">.showSectionText()</span><br><span class="line">.sectionTextPosition(BubbleSeekBar.TextPosition.BELOW_SECTION_MARK)</span><br><span class="line">.autoAdjustSectionMark()</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line">Bubbles7.setCustomSectionTextArray(&#123;</span><br><span class="line"> onCustomize=<span class="function"><span class="keyword">function</span><span class="params">( sectionCount, array)</span></span></span><br><span class="line">  array.clear();<span class="comment">--设置在那个点下面显示哪个文字</span></span><br><span class="line">  array.put(<span class="number">1</span>, <span class="string">&quot;bad&quot;</span>);</span><br><span class="line">  array.put(<span class="number">4</span>, <span class="string">&quot;ok&quot;</span>);</span><br><span class="line">  array.put(<span class="number">7</span>, <span class="string">&quot;good&quot;</span>);</span><br><span class="line">  array.put(<span class="number">9</span>, <span class="string">&quot;great&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> array;</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">--监听回调</span></span><br><span class="line">Bubbles7.setOnProgressChangedListener(&#123;</span><br><span class="line"> onProgressChanged=<span class="function"><span class="keyword">function</span><span class="params">( bubbleSeekBar, progress, progressFloat, fromUser)</span></span></span><br><span class="line">  <span class="keyword">if</span> progress &lt;= <span class="number">10</span></span><br><span class="line">   color = <span class="number">0xFFF44336</span></span><br><span class="line">   <span class="keyword">elseif</span> progress &lt;= <span class="number">40</span></span><br><span class="line">   color = <span class="number">0xFFE57373</span></span><br><span class="line">   <span class="keyword">elseif</span> progress &lt;= <span class="number">70</span></span><br><span class="line">   color = <span class="number">0xFF9C27B0</span></span><br><span class="line">   <span class="keyword">elseif</span> progress &lt;= <span class="number">90</span></span><br><span class="line">   color = <span class="number">0xFF00BCD4</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   color = <span class="number">0xFF4CAF50</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  bubbleSeekBar.setSecondTrackColor(color);</span><br><span class="line">  bubbleSeekBar.setThumbColor(color);</span><br><span class="line">  bubbleSeekBar.setBubbleColor(color);</span><br><span class="line"> <span class="keyword">end</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles8.getConfigBuilder()</span><br><span class="line">.<span class="built_in">max</span>(<span class="number">10</span>)</span><br><span class="line">.progress(<span class="number">0</span>)</span><br><span class="line">.sectionCount(<span class="number">10</span>)</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFF4CAF50</span>)</span><br><span class="line">.showSectionText()</span><br><span class="line">.showSectionMark()<span class="comment">--显示标记</span></span><br><span class="line">.showThumbText()</span><br><span class="line">.rtl(<span class="literal">true</span>)<span class="comment">--从右侧显示</span></span><br><span class="line">.sectionTextPosition(BubbleSeekBar.TextPosition.BELOW_SECTION_MARK)</span><br><span class="line">.autoAdjustSectionMark()</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Bubbles9.getConfigBuilder()</span><br><span class="line">.<span class="built_in">max</span>(<span class="number">3</span>)</span><br><span class="line">.progress(<span class="number">0</span>)</span><br><span class="line">.sectionCount(<span class="number">3</span>)</span><br><span class="line">.trackColor(<span class="number">0xFF757575</span>)</span><br><span class="line">.secondTrackColor(<span class="number">0xFF4CAF50</span>)</span><br><span class="line">.hideBubble()<span class="comment">--关闭气泡</span></span><br><span class="line">.sectionTextPosition(BubbleSeekBar.TextPosition.BELOW_SECTION_MARK)</span><br><span class="line">.autoAdjustSectionMark()</span><br><span class="line">.build();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>Glide加载图片</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/Glide%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87-2021-11-07%2021:03:02/</url>
    <content><![CDATA[<h1>Glide加载图片</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">新版支持了Google推荐的Glide图片加载框架，请您使用该框架，为您的项目更高效轻快的加载图片，只需一句代码，全程掌控图片对象的生命周期，您无需担心任何内存泄漏与加载速度的问题。</span><br><span class="line"><span class="comment">--代码示例</span></span><br><span class="line">import <span class="string">&quot;com.bumptech.glide.Glide&quot;</span>;</span><br><span class="line"><span class="keyword">local</span> gifUrl = <span class="string">&quot;https://c-ssl.duitang.com/uploads/item/201908/11/20190811020557_oqhbv.gif&quot;</span>;</span><br><span class="line">Glide.with(this).<span class="built_in">load</span>( gifUrl ).into(ImageView控件id);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>LuaRecyclerAdapter、RecyclerView</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/LuaRecyclerAdapter%E3%80%81RecyclerView-2021-11-07%2022:15:34/</url>
    <content><![CDATA[<h1>LuaRecyclerAdapter、RecyclerView</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--activity.setTitle(&#x27;AndroLua+&#x27;)</span></span><br><span class="line"><span class="comment">--activity.setTheme(android.R.style.Theme_Holo_Light)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;androidx.recyclerview.widget.RecyclerView&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">import <span class="string">&quot;androidx.recyclerview.widget.RecyclerView&quot;</span></span><br><span class="line">import <span class="string">&quot;androidx.recyclerview.widget.LinearLayoutManager&quot;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;com.dingyi.adapter.LuaRecyclerAdapter&quot;</span></span><br><span class="line">import <span class="string">&quot;androidx.recyclerview.widget.StaggeredGridLayoutManager&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--以下列表视图需导入对应包才能正常使用</span></span><br><span class="line"><span class="comment">--import &quot;androidx.recyclerview.widget.RecyclerView&quot;</span></span><br><span class="line"><span class="comment">--import &quot;androidx.recyclerview.widget.LinearLayoutManager&quot;</span></span><br><span class="line"><span class="comment">--import &quot;androidx.recyclerview.widget.GridLayoutManager&quot;</span></span><br><span class="line"><span class="comment">--import &quot;androidx.recyclerview.widget.StaggeredGridLayoutManager&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--设置布局管理器</span></span><br><span class="line"><span class="comment">--recycler_view.layoutManager=LinearLayoutManager(activity)</span></span><br><span class="line"><span class="comment">--recycler_view.layoutManager.setOrientation(1)--0是横向，1是竖向</span></span><br><span class="line"><span class="comment">--正常列表视图</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--recycler_view.layoutManager=GridLayoutManager(activity,3)--3为网格行数</span></span><br><span class="line"><span class="comment">--recycler_view.layoutManager.setOrientation(1)--0是横向，1是竖向</span></span><br><span class="line"><span class="comment">--网格列表视图</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--recycler_view.layoutManager=StaggeredGridLayoutManager(3,StaggeredGridLayoutManager.HORIZONTAL)--3为网格行数,可换HORIZONTAL</span></span><br><span class="line"><span class="comment">--瀑布流列表视图</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--效果请自行尝试或百度</span></span><br><span class="line"><span class="comment">--请配合正确的导入包方式，可查看群内的Recyclerview例子复制导包</span></span><br><span class="line">layout2=&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">  background=<span class="string">&quot;#f5f5f5&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    RecyclerView,</span><br><span class="line">    id=<span class="string">&quot;recycler_view&quot;</span>,</span><br><span class="line">    layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">    padding=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(layout2))</span><br><span class="line"><span class="comment">--需要ide带有 RecyclerView 哦</span></span><br><span class="line"><span class="comment">--本LuaRecyclerAdapter和LuaAdapter差不多一样 主要是支持 setImageLoader 去扩展支持更多图片加载途径</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mget</span><span class="params">(...)</span></span></span><br><span class="line">  Http.get(...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">页数=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">点击链接=&#123;&#125;</span><br><span class="line"><span class="comment">--list.setA</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 刷新<span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">local</span> url=<span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> a==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">    url=<span class="string">&#x27;https://m.yeitu.com/meinv/rentiyishu/&#x27;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    url=<span class="string">&#x27;https://m.yeitu.com/meinv/rentiyishu/&#x27;</span>..a</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  mget(url,<span class="function"><span class="keyword">function</span><span class="params">(code,body)</span></span></span><br><span class="line">    body=body:<span class="built_in">match</span>(<span class="string">&#x27;&lt;div class%=&quot;news%-list&quot;&gt;(.-)&lt;/ul&gt;&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> a,b,k,v <span class="keyword">in</span> body:<span class="built_in">gmatch</span>(<span class="string">&#x27;&lt;a href%=&quot;(.-)&quot; class%=&quot;&quot;&gt;(.-)src%=&quot;(.-)&quot; alt=&quot;(.-)&quot;&#x27;</span>) <span class="keyword">do</span></span><br><span class="line">      recycler_view.getAdapter().add&#123;img=&#123;src=<span class="string">&quot;https://www.dmoe.cc/random.php&quot;</span>&#125;,text1=v&#125;</span><br><span class="line">     点击链接[v]=a</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    recycler_view.getAdapter().notifyDataSetChanged()</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"> 页数=页数+<span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--设置布局管理器</span></span><br><span class="line">recycler_view.layoutManager=StaggeredGridLayoutManager(<span class="number">2</span>,StaggeredGridLayoutManager.VERTICAL)<span class="comment">--3为网格行数,可换HORIZONTAL</span></span><br><span class="line"><span class="comment">--设置适配器</span></span><br><span class="line">recycler_view.adapter=LuaRecyclerAdapter(this,&#123;</span><br><span class="line">  LinearLayout,<span class="comment">--线性布局</span></span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&quot;45%w&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  &#123;</span><br><span class="line">    CardView,<span class="comment">--卡片框控件</span></span><br><span class="line">    layout_margin=<span class="string">&quot;8dp&quot;</span>,<span class="comment">--布局边距</span></span><br><span class="line">    cardElevation=<span class="string">&quot;2dp&quot;</span>,<span class="comment">--卡片提升</span></span><br><span class="line">    layout_width=<span class="string">&quot;40%w&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">    layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">    cardBackgroundColor=<span class="string">&quot;#ffffff&quot;</span>,<span class="comment">--卡片背景色</span></span><br><span class="line">    radius=<span class="string">&quot;10dp&quot;</span>,<span class="comment">--圆角半径</span></span><br><span class="line">   </span><br><span class="line">    &#123;</span><br><span class="line">      ImageView,<span class="comment">--图片框控件</span></span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">      layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">      scaleType=<span class="string">&quot;fitXY&quot;</span>,<span class="comment">--图片显示类型：centerCrop   </span></span><br><span class="line">      id=<span class="string">&quot;img&quot;</span>,</span><br><span class="line">      <span class="comment">--colorFilter=&quot;#333333&quot;,--图片颜色</span></span><br><span class="line">    &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      TextView,<span class="comment">--文本框控件</span></span><br><span class="line">      text=<span class="string">&quot;文本内容&quot;</span>,<span class="comment">--文本内容</span></span><br><span class="line">      textSize=<span class="string">&quot;15sp&quot;</span>,<span class="comment">--文本大小</span></span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">      layout_gravity=<span class="string">&quot;bottom|center&quot;</span>,<span class="comment">--重力居底｜置中</span></span><br><span class="line">      gravity=<span class="string">&quot;bottom|center&quot;</span>,<span class="comment">--重力居底｜置中</span></span><br><span class="line">      textColor=<span class="string">&quot;#ffffffff&quot;</span>,<span class="comment">--文本颜色</span></span><br><span class="line">      background=<span class="string">&quot;#55000000&quot;</span>,<span class="comment">--布局背景</span></span><br><span class="line">      id=<span class="string">&#x27;text1&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)<span class="comment">--卡片框控件 结束</span></span><br><span class="line"></span><br><span class="line">recycler_view.adapter.setImageLoader &#123;</span><br><span class="line">  loadImage=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">      <span class="comment">--[===[import &quot;com.bumptech.glide.Glide&quot;</span></span><br><span class="line"><span class="comment">      Glide.with(activity).load(url).thumbnail(0.2).into(view);</span></span><br><span class="line"><span class="comment">   ]===]</span><span class="comment">--Glide加载图片</span></span><br><span class="line">    <span class="comment">--view为图片控件 url为实际加载url 可能会是本地你自己去慢慢处理吧</span></span><br><span class="line">    task(<span class="string">[[require &quot;import&quot; url=... return loadbitmap(url)]]</span>, url, <span class="function"><span class="keyword">function</span><span class="params">(bmp)</span></span></span><br><span class="line">        view.setImageBitmap(bmp)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;<span class="comment">--默认的加载图片接口 必须加上 不然没法加载图片</span></span><br><span class="line"></span><br><span class="line">刷新(页数)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>LuaWebView-Js交互lua</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/LuaWebView-Js%E4%BA%A4%E4%BA%92lua-2021-11-07%2022:15:54/</url>
    <content><![CDATA[<h1>LuaWebView-Js交互lua</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.androlua.*&quot;</span></span><br><span class="line"><span class="comment">--require &quot;layout&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua+&#x27;</span>)</span><br><span class="line">activity.setTheme(android.R.style.Theme_Holo_Light)</span><br><span class="line"><span class="comment">--activity.setContentView(loadlayout(layout.main))</span></span><br><span class="line"></span><br><span class="line">layout=LinearLayout(activity)</span><br><span class="line">activity.setContentView(layout)</span><br><span class="line"></span><br><span class="line">web=LuaWebView(activity)</span><br><span class="line">web.getSettings().setDefaultTextEncodingName(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">web.getSettings().setJavaScriptEnabled(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jjs=&#123;</span><br><span class="line"> aa=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">  <span class="built_in">print</span> (<span class="string">&quot;aa&quot;</span>..v)</span><br><span class="line"> <span class="keyword">end</span>,</span><br><span class="line"> bb=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;bb&quot;</span></span><br><span class="line"> <span class="keyword">end</span>,</span><br><span class="line"> cc=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  web.loadUrl(<span class="string">&quot;javascript:showaa(&#x27;123&#x27;)&quot;</span>)</span><br><span class="line">  <span class="built_in">print</span><span class="string">&quot;cc&quot;</span></span><br><span class="line"> <span class="keyword">end</span>,</span><br><span class="line"> dd=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  web.loadUrl(<span class="string">&quot;javascript:showbb(&#x27;456&#x27;)&quot;</span>)</span><br><span class="line">  <span class="built_in">print</span><span class="string">&quot;dd&quot;</span></span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">web.addJSInterface(&#123;</span><br><span class="line"> <span class="built_in">execute</span>=<span class="function"><span class="keyword">function</span><span class="params">(s)</span></span></span><br><span class="line">  <span class="keyword">if</span> s == <span class="string">&quot;退出页面&quot;</span> <span class="keyword">then</span></span><br><span class="line">   <span class="comment">-- activity.finish()</span></span><br><span class="line">   AlertDialog.Builder(this)</span><br><span class="line">   .setTitle(<span class="string">&quot;标题&quot;</span>)</span><br><span class="line">   .setMessage(<span class="string">&quot;消息&quot;</span>)</span><br><span class="line">   .setPositiveButton(<span class="string">&quot;积极&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span> <span class="built_in">print</span><span class="string">&quot;点击了积极按钮&quot;</span><span class="keyword">end</span>&#125;)</span><br><span class="line">   .setNeutralButton(<span class="string">&quot;中立&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">   .setNegativeButton(<span class="string">&quot;否认&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">   .show()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> s</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&#125;, <span class="string">&quot;lua&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[js=&#123;</span></span><br><span class="line"><span class="comment">execute=function(s)</span></span><br><span class="line"><span class="comment">  print(s)</span></span><br><span class="line"><span class="comment">  return s</span></span><br><span class="line"><span class="comment">  end&#125;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--web.addJSInterface(js,&quot;lua&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--web.addJSInterface(js,&quot;androlua&quot;)</span></span><br><span class="line">web.loadUrl(<span class="string">&quot;file://&quot;</span>..activity.getLuaDir()..<span class="string">&quot;/res/官网.html&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">layout.addView(web)</span><br><span class="line"></span><br><span class="line"><span class="comment">--点击icon图片测试</span></span><br><span class="line"><span class="comment">--html部分的代码</span></span><br><span class="line"><span class="comment">--[[&lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">function aa()&#123;</span></span><br><span class="line"><span class="comment">    var str = androlua.aa(&quot;cccc&quot;);</span></span><br><span class="line"><span class="comment">    alert(str);</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  function aaa()&#123;</span></span><br><span class="line"><span class="comment">      var str = lua.execute(&quot;退出页面&quot;);</span></span><br><span class="line"><span class="comment">     </span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    function bbb()&#123;</span></span><br><span class="line"><span class="comment">        var str = window.androlua.jss().bb();</span></span><br><span class="line"><span class="comment">        alert(&quot;ddddd&quot;);</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      function ccc()&#123;</span></span><br><span class="line"><span class="comment">          var str = window.androlua.dd();</span></span><br><span class="line"><span class="comment">          alert(str);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        function showaa(aaa)&#123;</span></span><br><span class="line"><span class="comment">            document.getElementById(&quot;id_input&quot;).value = &quot;Java调用Html:&quot;+aaa;</span></span><br><span class="line"><span class="comment">          &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          function showbb( param )&#123;</span></span><br><span class="line"><span class="comment">              document.getElementById(&quot;id_input2&quot;).value = &quot;Java调用Html : &quot; + param;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            &lt;/script&gt;]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>LuaWebView漏洞存在</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/LuaWebView%E6%BC%8F%E6%B4%9E%E5%AD%98%E5%9C%A8-2021-11-07%2021:03:50/</url>
    <content><![CDATA[<h1>LuaWebView漏洞存在</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">漏洞原理:</span><br><span class="line">此漏洞类似于 <span class="number">2013</span> 年曝出的 WebView 漏洞，于 Android <span class="number">4.2</span> 修复</span><br><span class="line">（https://security.tencent.com/lucky/check_tools.html）。</span><br><span class="line"></span><br><span class="line">AndroLua+，Fusion App1<span class="number">.3</span>旧版本 使用的 LuaWebView 利用 WebView 的 addJavascriptInterface 方法给网页提供了调用 Lua 函数的接口，名称为 JsInterface ，内部有 callLuaFunction 方法，用它可以调用任意 Lua 函数。</span><br><span class="line"></span><br><span class="line"><span class="comment">--有可能被使用fa旧版本，Androlua+的同行做恶搞工程，运行前请看代码</span></span><br><span class="line"> </span><br><span class="line">利用方法:</span><br><span class="line">在 HTML 网页中插入 JavaScript 脚本令客户端运行来调用此接口。</span><br><span class="line"></span><br><span class="line">示例代码:</span><br><span class="line">最简单的，调用FA的“退出程序”函数，直接退出应用：JsInterface.callLuaFunction(<span class="string">&quot;退出程序&quot;</span>);</span><br><span class="line"></span><br><span class="line">其它：</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">JsInterface.callLuaFunction(<span class="string">&quot;require&quot;</span>,<span class="string">&quot;import&quot;</span>);</span><br><span class="line"><span class="comment">--导入AndroLua的import模块,方便进行下一步操作</span></span><br><span class="line"></span><br><span class="line">JsInterface.callLuaFunction(<span class="string">&quot;task&quot;</span>,<span class="string">&quot;os.remove(activity.getLuaDir()..&quot;</span>/main.lua<span class="string">&quot;)&quot;</span>);</span><br><span class="line"><span class="comment">--调用task函数,执行任意代码（示例为删除运行目录下的main.lua文件，使程序无法正常运行）</span></span><br><span class="line"></span><br><span class="line">JsInterface.callLuaFunction(<span class="string">&quot;task&quot;</span>,<span class="string">&quot;os.exit()&quot;</span>)<span class="string">&quot;);</span></span><br><span class="line"><span class="string">--同上（但内容为退出程序）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">检查漏洞:</span></span><br><span class="line"><span class="string">加载此Js以检查漏洞: </span></span><br><span class="line"><span class="string">alert(&quot;</span>漏洞可能<span class="string">&quot;+(window[&quot;</span>JsInterface<span class="string">&quot;]&amp;&amp;window[&quot;</span>JsInterface<span class="string">&quot;][&quot;</span>callLuaFunction<span class="string">&quot;]?&quot;</span>存在<span class="string">&quot;:&quot;</span>不存在<span class="string">&quot;))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">当然，不如直接试下攻击: javascript:JsInterface.callLuaFunction(&quot;</span><span class="built_in">print</span><span class="string">&quot;,&quot;</span>漏洞存在<span class="string">&quot;)，如果没有看到任何消息，就说明可能不存在这个漏洞</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">为什么是可能而不是肯定？因为漏洞可能存在于其它名称的接口中...没有进行扫描</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">危害:</span></span><br><span class="line"><span class="string">Fusion App 能做的，网页都能做，包括：删除所有文件、窃取设备文件、获取其它网站的Cookie及修改正常代码使之不按开发者意愿运行（如：拦截应用的“登录”功能，发送密码到攻击者）等等</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">--原文链接:壹影博客  https://bk.yyge.net/?post=113</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">--修复LuaWebView漏洞，dingyi大佬分享的，</span></span><br><span class="line"><span class="string">浏览器id.addJsInterface(&#123;</span></span><br><span class="line"><span class="string">  execute=function()end</span></span><br><span class="line"><span class="string">&#125;,&quot;</span>androlua<span class="string">&quot;)</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>Lua解析Markdown</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/Lua%E8%A7%A3%E6%9E%90Markdown-2021-11-07%2022:15:06/</url>
    <content><![CDATA[<h1>Lua解析Markdown</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    LuaWebView;</span><br><span class="line">    id=<span class="string">&quot;WebView&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">activity.setTheme(R.Theme_Blue)</span><br><span class="line">activity.setTitle(<span class="string">&quot;Lua解析Markdown&quot;</span>)</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line">md=<span class="built_in">require</span> <span class="string">&quot;md&quot;</span></span><br><span class="line">data=md<span class="string">[[```</span></span><br><span class="line"><span class="string">    function fun()&#123;</span></span><br><span class="line"><span class="string">         echo &quot;这是一句非常牛逼的代码&quot;;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    fun();</span></span><br></pre></td></tr></table></figure>
<h1>Markdown</h1>
<hr>
<h1>Header 1</h1>
<h2 id="Header-2">Header 2</h2>
<h3 id="Header-3">Header 3</h3>
<h4 id="Header-4">Header 4</h4>
<h2 id="Paragraph">Paragraph</h2>
<p>Paragraph <strong>bold</strong> <em>italic</em> <code>code</code>.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do<br>
eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad<br>
minim veniam, quis nostrud exercitation ullamco laboris nisi ut<br>
aliquip ex ea commodo consequat.</p>
<p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum<br>
dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non<br>
proident, sunt in culpa qui officia deserunt mollit anim id est<br>
laborum.</p>
<h2 id="Quote">Quote</h2>
<blockquote>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do<br>
eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad<br>
minim veniam, quis nostrud exercitation ullamco laboris nisi ut<br>
aliquip ex ea commodo consequat.</p>
</blockquote>
<blockquote>
<p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum<br>
dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non<br>
proident, sunt in culpa qui officia deserunt mollit anim id est<br>
laborum.</p>
</blockquote>
<h2 id="List">List</h2>
<ul>
<li>Item</li>
<li>Item
<ul>
<li>subitem</li>
<li>subitem</li>
</ul>
</li>
<li>Item
<ol>
<li>One item</li>
<li>Two items</li>
</ol>
</li>
<li>Item</li>
</ul>
<h2 id="Ordered-list">Ordered list</h2>
<ol>
<li>One item</li>
<li>Two items</li>
</ol>
<h2 id="Link">Link</h2>
<p><a href="https://k.weidian.com/jXRHGlpv">MarkdownView</a></p>
<h2 id="Image">Image</h2>
<p><img src="cat.jpg" alt="cat"></p>
<h2 id="Code">Code</h2>
<pre><code>proc wobble()
&#123;
    return false;
&#125;
</code></pre>
<p>]]<br>
WebView.loadDataWithBaseURL(“”,data,“text/html”,“utf-8”,nil)</p>
<pre><code>


</code></pre>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>Material消息提示Snackbar</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/Material%E6%B6%88%E6%81%AF%E6%8F%90%E7%A4%BASnackbar-2021-11-07%2022:14:02/</url>
    <content><![CDATA[<h1>Material消息提示Snackbar</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.View&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.snackbar.Snackbar&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> anchor=activity.findViewById(android.R.id.content)</span><br><span class="line"></span><br><span class="line">Snackbar.make(anchor, <span class="string">&quot;Snackbar提示消息&quot;</span>, Snackbar.LENGTH_LONG).setAction(<span class="string">&quot;按钮&quot;</span>, View.OnClickListener&#123;</span><br><span class="line">  onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;点击了按钮&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;).show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>ShareCompat 分享文本</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/ShareCompat%20%E5%88%86%E4%BA%AB%E6%96%87%E6%9C%AC-2021-11-07%2022:14:42/</url>
    <content><![CDATA[<h1>ShareCompat 分享文本</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--分享媒体资源或文本信息给手机上的其它应用是我们的App常用需求之一。 想要更兼容、更便捷的分享内容到其它应用，请您参考本示例，使用AndroidX框架中的ShareCompat分享框架，为您的App实现分享功能</span></span><br><span class="line">import <span class="string">&quot;androidx.core.app.ShareCompat&quot;</span></span><br><span class="line">ShareCompat.IntentBuilder.from(activity)</span><br><span class="line">.setText(<span class="string">&quot;文本内容&quot;</span>)</span><br><span class="line">.setType(<span class="string">&quot;text/plain&quot;</span>)</span><br><span class="line">.startChooser()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>MaterialCardView</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/MaterialCardView-2021-11-07%2022:14:20/</url>
    <content><![CDATA[<h1>MaterialCardView</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.textfield.*&quot;</span></span><br><span class="line">import <span class="string">&quot;androidx.appcompat.widget.Toolbar&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.button.MaterialButton&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.appbar.AppBarLayout&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.card.MaterialCardView&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> view_table=</span><br><span class="line">&#123;LinearLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">  orientation=<span class="number">1</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    AppBarLayout,</span><br><span class="line">    layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      Toolbar,</span><br><span class="line">      layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">      <span class="comment">--subTitle=&quot;&quot;,</span></span><br><span class="line">      title=<span class="string">&quot;MaterialCardView&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;MaterialCardView,</span><br><span class="line">    id=<span class="string">&quot;cardview&quot;</span>,<span class="comment">--设置ID</span></span><br><span class="line">    layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">    layout_margin=<span class="string">&quot;24dp&quot;</span>,</span><br><span class="line">    <span class="comment">--strokeWidth=&quot;2dp&quot;, --边框宽度</span></span><br><span class="line">    <span class="comment">--strokeColor=&quot;#03DAC5&quot;, --边框颜色</span></span><br><span class="line">    cardBackgroundColor=<span class="string">&quot;#ffffff&quot;</span>,<span class="comment">--卡片背景色</span></span><br><span class="line">    cardElevation=<span class="string">&quot;2dp&quot;</span>,<span class="comment">--卡片阴影强度</span></span><br><span class="line">    radius=<span class="string">&quot;4dp&quot;</span>,<span class="comment">--卡片圆角幅度    </span></span><br><span class="line">    &#123;LinearLayout,</span><br><span class="line">      layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">      layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">      orientation=<span class="number">1</span>,</span><br><span class="line">      padding=<span class="string">&quot;24dp&quot;</span>,</span><br><span class="line">      &#123;TextView,</span><br><span class="line">        id=<span class="string">&quot;title&quot;</span>,</span><br><span class="line">        textSize=<span class="string">&quot;18sp&quot;</span>,</span><br><span class="line">        text=<span class="string">&quot;什么是MaterialCardView？&quot;</span>,</span><br><span class="line">        textColor=<span class="string">&quot;#000000&quot;</span>,</span><br><span class="line">        textStyle=<span class="string">&quot;bold&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;TextView,</span><br><span class="line">        id=<span class="string">&quot;message&quot;</span>,</span><br><span class="line">        textSize=<span class="string">&quot;16sp&quot;</span>,</span><br><span class="line">        text=<span class="string">&quot;MaterialCardView 是 CardView 的拓展，它继承与 CardView，所以 CardView 具备的它都具备，除此之外，它还在 CardView 的基础上增加了可以绘制边框这一特性，分别为 strokeColor 和 strokeWidth 这两个属性&quot;</span>,</span><br><span class="line">        layout_marginTop=<span class="string">&quot;8dp&quot;</span>,</span><br><span class="line">        textColor=<span class="string">&quot;#444444&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    MaterialButton,</span><br><span class="line">    id=<span class="string">&quot;button&quot;</span>,</span><br><span class="line">    text=<span class="string">&quot;设置边框&quot;</span>,</span><br><span class="line">    layout_gravity=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    layout_marginRight=<span class="string">&quot;24dp&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(view_table))</span><br><span class="line">activity.window.statusBarColor=Color.parseColor(<span class="string">&quot;#03DAC5&quot;</span>)</span><br><span class="line"></span><br><span class="line">button.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  cardview.strokeWidth=<span class="number">4</span></span><br><span class="line">  cardview.strokeColor=Color.parseColor(<span class="string">&quot;#03DAC5&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>TextInputLayout</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/TextInputLayout-2021-11-07%2022:13:37/</url>
    <content><![CDATA[<h1>TextInputLayout</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.textfield.*&quot;</span></span><br><span class="line">import <span class="string">&quot;androidx.appcompat.widget.Toolbar&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.button.MaterialButton&quot;</span></span><br><span class="line">import <span class="string">&quot;com.google.android.material.appbar.AppBarLayout&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> view_table=</span><br><span class="line">&#123;LinearLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">  orientation=<span class="number">1</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    AppBarLayout,</span><br><span class="line">    layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      Toolbar,</span><br><span class="line">      layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">      <span class="comment">--subTitle=&quot;&quot;,</span></span><br><span class="line">      title=<span class="string">&quot;TextInputLayout使用示例&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;TextInputLayout,</span><br><span class="line">    id=<span class="string">&quot;input_layout&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">    padding=<span class="string">&quot;24dp&quot;</span>,</span><br><span class="line">    helperText=<span class="string">&quot;这是输入框的帮助文本&quot;</span>,</span><br><span class="line">    <span class="comment">--prefixText=&quot;前缀文本&quot;,</span></span><br><span class="line">    <span class="comment">--suffixText=&quot;后缀文本&quot;,</span></span><br><span class="line">    <span class="comment">--error=&quot;错误提示&quot;,</span></span><br><span class="line">    layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">    hint=<span class="string">&quot;Text Input&quot;</span>,<span class="comment">--设置输入框提示文本</span></span><br><span class="line">    &#123;TextInputEditText,</span><br><span class="line">      id=<span class="string">&quot;edit_text&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;wrap&quot;</span>,</span><br><span class="line">      layout_width=<span class="string">&quot;match&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;MaterialButton,</span><br><span class="line">    id=<span class="string">&quot;errorbutton&quot;</span>,<span class="comment">--设置id</span></span><br><span class="line">    text=<span class="string">&quot;显示错误提示&quot;</span>,</span><br><span class="line">    layout_gravity=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">    layout_marginRight=<span class="string">&quot;24dp&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(view_table))</span><br><span class="line">activity.window.statusBarColor=Color.parseColor(<span class="string">&quot;#03DAC5&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--设置密码明文显示切换按钮开关</span></span><br><span class="line">input_layout.setPasswordVisibilityToggleEnabled(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--设置点击事件</span></span><br><span class="line">errorbutton.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  input_layout.<span class="built_in">error</span>=<span class="string">&quot;这是错误信息&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>colorpicker颜色选择器</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/colorpicker%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9%E5%99%A8-2021-11-07%2021:04:39/</url>
    <content><![CDATA[<h1>colorpicker颜色选择器</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--导入colorpicker颜色选择器:https://github.com/QuadFlask/ColorPicker</span></span><br><span class="line">import <span class="string">&quot;com.flask.colorpicker.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.flask.colorpicker.builder.*&quot;</span></span><br><span class="line">pickerBuilder=ColorPickerDialogBuilder.with(activity).setTitle(<span class="string">&quot;选取颜色&quot;</span>).wheelType(ColorPickerView.WHEEL_TYPE.CIRCLE).density(<span class="number">12</span>).showColorEdit(<span class="literal">true</span>).setOnColorSelectedListener(OnColorSelectedListener&#123;</span><br><span class="line"> onColorSelected=<span class="function"><span class="keyword">function</span><span class="params">(selectedColor)</span></span></span><br><span class="line"> <span class="built_in">print</span>(tointeger(<span class="string">&quot;0x&quot;</span>..Integer.toHexString(selectedColor)))</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;).setPositiveButton(<span class="string">&quot;设置&quot;</span>, ColorPickerClickListener&#123;</span><br><span class="line"> onClick = <span class="function"><span class="keyword">function</span><span class="params">(selectedColor)</span></span></span><br><span class="line">  <span class="built_in">print</span>(tointeger(<span class="string">&quot;0x&quot;</span>..colorEdit.text))</span><br><span class="line"></span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;).setNegativeButton(<span class="string">&quot;放弃&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">pickerDialog = pickerBuilder.build()</span><br><span class="line">pickerDialog.<span class="built_in">create</span>()</span><br><span class="line">pickerDialog.Window.setWindowAnimations(R.style.dialog_anim)</span><br><span class="line">pickerDialog.show()</span><br><span class="line">colorEdit = pickerBuilder.getColorEdit()</span><br><span class="line">colorEdit.setTextColor(<span class="number">0xFD009688</span>)</span><br><span class="line">colorEdit.setBackgroundColor(<span class="number">0xffffffff</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pickerBuilder=ColorPickerDialogBuilder.with(activity).setTitle(<span class="string">&quot;选取颜色&quot;</span>).wheelType(ColorPickerView.WHEEL_TYPE.FLOWER).density(<span class="number">12</span>).showColorEdit(<span class="literal">true</span>).setOnColorSelectedListener(OnColorSelectedListener&#123;</span><br><span class="line"> onColorSelected=<span class="function"><span class="keyword">function</span><span class="params">(selectedColor)</span></span></span><br><span class="line"> <span class="built_in">print</span>(tointeger(<span class="string">&quot;0x&quot;</span>..Integer.toHexString(selectedColor)))</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;).setPositiveButton(<span class="string">&quot;设置&quot;</span>, ColorPickerClickListener&#123;</span><br><span class="line"> onClick = <span class="function"><span class="keyword">function</span><span class="params">(selectedColor)</span></span></span><br><span class="line">  <span class="built_in">print</span>(tointeger(<span class="string">&quot;0x&quot;</span>..colorEdit.text))</span><br><span class="line"></span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;).setNegativeButton(<span class="string">&quot;放弃&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">pickerDialog = pickerBuilder.build()</span><br><span class="line">pickerDialog.<span class="built_in">create</span>()</span><br><span class="line">pickerDialog.Window.setWindowAnimations(R.style.dialog_anim)</span><br><span class="line">pickerDialog.show()</span><br><span class="line">colorEdit = pickerBuilder.getColorEdit()</span><br><span class="line">colorEdit.setTextColor(<span class="number">0xFD009688</span>)</span><br><span class="line">colorEdit.setBackgroundColor(<span class="number">0xffffffff</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>activity部分API参考</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/activity%E9%83%A8%E5%88%86API%E5%8F%82%E8%80%83-2021-11-07%2020:59:07/</url>
    <content><![CDATA[<h1>activity部分API参考</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">setContentView(layout, env)</span><br><span class="line">设置布局表layout为当前activity的主视图，env是保存视图ID的表，默认是<span class="built_in">_G</span></span><br><span class="line">getGlobalData()</span><br><span class="line">获取全局数据</span><br><span class="line">setSharedData(key,value)</span><br><span class="line">设置共享数据</span><br><span class="line">getSharedData(key,def)</span><br><span class="line">获取共享数据</span><br><span class="line">getLuaPath()</span><br><span class="line">返回当前脚本路径</span><br><span class="line">getLuaPath(name)</span><br><span class="line">返回脚本当前目录的给定文件名路径</span><br><span class="line">getLuaPath(dir,name)</span><br><span class="line">返回脚本当前目录的子目录给定文件名路径</span><br><span class="line">getLuaExtPath(name)</span><br><span class="line">返回Androlua在SD的工作目录给定文件名路径</span><br><span class="line">getLuaExtPath(dir,name)</span><br><span class="line">返回Androlua在SD的工作目录的子目录给定文件名路径</span><br><span class="line">getLuaDir()</span><br><span class="line">返回脚本当前目录</span><br><span class="line">getLuaDir(name)</span><br><span class="line">返回脚本当前目录的子目录</span><br><span class="line">getLuaExtDir()</span><br><span class="line">返回Androlua在SD的工作目录</span><br><span class="line">getLuaExtDir(name)</span><br><span class="line">返回Androlua在SD的工作目录的子目录</span><br><span class="line">getWidth()</span><br><span class="line">返回屏幕宽度</span><br><span class="line">getHeight()</span><br><span class="line">返回屏幕高度，不包括状态栏与导航栏</span><br><span class="line">loadDex(<span class="built_in">path</span>)</span><br><span class="line">加载当前目录dex或jar，返回DexClassLoader</span><br><span class="line">loadLib(<span class="built_in">path</span>)</span><br><span class="line">加载当前目录c模块，返回载入后模块的返回值(通常是包含模块函数的包)</span><br><span class="line">registerReceiver(filter)</span><br><span class="line">注册一个广播接收者，当再次调用该方法时将移除上次注册的过滤器</span><br><span class="line">newActivity(req, <span class="built_in">path</span>, enterAnim, exitAnim, <span class="built_in">arg</span>)</span><br><span class="line">打开一个新activity，运行路径为<span class="built_in">path</span>的Lua文件，其他参数为可选，<span class="built_in">arg</span>为表，接受脚本为变长参数</span><br><span class="line">result&#123;...&#125;</span><br><span class="line">向来源activity返回数据，在源activity的onResult回调</span><br><span class="line">newTask(func[, update], callback)</span><br><span class="line">新建一个Task异步任务，在线程中执行func函数，其他两个参数可选，执行结束回调callback，在任务调用update函数时在UI线程回调该函数</span><br><span class="line">新建的Task在调用<span class="built_in">execute</span>&#123;&#125;时通过表传入参数，在func以<span class="built_in">unpack</span>形式接收，执行func可以返回多个值</span><br><span class="line">newThread(func, <span class="built_in">arg</span>)</span><br><span class="line">新建一个线程，在线程中运行func函数，可以以表的形式传入<span class="built_in">arg</span>，在func以<span class="built_in">unpack</span>形式接收</span><br><span class="line">新建的线程调用start()方法运行，线程为含有loop线程，在当前activity结束后自动结束loop</span><br><span class="line">newTimer(func, <span class="built_in">arg</span>)</span><br><span class="line">新建一个定时器，在线程中运行func函数，可以以表的形式传入<span class="built_in">arg</span>，在func以<span class="built_in">unpack</span>形式接收</span><br><span class="line">调用定时器的start(delay, period)开始定时器，stop()停止定时器，Enabled暂停恢复定时器，Period属性改变定时器间隔</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>lua简介</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/lua%E7%AE%80%E4%BB%8B-2021-11-07%2020:47:20/</url>
    <content><![CDATA[<h1>lua简介</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Lua 是一种轻量小巧的脚本语言，用标准C语言编写并以源代码形式开放， 其设计目的是为了嵌入应用程序中，从而为应用程序提供灵活的扩展和定制功能。</span><br><span class="line">Lua 是巴西里约热内卢天主教大学（Pontifical Catholic University of Rio de Janeiro）里的一个研究小组，由Roberto Ierusalimschy、Waldemar Celes 和 Luiz Henrique de Figueiredo所组成并于<span class="number">1993</span>年开发。</span><br><span class="line">那么我们废话不多说来写第一个 Lua 程序吧！》》</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>与标准java的不同</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E4%B8%8E%E6%A0%87%E5%87%86java%E7%9A%84%E4%B8%8D%E5%90%8C-2021-11-07%2020:48:49/</url>
    <content><![CDATA[<h1>与标准java的不同</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">java有，androlua没有</span><br><span class="line">没有new关键字，使用函数调用形式构建实例</span><br><span class="line">没有类型声明，使用<span class="keyword">local</span>声明局部变量</span><br><span class="line">不使用&#123;&#125;，使用<span class="keyword">do</span> <span class="keyword">end</span>结构</span><br><span class="line">不使用try，使用<span class="built_in">pcall</span>和<span class="built_in">xpcall</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">androlua有，java没有</span><br><span class="line">基于getter/setter的方法简写</span><br><span class="line">创建有初始内容的list和map</span><br><span class="line">使用键访问list和map内容</span><br><span class="line">不必实现接口的所有方法，且可以使用简化形式</span><br><span class="line">灵活的动态布局</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>java转lua小技巧</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/java%E8%BD%AClua%E5%B0%8F%E6%8A%80%E5%B7%A7-2021-11-07%2021:02:19/</url>
    <content><![CDATA[<h1>java转lua小技巧</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">转lua前必须要知道的是Java和lua的区别在哪里</span><br><span class="line">区别如下：</span><br><span class="line"><span class="number">1</span>、java中有很多java才有的关键和类型，lua则只有lua自己的关键字。不过lua和java也有共同的关键字</span><br><span class="line"><span class="number">2</span>、java中声明数组和实例化对象需要new关键字进行，而lua没有new和不需要自己写类型</span><br><span class="line"><span class="number">3</span>、java函数体采用的或括号包起来而lua则是用<span class="keyword">end</span>结束函数并不用花括号</span><br><span class="line"></span><br><span class="line">Java和Lua中常用的关键字</span><br><span class="line"></span><br><span class="line">Java：public,private,protected,final,static,default,void,synchronized,abstract,interface</span><br><span class="line">Lua：<span class="keyword">local</span></span><br><span class="line"></span><br><span class="line">Java常用的类型</span><br><span class="line"></span><br><span class="line">int,float,double,long,short,<span class="built_in">char</span>,boolean,<span class="built_in">byte</span>,注意的是String实际上是一个对象并不是类型</span><br><span class="line"></span><br><span class="line">变量转换</span><br><span class="line"></span><br><span class="line">Java：public static int a = <span class="number">0</span>;</span><br><span class="line">Lua：<span class="keyword">local</span> a = <span class="number">0</span> 或 a = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">Java：private static int a = <span class="number">0</span>;</span><br><span class="line">Lua：<span class="keyword">local</span> a = <span class="number">0</span> 或 a = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">Java：protected final String a = <span class="number">0</span>;</span><br><span class="line">Lua：<span class="keyword">local</span> a = <span class="number">0</span> 或 a = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">看起来很复杂这里有个记忆口诀</span><br><span class="line">如：protected final String a = <span class="number">0</span>;</span><br><span class="line">上面这个变量名为a</span><br><span class="line">可以直接把变量名左边的全部去除就行了，只保留右边</span><br><span class="line">a = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">Java：final String asd = <span class="number">0</span>;</span><br><span class="line">Lua：asd = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">函数转换</span><br><span class="line"></span><br><span class="line">Java中函数的声明结构是</span><br><span class="line">修饰符 返回类型 方法名(参数类型 a ，xxx)&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">转lua也是非常简单的</span><br><span class="line">比如下面这个</span><br><span class="line">public final void a(A a)&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">转lua</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span></span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">再比如</span><br><span class="line">public staitc String a(A a)&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">转lua</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span></span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">记忆口诀</span><br><span class="line"><span class="number">1</span>、把函数名前面的所有删除加上<span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">2、参数类型删除</span></span><br><span class="line"><span class="function">3、花括号删除加上<span class="title">end</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">public</span> <span class="title">staitc</span> <span class="title">String</span> <span class="title">a</span><span class="params">(A asd)</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">函数名是a删除前面的加上<span class="function"><span class="keyword">function</span>就是</span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">a</span></span></span><br><span class="line"><span class="function">括号中去除参数类型就是<span class="title">asd</span></span></span><br><span class="line"><span class="function">去除花括号加<span class="title">end</span>就是<span class="title">end</span></span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">a</span><span class="params">(a)</span></span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">运算符的转换</span><br><span class="line"></span><br><span class="line">JavaLua算术运算符a = a+<span class="number">1</span>a = a+<span class="number">1</span>a = a<span class="number">-1</span>a = a<span class="number">-1</span>a = a*<span class="number">1</span>a = a*<span class="number">1</span>a = a/<span class="number">1</span>a = a/<span class="number">1</span>a = a%<span class="number">1</span>a = a%<span class="number">1</span>a++a = a+<span class="number">1</span>a = a<span class="comment">--a = a-1关系运算符====!=~=&gt;&gt;&lt;&lt;&gt;=&gt;=&lt;=&lt;=位运算符&amp;&amp;||~~&lt;&lt;&lt;&lt;&gt;&gt;&gt;&gt;逻辑运算符&amp;&amp;and||or!这个比较特殊就是取反的意思，比如!a,Lua中a==false赋值运算符a=1a=1a+=2a = a + 2a-=2a = a - 2a*=2a = a * 2a/=2a = a / 2a%=2a = a % 2a&lt;&lt;=2a = a &lt;&lt; 2a&gt;&gt;=2a = a &gt;&gt; 2a&amp;=2a = a &amp; 2a^=2a = a ^ 2a|=2a = a | 2a = b?1:2 if b then a = 1 else a = 2 end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>的转换</span><br><span class="line"></span><br><span class="line">Java：</span><br><span class="line"><span class="keyword">if</span>(a==b || a==c)&#123;</span><br><span class="line"></span><br><span class="line">&#125;eles <span class="keyword">if</span>(a != c &amp;&amp; c == <span class="number">3</span> )&#123;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Lua：</span><br><span class="line"><span class="keyword">if</span> a==b <span class="keyword">or</span> a~=c <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">elseif</span> a~=c <span class="keyword">and</span> c==<span class="number">3</span> <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">记忆口诀</span><br><span class="line"><span class="number">1</span>、 去除花括号</span><br><span class="line"><span class="number">2</span>、逻辑运算符按照上面表格更改</span><br><span class="line"><span class="number">3</span>、在条件后面加上<span class="keyword">then</span></span><br><span class="line"><span class="number">4</span>、最后加上<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>循环的转换</span><br><span class="line"></span><br><span class="line">JavaLua <span class="keyword">for</span>(int i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123; &#125; <span class="keyword">for</span> i=<span class="number">0</span>,<span class="number">10</span>,<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">end</span> int i = <span class="number">0</span>; <span class="keyword">for</span>(;i&lt;<span class="number">10</span>;i++)&#123; &#125; <span class="keyword">for</span> i=<span class="number">0</span>,<span class="number">9</span>,<span class="number">1</span> <span class="keyword">do</span> <span class="keyword">end</span> int i = <span class="number">10</span>; <span class="keyword">for</span>(;i&gt;=<span class="number">10</span>;i<span class="comment">--)&#123; &#125; for i=0,10,-1 do end int i = 0; for(;i&gt;10;i=i-2)&#123; &#125; for i=0,10,-2 do end int i = 0; for(;i&gt;10;i=i+2)&#123; &#125; for i=0,10,2 do end for(;;)&#123; &#125; while true do end int[] as = new int[]&#123;1,2,3,4,5,6&#125;; for(int a : as)&#123; &#125; as = &#123;1,2,3,4,5,6&#125;; for i=1,#as-1 do end </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>循环</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(ture)&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">转lua</span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(a==<span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">转lua</span><br><span class="line"><span class="keyword">while</span> a==<span class="number">0</span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">记忆口诀</span><br><span class="line"><span class="number">1</span>、去除花括号</span><br><span class="line"><span class="number">2</span>、运算符对照上面表格修改</span><br><span class="line"><span class="number">3</span>、在条件后面加上<span class="keyword">then</span></span><br><span class="line"><span class="number">4</span>、末尾加上<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">switch的转换</span><br><span class="line"></span><br><span class="line">int a = <span class="number">10</span></span><br><span class="line">switch(a)&#123;</span><br><span class="line"></span><br><span class="line">case <span class="number">10</span>: <span class="keyword">break</span>; //可选 case <span class="number">9</span>: <span class="keyword">break</span>; //可选 default : //可选</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">转成lua</span><br><span class="line">a = <span class="number">10</span></span><br><span class="line">switch(a)</span><br><span class="line">case <span class="number">10</span></span><br><span class="line"></span><br><span class="line">case <span class="number">9</span></span><br><span class="line"></span><br><span class="line">default</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">实例化对象</span><br><span class="line"></span><br><span class="line">Java：</span><br><span class="line">String a = new String(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">Lua:</span><br><span class="line">a = String(<span class="string">&quot;123&quot;</span>)</span><br><span class="line"></span><br><span class="line">数组的转换</span><br><span class="line"></span><br><span class="line">Java:</span><br><span class="line">int[] is = new int[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">Lua:</span><br><span class="line">is = int&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">Java:</span><br><span class="line">String[] is = new String[]&#123;<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">Lua:</span><br><span class="line">is = String&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">接口的转换</span><br><span class="line"></span><br><span class="line">Java:</span><br><span class="line">Button btn = new Button(this);</span><br><span class="line">btn.setOnclickListener(new View.OnClickListener()&#123;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>关于打包</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E5%85%B3%E4%BA%8E%E6%89%93%E5%8C%85-2021-11-07%2020:58:16/</url>
    <content><![CDATA[<h1>关于打包</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">新建工程或在脚本目录新建init.lua文件。</span><br><span class="line">写入以下内容，即可将文件夹下所有lua文件打包，main.lua为程序人口。</span><br><span class="line">appname=<span class="string">&quot;demo&quot;</span></span><br><span class="line">appver=<span class="string">&quot;1.0&quot;</span></span><br><span class="line">packagename=<span class="string">&quot;com.androlua.demo&quot;</span></span><br><span class="line">path_pattern=<span class="string">&quot;.*alp&quot;</span><span class="comment">--设置关联文件</span></span><br><span class="line"><span class="comment">--调试模式</span></span><br><span class="line">debugmode=<span class="literal">false</span><span class="comment">--控制print的开关。报错时会print出来否则不会</span></span><br><span class="line"></span><br><span class="line">activity.setDebug(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">目录下icon.png替换图标，welcome.png替换启动图。</span><br><span class="line">打包使用<span class="built_in">debug</span>签名。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>关于AndroLuaX+</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E5%85%B3%E4%BA%8EAndroLuaX+-2021-11-07%2020:24:29/</url>
    <content><![CDATA[<h1>关于AndroLuaX+</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">AndroLuaX+是基于开源项目AndroLua+开发的轻型脚本编程工具，使用简洁优美的lua语言，简化了繁琐的Java语句，同时支持使用大部分安卓api，免安装调试，使你在手机上开发更加轻松快捷，程序申请的权限是为了你编写程序使用，请大家放心使用，群里源码案例多，AndroLuaX+基于开源项目AndroLua+二改，所以同时也开放lua源码</span><br><span class="line">交流群：<span class="number">762838526</span></span><br><span class="line"></span><br><span class="line">项目主页 地址:https://different_worlds_6666.gitee.<span class="built_in">io</span>/luago/</span><br><span class="line"></span><br><span class="line">本程序使用了以下开源项目部分代码</span><br><span class="line"></span><br><span class="line">bson,crypt,md5</span><br><span class="line">https://github.com/cloudwu/skynet</span><br><span class="line"></span><br><span class="line">cjson</span><br><span class="line">https://sourceforge.net/projects/cjson/</span><br><span class="line"></span><br><span class="line">zlib</span><br><span class="line">https://github.com/brimworks/lua-zlib</span><br><span class="line"></span><br><span class="line">xml</span><br><span class="line">https://github.com/chukong/quick-cocos2d-x</span><br><span class="line"></span><br><span class="line">luv</span><br><span class="line">https://github.com/luvit/luv</span><br><span class="line">https://github.com/clibs/uv</span><br><span class="line"></span><br><span class="line">zip</span><br><span class="line">https://github.com/brimworks/lua-zip</span><br><span class="line">https://github.com/julienr/libzip-android</span><br><span class="line"></span><br><span class="line">luagl</span><br><span class="line">http://luagl.sourceforge.net/</span><br><span class="line"></span><br><span class="line">luasocket</span><br><span class="line">https://github.com/diegonehab/luasocket</span><br><span class="line"></span><br><span class="line">sensor</span><br><span class="line">https://github.com/ddlee/AndroidLuaActivity</span><br><span class="line"></span><br><span class="line">canvas</span><br><span class="line">由落叶似秋开发</span><br><span class="line"></span><br><span class="line">jni</span><br><span class="line">由nirenr开发</span><br><span class="line"></span><br><span class="line">AndroLua+：</span><br><span class="line">https://github.com/nirenr/AndroLua_pro</span><br><span class="line">由nirenr开发</span><br><span class="line"></span><br><span class="line">Google推荐的Glide图片加载框架:</span><br><span class="line">https://github.com/bumptech/Glide</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">颜色选择器:</span><br><span class="line">https://github.com/QuadFlask/ColorPicker</span><br><span class="line"></span><br><span class="line">AgentWeb是一个高度封装的WebView支持库:</span><br><span class="line">https://github.com/Justson/AgentWeb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使用Google Material与AndroidX AppCompat控件及类库:</span><br><span class="line">compile <span class="string">&#x27;com.android.support:multidex:1.0.1&#x27;</span></span><br><span class="line">compile  <span class="string">&#x27;androidx.appcompat:appcompat:1.1.0&#x27;</span></span><br><span class="line">compile <span class="string">&#x27;com.google.android.material:material:1.0.0&#x27;</span></span><br><span class="line">implementation <span class="string">&#x27;com.github.QuadFlask:colorpicker:0.0.15&#x27;</span></span><br><span class="line"></span><br><span class="line">	</span><br><span class="line"><span class="comment">--封装成lua，导入全部Google Material与AndroidX AppCompat控件及类库</span></span><br><span class="line"><span class="keyword">local</span> p=&#123;</span><br><span class="line">  <span class="string">&quot;androidx.annotation.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.app.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.content.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.content.res.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.graphics.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.graphics.drawable.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.text.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.view.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.view.menu.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.appcompat.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.arch.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.arch.core.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.arch.core.internal.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.arch.core.util.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.asynclayoutinflater.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.asynclayoutinflater.view.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.cardview.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.cardview.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.collection.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.coordinatorlayout.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.coordinatorlayout.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.accessibilityservice.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.app.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.content.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.content.pm.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.content.res.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.database.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.database.sqlite.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.graphics.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.graphics.drawable.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.hardware.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.hardware.display.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.hardware.fingerprint.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.internal.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.internal.view.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.math.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.net.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.os.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.provider.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.text.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.text.util.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.util.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.view.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.view.accessibility.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.view.animation.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.view.inputmethod.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.core.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.cursoradapter.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.cursoradapter.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.customview.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.customview.view.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.customview.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.documentfile.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.documentfile.provider.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.drawerlayout.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.drawerlayout.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.fragment.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.fragment.app.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.interpolator.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.interpolator.view.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.interpolator.view.animation.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.legacy.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.legacy.app.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.legacy.content.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.legacy.coreui.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.legacy.coreutils.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.legacy.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.lifecycle.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.loader.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.loader.app.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.loader.content.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.localbroadcastmanager.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.localbroadcastmanager.content.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.print.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.recyclerview.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.recyclerview.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.slidingpanelayout.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.slidingpanelayout.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.swiperefreshlayout.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.swiperefreshlayout.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.transition.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.vectordrawable.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.vectordrawable.graphics.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.vectordrawable.graphics.drawable.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.versionedparcelable.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.viewpager.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;androidx.viewpager.widget.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.animation.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.appbar.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.behavior.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.bottomappbar.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.bottomnavigation.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.bottomsheet.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.button.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.canvas.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.card.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.chip.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.circularreveal.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.circularreveal.cardview.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.circularreveal.coordinatorlayout.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.drawable.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.expandable.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.floatingactionbutton.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.internal.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.math.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.navigation.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.resources.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.ripple.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.shadow.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.shape.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.snackbar.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.stateful.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.tabs.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.textfield.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.theme.*&quot;</span> ;</span><br><span class="line">  <span class="string">&quot;com.google.android.material.transformation.*&quot;</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k,v <span class="built_in">pairs</span>(p)</span><br><span class="line">  import(v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>与标准的Lua5.3不同</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E4%B8%8E%E6%A0%87%E5%87%86%E7%9A%84Lua5.3%E4%B8%8D%E5%90%8C-2021-11-07%2020:48:24/</url>
    <content><![CDATA[<h1>与标准的Lua5.3不同</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">打开了部分兼容选项，<span class="built_in">module</span>，<span class="built_in">unpack</span>，bit32</span><br><span class="line">增加switch case default continue关键字</span><br><span class="line">增加when单行判断关键字</span><br><span class="line">增加defer延时执行关键字</span><br><span class="line">增加lambda简单匿名函数关键字</span><br><span class="line">增加a=[]形式创建数组需要形式</span><br><span class="line">支持省略写法，可不写<span class="keyword">then</span>，<span class="keyword">do</span>，<span class="keyword">in</span></span><br><span class="line">支持使用关键字作为表键</span><br><span class="line"></span><br><span class="line">增加<span class="built_in">string</span>.<span class="built_in">gfind</span>函数，用于递归返回匹配位置</span><br><span class="line"></span><br><span class="line">增加<span class="built_in">table</span>.clear函数，清空表</span><br><span class="line">增加<span class="built_in">table</span>.clone函数，克隆表</span><br><span class="line">增加<span class="built_in">table</span>.const函数，常量表禁止修改</span><br><span class="line">增加<span class="built_in">table</span>.<span class="built_in">find</span>函数，查找指定值的键</span><br><span class="line">增加<span class="built_in">table</span>.<span class="built_in">gfind</span>函数，迭代查找指定值的键</span><br><span class="line">增加<span class="built_in">table</span>.size函数，获取表所有元素的总数</span><br><span class="line"></span><br><span class="line">增加<span class="built_in">io</span>.readall函数，读取整个文件</span><br><span class="line">增加<span class="built_in">io</span>.ls函数，读取文件夹文件名列表</span><br><span class="line">增加<span class="built_in">io</span>.mkdir函数，创建文件夹</span><br><span class="line">增加<span class="built_in">io</span>.info函数，获取文件信息</span><br><span class="line">增加<span class="built_in">io</span>.isdir函数，判断是否为文件夹</span><br><span class="line"></span><br><span class="line">修改<span class="built_in">os</span>.<span class="built_in">date</span>函数，支持<span class="number">64</span>位时间</span><br><span class="line"></span><br><span class="line">增加tointeger函数，强制将数值转为整数</span><br><span class="line">修改<span class="built_in">tonumber</span>函数，支持转换Java对象</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>初识AndroLuaX+</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E5%88%9D%E8%AF%86AndroLuaX+-2021-11-07%2020:47:01/</url>
    <content><![CDATA[<h1>初识AndroLuaX+</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">AndroLuaX+可以在安卓平台上的用 Lua 开发安卓程序，不仅支持调用Java API，而且支持编写安卓界面程序，还可以将自己写的 Lua 程序打包成apk安装文件安装。Lua 语言的简单使没有任何编程经验的用户也能在短时间内开发出安卓程序，因此，在学习luagox+之前我们需要先学习 Lua 语言。</span><br><span class="line"></span><br><span class="line">快速入门</span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span> 是导入import模块，该模块集成了很多实用的函数，可以大幅度减轻写代码负担，详细函数说明参考程序帮助。</span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span> 是导入Java包。</span><br><span class="line">这里导入了android的widget和view两个包。</span><br><span class="line"></span><br><span class="line">导入包后使用类是很容易的，新建类实例和调用Lua的函数一样。</span><br><span class="line">比如新建一个TextView</span><br><span class="line">tv=TextView(activity)</span><br><span class="line">activity表示当前活动的context。</span><br><span class="line">同理新建按钮 btn=Button(activity)</span><br><span class="line"></span><br><span class="line">给视图设置属性也非常简单</span><br><span class="line">btn.text=<span class="string">&quot;按钮&quot;</span></span><br><span class="line">btn.backgroundColor=<span class="number">0xff0000ff</span></span><br><span class="line"></span><br><span class="line">添加视图事件回调函数</span><br><span class="line">btn.onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">  <span class="built_in">print</span>(v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">onClick=lambda v:t.setText(v.text)</span><br><span class="line">函数参数v是视图本身。</span><br><span class="line"></span><br><span class="line">安卓的视图需要添加到布局才能显示到活动，一般我们常用LinearLayout</span><br><span class="line">layout=LinearLayout(activity)</span><br><span class="line"></span><br><span class="line">用addView添加视图</span><br><span class="line">layout.addView(btn)</span><br><span class="line"></span><br><span class="line">最后调用activity的setContentView方法显示内容</span><br><span class="line">activity.setContentView(layout)</span><br><span class="line">由于AndroLuaX+基于androlua+所以这里演示的也是androlua的基本用法，通常我们需要新建一个工程来开发，代码的用法是相同的，具体细节请详细阅读后面的内容。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>基础代码</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E5%9F%BA%E7%A1%80%E4%BB%A3%E7%A0%81-2021-11-07%2021:01:02/</url>
    <content><![CDATA[<h1>基础代码</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">activity.setTitle(<span class="string">&#x27;Title&#x27;</span>)<span class="comment">--设置窗口标题</span></span><br><span class="line">      activity.setContentView(loadlayout(layout))<span class="comment">--设置窗口视图</span></span><br><span class="line">      activity.setTheme(android.R.style.Theme_DeviceDefault_Light)<span class="comment">--设置主题</span></span><br><span class="line">      activity.getWidth()<span class="comment">--获取屏幕宽</span></span><br><span class="line">      activity.getHeight()<span class="comment">--获取屏幕高</span></span><br><span class="line">      activity.newActivity(<span class="string">&quot;main&quot;</span>)<span class="comment">--跳转页面</span></span><br><span class="line">      activity.finish()<span class="comment">--关闭当前页面</span></span><br><span class="line">      activity.recreate()<span class="comment">--重构activity</span></span><br><span class="line">      <span class="built_in">os</span>.<span class="built_in">exit</span>()<span class="comment">--结束程序</span></span><br><span class="line">      <span class="built_in">tostring</span>()<span class="comment">--转换字符串</span></span><br><span class="line">      <span class="built_in">tonumber</span>()<span class="comment">--转换数字</span></span><br><span class="line">      tointeger()<span class="comment">--转换整数</span></span><br><span class="line">      <span class="comment">--线程</span></span><br><span class="line">      <span class="comment">--thread</span></span><br><span class="line">      thread(<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span><span class="string">&quot;线程&quot;</span><span class="keyword">end</span>)</span><br><span class="line">      <span class="comment">--task</span></span><br><span class="line">      task(<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span><span class="string">&quot;线程&quot;</span><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>字符串</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E5%AD%97%E7%AC%A6%E4%B8%B2-2021-11-07%2021:00:24/</url>
    <content><![CDATA[<h1>字符串</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a=<span class="string">&quot;String&quot;</span></span><br><span class="line">a=<span class="string">[[String]]</span></span><br><span class="line">a=<span class="string">[===[String]===]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>布局封装函数库</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E5%B8%83%E5%B1%80%E5%B0%81%E8%A3%85%E5%87%BD%E6%95%B0%E5%BA%93-2021-11-07%2021:02:43/</url>
    <content><![CDATA[<h1>布局封装函数库</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import<span class="string">&quot;Layout_of_packaging_function_library&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用方法:</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"> ScrollView,<span class="comment">--纵向滑动控件</span></span><br><span class="line"> layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line"> layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line"> overScrollMode=View.OVER_SCROLL_NEVER,<span class="comment">--隐藏圆弧阴影</span></span><br><span class="line"> verticalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏纵向滑条</span></span><br><span class="line"> &#123;</span><br><span class="line">  LinearLayout,<span class="comment">--线性布局</span></span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--布局方向</span></span><br><span class="line">  <span class="comment">-- orientation=横;</span></span><br><span class="line">  <span class="comment">-- layout_width=罢,--布局宽度</span></span><br><span class="line">  <span class="comment">-- orientation=&quot;horizontal&quot;,--水平方向</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  纽扣控件(ID,<span class="string">&quot;300dp&quot;</span>,<span class="string">&quot;300dp&quot;</span>);</span><br><span class="line">  纽扣控件(ID,<span class="string">&quot;300dp&quot;</span>,<span class="string">&quot;300dp&quot;</span>);</span><br><span class="line">  纽扣控件(ID,<span class="string">&quot;300dp&quot;</span>,<span class="string">&quot;300dp&quot;</span>);</span><br><span class="line">  纽扣控件(ID,<span class="string">&quot;300dp&quot;</span>,<span class="string">&quot;300dp&quot;</span>);</span><br><span class="line">  纽扣控件(ID,<span class="string">&quot;300dp&quot;</span>,<span class="string">&quot;300dp&quot;</span>);</span><br><span class="line">  浏览器控件(ID,宽,高,<span class="string">&quot;https://support.qq.com/embed/phone/312401?&quot;</span>,UA,JS,背景);</span><br><span class="line">  卡片圆角布局();</span><br><span class="line">  按钮控件();</span><br><span class="line">  <span class="comment">--纽扣控件(宽,高,纽扣名称,背景,填充);</span></span><br><span class="line">  <span class="comment">--纽扣控件(&quot;300dp&quot;,&quot;300dp&quot;);</span></span><br><span class="line">  <span class="comment">-- 纽扣控件(&quot;300dp&quot;,&quot;300dp&quot;);</span></span><br><span class="line">  <span class="comment">-- 纽扣控件(&quot;300dp&quot;,&quot;300dp&quot;);</span></span><br><span class="line">  <span class="comment">-- 纽扣控件(&quot;300dp&quot;,&quot;300dp&quot;);</span></span><br><span class="line">  卡片控件布局(<span class="string">&quot;xiuluo1&quot;</span>,<span class="string">&quot;浏览器&quot;</span>,<span class="string">&quot;多个引擎搜索&quot;</span>,<span class="string">&quot;icon.png&quot;</span>),</span><br><span class="line"></span><br><span class="line"> &#125;;<span class="comment">--线性布局结束!</span></span><br><span class="line"></span><br><span class="line">&#125;;<span class="comment">--纵向滑动控件结束</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 纽扣控件<span class="params">(ID,宽,高,纽扣名称,背景,填充,气泡提示,空显示)</span></span></span><br><span class="line"> <span class="keyword">return</span>&#123;</span><br><span class="line">  Button,<span class="comment">--纽扣控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  padding=填充,<span class="comment">--布局填充</span></span><br><span class="line">  <span class="built_in">error</span>=气泡提示,<span class="comment">--气泡提示</span></span><br><span class="line">  text=纽扣名称,<span class="comment">--文本内容</span></span><br><span class="line">  hint=空显示<span class="comment">--内容为空时显示</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 帧布局<span class="params">(ID,宽,高,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span>&#123;</span><br><span class="line">  FrameLayout,<span class="comment">--帧布局</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;<span class="comment">--帧布局结束</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 相对布局<span class="params">(ID,宽,高,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  RelativeLayout,<span class="comment">--相对布局</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;<span class="comment">--相对布局结束</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 绝对布局<span class="params">(ID,宽,高,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  AbsoluteLayout,<span class="comment">--绝对布局</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;<span class="comment">--绝对布局结束</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 表格布局<span class="params">(ID,宽,高,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  TableLayout,<span class="comment">--表格布局</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;<span class="comment">--表格布局结束</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 文本框控件<span class="params">(ID,宽,高,内容,大小,颜色,背景,空显示,气泡提示)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  TextView,<span class="comment">--文本框控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  text=内容,<span class="comment">--文本内容</span></span><br><span class="line">  textSize=大小,<span class="comment">--文本大小</span></span><br><span class="line">  textColor=颜色,<span class="comment">--文本颜色</span></span><br><span class="line">  hint=空显示,<span class="comment">--内容为空时显示</span></span><br><span class="line">  <span class="built_in">error</span>=气泡提示,<span class="comment">--气泡提示</span></span><br><span class="line">  <span class="comment">--singleLine=true,--禁止换行输入</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 图片框控件<span class="params">(ID,宽,高,图片,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  ImageView,<span class="comment">--图片框控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  src=图片,<span class="comment">--视图路径</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 圆形图片控件<span class="params">(ID,宽,高,图片,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  CircleImageView,<span class="comment">--圆形图片控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  src=图片,<span class="comment">--视图路径</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 卡片框控件<span class="params">(ID,宽,高,背景,提升,卡片色,圆角)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  CardView,<span class="comment">--卡片框控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  cardElevation=提升,<span class="comment">--卡片提升</span></span><br><span class="line">  cardBackgroundColor=卡片背景色,<span class="comment">--卡片背景色</span></span><br><span class="line">  radius=圆角,<span class="comment">--圆角半径</span></span><br><span class="line"> &#125;;<span class="comment">--卡片框控件结束</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 编辑框控件<span class="params">(ID,宽,高,内容,大小,背景,空显示,气泡提示)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  EditText,<span class="comment">--编辑框控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  text=内容,<span class="comment">--文本内容</span></span><br><span class="line">  textSize=大小,<span class="comment">--文本大小</span></span><br><span class="line">  hint=空显示,<span class="comment">--内容为空时显示</span></span><br><span class="line">  <span class="built_in">error</span>=气泡提示,<span class="comment">--气泡提示</span></span><br><span class="line">  <span class="comment">--singleLine=true,--禁止换行输入</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 浏览器控件<span class="params">(ID,宽,高,url,UA,JS,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  LuaWebView,<span class="comment">--浏览器控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  UA=ua,</span><br><span class="line">  JS=js,</span><br><span class="line">  url=url,</span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 视频控件<span class="params">(ID,宽,高,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  VideoView,<span class="comment">--视频控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;<span class="comment">--视频控件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 水平分割线<span class="params">(ID,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  TextView,<span class="comment">--水平分割线</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;1px&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 垂直分割线<span class="params">(ID,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  TextView,<span class="comment">--垂直分割线</span></span><br><span class="line">  layout_width=<span class="string">&quot;1px&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 复选框控件<span class="params">(ID,宽,高,内容,背景,选中)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  CheckBox,<span class="comment">--复选框控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  text=内容,<span class="comment">--文本内容</span></span><br><span class="line">  checked=选中,<span class="comment">--是否选中</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 开关控件<span class="params">(ID,最小宽度,空白距离,内容,大小,颜色,开启时文字,关闭时文字)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  Switch,<span class="comment">--开关控件</span></span><br><span class="line">  switchMinWidth=最小宽度,<span class="comment">--开关最小宽度</span></span><br><span class="line">  switchPadding=空白距离,<span class="comment">--设置开关与文字的空白距离</span></span><br><span class="line">  text=内容,<span class="comment">--文本内容</span></span><br><span class="line">  textSize=大小,<span class="comment">--文本大小</span></span><br><span class="line">  textColor=颜色,<span class="comment">--文本颜色</span></span><br><span class="line">  textOff=开启时文字,<span class="comment">--设置开关checked的文字</span></span><br><span class="line">  textOn=关闭时文字,<span class="comment">--设置开关关闭时的文字  </span></span><br><span class="line">  showText=<span class="literal">true</span>,<span class="comment">--设置是否显示开关上的文字（API21及以上）</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lua</span>编辑控件<span class="params">(ID,宽,高,背景,重力分配)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  LuaEditor,<span class="comment">--lua编辑框控件</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  layout_weight=重力分配,<span class="comment">--重力分配</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 图片按钮控件<span class="params">(ID,宽,高,图片,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  ImageButton,<span class="comment">--图片按钮控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  src=图片,<span class="comment">--视图路径</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 按钮控件<span class="params">(ID,宽,高,背景)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  ToggleButton,<span class="comment">--按钮控件</span></span><br><span class="line">  id=ID,<span class="comment">--控件ID</span></span><br><span class="line">  layout_width=宽,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=高,<span class="comment">--布局高度</span></span><br><span class="line">  background=背景,<span class="comment">--布局背景</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 卡片控件布局<span class="params">(控件,圆角,文本1,文本2,图标)</span></span></span><br><span class="line"> <span class="keyword">return</span> &#123;</span><br><span class="line">  CardView,<span class="comment">--卡片框控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;60dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_margin=<span class="string">&quot;5dp&quot;</span>,<span class="comment">--布局边距</span></span><br><span class="line">  cardElevation=<span class="string">&quot;2dp&quot;</span>,<span class="comment">--卡片提升</span></span><br><span class="line">  radius=圆角;</span><br><span class="line">  &#123;</span><br><span class="line">   LinearLayout,<span class="comment">--线性布局</span></span><br><span class="line">   orientation=<span class="string">&quot;horizontal&quot;</span>,<span class="comment">--水平方向</span></span><br><span class="line">   layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">   layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">   gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">   id=控件,<span class="comment">--控件ID</span></span><br><span class="line">   &#123;</span><br><span class="line">    LinearLayout,<span class="comment">--线性布局</span></span><br><span class="line">    layout_weight=<span class="string">&quot;1&quot;</span>,<span class="comment">--重力分配</span></span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--布局方向</span></span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">    gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">    &#123;</span><br><span class="line">     TextView,<span class="comment">--文本框控件</span></span><br><span class="line">     gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">     text=文本<span class="number">1</span>,<span class="comment">--文本内容</span></span><br><span class="line">     textSize=<span class="string">&quot;13sp&quot;</span>,<span class="comment">--文本大小</span></span><br><span class="line">     textColor=<span class="string">&quot;#fffde48a&quot;</span>,<span class="comment">--文本颜色</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">     TextView,<span class="comment">--文本框控件</span></span><br><span class="line">     gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">     text=文本<span class="number">2</span>,<span class="comment">--文本内容</span></span><br><span class="line">     textSize=<span class="string">&quot;11sp&quot;</span>,<span class="comment">--文本大小</span></span><br><span class="line">     textColor=<span class="string">&quot;#fffde48a&quot;</span>,<span class="comment">--文本颜色</span></span><br><span class="line">    &#125;,</span><br><span class="line">   &#125;,<span class="comment">--线性布局 结束</span></span><br><span class="line">   &#123;</span><br><span class="line">    TextView,<span class="comment">--垂直分割线</span></span><br><span class="line">    layout_width=<span class="string">&quot;2dp&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">    layout_gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--独立重力居中</span></span><br><span class="line">    backgroundColor=<span class="string">&quot;#fffde48a&quot;</span>,<span class="comment">--背景色</span></span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">    ImageView,<span class="comment">--图片框控件</span></span><br><span class="line">    layout_width=<span class="string">&quot;56dp&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">    layout_height=<span class="string">&quot;36dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">    src=图标,<span class="comment">--视图路径</span></span><br><span class="line">    <span class="comment">--colorFilter=&quot;#333333&quot;,--图片颜色</span></span><br><span class="line">   &#125;,</span><br><span class="line">  &#125;,<span class="comment">--线性布局 结束</span></span><br><span class="line"> &#125;<span class="comment">--卡片框控件 结束</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>布局表字符串常量</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E5%B8%83%E5%B1%80%E8%A1%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E9%87%8F-2021-11-07%2020:59:32/</url>
    <content><![CDATA[<h1>布局表字符串常量</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">布局表支持属性字符串常量</span><br><span class="line"><span class="comment">-- android:drawingCacheQuality</span></span><br><span class="line">auto=<span class="number">0</span>,</span><br><span class="line">low=<span class="number">1</span>,</span><br><span class="line">high=<span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:importantForAccessibility</span></span><br><span class="line">auto=<span class="number">0</span>,</span><br><span class="line">yes=<span class="number">1</span>,</span><br><span class="line">no=<span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:layerType</span></span><br><span class="line">none=<span class="number">0</span>,</span><br><span class="line">software=<span class="number">1</span>,</span><br><span class="line">hardware=<span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:layoutDirection</span></span><br><span class="line">ltr=<span class="number">0</span>,</span><br><span class="line">rtl=<span class="number">1</span>,</span><br><span class="line">inherit=<span class="number">2</span>,</span><br><span class="line">locale=<span class="number">3</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:scrollbarStyle</span></span><br><span class="line">insideOverlay=<span class="number">0x0</span>,</span><br><span class="line">insideInset=<span class="number">0x01000000</span>,</span><br><span class="line">outsideOverlay=<span class="number">0x02000000</span>,</span><br><span class="line">outsideInset=<span class="number">0x03000000</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:visibility</span></span><br><span class="line">visible=<span class="number">0</span>,</span><br><span class="line">invisible=<span class="number">1</span>,</span><br><span class="line">gone=<span class="number">2</span>,</span><br><span class="line"></span><br><span class="line">wrap_content=<span class="number">-2</span>,</span><br><span class="line">fill_parent=<span class="number">-1</span>,</span><br><span class="line">match_parent=<span class="number">-1</span>,</span><br><span class="line"><span class="built_in">wrap</span>=<span class="number">-2</span>,</span><br><span class="line">fill=<span class="number">-1</span>,</span><br><span class="line"><span class="built_in">match</span>=<span class="number">-1</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:orientation</span></span><br><span class="line">vertical=<span class="number">1</span>,</span><br><span class="line">horizontal= <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:gravity</span></span><br><span class="line">axis_clip = <span class="number">8</span>,</span><br><span class="line">axis_pull_after = <span class="number">4</span>,</span><br><span class="line">axis_pull_before = <span class="number">2</span>,</span><br><span class="line">axis_specified = <span class="number">1</span>,</span><br><span class="line">axis_x_shift = <span class="number">0</span>,</span><br><span class="line">axis_y_shift = <span class="number">4</span>,</span><br><span class="line">bottom = <span class="number">80</span>,</span><br><span class="line">center = <span class="number">17</span>,</span><br><span class="line">center_horizontal = <span class="number">1</span>,</span><br><span class="line">center_vertical = <span class="number">16</span>,</span><br><span class="line">clip_horizontal = <span class="number">8</span>,</span><br><span class="line">clip_vertical = <span class="number">128</span>,</span><br><span class="line">display_clip_horizontal = <span class="number">16777216</span>,</span><br><span class="line">display_clip_vertical = <span class="number">268435456</span>,</span><br><span class="line"><span class="comment">--fill = 119,</span></span><br><span class="line">fill_horizontal = <span class="number">7</span>,</span><br><span class="line">fill_vertical = <span class="number">112</span>,</span><br><span class="line">horizontal_gravity_mask = <span class="number">7</span>,</span><br><span class="line">left = <span class="number">3</span>,</span><br><span class="line">no_gravity = <span class="number">0</span>,</span><br><span class="line">relative_horizontal_gravity_mask = <span class="number">8388615</span>,</span><br><span class="line">relative_layout_direction = <span class="number">8388608</span>,</span><br><span class="line">right = <span class="number">5</span>,</span><br><span class="line">start = <span class="number">8388611</span>,</span><br><span class="line">top = <span class="number">48</span>,</span><br><span class="line">vertical_gravity_mask = <span class="number">112</span>,</span><br><span class="line"><span class="keyword">end</span> = <span class="number">8388613</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:textAlignment</span></span><br><span class="line">inherit=<span class="number">0</span>,</span><br><span class="line">gravity=<span class="number">1</span>,</span><br><span class="line">textStart=<span class="number">2</span>,</span><br><span class="line">textEnd=<span class="number">3</span>,</span><br><span class="line">textCenter=<span class="number">4</span>,</span><br><span class="line">viewStart=<span class="number">5</span>,</span><br><span class="line">viewEnd=<span class="number">6</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">-- android:inputType</span></span><br><span class="line">none=<span class="number">0x00000000</span>,</span><br><span class="line">text=<span class="number">0x00000001</span>,</span><br><span class="line">textCapCharacters=<span class="number">0x00001001</span>,</span><br><span class="line">textCapWords=<span class="number">0x00002001</span>,</span><br><span class="line">textCapSentences=<span class="number">0x00004001</span>,</span><br><span class="line">textAutoCorrect=<span class="number">0x00008001</span>,</span><br><span class="line">textAutoComplete=<span class="number">0x00010001</span>,</span><br><span class="line">textMultiLine=<span class="number">0x00020001</span>,</span><br><span class="line">textImeMultiLine=<span class="number">0x00040001</span>,</span><br><span class="line">textNoSuggestions=<span class="number">0x00080001</span>,</span><br><span class="line">textUri=<span class="number">0x00000011</span>,</span><br><span class="line">textEmailAddress=<span class="number">0x00000021</span>,</span><br><span class="line">textEmailSubject=<span class="number">0x00000031</span>,</span><br><span class="line">textShortMessage=<span class="number">0x00000041</span>,</span><br><span class="line">textLongMessage=<span class="number">0x00000051</span>,</span><br><span class="line">textPersonName=<span class="number">0x00000061</span>,</span><br><span class="line">textPostalAddress=<span class="number">0x00000071</span>,</span><br><span class="line">textPassword=<span class="number">0x00000081</span>,</span><br><span class="line">textVisiblePassword=<span class="number">0x00000091</span>,</span><br><span class="line">textWebEditText=<span class="number">0x000000a1</span>,</span><br><span class="line">textFilter=<span class="number">0x000000b1</span>,</span><br><span class="line">textPhonetic=<span class="number">0x000000c1</span>,</span><br><span class="line">textWebEmailAddress=<span class="number">0x000000d1</span>,</span><br><span class="line">textWebPassword=<span class="number">0x000000e1</span>,</span><br><span class="line">number=<span class="number">0x00000002</span>,</span><br><span class="line">numberSigned=<span class="number">0x00001002</span>,</span><br><span class="line">numberDecimal=<span class="number">0x00002002</span>,</span><br><span class="line">numberPassword=<span class="number">0x00000012</span>,</span><br><span class="line">phone=<span class="number">0x00000003</span>,</span><br><span class="line">datetime=<span class="number">0x00000004</span>,</span><br><span class="line"><span class="built_in">date</span>=<span class="number">0x00000014</span>,</span><br><span class="line"><span class="built_in">time</span>=<span class="number">0x00000024</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">--android:imeOptions</span></span><br><span class="line">normal=<span class="number">0x00000000</span>,</span><br><span class="line">actionUnspecified=<span class="number">0x00000000</span>,</span><br><span class="line">actionNone=<span class="number">0x00000001</span>,</span><br><span class="line">actionGo=<span class="number">0x00000002</span>,</span><br><span class="line">actionSearch=<span class="number">0x00000003</span>,</span><br><span class="line">actionSend=<span class="number">0x00000004</span>,</span><br><span class="line">actionNext=<span class="number">0x00000005</span>,</span><br><span class="line">actionDone=<span class="number">0x00000006</span>,</span><br><span class="line">actionPrevious=<span class="number">0x00000007</span>,</span><br><span class="line">flagNoFullscreen=<span class="number">0x2000000</span>,</span><br><span class="line">flagNavigatePrevious=<span class="number">0x4000000</span>,</span><br><span class="line">flagNavigateNext=<span class="number">0x8000000</span>,</span><br><span class="line">flagNoExtractUi=<span class="number">0x10000000</span>,</span><br><span class="line">flagNoAccessoryAction=<span class="number">0x20000000</span>,</span><br><span class="line">flagNoEnterAction=<span class="number">0x40000000</span>,</span><br><span class="line">flagForceAscii=<span class="number">0x80000000</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">--android:ellipsize</span></span><br><span class="line"><span class="keyword">end</span>　　</span><br><span class="line">start 　　</span><br><span class="line">middle</span><br><span class="line">marquee</span><br><span class="line"></span><br><span class="line">相对布局rule</span><br><span class="line">layout_above=<span class="number">2</span>,</span><br><span class="line">layout_alignBaseline=<span class="number">4</span>,</span><br><span class="line">layout_alignBottom=<span class="number">8</span>,</span><br><span class="line">layout_alignEnd=<span class="number">19</span>,</span><br><span class="line">layout_alignLeft=<span class="number">5</span>,</span><br><span class="line">layout_alignParentBottom=<span class="number">12</span>,</span><br><span class="line">layout_alignParentEnd=<span class="number">21</span>,</span><br><span class="line">layout_alignParentLeft=<span class="number">9</span>,</span><br><span class="line">layout_alignParentRight=<span class="number">11</span>,</span><br><span class="line">layout_alignParentStart=<span class="number">20</span>,</span><br><span class="line">layout_alignParentTop=<span class="number">10</span>,</span><br><span class="line">layout_alignRight=<span class="number">7</span>,</span><br><span class="line">layout_alignStart=<span class="number">18</span>,</span><br><span class="line">layout_alignTop=<span class="number">6</span>,</span><br><span class="line">layout_alignWithParentIfMissing=<span class="number">0</span>,</span><br><span class="line">layout_below=<span class="number">3</span>,</span><br><span class="line">layout_centerHorizontal=<span class="number">14</span>,</span><br><span class="line">layout_centerInParent=<span class="number">13</span>,</span><br><span class="line">layout_centerVertical=<span class="number">15</span>,</span><br><span class="line">layout_toEndOf=<span class="number">17</span>,</span><br><span class="line">layout_toLeftOf=<span class="number">0</span>,</span><br><span class="line">layout_toRightOf=<span class="number">1</span>,</span><br><span class="line">layout_toStartOf=<span class="number">16</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">尺寸单位</span><br><span class="line">px=<span class="number">0</span>,</span><br><span class="line">dp=<span class="number">1</span>,</span><br><span class="line">sp=<span class="number">2</span>,</span><br><span class="line">pt=<span class="number">3</span>,</span><br><span class="line"><span class="keyword">in</span>=<span class="number">4</span>,</span><br><span class="line">mm=<span class="number">5</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>报错执行</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E6%8A%A5%E9%94%99%E6%89%A7%E8%A1%8C-2021-11-07%2021:00:44/</url>
    <content><![CDATA[<h1>报错执行</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--pcall以一种&quot;保护模式&quot;来调用第一个参数，因此pcall可以捕获函数执行中的任何错误。</span></span><br><span class="line">      <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line">      <span class="comment">--通常在错误发生时，希望落得更多的调试信息，而不只是发生错误的位置。但pcall返回时，它已经销毁了调用桟的部分内容。</span></span><br><span class="line">      <span class="comment">--Lua提供了xpcall函数，xpcall接收第二个参数——一个错误处理函数，当错误发生时，Lua会在调用桟展看（unwind）前调用错误处理函数，于是就可以在这个函数中使用debug库来获取关于错误的额外信息了。</span></span><br><span class="line">      <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">--print(&quot;正常&quot;)</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">end</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span><span class="params">(error)</span></span></span><br><span class="line">        <span class="comment">--print(&quot;错误&quot;)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">--普通对话框</span></span><br><span class="line">        AlertDialog.Builder(this)</span><br><span class="line">        .setTitle(<span class="string">&quot;代码执行错误Σ(๑º㉨º๑ )&quot;</span>)</span><br><span class="line">        .setMessage(<span class="string">&quot;代码出错路径:&quot;</span>..<span class="built_in">error</span>)</span><br><span class="line">        .setPositiveButton(<span class="string">&quot;截图发送bug&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          <span class="keyword">end</span>&#125;)</span><br><span class="line">        .setNeutralButton(<span class="string">&quot;不管它&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">        .setNegativeButton(<span class="string">&quot;取消&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">        .show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>注释</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E6%B3%A8%E9%87%8A-2021-11-07%2021:00:07/</url>
    <content><![CDATA[<h1>注释</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">单行注释 <span class="comment">--</span></span><br><span class="line">多行注释 <span class="comment">--[[]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>第一个Lua程序</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E7%AC%AC%E4%B8%80%E4%B8%AALua%E7%A8%8B%E5%BA%8F-2021-11-07%2020:47:59/</url>
    <content><![CDATA[<h1>第一个Lua程序</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">接下来我们使用 Lua 来输出<span class="string">&quot;Hello World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line"></span><br><span class="line">运行后，会在屏幕上显示 Hello world</span><br><span class="line"></span><br><span class="line">其他<span class="built_in">print</span>类型</span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">print_error(&quot;Error!&quot;)</span></span><br><span class="line"><span class="comment">print_assert(&quot;Assert!&quot;)</span></span><br><span class="line"><span class="comment">print_verbose(&quot;verbose!&quot;)</span></span><br><span class="line"><span class="comment">print_info(&quot;info!&quot;)</span></span><br><span class="line"><span class="comment">print_warning(&quot;warning!&quot;)</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>赋值</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E8%B5%8B%E5%80%BC-2021-11-07%2021:01:32/</url>
    <content><![CDATA[<h1>赋值</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--lua支持多重赋值</span></span><br><span class="line">a,b=<span class="string">&quot;String a&quot;</span>,<span class="string">&quot;String b&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--交换值</span></span><br><span class="line">a,b=<span class="string">&quot;String a&quot;</span>,<span class="string">&quot;String b&quot;</span></span><br><span class="line">a,b=b,a</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>软件基本操作</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E8%BD%AF%E4%BB%B6%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-2021-11-07%2020:45:50/</url>
    <content><![CDATA[<h1>软件基本操作</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">项目结构</span><br><span class="line">init.lua 项目配置文件</span><br><span class="line">main,lua 项目主入口文件</span><br><span class="line">layout.aly 项目默认创建的布局文件</span><br><span class="line"></span><br><span class="line">基本功能</span><br><span class="line">左箭头 撤销：撤销输入的内容</span><br><span class="line">保存：保存当前文件</span><br><span class="line">新建：新建lua代码文件或者aly布局文件，代码文件与布局文件文件名不可以相同</span><br><span class="line">重命名:长按侧滑项目列表，重命名文件或文件夹名称</span><br><span class="line">复制文件:可以把文件或文件夹复制到别的文件夹下</span><br><span class="line">调用其它程序打开:顾名思义</span><br><span class="line">以文本方式强制打开:顾名思义</span><br><span class="line">创建子页面:由作者封装的布局模板</span><br><span class="line">删除文件:请谨慎删除，删除后不可恢复</span><br><span class="line">编译：把当前文件编译为luac文件，通常用不到</span><br><span class="line">点击工程标题：打开侧滑项目列表</span><br><span class="line">打包：将当前项目编译为apk，默认使用<span class="built_in">debug</span>签名</span><br><span class="line">新建：新建一个项目</span><br><span class="line">导出：将当前项目备份到AndroLua/export文件夹</span><br><span class="line">属性：编辑当前项目的属性，如 名称 权限等</span><br><span class="line">格式化：重新缩进当前文件使其更加便于阅读</span><br><span class="line">导入分析：分析当前文件及引用文件需要导入的java类</span><br><span class="line">查错：检查当前文件是否有语法错误</span><br><span class="line">布局助手：在编辑器打开aly文件时用于设计布局，目前功能尚不完善</span><br><span class="line">日志：查看程序运行时的日志</span><br><span class="line">java浏览器：用于查看java类的方法</span><br><span class="line">手册：离线版lua官方手册</span><br><span class="line"></span><br><span class="line">网络图片缓存路径=<span class="string">&quot;/storage/emulated/0/AndroLua/cache/&quot;</span></span><br><span class="line"></span><br><span class="line">安装包路径=<span class="string">&quot;/storage/emulated/0/AndroLua/apk/&quot;</span></span><br><span class="line"></span><br><span class="line">自定义签名安装包路径=<span class="string">&quot;/storage/emulated/0/AndroLua/安装包/&quot;</span></span><br><span class="line"></span><br><span class="line">自定义签名打包配置=<span class="string">&quot;/storage/emulated/0/AndroLua/data/&quot;</span></span><br><span class="line"></span><br><span class="line">精简打包安装包路径=<span class="string">&quot;/storage/emulated/0/AndroLua/精简打包/&quot;</span></span><br><span class="line"></span><br><span class="line">APP日志=<span class="string">&quot;/storage/emulated/0/AndroLua/crash/&quot;</span></span><br><span class="line"></span><br><span class="line">工程备份=<span class="string">&quot;/storage/emulated/0/AndroLua/export/&quot;</span></span><br><span class="line"></span><br><span class="line">编辑框LuaEditor字体路径=<span class="string">&quot;/storage/emulated/0/AndroLua/fonts/&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">点击教程名称可以测试运行手册代码</span><br><span class="line"></span><br><span class="line"><span class="comment">--深度链接（Deeplinking）浏览器唤醒</span></span><br><span class="line">luagoxpro://net.androluax.androidx/main.lua</span><br><span class="line"></span><br><span class="line">源码共享:可以直接下载导入工具源码使用</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>部分函数参考</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E9%83%A8%E5%88%86%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83-2021-11-07%2020:58:40/</url>
    <content><![CDATA[<h1>部分函数参考</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">[a]表示参数a可选，(...)表示不定参数。函数调用在只有一个参数且参数为字符串或表时可以省略括号。</span><br><span class="line">AndroLua库函数在import模块，为便于使用都是全局变量。</span><br><span class="line">s 表示<span class="built_in">string</span>类型，i 表示整数类型，n 表示浮点数或整数类型，t 表示表类型，b 表示布尔类型，o 表示Java对象类型，f为Lua函数。</span><br><span class="line"><span class="comment">--表示注释。</span></span><br><span class="line"></span><br><span class="line">each(o)</span><br><span class="line">参数：o 实现Iterable接口的Java对象</span><br><span class="line">返回：用于Lua迭代的闭包</span><br><span class="line">作用：Java集合迭代器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enum(o)</span><br><span class="line">参数：o 实现Enumeration接口的Java对象</span><br><span class="line">返回：用于Lua迭代的闭包</span><br><span class="line">作用：Java集合迭代器</span><br><span class="line"></span><br><span class="line">import(s)</span><br><span class="line">参数：s 要载入的包或类的名称</span><br><span class="line">返回：载入的类或模块</span><br><span class="line">作用：载入包或类或Lua模块</span><br><span class="line">import <span class="string">&quot;http&quot;</span> <span class="comment">--载入http模块</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span> <span class="comment">--载入android.widget包</span></span><br><span class="line">import <span class="string">&quot;android.widget.Button&quot;</span> <span class="comment">--载入android.widget.Button类</span></span><br><span class="line">import <span class="string">&quot;android.view.ViewOnClickListener&quot;</span> <span class="comment">--载入android.view.View.OnClickListener内部类</span></span><br><span class="line"></span><br><span class="line">loadlayout(t [,t2])</span><br><span class="line">参数：t 要载入的布局表，t2 保存view的表</span><br><span class="line">返回：布局最外层view</span><br><span class="line">作用：载入布局表，生成view</span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    TextView,</span><br><span class="line">    text=<span class="string">&quot;Androlua&quot;</span>,</span><br><span class="line">    id=<span class="string">&quot;tv&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">main=&#123;&#125;</span><br><span class="line">activity.setContentView(loadlayout(layout,main))</span><br><span class="line"><span class="built_in">print</span>(main.tv.getText())</span><br><span class="line"></span><br><span class="line">loadbitmap(s)</span><br><span class="line">参数：s 要载入图片的地址，支持相对地址，绝对地址与网址</span><br><span class="line">返回：bitmap对象</span><br><span class="line">作用：载入图片</span><br><span class="line">注意：载入网络图片需要在线程中进行</span><br><span class="line"></span><br><span class="line">task(s [,...], f)</span><br><span class="line">参数：s 任务中运行的代码或函数，... 任务传入参数，f 回调函数</span><br><span class="line">返回：无返回值</span><br><span class="line">作用：在异步线程运行Lua代码，执行完毕在主线程调用回调函数</span><br><span class="line">注意：参数类型包括 布尔，数值，字符串，Java对象，不允许Lua对象</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span><span class="params">(a,b)</span></span></span><br><span class="line">  <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">  <span class="built_in">print</span>(a,b)</span><br><span class="line">  <span class="keyword">return</span> a+b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">task(func,<span class="number">1</span>,<span class="number">2</span>,<span class="built_in">print</span>)</span><br><span class="line"></span><br><span class="line">thread(s[,...])</span><br><span class="line">参数：s 线程中运行的lua代码或脚本的相对路径(不加扩展名)或函数，... 线程初始化参数</span><br><span class="line">返回：返回线程对象</span><br><span class="line">作用：开启一个线程运行Lua代码</span><br><span class="line">注意：线程需要调用quit方法结束线程</span><br><span class="line">func=<span class="string">[[</span></span><br><span class="line"><span class="string">a,b=...</span></span><br><span class="line"><span class="string">function add()</span></span><br><span class="line"><span class="string">    call(&quot;print&quot;,a+b)</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line">t=thread(func,<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">t.add()</span><br><span class="line"></span><br><span class="line">timer(s,i1,i2[,...])</span><br><span class="line">参数：s 定时器运行的代码或函数，i1 前延时，i2 定时器间隔，... 定时器初始化参数</span><br><span class="line">返回：定时器对象</span><br><span class="line">作用：创建定时器重复执行函数</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(a)</span></span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">    a=a+<span class="number">1</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">t=timer(f,<span class="number">0</span>,<span class="number">1000</span>,<span class="number">1</span>)</span><br><span class="line">t.enabled=<span class="literal">false</span><span class="comment">--暂停定时器</span></span><br><span class="line">t.enabled=<span class="literal">true</span><span class="comment">--重新定时器</span></span><br><span class="line">t.stop()<span class="comment">--停止定时器</span></span><br><span class="line"></span><br><span class="line">luajava.bindClass(s)</span><br><span class="line">参数：s class的完整名称，支持基本类型</span><br><span class="line">返回：Java class对象</span><br><span class="line">作用：载入Java class</span><br><span class="line">Button=luajava.bindClass(<span class="string">&quot;android.widget.Button&quot;</span>)</span><br><span class="line">int=luajava.bindClass(<span class="string">&quot;int&quot;</span>)</span><br><span class="line"></span><br><span class="line">luajava.createProxy(s,t)</span><br><span class="line">参数：s 接口的完整名称，t 接口函数表</span><br><span class="line">返回：Java接口对象</span><br><span class="line">作用：创建Java接口</span><br><span class="line">onclick=luajava.createProxy(<span class="string">&quot;android.view.ViewOnClickListener&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span><span class="built_in">print</span>(v)<span class="keyword">end</span>&#125;)</span><br><span class="line"></span><br><span class="line">luajava.createArray(s,t)</span><br><span class="line">参数：s 类的完整名称，支持基本类型，t 要转化为Java数组的表</span><br><span class="line">返回：创建的Java数组对象</span><br><span class="line">作用：创建Java数组</span><br><span class="line">arr=luajava.createArray(<span class="string">&quot;int&quot;</span>,&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;)</span><br><span class="line"></span><br><span class="line">luajava.newInstance(s [,...])</span><br><span class="line">参数：s 类的完整名称，... 构建方法的参数</span><br><span class="line">作用：创建Java类的实例</span><br><span class="line">b=luajava.newInstance(<span class="string">&quot;android.widget.Button&quot;</span>,activity)</span><br><span class="line"></span><br><span class="line">luajava.new(o[,...])</span><br><span class="line">参数：o Java类对象，... 参数</span><br><span class="line">返回：类的实例或数组对象或接口对象</span><br><span class="line">作用：创建一个类实例或数组对象或接口对象</span><br><span class="line">注意：当只有一个参数且为表类型时，如果类对象为interface创建接口，为class创建数组，参数为其他情况创建实例</span><br><span class="line">b=luajava.new(Button,activity)</span><br><span class="line">onclick=luajava.new(OnClickListener,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span><span class="built_in">print</span>(v)<span class="keyword">end</span>&#125;)</span><br><span class="line">arr=luajava.new(int,&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;)</span><br><span class="line">(示例中假设已载入相关类)</span><br><span class="line"></span><br><span class="line">luajava.coding(s [,s2 [, s3]])</span><br><span class="line">参数：s 要转换编码的Lua字符串，s2 字符串的原始编码，s3 字符串的目标编码</span><br><span class="line">返回：转码后的Lua字符串</span><br><span class="line">作用：转换字符串编码</span><br><span class="line">注意：默认进行GBK转UTF8</span><br><span class="line"></span><br><span class="line">luajava.clear(o)</span><br><span class="line">参数：o Java对象</span><br><span class="line">返回：无</span><br><span class="line">作用：销毁Java对象</span><br><span class="line">注意：仅用于销毁临时对象</span><br><span class="line"></span><br><span class="line">luajava.astable(o)</span><br><span class="line">参数：o Java对象</span><br><span class="line">返回：Lua表</span><br><span class="line">作用：转换Java的Array List或Map为Lua表</span><br><span class="line"></span><br><span class="line">luajava.<span class="built_in">tostring</span>(o)</span><br><span class="line">参数：o Java对象</span><br><span class="line">返回：Lua字符串</span><br><span class="line">作用：相当于 o.toString()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>Gallery</title>
    <url>/2019/10/24/Gallery/index/</url>
    <content><![CDATA[
  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">壁紙</div>
  <p>收藏的一些壁紙</p>
  <a href='/Gallery/wallpaper'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">漫威</div>
  <p>關於漫威的圖片</p>
  <a href='/Gallery/marvel'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">OH MY GIRL</div>
  <p>關於OH MY GIRL的圖片</p>
  <a href='/Gallery/ohmygirl'></a>
  </figcaption>
  </figure>
  
]]></content>
  </entry>
  <entry>
    <title>POST提交字符串</title>
    <url>/2021/11/12/Http%E6%95%99%E7%A8%8B/POST%E6%8F%90%E4%BA%A4%E5%AD%97%E7%AC%A6%E4%B8%B2-2021-11-12%2012:45:54/</url>
    <content><![CDATA[<h1>POST提交字符串</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--需导入的DEX请自行将运行助手拆包，在libs文件夹里</span></span><br><span class="line"><span class="comment">--POST提交字符串，除注释外都是固定模板，复制粘贴即可</span></span><br><span class="line">import <span class="string">&#x27;com.kn.okhttp.*&#x27;</span></span><br><span class="line">import <span class="string">&#x27;okhttp3.*&#x27;</span></span><br><span class="line">mediaType = MediaType.parse(<span class="string">&#x27;text/x-markdown; charset=utf-8&#x27;</span>)</span><br><span class="line">requestBody = <span class="string">&#x27;I am Jdqm&#x27;</span><span class="comment">--提交字符串</span></span><br><span class="line">request = Request.Builder()</span><br><span class="line">.url(<span class="string">&#x27;https://api.github.com/markdown/raw&#x27;</span>)<span class="comment">--请求URL</span></span><br><span class="line">.post(RequestBody.<span class="built_in">create</span>(mediaType,requestBody))</span><br><span class="line">.build()</span><br><span class="line">okHttpClient = OkHttpClient()</span><br><span class="line">okHttpClient.newCall(request).enqueue(Callback&#123;</span><br><span class="line">  onFailure = <span class="function"><span class="keyword">function</span><span class="params">(call,e)</span></span><span class="comment">--失败请求</span></span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">  onResponse = <span class="function"><span class="keyword">function</span><span class="params">(call,response)</span></span><span class="comment">--请求成功</span></span><br><span class="line">    headers = response.headers()</span><br><span class="line">    <span class="built_in">print</span>(headers)<span class="comment">--展示返回头部</span></span><br><span class="line">    <span class="built_in">print</span>(response.body().<span class="built_in">string</span>())<span class="comment">--展示返回内容</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script type='text/javascript' src='//pl16715598.trustedgatetocontent.com/3c/39/83/3c398343a60d114d14448277b4de73c1.js'></script>
<script type="text/javascript">
	atOptions = {
		'key' : '90c05383e48990fb7a509956acaed29d',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
	document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectiveperformanceformat.com/90c05383e48990fb7a509956acaed29d/invoke.js"></scr' + 'ipt>');
</script>
<script async="async" data-cfasync="false" src="//pl16714935.trustedgatetocontent.com/e7e4b6b8ff15c8b03eee679449da5cdd/invoke.js"></script>
<div id="container-e7e4b6b8ff15c8b03eee679449da5cdd"></div>
]]></content>
      <categories>
        <category>Http教程</category>
      </categories>
      <tags>
        <tag>Http教程</tag>
      </tags>
  </entry>
  <entry>
    <title>POST提交表单</title>
    <url>/2021/11/12/Http%E6%95%99%E7%A8%8B/POST%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95-2021-11-12%2012:46:34/</url>
    <content><![CDATA[<h1>POST提交表单</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--需导入的DEX请自行将运行助手拆包，在libs文件夹里</span></span><br><span class="line"><span class="comment">--POST提交表单，除注释外都是固定模板，复制粘贴即可</span></span><br><span class="line"><span class="comment">--该测试网址已挂，自己寻找网址测试</span></span><br><span class="line">import <span class="string">&#x27;com.kn.okhttp.*&#x27;</span></span><br><span class="line">import <span class="string">&#x27;okhttp3.*&#x27;</span></span><br><span class="line">okHttpClient = OkHttpClient();</span><br><span class="line">requestBody = FormBody.Builder()</span><br><span class="line">.add(<span class="string">&quot;search&quot;</span>, <span class="string">&quot;Jurassic Park&quot;</span>)<span class="comment">--提交的表单</span></span><br><span class="line">.build();</span><br><span class="line">request = Request.Builder()</span><br><span class="line">.url(<span class="string">&quot;https://en.wikipedia.org/w/index.php&quot;</span>)<span class="comment">--URL</span></span><br><span class="line">.post(requestBody)</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line">okHttpClient.newCall(request).enqueue(Callback &#123;</span><br><span class="line">  onFailure = <span class="function"><span class="keyword">function</span><span class="params">(call, e)</span></span> <span class="comment">--失败</span></span><br><span class="line">    <span class="built_in">print</span>(e);</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">  onResponse = <span class="function"><span class="keyword">function</span><span class="params">(call, response)</span></span> <span class="comment">--成功</span></span><br><span class="line">    <span class="built_in">print</span>(response.headers())</span><br><span class="line">    <span class="built_in">print</span>(response.body().<span class="built_in">string</span>())</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script type='text/javascript' src='//pl16715598.trustedgatetocontent.com/3c/39/83/3c398343a60d114d14448277b4de73c1.js'></script>
<script type="text/javascript">
	atOptions = {
		'key' : '90c05383e48990fb7a509956acaed29d',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
	document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectiveperformanceformat.com/90c05383e48990fb7a509956acaed29d/invoke.js"></scr' + 'ipt>');
</script>
<script async="async" data-cfasync="false" src="//pl16714935.trustedgatetocontent.com/e7e4b6b8ff15c8b03eee679449da5cdd/invoke.js"></script>
<div id="container-e7e4b6b8ff15c8b03eee679449da5cdd"></div>
]]></content>
      <categories>
        <category>Http教程</category>
      </categories>
      <tags>
        <tag>Http教程</tag>
      </tags>
  </entry>
  <entry>
    <title>SM.MS上传图片</title>
    <url>/2021/11/12/Http%E6%95%99%E7%A8%8B/SM.MS%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87-2021-11-12%2012:46:53/</url>
    <content><![CDATA[<h1>SM.MS上传图片</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--需导入的DEX请自行将运行助手拆包，在libs文件夹里</span></span><br><span class="line"><span class="comment">--sm.ms上传，除注释外都是固定模板，复制粘贴即可</span></span><br><span class="line">import <span class="string">&#x27;com.kn.okhttp.*&#x27;</span></span><br><span class="line">import <span class="string">&#x27;okhttp3.*&#x27;</span></span><br><span class="line"><span class="comment">--调用选择图库</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line"><span class="keyword">local</span> intent= Intent(Intent.ACTION_PICK)</span><br><span class="line">intent.setType(<span class="string">&quot;image/*&quot;</span>)</span><br><span class="line">this.startActivityForResult(intent, <span class="number">1</span>)</span><br><span class="line"><span class="comment">-------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--回调</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onActivityResult</span><span class="params">(requestCode,resultCode,intent)</span></span></span><br><span class="line">  <span class="keyword">if</span> intent <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> cursor =this.getContentResolver ().query(intent.getData(), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">    cursor.moveToFirst()</span><br><span class="line">    import <span class="string">&quot;android.provider.MediaStore&quot;</span></span><br><span class="line">    <span class="keyword">local</span> idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA)</span><br><span class="line">    fileSrc = cursor.getString(idx)<span class="comment">--返回路径</span></span><br><span class="line">    filename = fileSrc:<span class="built_in">match</span>(<span class="string">&#x27;.+%/(.+)&#x27;</span>)<span class="comment">--截取名字</span></span><br><span class="line"></span><br><span class="line">    requestBody = MultipartBody.Builder()</span><br><span class="line">    .setType(MultipartBody.FORM)</span><br><span class="line">    .addFormDataPart(<span class="string">&#x27;smfile&#x27;</span>,filename,RequestBody.<span class="built_in">create</span>(MediaType.parse(<span class="string">&#x27;multipart/form-data&#x27;</span>),File(fileSrc)))<span class="comment">--对应表单</span></span><br><span class="line">    .build()</span><br><span class="line">    request = Request.Builder()</span><br><span class="line">    .header(<span class="string">&#x27;User-Agent&#x27;</span>,<span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36&#x27;</span>)</span><br><span class="line">    .url(<span class="string">&#x27;https://sm.ms/api/upload&#x27;</span>)<span class="comment">--URL</span></span><br><span class="line">    .post(requestBody)</span><br><span class="line">    .build()</span><br><span class="line">    okHttpClient = OkHttpClient()</span><br><span class="line">    okHttpClient.newCall(request).enqueue(Callback&#123;</span><br><span class="line">      onFailure = <span class="function"><span class="keyword">function</span><span class="params">(call,e)</span></span><span class="comment">--失败请求</span></span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">      <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">      onResponse = <span class="function"><span class="keyword">function</span><span class="params">(call,response)</span></span><span class="comment">--请求成功</span></span><br><span class="line">        headers = response.headers()</span><br><span class="line">        <span class="built_in">print</span>(headers)<span class="comment">--展示返回头部</span></span><br><span class="line">        <span class="built_in">print</span>(response.body().<span class="built_in">string</span>())<span class="comment">--展示返回内容</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span><span class="comment">--nirenr</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script type='text/javascript' src='//pl16715598.trustedgatetocontent.com/3c/39/83/3c398343a60d114d14448277b4de73c1.js'></script>
<script type="text/javascript">
	atOptions = {
		'key' : '90c05383e48990fb7a509956acaed29d',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
	document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectiveperformanceformat.com/90c05383e48990fb7a509956acaed29d/invoke.js"></scr' + 'ipt>');
</script>
<script async="async" data-cfasync="false" src="//pl16714935.trustedgatetocontent.com/e7e4b6b8ff15c8b03eee679449da5cdd/invoke.js"></script>
<div id="container-e7e4b6b8ff15c8b03eee679449da5cdd"></div>
]]></content>
      <categories>
        <category>Http教程</category>
      </categories>
      <tags>
        <tag>Http教程</tag>
      </tags>
  </entry>
  <entry>
    <title>异步GET请求</title>
    <url>/2021/11/12/Http%E6%95%99%E7%A8%8B/%E5%BC%82%E6%AD%A5GET%E8%AF%B7%E6%B1%82-2021-11-12%2012:47:11/</url>
    <content><![CDATA[<h1>异步GET请求</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--需导入的DEX请自行将运行助手拆包，在libs文件夹里</span></span><br><span class="line"><span class="comment">--异步GET请求，除注释外都是固定模板，复制粘贴即可</span></span><br><span class="line">import <span class="string">&#x27;com.kn.okhttp.*&#x27;</span></span><br><span class="line">import <span class="string">&#x27;okhttp3.*&#x27;</span></span><br><span class="line">url = <span class="string">&#x27;http://dh.hfybbs.vip&#x27;</span><span class="comment">--请求URL</span></span><br><span class="line">okHttpClient = OkHttpClient()</span><br><span class="line">request = Request.Builder()</span><br><span class="line">.url(url)</span><br><span class="line">.get()</span><br><span class="line">.build()</span><br><span class="line">call = okHttpClient.newCall(request)</span><br><span class="line">call.enqueue(Callback&#123;</span><br><span class="line">  onFailure = <span class="function"><span class="keyword">function</span><span class="params">(call,e)</span></span><span class="comment">--请求失败</span></span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">  onResponse = <span class="function"><span class="keyword">function</span><span class="params">(call,response)</span></span><span class="comment">--请求成功</span></span><br><span class="line">    <span class="built_in">print</span>(response.body().<span class="built_in">string</span>())</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script type='text/javascript' src='//pl16715598.trustedgatetocontent.com/3c/39/83/3c398343a60d114d14448277b4de73c1.js'></script>
<script type="text/javascript">
	atOptions = {
		'key' : '90c05383e48990fb7a509956acaed29d',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
	document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectiveperformanceformat.com/90c05383e48990fb7a509956acaed29d/invoke.js"></scr' + 'ipt>');
</script>
<script async="async" data-cfasync="false" src="//pl16714935.trustedgatetocontent.com/e7e4b6b8ff15c8b03eee679449da5cdd/invoke.js"></script>
<div id="container-e7e4b6b8ff15c8b03eee679449da5cdd"></div>
]]></content>
      <categories>
        <category>Http教程</category>
      </categories>
      <tags>
        <tag>Http教程</tag>
      </tags>
  </entry>
  <entry>
    <title>Intent类介绍</title>
    <url>/2021/11/12/Intent%E7%B1%BB/Intent%E7%B1%BB%E4%BB%8B%E7%BB%8D-2021-11-12%2012:39:54/</url>
    <content><![CDATA[<h1>Intent类介绍</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Intent（意图）主要是解决Android应用的各项组件之间的通讯。</span><br><span class="line">Intent负责对应用中一次操作的动作、动作涉及数据、附加数据进行描述.</span><br><span class="line">Android则根据此Intent的描述，负责找到对应的组件，将 Intent传递给调用的组件，并完成组件的调用。</span><br><span class="line"></span><br><span class="line">因此，Intent在这里起着一个媒体中介的作用</span><br><span class="line">专门提供组件互相调用的相关信息</span><br><span class="line">实现调用者与被调用者之间的解耦。</span><br><span class="line"></span><br><span class="line">例如，在一个联系人维护的应用中，当我们在一个联系人列表屏幕(假设对应的Activity为listActivity)上</span><br><span class="line">点击某个联系人后，希望能够跳出此联系人的详细信息屏幕(假设对应的Activity为detailActivity)</span><br><span class="line">为了实现这个目的，listActivity需要构造一个 Intent</span><br><span class="line">这个Intent用于告诉系统，我们要做“查看”动作，此动作对应的查看对象是“某联系人”</span><br><span class="line">然后调用startActivity (Intent intent)，将构造的Intent传入</span><br><span class="line"></span><br><span class="line">系统会根据此Intent中的描述到ManiFest中找到满足此Intent要求的Activity，系统会调用找到的 Activity，即为detailActivity，最终传入Intent，detailActivity则会根据此Intent中的描述，执行相应的操作。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>分享文件</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6-2021-11-12%2012:43:56/</url>
    <content><![CDATA[<h1>分享文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sharing</span><span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  FileName=<span class="built_in">tostring</span>(File(<span class="built_in">path</span>).Name)</span><br><span class="line">  ExtensionName=FileName:<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">  Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  intent = Intent()</span><br><span class="line">  intent.setAction(Intent.ACTION_SEND)</span><br><span class="line">  intent.setType(Mime)</span><br><span class="line">  file = File(<span class="built_in">path</span>)</span><br><span class="line">  uri = Uri.fromFile(file)</span><br><span class="line">  intent.putExtra(Intent.EXTRA_STREAM,uri)</span><br><span class="line">  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">  activity.startActivity(Intent.createChooser(intent, <span class="string">&quot;分享到:&quot;</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">Sharing(文件路径)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>卸载其它程序</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E5%8D%B8%E8%BD%BD%E5%85%B6%E5%AE%83%E7%A8%8B%E5%BA%8F-2021-11-12%2012:41:43/</url>
    <content><![CDATA[<h1>卸载其它程序</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">包名=<span class="string">&quot;com.huluxia.gametools&quot;</span></span><br><span class="line">uri = Uri.parse(<span class="string">&quot;package:&quot;</span>..包名)</span><br><span class="line">intent =  Intent(Intent.ACTION_DELETE,uri)</span><br><span class="line">activity.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>发送彩信</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E5%8F%91%E9%80%81%E5%BD%A9%E4%BF%A1-2021-11-12%2012:44:27/</url>
    <content><![CDATA[<h1>发送彩信</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">uri=Uri.parse(<span class="string">&quot;file:///sdcard/a.png&quot;</span>) <span class="comment">--图片路径</span></span><br><span class="line">intent= Intent();</span><br><span class="line">intent.setAction(Intent.ACTION_SEND);</span><br><span class="line">intent.putExtra(<span class="string">&quot;address&quot;</span>,mobile) <span class="comment">--邮件地址</span></span><br><span class="line">intent.putExtra(<span class="string">&quot;sms_body&quot;</span>,content) <span class="comment">--邮件内容</span></span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM,uri)</span><br><span class="line">intent.setType(<span class="string">&quot;image/png&quot;</span>) <span class="comment">--设置类型</span></span><br><span class="line">this.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>发送短信</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1-2021-11-12%2012:44:11/</url>
    <content><![CDATA[<h1>发送短信</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">uri = Uri.parse(<span class="string">&quot;smsto:10010&quot;</span>)</span><br><span class="line">intent = Intent(Intent.ACTION_SENDTO, uri)</span><br><span class="line">intent.putExtra(<span class="string">&quot;sms_body&quot;</span>,<span class="string">&quot;cxll&quot;</span>) </span><br><span class="line">intent.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>)</span><br><span class="line">activity.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>安装其它程序</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E5%AE%89%E8%A3%85%E5%85%B6%E5%AE%83%E7%A8%8B%E5%BA%8F-2021-11-12%2012:41:25/</url>
    <content><![CDATA[<h1>安装其它程序</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">安装包路径=<span class="string">&quot;/sdcard/a.apk&quot;</span></span><br><span class="line">intent.setDataAndType(Uri.parse(<span class="string">&quot;file://&quot;</span>..安装包路径), <span class="string">&quot;application/vnd.android.package-archive&quot;</span>) </span><br><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">activity.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>打开其它程序</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E6%89%93%E5%BC%80%E5%85%B6%E5%AE%83%E7%A8%8B%E5%BA%8F-2021-11-12%2012:41:09/</url>
    <content><![CDATA[<h1>打开其它程序</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">packageName=程序包名</span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line">manager = activity.getPackageManager()</span><br><span class="line"><span class="built_in">open</span> = manager.getLaunchIntentForPackage(packageName)</span><br><span class="line">this.startActivity(<span class="built_in">open</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>拨打电话</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E6%8B%A8%E6%89%93%E7%94%B5%E8%AF%9D-2021-11-12%2012:44:44/</url>
    <content><![CDATA[<h1>拨打电话</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">uri = Uri.parse(<span class="string">&quot;tel:10010&quot;</span>)</span><br><span class="line">intent = Intent(Intent.ACTION_CALL, uri)</span><br><span class="line">intent.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>)</span><br><span class="line">activity.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>搜索应用</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E6%90%9C%E7%B4%A2%E5%BA%94%E7%94%A8-2021-11-12%2012:42:30/</url>
    <content><![CDATA[<h1>搜索应用</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">intent = Intent(<span class="string">&quot;android.intent.action.VIEW&quot;</span>)</span><br><span class="line">intent .setData(Uri.parse( <span class="string">&quot;market://details?id=&quot;</span>..activity.getPackageName()))</span><br><span class="line">this.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>播放Mp4</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E6%92%AD%E6%94%BEMp4-2021-11-12%2012:41:58/</url>
    <content><![CDATA[<h1>播放Mp4</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">intent =  Intent(Intent.ACTION_VIEW)</span><br><span class="line">uri = Uri.parse(<span class="string">&quot;file:///sdcard/a.mp4&quot;</span>) </span><br><span class="line">intent.setDataAndType(uri, <span class="string">&quot;video/mp4&quot;</span>)</span><br><span class="line">activity.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>调用QQ发送xml消息模块</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E8%B0%83%E7%94%A8QQ%E5%8F%91%E9%80%81xml%E6%B6%88%E6%81%AF%E6%A8%A1%E5%9D%97-2021-11-12%2012:40:52/</url>
    <content><![CDATA[<h1>调用QQ发送xml消息模块</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--Base64加密模块</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">base64</span><span class="params">(nr)</span></span></span><br><span class="line">import <span class="string">&quot;android.util.Base64&quot;</span></span><br><span class="line"></span><br><span class="line">text=String(nr).getBytes()</span><br><span class="line">text=Base64.encodeToString(text,Base64.DEFAULT)</span><br><span class="line"><span class="keyword">return</span> text</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用QQ发送xml消息模块</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">qqxml</span><span class="params">(title,content,jumpurl,imgurl)</span></span></span><br><span class="line"></span><br><span class="line">jumpurl=base64(jumpurl)</span><br><span class="line">imgurl=base64(imgurl)</span><br><span class="line">title=base64(title)</span><br><span class="line">content=base64(content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">url=<span class="string">&quot;mqqapi://share/to_fri?file_type=news&amp;src_type=web&amp;version=1&amp;share_id=1105471055&amp;url=&quot;</span>..jumpurl..<span class="string">&quot;&amp;previewimageUrl=aHR0cDovL3d3dy54ZGFwcC50b3AvaW1nL2ljb24ucG5n&amp;image_url=&quot;</span>..imgurl..<span class="string">&quot;&amp;title=&quot;</span>..title..<span class="string">&quot;&amp;description=&quot;</span>..content..<span class="string">&quot;&amp;callback_type=scheme&amp;thirdAppDsplayName=UVE&amp;app_name=UVE&amp;cflag=0&amp;shareType=0&quot;</span></span><br><span class="line">activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用</span></span><br><span class="line">qqxml(<span class="string">&quot;标题&quot;</span>,<span class="string">&quot;内容&quot;</span>,<span class="string">&quot;http://xdapp.top&quot;</span>,<span class="string">&quot;http://www.xdapp.top/img/icon.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--非原创</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>调用图库选择图片</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E8%B0%83%E7%94%A8%E5%9B%BE%E5%BA%93%E9%80%89%E6%8B%A9%E5%9B%BE%E7%89%87-2021-11-12%2012:43:26/</url>
    <content><![CDATA[<h1>调用图库选择图片</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  <span class="keyword">local</span> intent= Intent(Intent.ACTION_PICK)</span><br><span class="line">  intent.setType(<span class="string">&quot;image/*&quot;</span>)</span><br><span class="line">  this.startActivityForResult(intent, <span class="number">1</span>)</span><br><span class="line"><span class="comment">-------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--回调</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onActivityResult</span><span class="params">(requestCode,resultCode,intent)</span></span></span><br><span class="line">  <span class="keyword">if</span> intent <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> cursor =this.getContentResolver ().query(intent.getData(), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">    cursor.moveToFirst()</span><br><span class="line">import <span class="string">&quot;android.provider.MediaStore&quot;</span></span><br><span class="line">    <span class="keyword">local</span> idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA)</span><br><span class="line">    fileSrc = cursor.getString(idx)</span><br><span class="line">    bit=<span class="literal">nil</span></span><br><span class="line">    <span class="comment">--fileSrc回调路径路径</span></span><br><span class="line">import <span class="string">&quot;android.graphics.BitmapFactory&quot;</span></span><br><span class="line">    bit =BitmapFactory.decodeFile(fileSrc)</span><br><span class="line">  <span class="comment">--  iv.setImageBitmap(bit)</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span><span class="comment">--nirenr</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>调用文件管理器选择文件</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E8%B0%83%E7%94%A8%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8%E9%80%89%E6%8B%A9%E6%96%87%E4%BB%B6-2021-11-12%2012:43:41/</url>
    <content><![CDATA[<h1>调用文件管理器选择文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ChooseFile</span><span class="params">()</span></span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;java.net.URLDecoder&quot;</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">intent = Intent(Intent.ACTION_GET_CONTENT)</span><br><span class="line">intent.setType(<span class="string">&quot;*/&quot;</span>);</span><br><span class="line">intent.addCategory(Intent.CATEGORY_OPENABLE)</span><br><span class="line">activity.startActivityForResult(intent,<span class="number">1</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onActivityResult</span><span class="params">(requestCode,resultCode,data)</span></span></span><br><span class="line">  <span class="keyword">if</span> resultCode == Activity.RESULT_OK <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">local</span> str = data.getData().toString()</span><br><span class="line">  <span class="keyword">local</span> decodeStr = URLDecoder.decode(str,<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">  <span class="built_in">print</span>(decodeStr)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">ChooseFile()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>播放Mp3</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E6%92%AD%E6%94%BEMp3-2021-11-12%2012:42:12/</url>
    <content><![CDATA[<h1>播放Mp3</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">intent =  Intent(Intent.ACTION_VIEW)</span><br><span class="line">uri = Uri.parse(<span class="string">&quot;file:///sdcard/song.mp3&quot;</span>)</span><br><span class="line">intent.setDataAndType(uri, <span class="string">&quot;audio/mp3&quot;</span>)</span><br><span class="line">this.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>调用浏览器打开网页</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E8%B0%83%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%BC%80%E7%BD%91%E9%A1%B5-2021-11-12%2012:40:31/</url>
    <content><![CDATA[<h1>调用浏览器打开网页</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">url=<span class="string">&quot;http://www.androlua.cn&quot;</span></span><br><span class="line">viewIntent =  Intent(<span class="string">&quot;android.intent.action.VIEW&quot;</span>,Uri.parse(url))</span><br><span class="line">activity.startActivity(viewIntent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>调用浏览器搜索关键字</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E8%B0%83%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97-2021-11-12%2012:40:12/</url>
    <content><![CDATA[<h1>调用浏览器搜索关键字</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.SearchManager&quot;</span></span><br><span class="line">intent =  Intent()</span><br><span class="line">intent.setAction(Intent.ACTION_WEB_SEARCH)</span><br><span class="line">intent.putExtra(SearchManager.QUERY,<span class="string">&quot;Alua开发手册&quot;</span>)    </span><br><span class="line">activity.startActivity(intent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>调用系统打开文件</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E8%B0%83%E7%94%A8%E7%B3%BB%E7%BB%9F%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6-2021-11-12%2012:43:05/</url>
    <content><![CDATA[<h1>调用系统打开文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">OpenFile</span><span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  FileName=<span class="built_in">tostring</span>(File(<span class="built_in">path</span>).Name)</span><br><span class="line">  ExtensionName=FileName:<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">  Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  <span class="keyword">if</span> Mime <span class="keyword">then</span> </span><br><span class="line">    intent = Intent()</span><br><span class="line">    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">    intent.setAction(Intent.ACTION_VIEW); </span><br><span class="line">    intent.setDataAndType(Uri.fromFile(File(<span class="built_in">path</span>)), Mime); </span><br><span class="line">    activity.startActivity(intent)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">OpenFile(文件路径)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>调用系统设置</title>
    <url>/2021/11/12/Intent%E7%B1%BB/%E8%B0%83%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE-2021-11-12%2012:42:50/</url>
    <content><![CDATA[<h1>调用系统设置</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.provider.Settings&quot;</span></span><br><span class="line">intent = Intent(android.provider.Settings.ACTION_SETTINGS)</span><br><span class="line">this.startActivity(intent)</span><br><span class="line"></span><br><span class="line">字段列表:</span><br><span class="line">ACTION_SETTINGS	系统设置</span><br><span class="line">CTION_APN_SETTINGS APN设置</span><br><span class="line">ACTION_LOCATION_SOURCE_SETTINGS 位置和访问信息</span><br><span class="line">ACTION_WIRELESS_SETTINGS 网络设置</span><br><span class="line">ACTION_AIRPLANE_MODE_SETTINGS 无线和网络热点设置</span><br><span class="line">ACTION_SECURITY_SETTINGS 位置和安全设置</span><br><span class="line">ACTION_WIFI_SETTINGS 无线网WIFI设置</span><br><span class="line">ACTION_WIFI_IP_SETTINGS 无线网IP设置</span><br><span class="line">ACTION_BLUETOOTH_SETTINGS 蓝牙设置</span><br><span class="line">ACTION_DATE_SETTINGS 时间和日期设置</span><br><span class="line">ACTION_SOUND_SETTINGS 声音设置</span><br><span class="line">ACTION_DISPLAY_SETTINGS 显示设置——字体大小等</span><br><span class="line">ACTION_LOCALE_SETTINGS 语言设置</span><br><span class="line">ACTION_INPUT_METHOD_SETTINGS 输入法设置</span><br><span class="line">ACTION_USER_DICTIONARY_SETTINGS 用户词典</span><br><span class="line">ACTION_APPLICATION_SETTINGS 应用程序设置</span><br><span class="line">ACTION_APPLICATION_DEVELOPMENT_SETTINGS 应用程序设置</span><br><span class="line">ACTION_QUICK_LAUNCH_SETTINGS 快速启动设置</span><br><span class="line">ACTION_MANAGE_APPLICATIONS_SETTINGS 已下载（安装）软件列表</span><br><span class="line">ACTION_SYNC_SETTINGS 应用程序数据同步设置</span><br><span class="line">ACTION_NETWORK_OPERATOR_SETTINGS 可用网络搜索</span><br><span class="line">ACTION_DATA_ROAMING_SETTINGS 移动网络设置</span><br><span class="line">ACTION_INTERNAL_STORAGE_SETTINGS 手机存储设置</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Intent类</category>
      </categories>
      <tags>
        <tag>Intent类</tag>
      </tags>
  </entry>
  <entry>
    <title>HtmlTextView富文本</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/HtmlTextView%E5%AF%8C%E6%96%87%E6%9C%AC-2021-11-07-17-57-24/</url>
    <content><![CDATA[<h1>HtmlTextView富文本</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;org.sufficientlysecure.htmltextview.*&quot;</span></span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    HtmlTextView,</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">    id=<span class="string">&quot;htv&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line"><span class="comment">--Github:https://github.com/PrivacyApps/html-textview.git</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">HtmlTextView是Android的一个扩展的TextView组件</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">它可以加载HTML并将其转换为可扩展的显示。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">它是WebView组件的替代品，WebView组件在某些Android版本上表现奇怪，在加载时闪烁，等等。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">该库还包括一个防止TextView在特定Android版本上崩溃的解决方案，以及从本地可绘制文件夹或互联网加载图像的可能性。</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- loads html from string and displays cat_pic.png from the app&#x27;s drawable folder</span></span><br><span class="line"> htv.setHtml(<span class="string">&#x27;&lt;h2&gt;Hello world&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;cats&lt;/li&gt;&lt;li&gt;dogs&lt;/li&gt;&lt;/ul&gt;&lt;img src=&quot;cat_pic&quot;/&gt;&#x27;</span>,HtmlResImageGetter(htv))</span><br><span class="line"></span><br><span class="line"><span class="comment">--// loads html from string and displays cat_pic.png from the app&#x27;s assets folder</span></span><br><span class="line"><span class="comment">--htv.setHtml(&#x27;&lt;h2&gt;Hello world&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;cats&lt;/li&gt;&lt;li&gt;dogs&lt;/li&gt;&lt;/ul&gt;&lt;img src=&quot;cat_pic&quot; /&gt;&#x27;,HtmlAssetsImageGetter(htv));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--// loads html from string and displays http://www.example.com/cat_pic.png from the Internet</span></span><br><span class="line"><span class="comment">--htv.setHtml(&#x27;&lt;h2&gt;Hello wold&lt;/h2&gt;&lt;img src=&quot;http网络图片地址&quot; /&gt;&#x27;,HtmlHttpImageGetter(htv));</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>MD配色参考</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/MD%E9%85%8D%E8%89%B2%E5%8F%82%E8%80%83-2021-11-07-17-56-13/</url>
    <content><![CDATA[<h1>MD配色参考</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">红色=<span class="number">0xFFF44336</span></span><br><span class="line">粉红色=<span class="number">0xFFEC407A</span></span><br><span class="line">基佬紫=<span class="number">0xFF9C27B0</span></span><br><span class="line">深紫=<span class="number">0xFF673AB7</span></span><br><span class="line">靛蓝=<span class="number">0xFF3F51B5</span></span><br><span class="line">蓝色=<span class="number">0xFF2196F3</span></span><br><span class="line">亮蓝=<span class="number">0xFF03A9F4</span></span><br><span class="line">青色=<span class="number">0xFF00BCD4</span></span><br><span class="line">鸭绿=<span class="number">0xFF009688</span></span><br><span class="line">原谅绿=<span class="number">0xFF4CAF50</span></span><br><span class="line">亮绿=<span class="number">0xFF8BC34A</span></span><br><span class="line">酸橙=<span class="number">0xFFCDDC39</span></span><br><span class="line">黄色#FFEB3B</span><br><span class="line">琥珀=<span class="number">0xFFFFC107</span></span><br><span class="line">橙色=<span class="number">0xFFFF9800</span></span><br><span class="line">深橙=<span class="number">0xFFFF5722</span></span><br><span class="line">棕色=<span class="number">0xFF795548</span></span><br><span class="line">蓝灰=<span class="number">0xFF607D8B</span></span><br><span class="line">夜间青=<span class="number">0xFF80CBC4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MD配色参考：</span><br><span class="line">https://www.coolapk.com/apk/com.by_syk.mdcolor</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>YLua中文函数库</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/YLua%E4%B8%AD%E6%96%87%E5%87%BD%E6%95%B0%E5%BA%93-2021-11-07-17-46-34/</url>
    <content><![CDATA[<h1>YLua中文函数库</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--创建一个类</span></span><br><span class="line"><span class="keyword">local</span> YLua = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:new</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> yswy = &#123;&#125;</span><br><span class="line">  <span class="built_in">setmetatable</span>(yswy, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  <span class="keyword">return</span> yswy</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--定义类的成员属性</span></span><br><span class="line">YLua.当前脚本运行目录 = activity.getLuaDir()</span><br><span class="line"></span><br><span class="line">YLua.屏幕宽度 = activity.getWidth()</span><br><span class="line"></span><br><span class="line">YLua.屏幕高度 = activity.getHeight()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--定义类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取脚本当前目录<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">self</span>.当前脚本运行目录</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:写入剪切板<span class="params">(内容)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  this.getSystemService(Context.CLIPBOARD_SERVICE).setText(<span class="built_in">tostring</span>(内容))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取剪切板<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  <span class="keyword">return</span> this.getSystemService(Context.CLIPBOARD_SERVICE).getText()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:存储应用数据<span class="params">(key,value)</span></span></span><br><span class="line">  activity.setSharedData(key,value)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取应用数据<span class="params">(key)</span></span></span><br><span class="line">  <span class="keyword">local</span> data = activity.getSharedData(key)</span><br><span class="line">  <span class="keyword">return</span> data</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:存储全局变量<span class="params">(名称,内容)</span></span></span><br><span class="line">  activity.getGlobalData()[名称]=内容</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取全局变量<span class="params">(名称)</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getGlobalData()[名称]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:进入页面<span class="params">(名称,...)</span></span></span><br><span class="line">  activity.newActivity(名称,...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:退出页面<span class="params">()</span></span></span><br><span class="line">  activity.finish()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:代码查错<span class="params">(内容)</span></span></span><br><span class="line">  <span class="keyword">local</span> <span class="built_in">status</span>,<span class="built_in">error</span>=<span class="built_in">pcall</span>(<span class="built_in">loadstring</span>(内容))</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">status</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;代码有误：&quot;</span>,<span class="built_in">error</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:设置标题<span class="params">(内容)</span></span></span><br><span class="line">  activity.setTitle(内容)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:设置小标题<span class="params">(内容)</span></span></span><br><span class="line">  activity.getActionBar().setSubtitle(内容)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:URL</span>编码<span class="params">(内容)</span></span></span><br><span class="line">  import <span class="string">&quot;java.net.URLEncoder&quot;</span></span><br><span class="line">  <span class="keyword">return</span> URLEncoder.encode(内容)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:URL</span>解码<span class="params">(内容)</span></span></span><br><span class="line">  import <span class="string">&quot;java.net.URLDecoder&quot;</span></span><br><span class="line">  <span class="keyword">return</span> URLDecoder.decode(内容)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:be64</span>编码<span class="params">(内容)</span></span></span><br><span class="line">  <span class="keyword">local</span> Base64=luajava.bindClass(<span class="string">&quot;android.util.Base64&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> Base64.encodeToString(String(内容).getBytes(),Base64.NO_WRAP);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:be64</span>解码<span class="params">(内容)</span></span></span><br><span class="line">  <span class="keyword">local</span> Base64=luajava.bindClass(<span class="string">&quot;android.util.Base64&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> String(Base64.decode(内容,Base64.DEFAULT)).toString()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取网络状态<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE).getActiveNetworkInfo();</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:新文件夹<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(<span class="built_in">tostring</span>(<span class="built_in">path</span>)).mkdirs()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:新文件<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(<span class="built_in">tostring</span>(<span class="built_in">path</span>)).createNewFile()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:是文件夹<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(<span class="built_in">tostring</span>(<span class="built_in">path</span>)).isDirectory()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:是文件<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(<span class="built_in">tostring</span>(<span class="built_in">path</span>)).isFile()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:删除文件夹<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> LuaUtil.rmDir(File(<span class="built_in">tostring</span>(<span class="built_in">path</span>)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:删除文件<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">return</span> File(<span class="built_in">tostring</span>(<span class="built_in">path</span>)).delete()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:写入文件<span class="params">(路径,内容)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="keyword">local</span> f=File(<span class="built_in">tostring</span>(File(<span class="built_in">tostring</span>(路径)).getParentFile())).mkdirs()</span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">tostring</span>(路径),<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容)):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:读取文件<span class="params">(路径)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">io</span>.<span class="built_in">open</span>(路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:追加写入<span class="params">(路径,内容)</span></span></span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">tostring</span>(路径),<span class="string">&quot;a+&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容)):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:替换文件字符串<span class="params">(路径,旧,新)</span></span></span><br><span class="line">  路径=<span class="built_in">tostring</span>(路径)</span><br><span class="line">  内容=<span class="built_in">io</span>.<span class="built_in">open</span>(路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">io</span>.<span class="built_in">open</span>(路径,<span class="string">&quot;w+&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容:<span class="built_in">gsub</span>(旧,新))):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:是<span class="title">WiFi</span>网络<span class="params">()</span></span></span><br><span class="line">  wifi = activity.Context.getSystemService(Context.WIFI_SERVICE)</span><br><span class="line">  wi = wifi.isWifiEnabled()</span><br><span class="line">  <span class="keyword">if</span> wi==<span class="literal">true</span> <span class="keyword">then</span></span><br><span class="line">    connManager = activity.getSystemService(Context.CONNECTIVITY_SERVICE)</span><br><span class="line">    mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">tostring</span>(mWifi):<span class="built_in">find</span>(<span class="string">&quot;none)&quot;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:有网络<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE).getActiveNetworkInfo()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:是数据网络<span class="params">()</span></span></span><br><span class="line">  manager = activity.getSystemService(Context.CONNECTIVITY_SERVICE);</span><br><span class="line">  gprs = manager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).getState();</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">tostring</span>(gprs)== <span class="string">&quot;CONNECTED&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:安装应用<span class="params">(路径)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  intent.setDataAndType(Uri.parse(<span class="string">&quot;file://&quot;</span>..路径), <span class="string">&quot;application/vnd.android.package-archive&quot;</span>)</span><br><span class="line">  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:返回桌面<span class="params">()</span></span></span><br><span class="line">  activity.moveTaskToBack(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:隐藏状态栏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:设置状态栏颜色<span class="params">(a)</span></span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(a)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:设置标题栏颜色<span class="params">(a)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.ColorDrawable&quot;</span></span><br><span class="line">  activity.ActionBar.setBackgroundDrawable(ColorDrawable(a))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:显示标题栏<span class="params">()</span></span></span><br><span class="line">  activity.ActionBar.show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:隐藏标题栏<span class="params">()</span></span></span><br><span class="line">  activity.ActionBar.hide()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:竖屏<span class="params">()</span></span></span><br><span class="line">  activity.setRequestedOrientation(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:横屏<span class="params">()</span></span></span><br><span class="line">  activity.setRequestedOrientation(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:随机数<span class="params">(a,b)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">random</span>(a,b)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取文件大小<span class="params">(文件路径)</span></span></span><br><span class="line">  import <span class="string">&quot;android.text.format.Formatter&quot;</span></span><br><span class="line">  <span class="keyword">return</span> Formatter.formatFileSize(activity,文件路径.length())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:调用系统打开文件<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  FileName=<span class="built_in">tostring</span>(File(<span class="built_in">path</span>).Name)</span><br><span class="line">  ExtensionName=FileName:<span class="built_in">match</span>(<span class="string">&quot;.+%.(%w+)&quot;</span>)</span><br><span class="line">  Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  <span class="keyword">if</span> Mime <span class="keyword">then</span></span><br><span class="line">    intent = Intent();</span><br><span class="line">    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">    intent.setAction(Intent.ACTION_VIEW);</span><br><span class="line">    intent.setDataAndType(Uri.fromFile(File(<span class="built_in">path</span>)), Mime);</span><br><span class="line">    activity.startActivity(intent);</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;找不到可以用来打开此文件的程序&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:判断数组中值是否存在<span class="params">(字符串,二维表)</span></span></span><br><span class="line">  <span class="keyword">local</span> 临时表=&#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">pairs</span>(二维表) <span class="keyword">do</span></span><br><span class="line">    临时表[value] = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> 临时表[字符串] <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:取文件后缀<span class="params">(文件名)</span></span></span><br><span class="line">  <span class="keyword">return</span> 文件名:<span class="built_in">match</span>(<span class="string">&quot;.+%.(%w+)&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:取文件名称<span class="params">(文件名)</span></span></span><br><span class="line">  <span class="keyword">return</span> 文件名:<span class="built_in">match</span>(<span class="string">&quot;(.+)%.%w+&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:取文件完整名称<span class="params">(文件名)</span></span></span><br><span class="line">  <span class="keyword">return</span> 文件名:<span class="built_in">match</span>(<span class="string">&quot;.+%/(.+)&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:提示<span class="params">(内容)</span></span></span><br><span class="line">  Toast.makeText(activity, 内容,Toast.LENGTH_SHORT).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:分享文字<span class="params">(内容)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  <span class="keyword">local</span> intent=Intent(Intent.ACTION_SEND);</span><br><span class="line">  intent.setType(<span class="string">&quot;text/plain&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_SUBJECT, <span class="string">&quot;分享&quot;</span>);</span><br><span class="line">  intent.putExtra(Intent.EXTRA_TEXT, <span class="built_in">tostring</span>(内容));</span><br><span class="line">  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">  activity.startActivity(Intent.createChooser(intent,<span class="string">&quot;分享到:&quot;</span>));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:重启应用<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  <span class="keyword">local</span> intent = activity.getPackageManager().getLaunchIntentForPackage(activity.getPackageName());</span><br><span class="line">  intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:安装应用<span class="params">(安装包路径)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW)</span><br><span class="line">  intent.setDataAndType(Uri.parse(<span class="string">&quot;file://&quot;</span>..安装包路径), <span class="string">&quot;application/vnd.android.package-archive&quot;</span>)</span><br><span class="line">  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">  activity.startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:打开指定应用<span class="params">(包名)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line">  this.startActivity(activity.getPackageManager().getLaunchIntentForPackage(包名))<span class="comment">--填写应用包名</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:检查文件夹<span class="params">(下载目录)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.*&quot;</span></span><br><span class="line">  <span class="keyword">if</span> File(下载目录).isDirectory()<span class="keyword">then</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    File(下载目录).mkdirs()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:包含汉字<span class="params">(sequence)</span></span></span><br><span class="line">  import <span class="string">&quot;java.util.regex.Pattern&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.util.regex.Matcher&quot;</span></span><br><span class="line">  <span class="built_in">format</span> = <span class="string">&quot;[\u4E00-\u9FA5\uF900-\uFA2D]&quot;</span></span><br><span class="line">  result = <span class="literal">false</span></span><br><span class="line">  pattern = Pattern.compile(<span class="built_in">format</span>)</span><br><span class="line">  matcher = pattern.matcher(sequence)</span><br><span class="line">  result = matcher.<span class="built_in">find</span>()</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取状态栏高度<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.os.Build&quot;</span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">19</span> <span class="keyword">then</span></span><br><span class="line">    resourceId = activity.getResources().getIdentifier(<span class="string">&quot;status_bar_height&quot;</span>, <span class="string">&quot;dimen&quot;</span>, <span class="string">&quot;android&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> activity.getResources().getDimensionPixelSize(resourceId)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:沉浸状态栏<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">19</span> <span class="keyword">then</span></span><br><span class="line">    activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:dp</span>转<span class="title">px</span><span class="params">(sdp)</span></span></span><br><span class="line">  dm=this.getResources().getDisplayMetrics()</span><br><span class="line">  types=&#123;px=<span class="number">0</span>,dp=<span class="number">1</span>,sp=<span class="number">2</span>,pt=<span class="number">3</span>,[<span class="string">&quot;in&quot;</span>]=<span class="number">4</span>,mm=<span class="number">5</span>&#125;</span><br><span class="line">  n,ty=sdp:<span class="built_in">match</span>(<span class="string">&quot;^(%-?[%.%d]+)(%a%a)&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> TypedValue.applyDimension(types[ty],<span class="built_in">tonumber</span>(n),dm)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:微信扫一扫<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.ComponentName&quot;</span></span><br><span class="line">  intent = Intent();</span><br><span class="line">  intent.setComponent( ComponentName(<span class="string">&quot;com.tencent.mm&quot;</span>, <span class="string">&quot;com.tencent.mm.ui.LauncherUI&quot;</span>));</span><br><span class="line">  intent.putExtra(<span class="string">&quot;LauncherUI.From.Scaner.Shortcut&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">  intent.setFlags(<span class="number">335544320</span>);</span><br><span class="line">  intent.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:支付宝扫一扫<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  uri = Uri.parse(<span class="string">&quot;alipayqr://platformapi/startapp?saId=10000007&quot;</span>);</span><br><span class="line">  intent = Intent(Intent.ACTION_VIEW, uri);</span><br><span class="line">  activity.startActivity(intent);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取设备标识码<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.provider.SettingsSecure&quot;</span></span><br><span class="line">  <span class="keyword">return</span> Secure.getString(activity.getContentResolver(), Secure.ANDROID_ID)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取<span class="title">IMEI</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  <span class="keyword">return</span> activity.getSystemService(Context.TELEPHONY_SERVICE).getDeviceId()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取状态栏高度<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> activity.getResources().getDimensionPixelSize(luajava.bindClass(<span class="string">&quot;com.android.internal.Rdimen&quot;</span>)().status_bar_height)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取设备型号<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> Build.MODEL</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取<span class="title">ROM</span>类型<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">upper</span>(Build.MANUFACTURER)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取<span class="title">SDK</span>版本<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">tonumber</span>(Build.VERSION.SDK)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取安卓版本<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> Build.VERSION.RELEASE</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取屏幕尺寸<span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.util.DisplayMetrics&quot;</span></span><br><span class="line">  <span class="keyword">local</span> dm = DisplayMetrics();</span><br><span class="line">  activity.getWindowManager().getDefaultDisplay().getMetrics(dm);</span><br><span class="line">  diagonalPixels = Math.<span class="built_in">sqrt</span>(Math.<span class="built_in">pow</span>(dm.widthPixels, <span class="number">2</span>) + Math.<span class="built_in">pow</span>(dm.heightPixels, <span class="number">2</span>));</span><br><span class="line">  <span class="keyword">return</span> diagonalPixels / (<span class="number">160</span> * dm.density);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取手机内置存储剩余空间<span class="params">()</span></span></span><br><span class="line">  fs = StatFs(Environment.getDataDirectory().getPath())</span><br><span class="line">  <span class="keyword">return</span> 格式化文件大小(fs.getAvailableBytes())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取手机内置存储空间<span class="params">()</span></span></span><br><span class="line">  <span class="built_in">path</span> = Environment.getExternalStorageDirectory()</span><br><span class="line">  stat = StatFs(<span class="built_in">path</span>.getPath())</span><br><span class="line">  blockSize = stat.getBlockSize()</span><br><span class="line">  totalBlocks = stat.getBlockCount()</span><br><span class="line">  <span class="keyword">return</span> 格式化文件大小(blockSize * totalBlocks)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:解压缩<span class="params">(压缩路径,解压缩路径)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    ZipUtil.unzip(压缩路径,解压缩路径)</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;解压文件 &quot;</span>..压缩路径..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:压缩<span class="params">(原路径,压缩路径,名称)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    LuaUtil.zip(原路径,压缩路径,名称)</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;压缩文件 &quot;</span>..原路径..<span class="string">&quot; 至 &quot;</span>..压缩路径..<span class="string">&quot;/&quot;</span>..名称..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:重命名文件<span class="params">(旧,新)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    File(旧).renameTo(File(新))</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;重命名文件 &quot;</span>..旧..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:移动文件<span class="params">(旧,新)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    File(旧).renameTo(File(新))</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;移动文件 &quot;</span>..旧..<span class="string">&quot; 至 &quot;</span>..新..<span class="string">&quot; 失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:文件修改时间<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  f = File(<span class="built_in">path</span>);</span><br><span class="line">  <span class="built_in">time</span> = f.lastModified()</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">time</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:内置存储路径<span class="params">(t)</span></span></span><br><span class="line">  <span class="keyword">return</span> Environment.getExternalStorageDirectory().toString()..<span class="string">&quot;/&quot;</span>..t</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:获取视频第一帧<span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;android.media.MediaMetadataRetriever&quot;</span></span><br><span class="line">  media = MediaMetadataRetriever()</span><br><span class="line">  media.setDataSource(<span class="built_in">tostring</span>(<span class="built_in">path</span>))</span><br><span class="line">  <span class="keyword">return</span> media.getFrameAtTime()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:px2dp</span><span class="params">(pxValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = this.getResources().getDisplayMetrics().density</span><br><span class="line">  <span class="keyword">return</span> (pxValue / scale + <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:dp2px</span><span class="params">(dpValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = this.getResources().getDisplayMetrics().density</span><br><span class="line">  <span class="keyword">return</span> (dpValue * scale + <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua:sp2px</span><span class="params">(spValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> fontScale = this.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> (spValue * fontScale + <span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:全屏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:退出全屏<span class="params">()</span></span></span><br><span class="line">  activity.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">YLua</span>:复制文本<span class="params">(文本)</span></span></span><br><span class="line">  activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(文本)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用方法如下</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建对象</span></span><br><span class="line">yswy = YLua:new()</span><br><span class="line"></span><br><span class="line"><span class="comment">--访问对象属性</span></span><br><span class="line"><span class="comment">--print(yswy.当前脚本运行目录)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--访问对象方法</span></span><br><span class="line"><span class="comment">--print(yswy:获取脚本当前目录())</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--类的继承</span></span><br><span class="line">中文函数库 = yswy:new()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 中文函数库:<span class="title">new</span><span class="params">()</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> yswy:new()</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--派生类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 中文函数库:获取屏幕高度<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">self</span>.屏幕高度</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--覆写类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 中文函数库:获取脚本当前目录<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;什么也没有&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--访问对象属性</span></span><br><span class="line"><span class="comment">--print(中文函数库.屏幕高度)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--访问对象方法</span></span><br><span class="line"><span class="built_in">print</span>(中文函数库:获取脚本当前目录())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>dp、sp、px转换</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/dp%E3%80%81sp%E3%80%81px%E8%BD%AC%E6%8D%A2-2021-11-07-17-55-11/</url>
    <content><![CDATA[<h1>dp、sp、px转换</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp2px</span><span class="params">(dpValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> dpValue * scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">px2dp</span><span class="params">(pxValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> pxValue / scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">px2sp</span><span class="params">(pxValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity;</span><br><span class="line">  <span class="keyword">return</span> pxValue / scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sp2px</span><span class="params">(spValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> spValue * scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用例子</span></span><br><span class="line"><span class="built_in">print</span>(dp2px(<span class="number">64</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>gmatch示例简化你的代码</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/gmatch%E7%A4%BA%E4%BE%8B%E7%AE%80%E5%8C%96%E4%BD%A0%E7%9A%84%E4%BB%A3%E7%A0%81-2021-11-07-17-51-39/</url>
    <content><![CDATA[<h1>gmatch示例简化你的代码</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--程序启动时会执行的事件</span></span><br><span class="line"></span><br><span class="line">以前的代码=<span class="string">[==[</span></span><br><span class="line"><span class="string">items=&#123;&#125;</span></span><br><span class="line"><span class="string">for i=1,36 do</span></span><br><span class="line"><span class="string"> table.insert(items,&quot;解析🌐&quot;..tostring(i))</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">AlertDialog.Builder(this)</span></span><br><span class="line"><span class="string">.setTitle(&quot;备用解析&quot;)</span></span><br><span class="line"><span class="string">.setItems(items,&#123;onClick=function(l,v) </span></span><br><span class="line"><span class="string">    if v==0 then     </span></span><br><span class="line"><span class="string">加载网页(&quot;http://jx.1ff1.cn/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==1 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://www.pangujiexi.cc/jiexi.php?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==2 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://v.qiytv.cn/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==3 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://jiexi.bm6ig.cn/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==4 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://t.qiytv.cn/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==5 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://jx.isryun.com/?v=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==6 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://api.69ne.com/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==7 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://api.aaaak.pw/q/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==8 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://www.xuanbo.top/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==9 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://jsap.attakids.com/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==10 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://jx. sigyjiexi.com/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==11 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://www.6g6d.cn/jx/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==12 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://z1.m1907.cn?jx=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==13 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://api.myzch.cn/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==14 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://ysz.myzch.cn/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==15 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://jx.myzch.cn/?v=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==16 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://api.zncss.com/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==17 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://api.baiyug.vip/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==18 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://123dan.top/jie/xi?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==19 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://jx.fuxing56.com/jiexi/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==20 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://www.1717yun.com/beiyong/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==21 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://vip.mpos.ren/v/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==22 then</span></span><br><span class="line"><span class="string">加载网页(&quot;jx.sinbinchina.com/?v=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==23 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://api.iztyy.com/jiexi/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==24 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://by.dybhn.com/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==25 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://v.dybhn.com/index.php?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==26 then</span></span><br><span class="line"><span class="string">加载网页(&quot;https://www.ckmov.vip/api.php?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==27 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://at520.cn/jx/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==28 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://beijixs.cn/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==29 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://playx.top/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==30 then</span></span><br><span class="line"><span class="string">加载网页(&quot; http://bofang.online/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==31 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://api.6uzi.com/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==32 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://nitian9.com/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==33 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://api.oopw.top/jiexi/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==34 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://mimijiexi.top/?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">    if v==35 then</span></span><br><span class="line"><span class="string">加载网页(&quot;http://jx.178du.com/jx2.php?url=&quot;..webView.getUrl());</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> end&#125;)</span></span><br><span class="line"><span class="string">.show()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">]==]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">新代码模板=<span class="string">[==[</span></span><br><span class="line"><span class="string">items=&#123;&#125;</span></span><br><span class="line"><span class="string">for i=1,36 do</span></span><br><span class="line"><span class="string">  table.insert(items,&quot;解析🌐&quot;..tostring(i))</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string">AlertDialog.Builder(this)</span></span><br><span class="line"><span class="string">.setTitle(&quot;备用解析&quot;)</span></span><br><span class="line"><span class="string">.setItems(items,&#123;onClick=function(l,v) </span></span><br><span class="line"><span class="string">    local 解析=%s</span></span><br><span class="line"><span class="string">    加载网页(解析[v+1]..tostring(网页链接))</span></span><br><span class="line"><span class="string">    end&#125;)</span></span><br><span class="line"><span class="string">.show()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">]==]</span><span class="comment">--这里的%s即将要格式化</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">要格式化的=&#123;&#125;<span class="comment">--可以是字符串，这里为了方便就用table</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t,c <span class="keyword">in</span> 以前的代码:<span class="built_in">gmatch</span>(<span class="string">[[加载网页%(&quot;(.-)&quot;]]</span>) <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">table</span>.<span class="built_in">insert</span>(要格式化的,t)<span class="comment">--字符串的话直接拼接就行了</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--如果是字符串就不用dump</span></span><br><span class="line">要格式化的=<span class="built_in">dump</span>(要格式化的)</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除dump后前面的键</span></span><br><span class="line">要格式化的=要格式化的:<span class="built_in">gsub</span>(<span class="string">&quot;%[.-%].-=&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--格式化一下</span></span><br><span class="line">新代码=<span class="built_in">string</span>.<span class="built_in">format</span>(新代码模板,要格式化的)</span><br><span class="line"></span><br><span class="line"><span class="comment">--复制文本(新代码)--复制一下</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--成品在悬浮窗点击事件内</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--悬浮按钮点击时执行的事件</span></span><br><span class="line">items=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">36</span> <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">table</span>.<span class="built_in">insert</span>(items,<span class="string">&quot;解析🌐&quot;</span>..<span class="built_in">tostring</span>(i))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">AlertDialog.Builder(this)</span><br><span class="line">.setTitle(<span class="string">&quot;备用解析&quot;</span>)</span><br><span class="line">.setItems(items,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(l,v)</span></span> </span><br><span class="line">    <span class="keyword">local</span> 解析=&#123;</span><br><span class="line">   <span class="string">&quot;http://jx.1ff1.cn/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://www.pangujiexi.cc/jiexi.php?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://v.qiytv.cn/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://jiexi.bm6ig.cn/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://t.qiytv.cn/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://jx.isryun.com/?v=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://api.69ne.com/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://api.aaaak.pw/q/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://www.xuanbo.top/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://jsap.attakids.com/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://jx. sigyjiexi.com/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://www.6g6d.cn/jx/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://z1.m1907.cn?jx=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://api.myzch.cn/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://ysz.myzch.cn/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://jx.myzch.cn/?v=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://api.zncss.com/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://api.baiyug.vip/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://123dan.top/jie/xi?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://jx.fuxing56.com/jiexi/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://www.1717yun.com/beiyong/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://vip.mpos.ren/v/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;jx.sinbinchina.com/?v=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://api.iztyy.com/jiexi/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://by.dybhn.com/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://v.dybhn.com/index.php?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;https://www.ckmov.vip/api.php?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://at520.cn/jx/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://beijixs.cn/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://playx.top/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://bofang.online/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://api.6uzi.com/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://nitian9.com/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://api.oopw.top/jiexi/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://mimijiexi.top/?url=&quot;</span> ;</span><br><span class="line">   <span class="string">&quot;http://jx.178du.com/jx2.php?url=&quot;</span> ;</span><br><span class="line">  &#125; ;</span><br><span class="line">    加载网页(解析[v+<span class="number">1</span>]..<span class="built_in">tostring</span>(网页链接))</span><br><span class="line">    <span class="keyword">end</span>&#125;)</span><br><span class="line">.show()</span><br><span class="line"></span><br><span class="line">》》</span><br><span class="line">《《实现机器人无缝交流源码，不卡顿》》</span><br><span class="line">《《 <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    LinearLayout,</span><br><span class="line">    layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">    layout_weight=<span class="string">&quot;1&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      ScrollView,</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">      fillViewport=<span class="string">&quot;true&quot;</span>,</span><br><span class="line">      id=<span class="string">&quot;scrollView&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout,</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">        layout_height=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">        background=<span class="string">&quot;#FFFFFFFF&quot;</span>,</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">        paddingLeft=<span class="string">&quot;30dp&quot;</span>,</span><br><span class="line">        paddingRight=<span class="string">&quot;30dp&quot;</span>,</span><br><span class="line">        id=<span class="string">&quot;lt&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    LinearLayout,</span><br><span class="line">    layout_width=<span class="string">&quot;100%w&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;50dp&quot;</span>,</span><br><span class="line">    orientation=<span class="string">&quot;horizontal&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      EditText,</span><br><span class="line">      layout_width=<span class="string">&quot;80%w&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;50dp&quot;</span>,</span><br><span class="line">      textSize=<span class="string">&quot;15sp&quot;</span>,</span><br><span class="line">      id=<span class="string">&quot;et&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      Button,</span><br><span class="line">      layout_width=<span class="string">&quot;20%w&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;50dp&quot;</span>,</span><br><span class="line">      text=<span class="string">&quot;发送&quot;</span>,</span><br><span class="line">      onClick=<span class="string">&quot;发送信息&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 发送信息<span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">  a=<span class="built_in">tostring</span>(et.getText())</span><br><span class="line"></span><br><span class="line">  MeLayout=&#123;</span><br><span class="line">    TextView,</span><br><span class="line">    layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;50dp&quot;</span>,</span><br><span class="line">    Gravity=<span class="string">&quot;center|right&quot;</span>,</span><br><span class="line">    textSize=<span class="string">&quot;18sp&quot;</span>,</span><br><span class="line">    text=a,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  lt.addView(loadlayout(MeLayout))</span><br><span class="line">  dataurl=<span class="string">&quot;http://i.itpk.cn/api.php?question=&quot;</span>..a</span><br><span class="line">  Http.get(dataurl,null,<span class="string">&quot;utf8&quot;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(code,content,cookie,header)</span></span></span><br><span class="line">    RobotLayout=&#123;</span><br><span class="line">      TextView,</span><br><span class="line">      layout_width=<span class="string">&quot;50%w&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;-2&quot;</span>,</span><br><span class="line">      Gravity=<span class="string">&quot;center|left&quot;</span>,</span><br><span class="line">      textSize=<span class="string">&quot;20sp&quot;</span>,</span><br><span class="line">      text=content,</span><br><span class="line">    &#125;</span><br><span class="line">    lt.addView(loadlayout(RobotLayout))</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line">  et.setText(<span class="string">&quot;&quot;</span>)</span><br><span class="line">  scrollView.fullScroll(ScrollView.FOCUS_DOWN);</span><br><span class="line"><span class="comment">--使弹出的输入法不影响布局</span></span><br><span class="line">activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>lua _G 表</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/lua%20_G%20%E8%A1%A8/</url>
    <content><![CDATA[<h1>lua _G 表</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--   _G是一张表，保存了lua所用的所有全局函数和全局变量</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> a,b <span class="keyword">in</span> <span class="built_in">pairs</span>(<span class="built_in">_G</span>) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(a,<span class="string">&quot;\t&quot;</span>,b)</span><br><span class="line">    <span class="keyword">if</span>  <span class="built_in">type</span>(b) == <span class="string">&quot;table&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">for</span> x,y <span class="keyword">in</span> <span class="built_in">pairs</span>(b) <span class="keyword">do</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\t&quot;</span>,<span class="string">&quot;|--&quot;</span>,x,y)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"> <span class="built_in">_G</span>.<span class="built_in">print</span>(<span class="string">&quot;你好&quot;</span>)</span><br><span class="line"> <span class="built_in">_G</span>[<span class="string">&quot;print&quot;</span>](<span class="string">&quot;你好&quot;</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;_G中也保存了自身&quot;</span>,  <span class="built_in">_G</span> , <span class="built_in">_G</span>.<span class="built_in">_G</span>)</span><br><span class="line"><span class="built_in">_G</span>.<span class="built_in">_G</span>.<span class="built_in">_G</span>.<span class="built_in">_G</span>.<span class="built_in">_G</span>.<span class="built_in">_G</span>[<span class="string">&quot;print&quot;</span>](<span class="string">&quot;你好啊&quot;</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">--全局函数和变量会自动加入到_G表</span></span><br><span class="line"> </span><br><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myfun</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;自定义函数&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">_G</span>.a)</span><br><span class="line"><span class="built_in">_G</span>.myfun()</span><br><span class="line"><span class="comment">--手动设置全局变量</span></span><br><span class="line"><span class="built_in">_G</span>[<span class="string">&quot;b&quot;</span>] = <span class="string">&quot;手动的全局变量&quot;</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script type='text/javascript' src='//pl16715598.trustedgatetocontent.com/3c/39/83/3c398343a60d114d14448277b4de73c1.js'></script>
<script type="text/javascript">
	atOptions = {
		'key' : '90c05383e48990fb7a509956acaed29d',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
	document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectiveperformanceformat.com/90c05383e48990fb7a509956acaed29d/invoke.js"></scr' + 'ipt>');
</script>
<script async="async" data-cfasync="false" src="//pl16714935.trustedgatetocontent.com/e7e4b6b8ff15c8b03eee679449da5cdd/invoke.js"></script>
<div id="container-e7e4b6b8ff15c8b03eee679449da5cdd"></div>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>lua test</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/lua%20test-2021-11-07-17-51-11/</url>
    <content><![CDATA[<h1>lua test</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"><span class="comment">--import &quot;layout&quot;</span></span><br><span class="line"><span class="comment">--activity.setTitle(&#x27;AndroLua+&#x27;)</span></span><br><span class="line"><span class="comment">--activity.setTheme(android.R.style.Theme_Holo_Light)</span></span><br><span class="line"><span class="comment">--activity.setContentView(loadlayout(layout))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> _env=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setmetatable</span>(_env,&#123;</span><br><span class="line"> <span class="built_in">__index</span>=<span class="function"><span class="keyword">function</span><span class="params">(self,key)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">_G</span>[key]</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> str=(<span class="built_in">io</span>.readall(activity.getLuaDir(<span class="string">&quot;func.lua&quot;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">pcall</span>(<span class="built_in">load</span>(str,<span class="string">&quot;js&quot;</span>,<span class="string">&quot;bt&quot;</span>,_env))</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">write</span>=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">format</span>=<span class="string">[[function %s(...)</span></span><br><span class="line"><span class="string">   return activity.doString([=[%s]=],&#123;...&#125;)</span></span><br><span class="line"><span class="string">end]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--[=[</span></span><br><span class="line"><span class="comment">str=[[many字 strings]]</span></span><br><span class="line"><span class="comment">code=&quot;return string.char(&quot;</span></span><br><span class="line"><span class="comment">for i=1,string.len(str) do</span></span><br><span class="line"><span class="comment">code=code..string.byte(string.sub(str,i,i))..&quot;,&quot;</span></span><br><span class="line"><span class="comment">end</span></span><br><span class="line"><span class="comment">code=string.sub(code,0,string.len(code)-1)..&quot;)&quot;</span></span><br><span class="line"><span class="comment">print(code,&quot;nn执行结果n&quot;..loadstring(code)())</span></span><br><span class="line"><span class="comment">]=]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">table</span>.size(_env)&gt;<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line"> <span class="built_in">table</span>.<span class="built_in">foreach</span>(_env,<span class="function"><span class="keyword">function</span><span class="params">(k,v)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> dumpStr=<span class="built_in">string</span>.<span class="built_in">dump</span>(v)</span><br><span class="line">  <span class="built_in">table</span>.<span class="built_in">insert</span>(<span class="built_in">write</span>,<span class="built_in">format</span>:<span class="built_in">format</span>(k,dumpStr))</span><br><span class="line"> <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> runStr=<span class="built_in">table</span>.<span class="built_in">concat</span>(<span class="built_in">write</span>,<span class="string">&quot;nn&quot;</span>)</span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">open</span>(activity.getLuaDir(<span class="string">&quot;fua.lua&quot;</span>),<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(runStr):<span class="built_in">close</span>()</span><br><span class="line"><span class="built_in">load</span>(runStr)()</span><br><span class="line"><span class="built_in">print</span>(runStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">--标题()</span></span><br><span class="line"><span class="built_in">print</span>(dp2px(<span class="number">5</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>lua创建对象，强烈推荐</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/lua%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90-2021-11-07-17-45-55/</url>
    <content><![CDATA[<h1>lua创建对象，强烈推荐</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">对象=&#123;&#125;</span><br><span class="line"></span><br><span class="line">对象.名字=<span class="literal">nil</span></span><br><span class="line">对象.爱好=<span class="literal">nil</span></span><br><span class="line">对象.星座=<span class="literal">nil</span></span><br><span class="line">对象.年龄=<span class="number">16.2</span></span><br><span class="line">对象.性别=<span class="string">&quot;女&quot;</span></span><br><span class="line">对象.发色=<span class="string">&quot;黑&quot;</span></span><br><span class="line"></span><br><span class="line">对象.身高=<span class="number">163</span><span class="comment">--math.random(150,170)</span></span><br><span class="line">对象.体重=<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">90</span>,<span class="number">106</span>)</span><br><span class="line">对象.性格=<span class="string">&quot;傻,阔爱,爱吃,呆萌,公主病&quot;</span></span><br><span class="line">对象.三围=&#123;凶=<span class="string">&quot;32A&quot;</span>,药=<span class="string">&quot;75&quot;</span>,臂=<span class="string">&quot;86&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">对象.下身长=<span class="number">0.618</span></span><br><span class="line">对象.上身长=<span class="number">0.382</span></span><br><span class="line">对象.从肚脐眼到脚长=<span class="number">0.9888</span></span><br><span class="line">对象.腿长=<span class="number">74.2</span></span><br><span class="line">对象.大腿=<span class="number">50.5</span></span><br><span class="line">对象.小腿=<span class="number">32.6</span></span><br><span class="line">对象.脚踝=<span class="number">19.6</span></span><br><span class="line">对象.脚码=<span class="number">38</span></span><br><span class="line"></span><br><span class="line">对象.衣服码号=<span class="string">&quot;M&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dump</span>(对象))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>lua异常处理</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/lua%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86-2021-11-07-17-48-45/</url>
    <content><![CDATA[<h1>lua异常处理</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"><span class="comment">--lua有两个函数可以捕获异常</span></span><br><span class="line"><span class="comment">--pcall(fun[,arg1,...])</span></span><br><span class="line"><span class="comment">--xpcall(fun,errfun,[,arg1,...])</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--对比两个函数,xpcall多了异常处理</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b)</span></span></span><br><span class="line"></span><br><span class="line">  a = a+b</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--正常调用</span></span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">err</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;不能相加&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--安全调用,若出现异常,则会调用err函数,程序不会崩溃,继续执行下面的代码</span></span><br><span class="line"><span class="built_in">xpcall</span>(add,err,<span class="number">1</span>,p)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;==========&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> fun=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  import<span class="string">&quot;lg&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">xpcall</span>(fun,</span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(e)</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;报错:n&quot;</span>..e)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">--方法二</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--错误监听</span></span><br><span class="line"><span class="keyword">local</span> fun=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  import<span class="string">&quot;lg&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--监听结束</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--错误事件</span></span><br><span class="line">tryCatch=<span class="function"><span class="keyword">function</span><span class="params">(fun)</span></span></span><br><span class="line">  <span class="keyword">local</span> ret,errMessage=<span class="built_in">pcall</span>(fun);</span><br><span class="line">  错误=ret <span class="keyword">and</span> <span class="string">&quot;false&quot;</span> <span class="keyword">or</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">  <span class="comment">--print(&quot;是否错误:n&quot;..错误..&quot; nn出错信息:n&quot; .. (errMessage or &quot;无&quot;));</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> 错误==<span class="string">&quot;true&quot;</span> <span class="keyword">then</span><span class="comment">--错误提示</span></span><br><span class="line">    <span class="keyword">local</span> ret,errMessage=<span class="built_in">pcall</span>(fun)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;n错误详情：n&quot;</span>..errMessage)</span><br><span class="line">   <span class="keyword">else</span><span class="comment">--无错误正常执行</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;没有错误发生&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">tryCatch(fun)<span class="comment">--调用错误</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>string.dump</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/string.dump-2021-11-07-17-24-52/</url>
    <content><![CDATA[<h1>string.dump</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">7</span>,<span class="number">1</span> <span class="keyword">do</span></span><br><span class="line"> t=<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;中华人民共和国&quot;</span>,i)</span><br><span class="line"> <span class="built_in">print</span>(t)</span><br><span class="line"> <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">char</span>(t))</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DumpTest</span><span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;string.dump test&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> a = <span class="built_in">string</span>.<span class="built_in">dump</span>(DumpTest)</span><br><span class="line"><span class="comment">--将函数DumpTest转换成二进制码</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="keyword">local</span> b = <span class="built_in">loadstring</span>(a)</span><br><span class="line"><span class="comment">--loadstring(string)可以用来运行一段字符串代码.简单来说，就是把字符串转换成代码。</span></span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">--指针地址</span></span><br><span class="line">b()      <span class="comment">--继承</span></span><br><span class="line"></span><br><span class="line">ss=<span class="built_in">string</span>.pack(<span class="string">&quot;&gt;&quot;</span>, <span class="number">0x59</span>, <span class="number">0x7a</span>,<span class="number">118</span>,<span class="number">234</span>,<span class="string">&quot;中文&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ss)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>when用法</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/when%E7%94%A8%E6%B3%95-2021-11-07-17-55-27/</url>
    <content><![CDATA[<h1>when用法</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--when就相当于简化过的if，对于一些简单的判断使用when会爽不少</span></span><br><span class="line"><span class="comment">--例如下面这个栗子</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--以前判断要这样写</span></span><br><span class="line"><span class="keyword">if</span> <span class="number">5</span>&gt;<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;OK&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--在androlua+4.3.3更新后可以这样写</span></span><br><span class="line">when <span class="number">5</span>&gt;<span class="number">1</span> <span class="built_in">print</span>(<span class="string">&quot;OK&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--以前判断要这样写</span></span><br><span class="line"><span class="keyword">if</span> <span class="number">1</span>&gt;<span class="number">5</span> <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;emmmm&quot;</span>)</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;OK&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--在androlua+4.3.3更新后可以这样写</span></span><br><span class="line">when <span class="number">1</span>&gt;<span class="number">5</span> <span class="built_in">print</span>(<span class="string">&quot;emmmm&quot;</span>) <span class="keyword">else</span> <span class="built_in">print</span>(<span class="string">&quot;OK&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>两种桌面快捷方式</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E4%B8%A4%E7%A7%8D%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h1>两种桌面快捷方式</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.ComponentName&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.pm.ShortcutInfo&quot;</span></span><br><span class="line">import <span class="string">&quot;java.util.ArrayList&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.Icon&quot;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;layout&quot;</span></span><br><span class="line">activity.setTheme(android.R.style.Theme_Material_Light_NoActionBar)</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--此工程需要打包后运行</span></span><br><span class="line"><span class="comment">--如果不打包运行，那么快捷方式将创建在这个IDE的图标上</span></span><br><span class="line"></span><br><span class="line">intent1 = Intent(Intent.ACTION_MAIN);</span><br><span class="line">intent1.setComponent(ComponentName(activity.getPackageName(),<span class="string">&quot;com.androlua.Main&quot;</span>));</span><br><span class="line">intent1.setData(Uri.parse(<span class="string">&quot;num1&quot;</span>));</span><br><span class="line"></span><br><span class="line">intent2 = Intent(Intent.ACTION_MAIN);</span><br><span class="line">intent2.setComponent(ComponentName(activity.getPackageName(),<span class="string">&quot;com.androlua.Main&quot;</span>));</span><br><span class="line">intent2.setData(Uri.parse(<span class="string">&quot;num2&quot;</span>));</span><br><span class="line"></span><br><span class="line">intent3 = Intent(Intent.ACTION_MAIN);</span><br><span class="line">intent3.setComponent(ComponentName(activity.getPackageName(),<span class="string">&quot;com.androlua.Main&quot;</span>));</span><br><span class="line">intent3.setData(Uri.parse(<span class="string">&quot;num3&quot;</span>));</span><br><span class="line"></span><br><span class="line">intent4 = Intent(Intent.ACTION_MAIN);</span><br><span class="line">intent4.setComponent(ComponentName(activity.getPackageName(),<span class="string">&quot;com.androlua.Main&quot;</span>));</span><br><span class="line">intent4.setData(Uri.parse(<span class="string">&quot;num4&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">--id,快捷方式名字,快捷方式被点击后执行的intent,快捷方式的图标地址</span></span><br><span class="line">SHORTCUT_TABLE=&#123;</span><br><span class="line">  &#123;<span class="string">&quot;ID1&quot;</span>,<span class="string">&quot;文件&quot;</span>,intent1,activity.getLuaDir()..<span class="string">&quot;/imgs/file.png&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;ID2&quot;</span>,<span class="string">&quot;文件夹&quot;</span>,intent2,activity.getLuaDir()..<span class="string">&quot;/imgs/folder.png&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;ID3&quot;</span>,<span class="string">&quot;播放&quot;</span>,intent3,activity.getLuaDir()..<span class="string">&quot;/imgs/play.png&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;ID4&quot;</span>,<span class="string">&quot;搜索&quot;</span>,intent4,activity.getLuaDir()..<span class="string">&quot;/imgs/magnify.png&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--快捷方式管理器</span></span><br><span class="line">scm = activity.getSystemService(activity.SHORTCUT_SERVICE);</span><br><span class="line"></span><br><span class="line"><span class="comment">--循环添加到对象ArrayList</span></span><br><span class="line">infos = ArrayList();</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(SHORTCUT_TABLE) <span class="keyword">do</span></span><br><span class="line">  si = ShortcutInfo.Builder(this,v[<span class="number">1</span>])</span><br><span class="line">  .setIcon(Icon.createWithBitmap(loadbitmap(v[<span class="number">4</span>])))</span><br><span class="line">  .setShortLabel(v[<span class="number">2</span>])</span><br><span class="line">  .setLongLabel(v[<span class="number">2</span>])</span><br><span class="line">  .setIntent(v[<span class="number">3</span>])</span><br><span class="line">  .build();</span><br><span class="line">  infos.add(si);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--添加快捷方式</span></span><br><span class="line">scm.setDynamicShortcuts(infos);</span><br><span class="line"></span><br><span class="line"><span class="comment">--print(&quot;快捷方式已创建,不信去长按图标&quot;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onNewIntent</span><span class="params">(intent)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--获得传递过来的数据并转化为字符串</span></span><br><span class="line">  <span class="keyword">local</span> uriString = <span class="built_in">tostring</span>(intent.getData())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> <span class="string">&quot;num1&quot;</span>==uriString <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    activity.newActivity(<span class="string">&quot;activitys/activity_1&quot;</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">elseif</span> <span class="string">&quot;num2&quot;</span>==uriString <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    activity.newActivity(<span class="string">&quot;activitys/activity_2&quot;</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">elseif</span> <span class="string">&quot;num3&quot;</span>==uriString <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    activity.newActivity(<span class="string">&quot;activitys/activity_3&quot;</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">elseif</span> <span class="string">&quot;num4&quot;</span>==uriString <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    activity.newActivity(<span class="string">&quot;activitys/activity_4&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--权限</span></span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.launcher.permission.READ_SETTINGS&quot;</span> /&gt;</span><br><span class="line">&lt;!<span class="comment">-- 安装快捷方式 --&gt;</span></span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.launcher.permission.INSTALL_SHORTCUT&quot;</span> /&gt;</span><br><span class="line">&lt;!<span class="comment">-- 卸载快捷方式 --&gt;</span></span><br><span class="line">&lt;uses-permission android:name=<span class="string">&quot;android.launcher.permission.UNINSTALL_SHORTCUT&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--这串代码放在主页就行</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onNewIntent</span><span class="params">(intent)</span></span></span><br><span class="line"><span class="comment">-- 点击快捷方式之后执行的事件。</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tostring</span>(intent.getData()))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--向桌面发送快捷方式的函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 桌面快捷方式<span class="params">(name,data,bit)</span></span></span><br><span class="line">  import<span class="string">&quot;android.view.animation.Animation$AnimationListener&quot;</span></span><br><span class="line">  import<span class="string">&quot;android.graphics.BitmapFactory&quot;</span></span><br><span class="line">  import<span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">  import<span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import<span class="string">&quot;android.content.IntentFilter&quot;</span></span><br><span class="line">  import<span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import<span class="string">&quot;android.content.IntentSender&quot;</span></span><br><span class="line">  import<span class="string">&quot;android.content.ServiceConnection&quot;</span></span><br><span class="line">  <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  import<span class="string">&quot;android.graphics.drawable.Icon&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line">  import<span class="string">&quot;android.content.ComponentName&quot;</span></span><br><span class="line">  <span class="keyword">local</span> intent=Intent(<span class="string">&quot;android.intent.action.MAIN&quot;</span>)</span><br><span class="line">  intent.addCategory(<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>)</span><br><span class="line">  intent.setComponent(ComponentName(activity.getPackageName(),<span class="string">&quot;com.androlua.Main&quot;</span>))</span><br><span class="line">  intent.setData(Uri.parse(data))</span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT&gt;= <span class="number">15</span> <span class="keyword">then</span></span><br><span class="line">    intent.addFlags(<span class="number">524288</span>)intent.addFlags(<span class="number">0x08000000</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> Build.VERSION.SDK_INT&gt;=<span class="number">26</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">      import<span class="string">&quot;android.content.pm.ShortcutInfo&quot;</span></span><br><span class="line">      import <span class="string">&quot;android.content.pm.ShortcutManager&quot;</span></span><br><span class="line"></span><br><span class="line">      activity.getSystemService(<span class="string">&quot;shortcut&quot;</span>).requestPinShortcut(ShortcutInfo.Builder(activity,name).setIcon(Icon.createWithResource(activity,R.drawable.icon)).setShortLabel(name).setIntent(intent).build(),<span class="literal">nil</span>)</span><br><span class="line">      提示<span class="number">6</span><span class="string">&quot;添加快捷方式成功&quot;</span></span><br><span class="line">    <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">      提示<span class="number">6</span><span class="string">&quot;添加快捷方式出错&quot;</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">local</span> 桌面快捷方式=Intent(<span class="string">&quot;com.android.launcher.action.INSTALL_SHORTCUT&quot;</span>)</span><br><span class="line">    桌面快捷方式.putExtra(<span class="string">&quot;android.intent.extra.shortcut.NAME&quot;</span>,name)</span><br><span class="line">    桌面快捷方式.putExtra(<span class="string">&quot;android.intent.extra.shortcut.INTENT&quot;</span>,intent)</span><br><span class="line">    桌面快捷方式.putExtra(<span class="string">&quot;duplicate&quot;</span>,<span class="number">0</span>)</span><br><span class="line">    桌面快捷方式.putExtra(<span class="string">&quot;android.intent.extra.shortcut.ICON&quot;</span>,bit)</span><br><span class="line">    activity.sendBroadcast(桌面快捷方式)</span><br><span class="line">    提示<span class="number">6</span><span class="string">&quot;已添加快捷方式&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>九九乘法</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95/</url>
    <content><![CDATA[<h1>九九乘法</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> m = <span class="number">1</span>,<span class="number">9</span> <span class="keyword">do</span></span><br><span class="line">	s = <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">for</span> n = <span class="number">1</span>,m <span class="keyword">do</span></span><br><span class="line">		s=<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%s%d*%d=%d &quot;</span>,s,n,m,n*m)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line">	<span class="built_in">print</span>(s)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>代码混淆</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E4%BB%A3%E7%A0%81%E6%B7%B7%E6%B7%86-2021-11-07-17-33-21/</url>
    <content><![CDATA[<h1>代码混淆</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">str=<span class="string">[[many字 strings]]</span></span><br><span class="line">code=<span class="string">&quot;return string.char(&quot;</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">code=code..<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(str,i,i))..<span class="string">&quot;,&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">code=<span class="built_in">string</span>.<span class="built_in">sub</span>(code,<span class="number">0</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(code)<span class="number">-1</span>)..<span class="string">&quot;)&quot;</span></span><br><span class="line"><span class="built_in">print</span>(code,<span class="string">&quot;\n\n执行结果\n&quot;</span>..<span class="built_in">loadstring</span>(code)())</span><br><span class="line"></span><br><span class="line">  <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">l=&#123;<span class="built_in">byte</span>(<span class="number">109</span>),<span class="built_in">byte</span>(<span class="number">97</span>),<span class="built_in">byte</span>(<span class="number">110</span>),<span class="built_in">byte</span>(<span class="number">121</span>),<span class="built_in">byte</span>(<span class="number">229</span>),<span class="built_in">byte</span>(<span class="number">173</span>),<span class="built_in">byte</span>(<span class="number">151</span>),<span class="built_in">byte</span>(<span class="number">32</span>),<span class="built_in">byte</span>(<span class="number">115</span>),<span class="built_in">byte</span>(<span class="number">116</span>),<span class="built_in">byte</span>(<span class="number">114</span>),<span class="built_in">byte</span>(<span class="number">105</span>),<span class="built_in">byte</span>(<span class="number">110</span>),<span class="built_in">byte</span>(<span class="number">103</span>),<span class="built_in">byte</span>(<span class="number">115</span>)&#125;</span><br><span class="line">b=<span class="built_in">byte</span>[#l]</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(l)<span class="keyword">do</span></span><br><span class="line">b[k<span class="number">-1</span>]=v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(String(b))</span><br><span class="line">str=<span class="string">[[many字 strings]]</span></span><br><span class="line">code=<span class="string">&quot;return string.char(&quot;</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">  code=code..<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(str,i,i))..<span class="string">&quot;,&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">code=<span class="built_in">string</span>.<span class="built_in">sub</span>(code,<span class="number">0</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(code)<span class="number">-1</span>)..<span class="string">&quot;)&quot;</span></span><br><span class="line"><span class="built_in">print</span>(code,<span class="string">&quot;\n\n执行结果\n&quot;</span>..<span class="built_in">loadstring</span>(code)())</span><br><span class="line"></span><br><span class="line">  <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--l=&#123;109,97,110,121,229,173,151,32,115,116,114,105,110,103,115&#125;</span></span><br><span class="line"><span class="comment">--l=&#123;byte(109),byte(97),byte(110),byte(121),byte(229),byte(173),byte(151),byte(32),byte(115),byte(116),byte(114),byte(105),byte(110),byte(103),byte(115)&#125;</span></span><br><span class="line">str=<span class="string">[[many字 strings]]</span></span><br><span class="line">l=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">table</span>.<span class="built_in">insert</span>(l,<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(str,i,i)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">b=<span class="built_in">byte</span>[#l]</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(l)<span class="keyword">do</span></span><br><span class="line">  b[k<span class="number">-1</span>]=v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dump</span>(l),String(b))</span><br><span class="line"></span><br><span class="line">  <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">str=<span class="string">[[many字 strings]]</span></span><br><span class="line">code=<span class="string">&quot;return utf8.char(&quot;</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,utf8.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">  code=code..utf8.<span class="built_in">byte</span>(utf8.<span class="built_in">sub</span>(str,i,i))..<span class="string">&quot;,&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">code=<span class="built_in">string</span>.<span class="built_in">sub</span>(code,<span class="number">0</span>,utf8.<span class="built_in">len</span>(code)<span class="number">-1</span>)..<span class="string">&quot;)&quot;</span></span><br><span class="line"><span class="built_in">print</span>(code,<span class="string">&quot;\n\n执行结果\n&quot;</span>..<span class="built_in">loadstring</span>(code)())</span><br><span class="line"></span><br><span class="line"> <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">--print(return utf8.char(109+9999-7777-2222,97+9999-7777-2222,110+9999-7777-2222,121+9999-7777-2222,23383+9999-7777-2222,32+9999-7777-2222,115+9999-7777-2222,116+9999-7777-2222,114+9999-7777-2222,105+9999-7777-2222,110+9999-7777-2222,103+9999-7777-2222,115+9999-7777-2222))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--print(return utf8.char(109+&#x27;0&#x27;,97+&#x27;0&#x27;,110+&#x27;0&#x27;,121+&#x27;0&#x27;,23383+&#x27;0&#x27;,32+&#x27;0&#x27;,115+&#x27;0&#x27;,116+&#x27;0&#x27;,114+&#x27;0&#x27;,105+&#x27;0&#x27;,110+&#x27;0&#x27;,103+&#x27;0&#x27;,115+&#x27;0&#x27;))		</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">loadstring</span>(<span class="string">[[return utf8.char(109+&#x27;0&#x27;,97+&#x27;0&#x27;,110+&#x27;0&#x27;,121+&#x27;0&#x27;,23383+&#x27;0&#x27;,32+&#x27;0&#x27;,115+&#x27;0&#x27;,116+&#x27;0&#x27;,114+&#x27;0&#x27;,105+&#x27;0&#x27;,110+&#x27;0&#x27;,103+&#x27;0&#x27;,115+&#x27;0&#x27;)]]</span>)())		</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">[[many字 strings]]</span></span><br><span class="line">l=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">  l=luajava.astable(String(str).getBytes())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">b=<span class="built_in">byte</span>[#l]</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(l)<span class="keyword">do</span></span><br><span class="line">  b[k<span class="number">-1</span>]=v</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dump</span>(l),String(b))</span><br><span class="line"></span><br><span class="line"> <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">str=<span class="string">[[many字 strings]]</span></span><br><span class="line">l=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">  l=luajava.astable(String(str).toCharArray())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">b=<span class="built_in">char</span>[#l]</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(l)<span class="keyword">do</span></span><br><span class="line">  b[k<span class="number">-1</span>]=<span class="built_in">char</span>(v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dump</span>(l),String(b))</span><br><span class="line"></span><br><span class="line"><span class="comment">--打印</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">DumpTest</span><span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;jj&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> a = <span class="built_in">string</span>.<span class="built_in">dump</span>(DumpTest)</span><br><span class="line"><span class="comment">--将函数DumpTest转换成二进制码</span></span><br><span class="line"><span class="comment">--print(a)</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">[[=IAPYthkQWr2DFAH7uAABwAAA5BA10aAGv/rglaD4sACTvMb9SVlXsru5BVrUnoyY1Y3gQGsuLhh9pVrLK0jsf38LvVRIJwf42ZqaYPtbw8GYxN+YAICgoACACYkAoDmZgEBQAxxJ6Dk3LjYm1ng1TWg/BsrylFK4VdzSLgmt2/zDKcCpmHkeg==]]</span></span><br><span class="line">code=<span class="string">&quot;return utf8.char(&quot;</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,utf8.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">  code=code..utf8.<span class="built_in">byte</span>(utf8.<span class="built_in">sub</span>(str,i,i))..<span class="string">&quot;+9999-7777-2222,&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">code=utf8.<span class="built_in">sub</span>(code,<span class="number">0</span>,utf8.<span class="built_in">len</span>(code)<span class="number">-1</span>)..<span class="string">&quot;)&quot;</span></span><br><span class="line"><span class="comment">--print(&quot;\n\n执行结果\n&quot;..loadstring([[return utf8.char(112+9999-7777-2222,114+9999-7777-2222,105+9999-7777-2222,110+9999-7777-2222,116+9999-7777-2222,40+9999-7777-2222,34+9999-7777-2222,106+9999-7777-2222,120+9999-7777-2222,106+9999-7777-2222,120+9999-7777-2222,34+9999-7777-2222,41+9999-7777-2222)		]])())</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">load</span>(<span class="built_in">loadstring</span>(code)())())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">----string.dump自检和loadstring自检</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> _mirror_string_dump_c_FUNC=<span class="built_in">string</span>.<span class="built_in">dump</span></span><br><span class="line"><span class="keyword">local</span> _mirror_loadstring_c_FUNC=<span class="built_in">loadstring</span></span><br><span class="line"><span class="keyword">local</span> _proxy_string_dump_c_FUMC</span><br><span class="line"><span class="built_in">loadstring</span>=<span class="function"><span class="keyword">function</span><span class="params">(code,...)</span></span></span><br><span class="line">  <span class="built_in">print</span>(code)</span><br><span class="line">  <span class="keyword">return</span> _mirror_loadstring_c_FUNC(code,...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">dump</span>=<span class="function"><span class="keyword">function</span><span class="params">(func,nodebug)</span></span></span><br><span class="line">  <span class="keyword">if</span> nodebug~=<span class="literal">true</span> <span class="keyword">then</span> nodebug=<span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> func==<span class="built_in">loadstring</span> <span class="keyword">or</span> func==_proxy_string_dump_c_FUMC <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&quot;unable to dump given function&quot;</span>,<span class="number">1</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> _mirror_string_dump_c_FUNC(func,nodebug)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">_proxy_string_dump_c_FUMC=<span class="built_in">string</span>.<span class="built_in">dump</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span>(<span class="number">1</span>)<span class="keyword">end</span>))</span><br><span class="line"><span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="built_in">loadstring</span>))</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;string.dump test loadstring run here.&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>))</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;string.dump test string.dump run here.&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">loadstring</span>(<span class="string">&quot;print(111)&quot;</span>)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> _mirror_string_dump_c_FUNC=<span class="built_in">string</span>.<span class="built_in">dump</span></span><br><span class="line"><span class="keyword">local</span> _mirror_loadstring_c_FUNC=<span class="built_in">loadstring</span></span><br><span class="line"><span class="built_in">loadstring</span>=<span class="function"><span class="keyword">function</span><span class="params">(code,...)</span></span></span><br><span class="line">  <span class="built_in">print</span>(code)</span><br><span class="line">  <span class="keyword">return</span> _mirror_loadstring_c_FUNC(code,...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">dump</span>=<span class="function"><span class="keyword">function</span><span class="params">(func,nodebug)</span></span></span><br><span class="line">  <span class="keyword">if</span> nodebug~=<span class="literal">true</span> <span class="keyword">then</span> nodebug=<span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> func==<span class="built_in">loadstring</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&quot;unable to dump given function&quot;</span>,<span class="number">1</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> _mirror_string_dump_c_FUNC(func,nodebug)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span>(<span class="number">1</span>)<span class="keyword">end</span>))</span><br><span class="line"><span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="built_in">loadstring</span>))</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;string.dump test loadstring run here.&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="built_in">loadstring</span>(<span class="string">&quot;print(111)&quot;</span>)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">XLInterceptionTool=&#123;</span><br><span class="line">  [<span class="string">&quot;load&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(code,...)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;load:&quot;</span>,code)</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  [<span class="string">&quot;loadstring&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(code,...)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;loadstring:&quot;</span>,code)</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  [<span class="string">&quot;loadfile&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(filepath,...)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;loadfile:&quot;</span>,filepath)</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  [<span class="string">&quot;dofile&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(filepath,...)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;dofile:&quot;</span>,filepath)</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">  [<span class="string">&quot;string.dump&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">(func,...)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;string.dump:&quot;</span>,func)</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--lua的各种加载api</span></span><br><span class="line"><span class="keyword">local</span> _mirror_string_dump_c_FUNC=<span class="built_in">string</span>.<span class="built_in">dump</span></span><br><span class="line"><span class="keyword">local</span> _mirror_loadstring_c_FUNC=<span class="built_in">loadstring</span></span><br><span class="line"><span class="keyword">local</span> _mirror_load_c_FUNC=<span class="built_in">load</span></span><br><span class="line"><span class="keyword">local</span> _mirror_loadfile_c_FUNC=<span class="built_in">loadfile</span></span><br><span class="line"><span class="keyword">local</span> _mirror_dofile_c_FUNC=<span class="built_in">dofile</span></span><br><span class="line"><span class="keyword">local</span> _proxy_string_dump_c_FUMC</span><br><span class="line"><span class="built_in">loadstring</span>=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">  XLInterceptionTool[<span class="string">&quot;loadstring&quot;</span>](...)</span><br><span class="line">  <span class="keyword">return</span> _mirror_loadstring_c_FUNC(...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">load</span>=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">  XLInterceptionTool[<span class="string">&quot;load&quot;</span>](...)</span><br><span class="line">  <span class="keyword">return</span> _mirror_load_c_FUNC(...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">loadfile</span>=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">  XLInterceptionTool[<span class="string">&quot;loadfile&quot;</span>](...)</span><br><span class="line">  <span class="keyword">return</span> _mirror_loadfile_c_FUNC(...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">dofile</span>=<span class="function"><span class="keyword">function</span><span class="params">(...)</span></span></span><br><span class="line">  XLInterceptionTool[<span class="string">&quot;dofile&quot;</span>](...)</span><br><span class="line">  <span class="keyword">return</span> _mirror_dofile_c_FUNC(...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">dump</span>=<span class="function"><span class="keyword">function</span><span class="params">(func,nodebug)</span></span></span><br><span class="line">  XLInterceptionTool[<span class="string">&quot;string.dump&quot;</span>](func,nodebug)</span><br><span class="line">  <span class="keyword">if</span> nodebug~=<span class="literal">true</span> <span class="keyword">then</span> nodebug=<span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> (func==<span class="built_in">loadstring</span> <span class="keyword">or</span></span><br><span class="line">    func==<span class="built_in">load</span> <span class="keyword">or</span></span><br><span class="line">    func==<span class="built_in">loadfile</span> <span class="keyword">or</span></span><br><span class="line">    func==<span class="built_in">dofile</span> <span class="keyword">or</span></span><br><span class="line">    func==_mirror_activity_doString_java_METHOD <span class="keyword">or</span></span><br><span class="line">    func==_proxy_string_dump_c_FUMC) <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">error</span>(<span class="string">&quot;unable to dump given function&quot;</span>,<span class="number">1</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> _mirror_string_dump_c_FUNC(func,nodebug)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">_proxy_string_dump_c_FUMC=<span class="built_in">string</span>.<span class="built_in">dump</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--测试</span></span><br><span class="line">func=<span class="built_in">loadstring</span>(<span class="string">&quot;print(111)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(func,func())</span><br><span class="line"><span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="built_in">loadstring</span>))</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;use string.dump test loadstring run here.&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">func=<span class="built_in">load</span>(<span class="string">&quot;print(222)&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(func,func())</span><br><span class="line"><span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="built_in">loadstring</span>))</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;use string.dump test load run here.&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span>(<span class="number">1</span>)<span class="keyword">end</span>))</span><br><span class="line"><span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>(<span class="built_in">string</span>.<span class="built_in">dump</span>))</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;use string.dump test string.dump run here.&quot;</span>)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"> <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">    <span class="comment">--第三方属性检查完毕</span></span><br><span class="line">    <span class="comment">-----------------------------------------------------------------------------</span></span><br><span class="line">activity.setTitle(utf8.<span class="built_in">char</span>((<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> t=&#123;<span class="number">65</span>,<span class="number">110</span>,<span class="number">100</span>,<span class="number">114</span>,<span class="number">111</span>,<span class="number">76</span>,<span class="number">117</span>,<span class="number">97</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">unpack</span>(t)</span><br><span class="line">    <span class="keyword">end</span>)()))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(utf8.<span class="built_in">char</span>((<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">local</span> t=&#123;<span class="number">112</span>,<span class="number">114</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">116</span>,<span class="number">40</span>,<span class="number">39</span>,<span class="number">40857</span>,<span class="number">39</span>,<span class="number">41</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">unpack</span>(t)</span><br><span class="line">    <span class="keyword">end</span>)()))</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">--print(loadstring([[return utf8.char(109+&#x27;0&#x27;,97+&#x27;0&#x27;,110+&#x27;0&#x27;,121+&#x27;0&#x27;,23383+&#x27;0&#x27;,32+&#x27;0&#x27;,115+&#x27;0&#x27;,116+&#x27;0&#x27;,114+&#x27;0&#x27;,105+&#x27;0&#x27;,110+&#x27;0&#x27;,103+&#x27;0&#x27;,115+&#x27;0&#x27;)]])())		</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">str=<span class="string">[[many字 strings]]</span></span><br><span class="line">code=<span class="string">&quot;utf8.char((function() \nlocal t=&#123;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,utf8.<span class="built_in">len</span>(str) <span class="keyword">do</span></span><br><span class="line">  code=code..utf8.<span class="built_in">byte</span>(utf8.<span class="built_in">sub</span>(str,i,i))..<span class="string">&quot;,&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">code=<span class="built_in">string</span>.<span class="built_in">sub</span>(code,<span class="number">0</span>,utf8.<span class="built_in">len</span>(code)<span class="number">-1</span>)..<span class="string">&quot;&#125; \nreturn table.unpack(t) \n end)())&quot;</span></span><br><span class="line"><span class="comment">--print(code,&quot;\n\n执行结果\n&quot;..loadstring(code)())</span></span><br><span class="line"><span class="built_in">print</span>(code)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(utf8.<span class="built_in">char</span>((<span class="function"><span class="keyword">function</span><span class="params">()</span></span> </span><br><span class="line"><span class="keyword">local</span> t=&#123;<span class="number">109</span>,<span class="number">97</span>,<span class="number">110</span>,<span class="number">121</span>,<span class="number">23383</span>,<span class="number">32</span>,<span class="number">115</span>,<span class="number">116</span>,<span class="number">114</span>,<span class="number">105</span>,<span class="number">110</span>,<span class="number">103</span>,<span class="number">115</span>&#125; </span><br><span class="line"><span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">unpack</span>(t) </span><br><span class="line"> <span class="keyword">end</span>)()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--加密工具</span></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">encodeBase64</span><span class="params">(source_str)</span></span></span><br><span class="line">    <span class="keyword">local</span> b64chars = <span class="string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&#x27;</span></span><br><span class="line">    <span class="keyword">local</span> s64 = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">local</span> str = source_str</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> #str &gt; <span class="number">0</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> bytes_num = <span class="number">0</span></span><br><span class="line">        <span class="keyword">local</span> buf = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> byte_cnt=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">            buf = (buf * <span class="number">256</span>)</span><br><span class="line">            <span class="keyword">if</span> #str &gt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">                buf = buf + <span class="built_in">string</span>.<span class="built_in">byte</span>(str, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">                str = <span class="built_in">string</span>.<span class="built_in">sub</span>(str, <span class="number">2</span>)</span><br><span class="line">                bytes_num = bytes_num + <span class="number">1</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> group_cnt=<span class="number">1</span>,(bytes_num+<span class="number">1</span>) <span class="keyword">do</span></span><br><span class="line">            <span class="keyword">local</span> b64char = <span class="built_in">math</span>.<span class="built_in">fmod</span>(<span class="built_in">math</span>.<span class="built_in">floor</span>(buf/<span class="number">262144</span>), <span class="number">64</span>) + <span class="number">1</span></span><br><span class="line">            s64 = s64 .. <span class="built_in">string</span>.<span class="built_in">sub</span>(b64chars, b64char, b64char)</span><br><span class="line">            buf = buf * <span class="number">64</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> fill_cnt=<span class="number">1</span>,(<span class="number">3</span>-bytes_num) <span class="keyword">do</span></span><br><span class="line">            s64 = s64 .. <span class="string">&#x27;=&#x27;</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> s64</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--Pathjia = gg.prompt(&#123;[1]=&#x27;选择要加密的脚本&#x27;&#125;, &#123;[1]=&#x27;/storage/emulated/0&#x27;&#125;,&#123;[1]=&#x27;file&#x27;&#125;)</span></span><br><span class="line"><span class="comment">--if Pathjia==nil then</span></span><br><span class="line"><span class="comment">--os.exit()</span></span><br><span class="line"><span class="comment">--end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;/storage/emulated/0/Android/data/com.tencent.mobileqq/Tencent/QQfile_recv/lua.lua&quot;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="built_in">assert</span>(file)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">decryption = <span class="string">&#x27;---交流群:1033752334\nlocal Yicjm = function(Yicstr)\nlocal b64chars = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;  \nlocal temp = &#123;&#125;  \nfor i = 1, 64 do    \ntemp[string.sub(b64chars, i, i)] = i  \nend  \ntemp[&quot;=&quot;] = 0  \nlocal str = &quot;&quot;  \nfor i = 1, #Yicstr, 4 do    \nif not (i &gt; #Yicstr) then      \nlocal data = 0      \nlocal str_count = 0      \nfor j = 0, 3 do        \nlocal str1 = string.sub(Yicstr, i + j, i + j)        \nif not temp[str1] then          \nreturn        \nend        \nif temp[str1] &lt; 1 then          \ndata = data * 64        \nelse          \ndata = data * 64 + temp[str1] - 1          \nstr_count = str_count + 1        \nend      \nend      \nfor j = 16, 0, -8 do        \nif str_count &gt; 0 then          \nstr = str .. string.char(math.floor(data / math.pow(2, j)))          \ndata = math.fmod(data, math.pow(2, j))          \nstr_count = str_count - 1        \nend      \nend    \nend  \nend  \nlocal last = tonumber(string.byte(str, string.len(str), string.len(str)))  \nif last == 0 then    \nstr = string.sub(str, 1, string.len(str) - 1)  \nend  \nreturn str\nend \nlocal base64 = Yicjm(&quot;base64加密&quot;)\n\nlocal base64 = load(base64)\n\nload(base64)&#x27;</span></span><br><span class="line"><span class="keyword">local</span> source_str = file:<span class="built_in">read</span>(<span class="string">&#x27;*a&#x27;</span>)file:<span class="built_in">close</span>()</span><br><span class="line">wzdm=encodeBase64(source_str)</span><br><span class="line">wzdm2 = <span class="built_in">string</span>.<span class="built_in">gsub</span>(decryption, <span class="string">&quot;base64加密&quot;</span>,wzdm)</span><br><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;/storage/emulated/0/Android/data/com.tencent.mobileqq/Tencent/QQfile_recv/lua.lua&quot;</span>..<span class="string">&#x27;Bx&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">file:<span class="built_in">write</span>(wzdm2)</span><br><span class="line">file:<span class="built_in">close</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n交流群:1033752334\n加密成功\n&#x27;</span>..<span class="string">&quot;/storage/emulated/0/Android/data/com.tencent.mobileqq/Tencent/QQfile_recv/lua.lua&quot;</span>..<span class="string">&#x27;BX&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>伪分析版混淆</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E4%BC%AA%E5%88%86%E6%9E%90%E7%89%88%E6%B7%B7%E6%B7%86-2021-11-07-17-50-49/</url>
    <content><![CDATA[<h1>伪分析版混淆</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tabgsub</span><span class="params">(str,tab_in,tab_from)</span></span></span><br><span class="line">  str = <span class="built_in">tostring</span>(str)</span><br><span class="line">  <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(tab_in) <span class="keyword">do</span></span><br><span class="line">    v = <span class="built_in">tostring</span>(v)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(tab_from)==<span class="string">&quot;table&quot;</span> <span class="keyword">then</span></span><br><span class="line">      str = str:<span class="built_in">gsub</span>(v,tab_from[k])</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      str = str:<span class="built_in">gsub</span>(v,tab_from)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">randomseed</span>(<span class="built_in">os</span>.<span class="built_in">time</span>())</span><br><span class="line"><span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rand</span><span class="params">(num)</span></span><span class="comment">--生成混淆码</span></span><br><span class="line">  <span class="keyword">local</span> tab=&#123;<span class="string">&quot;O&quot;</span>,<span class="string">&quot;o&quot;</span>,<span class="string">&quot;0&quot;</span>&#125;</span><br><span class="line">  <span class="keyword">local</span> str=tab[<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,#tab<span class="number">-1</span>)]</span><br><span class="line">  <span class="keyword">for</span> i=<span class="number">1</span>,num<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">    str = str..tab[<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,#tab)]</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">inf=&#123;</span><br><span class="line">  <span class="string">&quot;=&quot;</span>,<span class="string">&quot;= +=&quot;</span>,</span><br><span class="line">  <span class="string">&quot; +&quot;</span>,</span><br><span class="line">  <span class="string">&quot;%. +&quot;</span>,<span class="string">&quot; +%.&quot;</span>,</span><br><span class="line">  <span class="string">&quot;%[ +&quot;</span>,<span class="string">&quot; +]&quot;</span>,<span class="string">&quot;%] +%[&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">from=&#123;</span><br><span class="line">  <span class="string">&quot; = &quot;</span>,<span class="string">&quot;==&quot;</span>,</span><br><span class="line">  <span class="string">&quot; &quot;</span>,</span><br><span class="line">  <span class="string">&quot;.&quot;</span>,<span class="string">&quot;.&quot;</span>,</span><br><span class="line">  <span class="string">&quot;[&quot;</span>,<span class="string">&quot;]&quot;</span>,<span class="string">&quot;][&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInt</span><span class="params">(code)</span></span><span class="comment">--获得变量</span></span><br><span class="line">  <span class="keyword">local</span> str=<span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="keyword">local</span> tab=&#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> k <span class="keyword">in</span> code:<span class="built_in">gmatch</span>(<span class="string">&quot;(%S+) = &quot;</span>) <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> str:<span class="built_in">find</span>(k) <span class="keyword">and</span> <span class="keyword">not</span> k:<span class="built_in">find</span>(<span class="string">&quot;%[&quot;</span>) <span class="keyword">and</span> <span class="keyword">not</span> k:<span class="built_in">find</span>(<span class="string">&quot;%.&quot;</span>) <span class="keyword">then</span></span><br><span class="line">      tab[#tab+<span class="number">1</span>]=k</span><br><span class="line">      str = str..k..<span class="string">&quot; &quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> tab</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">Man=&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IntForm</span><span class="params">(code)</span></span><span class="comment">--调用此函数用于更新混淆</span></span><br><span class="line">  <span class="keyword">if</span> Man[code]==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">local</span> hx</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span></span><br><span class="line">      hx=Rand(<span class="number">8</span>)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">table</span>.<span class="built_in">find</span>(Man,hx) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    Man[code]=hx</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> Man[code]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hxgsub</span><span class="params">(code,tab)</span></span></span><br><span class="line">  code = <span class="string">&quot;&lt;&quot;</span>..code..<span class="string">&quot;&gt;&quot;</span><span class="comment">--此处负责执行替换动作</span></span><br><span class="line">  <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(tab) <span class="keyword">do</span></span><br><span class="line">    code = code:<span class="built_in">gsub</span>(<span class="string">&quot;(.)(&quot;</span>..v..<span class="string">&quot;)(.)&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(r1,r2,r3)</span></span></span><br><span class="line">      <span class="comment">-- r1,r2,r3=tostring(r1),tostring(r2),tostring(r3)</span></span><br><span class="line">      <span class="keyword">if</span> r1:<span class="built_in">find</span><span class="string">&quot;%a&quot;</span> <span class="keyword">or</span> r3:<span class="built_in">find</span><span class="string">&quot;%a&quot;</span> <span class="keyword">and</span> <span class="keyword">not</span> r1:<span class="built_in">find</span><span class="string">&quot;=&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> r1..r2..r3</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> r1..IntForm(r2)..r3</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> code:<span class="built_in">gsub</span>(<span class="string">&quot;^&lt;&quot;</span>,<span class="string">&quot;&quot;</span>):<span class="built_in">gsub</span>(<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">code=<span class="string">[[</span></span><br><span class="line"><span class="string"> a=代码放这里</span></span><br><span class="line"><span class="string"> print(a)</span></span><br><span class="line"><span class="string"> if a==1 then</span></span><br><span class="line"><span class="string"> end</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rcode=Tabgsub(code,inf,from)</span><br><span class="line"></span><br><span class="line">hxcode=Hxgsub(code,getInt(rcode))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(hxcode)<span class="comment">--混淆后字符</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Hi:) </span></span><br><span class="line"><span class="comment">--不想整词法分析 整了个挨打的做法</span></span><br><span class="line"><span class="comment">--主要是rcode这个变量的表</span></span><br><span class="line"><span class="comment">--目前没得办法扫到全部变量 因为过滤了.那些的懒得整</span></span><br><span class="line"><span class="comment">--还有在对于大量代码的情况下有可能出现我没考虑过的情况出现导致错误</span></span><br><span class="line"><span class="comment">--所以玩玩就好了</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>侧边栏滑动</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E4%BE%A7%E8%BE%B9%E6%A0%8F%E6%BB%91%E5%8A%A8-2021-11-07-17-57-41/</url>
    <content><![CDATA[<h1>侧边栏滑动</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--锁定/禁止滑动</span></span><br><span class="line">侧滑id.setDrawerLockMode(DrawerLayout.LOCK_MODE_UNLOCKED, Gravity.END);</span><br><span class="line"></span><br><span class="line"><span class="comment">--开启滑动</span></span><br><span class="line">侧滑id.setDrawerLockMode(DrawerLayout.LOCK_MODE_LOCKED_OPEN,Gravity.END);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>关于X5WebView控件</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%85%B3%E4%BA%8EX5WebView%E6%8E%A7%E4%BB%B6-2021-11-07-17-54-54/</url>
    <content><![CDATA[<h1>关于X5WebView控件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.PixelFormat&quot;</span></span><br><span class="line">import<span class="string">&quot;com.tencent.smtt.sdk.WebViewClient&quot;</span></span><br><span class="line"><span class="comment">--布局表控件 WebView;</span></span><br><span class="line"><span class="comment">--布局表之前导入X5WebView控件</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.sdk.WebView&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--修复上屏闪烁</span></span><br><span class="line">activity.getWindow().setFormat(PixelFormat.TRANSLUCENT);</span><br><span class="line"><span class="comment">--加载网页</span></span><br><span class="line">id.loadUrl(<span class="string">&quot;http://www.baidu.com/&quot;</span>)</span><br><span class="line">webSettings = wv.getSettings();</span><br><span class="line"><span class="comment">--支持JS</span></span><br><span class="line">webSettings.setJavaScriptEnabled(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">--无广告百度UA</span></span><br><span class="line">APP_NAME_UA=<span class="string">&quot;Mozilla/5.0 (Linux; Android 7.0; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/48.0.2564.116 Mobile Safari/537.36 T7/10.3 SearchCraft/2.6.2 (Baidu; P1 7.0)&quot;</span></span><br><span class="line"><span class="comment">--自定义UA</span></span><br><span class="line">webSettings.setUserAgentString(webSettings.getUserAgentString()..APP_NAME_UA);</span><br><span class="line"><span class="comment">--设置字体大小:100表示正常,120表示文字放大1.2倍</span></span><br><span class="line">webSettings.setTextZoom(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示版本</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.sdk.QbSdk&quot;</span></span><br><span class="line">tbsVersion = QbSdk.getTbsVersion(this);</span><br><span class="line">TID = QbSdk.getTID();</span><br><span class="line">qBVersion = QbSdk.getMiniQBVersion(this);</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;TBS版本:&quot;</span>..tbsVersion)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--监听事件</span></span><br><span class="line">id.setWebViewClient(WebViewClient()&#123;</span><br><span class="line"></span><br><span class="line">  shouldOverrideUrlLoading=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line"></span><br><span class="line">    view.loadUrl(url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">  onReceivedError=<span class="function"><span class="keyword">function</span><span class="params">(var1,var2,var3,var4)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;网页加载失败&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">--与返回键互交</span></span><br><span class="line"><span class="comment">--网页与返回键之间的交互</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(keyCode,event)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; wv.canGoBack())<span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    id.goBack()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用AndroLuaX+1.0.0.4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>多任务-新</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%A4%9A%E4%BB%BB%E5%8A%A1-%E6%96%B0/</url>
    <content><![CDATA[<h1>多任务-新</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua+&#x27;</span>)</span><br><span class="line">activity.setTheme(android.R.style.Theme_Holo_Light)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">go</span><span class="params">(...)</span></span></span><br><span class="line">  <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="built_in">print</span><span class="string">&quot;mmmmmmm&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">(s)</span></span></span><br><span class="line">  <span class="built_in">print</span>(s)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bu</span><span class="params">()</span></span></span><br><span class="line">  task(go,<span class="string">&quot;xxx&quot;</span>,a)</span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">bu()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>好看的对话框</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%A5%BD%E7%9C%8B%E7%9A%84%E5%AF%B9%E8%AF%9D%E6%A1%86-2021-11-07-17-50-28/</url>
    <content><![CDATA[<h1>好看的对话框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.ComponentName&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--import &quot;layout&quot;</span></span><br><span class="line"><span class="comment">--activity.setTitle(&#x27;AndroLua+&#x27;)</span></span><br><span class="line">activity.setTheme(android.R.style.Theme_DeviceDefault_Light)</span><br><span class="line"><span class="comment">--activity.setContentView(loadlayout(layout))</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line"><span class="comment">--布局表中调用</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Typeface&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 字体<span class="params">(t)</span></span></span><br><span class="line">  <span class="keyword">return</span> Typeface.createFromFile(File(activity.getLuaDir()..<span class="string">&quot;/res/&quot;</span>..t..<span class="string">&quot;.ttf&quot;</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">强调色=<span class="number">0xffef7584</span></span><br><span class="line">文字=<span class="number">0xFF212121</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 输入对话框<span class="params">(标题,HINT,点击事件,中立按钮,中立按钮点击事件,点击按钮之后是否关闭)</span></span></span><br><span class="line">  import <span class="string">&quot;android.app.AlertDialog&quot;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> 关闭对话框<span class="params">()</span></span></span><br><span class="line">    dl.dismiss()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="comment">--输入对话框</span></span><br><span class="line">  InputLayout=&#123;</span><br><span class="line">    LinearLayout;</span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">    Focusable=<span class="literal">true</span>,</span><br><span class="line">    FocusableInTouchMode=<span class="literal">true</span>,</span><br><span class="line">    <span class="comment">--[[ &#123;</span></span><br><span class="line"><span class="comment">      TextView;</span></span><br><span class="line"><span class="comment">      id=&quot;Prompt&quot;,</span></span><br><span class="line"><span class="comment">      textSize=&quot;15sp&quot;,</span></span><br><span class="line"><span class="comment">      layout_marginTop=&quot;10dp&quot;;</span></span><br><span class="line"><span class="comment">      layout_marginLeft=&quot;3dp&quot;,</span></span><br><span class="line"><span class="comment">      layout_width=&quot;80%w&quot;;</span></span><br><span class="line"><span class="comment">      layout_gravity=&quot;center&quot;,</span></span><br><span class="line"><span class="comment">      text=&quot;输入路径:&quot;;</span></span><br><span class="line"><span class="comment">    &#125;;]]</span></span><br><span class="line">    &#123;</span><br><span class="line">      TextView;</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      id=<span class="string">&quot;标题b&quot;</span>;</span><br><span class="line">      <span class="comment">--  gravity=&quot;center&quot;;</span></span><br><span class="line">      textColor=文字;<span class="comment">--卡片背景颜色--#F17F42</span></span><br><span class="line">      layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      textSize=<span class="string">&quot;18sp&quot;</span>;</span><br><span class="line">      <span class="comment">--onClick=关闭对话框;</span></span><br><span class="line">      padding=<span class="string">&quot;20dp&quot;</span>;</span><br><span class="line">      paddingBottom=<span class="string">&quot;0dp&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      EditText;</span><br><span class="line">      hint=HINT;</span><br><span class="line">      <span class="comment">-- text=&quot;/sdcard/&quot;;</span></span><br><span class="line">      layout_marginTop=<span class="string">&quot;22dp&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;22dp&quot;</span>;</span><br><span class="line">      layout_margin=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      layout_gravity=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">      id=<span class="string">&quot;edit&quot;</span>;</span><br><span class="line">     <span class="comment">-- Typeface=字体(&quot;Product&quot;);</span></span><br><span class="line">      <span class="comment">--  cursorVisible=false;--隐藏编辑框光标,设置为true则显示</span></span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      FrameLayout;</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        <span class="comment">--layout_gravity=&quot;end&quot;;</span></span><br><span class="line">        &#123;</span><br><span class="line">          CardView;<span class="comment">--卡片控件</span></span><br><span class="line">          id=<span class="string">&quot;floatbuttonm&quot;</span>;</span><br><span class="line">          <span class="comment">--  layout_gravity=&quot;right|bottom&quot;;</span></span><br><span class="line">          CardElevation=<span class="string">&#x27;0dp&#x27;</span>;<span class="comment">--卡片阴影</span></span><br><span class="line">          <span class="comment">--adjustViewBounds=true,</span></span><br><span class="line">          <span class="comment">-- layout_margin=&quot;24dp&quot;,</span></span><br><span class="line">          layout_width=<span class="string">&#x27;-2&#x27;</span>;<span class="comment">--卡片宽度</span></span><br><span class="line">          layout_height=<span class="string">&#x27;-2&#x27;</span>;<span class="comment">--卡片高</span></span><br><span class="line">          radius=<span class="string">&#x27;4dp&#x27;</span>;<span class="comment">--卡片圆角</span></span><br><span class="line">          CardBackgroundColor=<span class="number">0</span>;<span class="comment">--卡片背景颜色--#F17F42</span></span><br><span class="line">          <span class="comment">-- Gravity=&quot;center&quot;,</span></span><br><span class="line">          layout_marginRight=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          layout_marginTop=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          layout_marginBottom=<span class="string">&quot;14dp&quot;</span>;</span><br><span class="line">          layout_marginLeft=<span class="string">&quot;8dp&quot;</span>;</span><br><span class="line">          &#123;</span><br><span class="line">            TextView;</span><br><span class="line">            layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">            id=<span class="string">&quot;bu0&quot;</span>;</span><br><span class="line">            gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;中立&quot;</span>;</span><br><span class="line">            textColor=文字;<span class="comment">--卡片背景颜色--#F17F42</span></span><br><span class="line">            layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">            textSize=<span class="string">&quot;14sp&quot;</span>;</span><br><span class="line">            <span class="comment">--  onClick=中立按钮点击事件;</span></span><br><span class="line">            paddingRight=<span class="string">&quot;16dp&quot;</span>;</span><br><span class="line">            paddingLeft=<span class="string">&quot;16dp&quot;</span>;</span><br><span class="line">            paddingTop=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">            paddingBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_gravity=<span class="string">&quot;end&quot;</span>;</span><br><span class="line">        <span class="comment">--layout_width=&quot;fill&quot;;</span></span><br><span class="line">        &#123;</span><br><span class="line">          CardView;<span class="comment">--卡片控件</span></span><br><span class="line">          id=<span class="string">&quot;floatbuttonm&quot;</span>;</span><br><span class="line">          <span class="comment">--  layout_gravity=&quot;right|bottom&quot;;</span></span><br><span class="line">          CardElevation=<span class="string">&#x27;0dp&#x27;</span>;<span class="comment">--卡片阴影</span></span><br><span class="line">          <span class="comment">--adjustViewBounds=true,</span></span><br><span class="line">          <span class="comment">-- layout_margin=&quot;24dp&quot;,</span></span><br><span class="line">          layout_width=<span class="string">&#x27;-2&#x27;</span>;<span class="comment">--卡片宽度</span></span><br><span class="line">          layout_height=<span class="string">&#x27;-2&#x27;</span>;<span class="comment">--卡片高</span></span><br><span class="line">          radius=<span class="string">&#x27;4dp&#x27;</span>;<span class="comment">--卡片圆角</span></span><br><span class="line">          CardBackgroundColor=<span class="number">0</span>;<span class="comment">--卡片背景颜色--#F17F42</span></span><br><span class="line">          <span class="comment">-- Gravity=&quot;center&quot;,</span></span><br><span class="line">          layout_marginRight=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          layout_marginTop=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          layout_marginBottom=<span class="string">&quot;14dp&quot;</span>;</span><br><span class="line">          &#123;</span><br><span class="line">            TextView;</span><br><span class="line">            layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">            id=<span class="string">&quot;bu1&quot;</span>;</span><br><span class="line">            gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;取消&quot;</span>;</span><br><span class="line">            textColor=文字;<span class="comment">--卡片背景颜色--#F17F42</span></span><br><span class="line">            layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">            textSize=<span class="string">&quot;14sp&quot;</span>;</span><br><span class="line">            onClick=关闭对话框;</span><br><span class="line">            paddingRight=<span class="string">&quot;16dp&quot;</span>;</span><br><span class="line">            paddingLeft=<span class="string">&quot;16dp&quot;</span>;</span><br><span class="line">            paddingTop=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">            paddingBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          CardView;<span class="comment">--卡片控件</span></span><br><span class="line">          id=<span class="string">&quot;floatbuttonm&quot;</span>;</span><br><span class="line">          <span class="comment">--  layout_gravity=&quot;right|bottom&quot;;</span></span><br><span class="line">          CardElevation=<span class="string">&#x27;4dp&#x27;</span>;<span class="comment">--卡片阴影</span></span><br><span class="line">          <span class="comment">--adjustViewBounds=true,</span></span><br><span class="line">          <span class="comment">-- layout_margin=&quot;24dp&quot;,</span></span><br><span class="line">          layout_width=<span class="string">&#x27;-2&#x27;</span>;<span class="comment">--卡片宽度</span></span><br><span class="line">          layout_height=<span class="string">&#x27;-2&#x27;</span>;<span class="comment">--卡片高</span></span><br><span class="line">          radius=<span class="string">&#x27;4dp&#x27;</span>;<span class="comment">--卡片圆角</span></span><br><span class="line">          CardBackgroundColor=强调色;<span class="comment">--卡片背景颜色--#F17F42</span></span><br><span class="line">          <span class="comment">-- Gravity=&quot;center&quot;,</span></span><br><span class="line">          layout_marginRight=<span class="string">&quot;18dp&quot;</span>;</span><br><span class="line">          layout_marginTop=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          layout_marginBottom=<span class="string">&quot;14dp&quot;</span>;</span><br><span class="line">          &#123;</span><br><span class="line">            TextView;</span><br><span class="line">            layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">            id=<span class="string">&quot;bu2&quot;</span>;</span><br><span class="line">            gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;确定&quot;</span>;</span><br><span class="line">            textColor=<span class="string">&quot;#ffffff&quot;</span>;</span><br><span class="line">            layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">            textSize=<span class="string">&quot;14sp&quot;</span>;</span><br><span class="line">            <span class="comment">--onClick=点击事件;</span></span><br><span class="line">            paddingRight=<span class="string">&quot;16dp&quot;</span>;</span><br><span class="line">            paddingLeft=<span class="string">&quot;16dp&quot;</span>;</span><br><span class="line">            paddingTop=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">            paddingBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  tDialog=AlertDialog.Builder(this)</span><br><span class="line">  <span class="comment">--.setTitle(标题)</span></span><br><span class="line">  .setView(loadlayout(InputLayout))</span><br><span class="line">  <span class="comment">--[[  .setPositiveButton(&quot;确定&quot;,&#123;onClick=点击事件&#125;)</span></span><br><span class="line"><span class="comment">  .setNeutralButton(中立按钮,&#123;onClick=中立按钮点击事件&#125;)</span></span><br><span class="line"><span class="comment">  .setNegativeButton(&quot;取消&quot;,nil)]]</span></span><br><span class="line">  标题b.text=标题</span><br><span class="line">  dl=tDialog.show()</span><br><span class="line">  p=dl.getWindow().getAttributes();</span><br><span class="line">  p.width=(activity.Width);</span><br><span class="line">  dl.getWindow().setAttributes(p);</span><br><span class="line">  <span class="comment">-- DialogButtonFilter(tDialog,1,io.open(&quot;/data/data/&quot;..activity.getPackageName()..&quot;/其他部件强调色储存.xml&quot;):read(&quot;*a&quot;))</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.PorterDuffColorFilter&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.PorterDuff&quot;</span></span><br><span class="line">  <span class="comment">--修改编辑框颜色</span></span><br><span class="line">  edit.getBackground().setColorFilter(PorterDuffColorFilter(强调色,PorterDuff.Mode.SRC_ATOP));</span><br><span class="line">  波纹(bu1,<span class="number">0xFF7F7F7F</span>)</span><br><span class="line">  波纹(bu2,<span class="number">0xFF7F7F7F</span>)</span><br><span class="line">  波纹(bu0,<span class="number">0xFF7F7F7F</span>)</span><br><span class="line">  <span class="comment">--设置加粗</span></span><br><span class="line">  bu1.getPaint().setFakeBoldText(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">--设置加粗</span></span><br><span class="line">  标题b.getPaint().setFakeBoldText(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">--设置加粗</span></span><br><span class="line">  bu0.getPaint().setFakeBoldText(<span class="literal">true</span>)</span><br><span class="line">  <span class="comment">--设置加粗</span></span><br><span class="line">  bu2.getPaint().setFakeBoldText(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">if</span> 中立按钮==<span class="string">&quot;&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--控件不可视</span></span><br><span class="line">    bu0.setVisibility(View.INVISIBLE)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    bu0.text=中立按钮</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  bu2.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    点击事件()</span><br><span class="line">    <span class="keyword">if</span> 中立按钮==<span class="string">&quot;&quot;</span> <span class="keyword">then</span></span><br><span class="line">      关闭对话框()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  bu0.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    中立按钮点击事件()</span><br><span class="line">    <span class="keyword">if</span> 中立按钮==<span class="string">&quot;&quot;</span> <span class="keyword">then</span></span><br><span class="line">      关闭对话框()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 波纹<span class="params">(id,颜色)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.res.ColorStateList&quot;</span><span class="keyword">local</span> attrsArray = &#123;android.R.attr.selectableItemBackgroundBorderless&#125;</span><br><span class="line">  <span class="keyword">local</span> typedArray =activity.obtainStyledAttributes(attrsArray)</span><br><span class="line">  ripple=typedArray.getResourceId(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">  Pretend=activity.Resources.getDrawable(ripple)</span><br><span class="line">  Pretend.setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;颜色&#125;))</span><br><span class="line">  id.setBackground(Pretend.setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;颜色&#125;)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--例</span></span><br><span class="line">输入对话框(<span class="string">&quot;QQ强制聊天&quot;</span>,</span><br><span class="line">  <span class="string">&quot;输入QQ号...&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"> <span class="keyword">if</span> edit.Text == <span class="string">&quot;&quot;</span> <span class="keyword">or</span> #edit.Text &lt; <span class="number">5</span> <span class="keyword">or</span> #edit.Text &gt; <span class="number">10</span> <span class="keyword">then</span></span><br><span class="line">        edit.Error=<span class="string">&quot;请正确输入&quot;</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line"><span class="comment">--QQ聊天</span></span><br><span class="line">url=<span class="string">&quot;mqqwpa://im/chat?chat_type=wpa&amp;uin=&quot;</span>..edit.text</span><br><span class="line">activity.startActivity(Intent(Intent.ACTION_VIEW, Uri.parse(url)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span><span class="params">(v)</span></span><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>字符串保留url</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BF%9D%E7%95%99url-2021-11-07-17-55-42/</url>
    <content><![CDATA[<h1>字符串保留url</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.gkeepUrl=<span class="function"><span class="keyword">function</span><span class="params">(str)</span></span></span><br><span class="line">  <span class="keyword">local</span> strurltab=&#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gfind</span>(str,<span class="string">&quot;https?://[-A-Za-z0-9+&amp;@#/%?=~_|!:,.;]+[-A-Za-z0-9+&amp;@#/%=~_|]&quot;</span>) <span class="keyword">do</span></span><br><span class="line">    strurltab[#strurltab+<span class="number">1</span>]=<span class="built_in">string</span>.<span class="built_in">sub</span>(str,i,v)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> strurltab</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--返回的是table，该方式支持保留多个链接</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用示例</span></span><br><span class="line">str=<span class="string">&quot;MLuaForum https://www.mukapp.top/ Lua优化性能小结 https://www.mukapp.top/?thread-19.htm&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dump</span>(str:gkeepUrl()))</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> str1=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(<span class="built_in">string</span>.gkeepUrl(str)) <span class="keyword">do</span></span><br><span class="line">  str1=str1..v..<span class="string">&quot; &quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(str1)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>字符串保留和过滤中文</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BF%9D%E7%95%99%E5%92%8C%E8%BF%87%E6%BB%A4%E4%B8%AD%E6%96%87-2021-11-07-17-55-57/</url>
    <content><![CDATA[<h1>字符串保留和过滤中文</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--有中文符号会乱码</span></span><br><span class="line"><span class="built_in">string</span>.filterChinese=<span class="function"><span class="keyword">function</span><span class="params">(str)</span></span><span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">gsub</span>(str,<span class="string">&quot;[u4e00-u9fa5]+&quot;</span>,<span class="string">&quot;&quot;</span>)<span class="keyword">end</span></span><br><span class="line"><span class="built_in">string</span>.keepChinese=<span class="function"><span class="keyword">function</span><span class="params">(str)</span></span><span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">gsub</span>(str,<span class="string">&quot;[^u4e00-u9fa5]+&quot;</span>,<span class="string">&quot;&quot;</span>)<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用示例</span></span><br><span class="line">str=<span class="string">&quot;AndLuaJ+是一个好用的开发平台&quot;</span></span><br><span class="line"><span class="comment">--过滤中文</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.filterChinese(str))</span><br><span class="line"><span class="built_in">print</span>(str:filterChinese())</span><br><span class="line"><span class="comment">--保留中文</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.keepChinese(str))</span><br><span class="line"><span class="built_in">print</span>(str:keepChinese())</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>安全地执行lua代码</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%AE%89%E5%85%A8%E5%9C%B0%E6%89%A7%E8%A1%8Clua%E4%BB%A3%E7%A0%81-2021-11-07-17-49-07/</url>
    <content><![CDATA[<h1>安全地执行lua代码</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--安全地执行lua代码</span></span><br><span class="line"><span class="built_in">load</span>(<span class="string">[[print(233)]]</span>,<span class="literal">nil</span>,<span class="string">&quot;t&quot;</span>,&#123;</span><br><span class="line"><span class="comment">--设置可调用的函数</span></span><br><span class="line">[<span class="string">&quot;print&quot;</span>]=<span class="built_in">print</span>,</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>实现-&gt;table.insert，如果那个table里有这个值就不添加</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%AE%9E%E7%8E%B0-%3Etable.insert%EF%BC%8C%E5%A6%82%E6%9E%9C%E9%82%A3%E4%B8%AAtable%E9%87%8C%E6%9C%89%E8%BF%99%E4%B8%AA%E5%80%BC%E5%B0%B1%E4%B8%8D%E6%B7%BB%E5%8A%A0-2021-11-07-17-34-51/</url>
    <content><![CDATA[<h1>实现-&gt;table.insert，如果那个table里有这个值就不添加</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--先遍历然后变量true</span></span><br><span class="line">a=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">b=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">  b[v]=<span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> v,k <span class="keyword">in</span> <span class="built_in">ipairs</span>(b) <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">print</span>(v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>对话框三个按扭</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E5%AF%B9%E8%AF%9D%E6%A1%86%E4%B8%89%E4%B8%AA%E6%8C%89%E6%89%AD/</url>
    <content><![CDATA[<h1></h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua+&#x27;</span>)</span><br><span class="line">activity.setTheme(android.R.style.Theme_Holo_Light)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--三按钮对话框</span></span><br><span class="line">import <span class="string">&quot;android.content.*&quot;</span> </span><br><span class="line">dl=AlertDialog.Builder(activity)</span><br><span class="line">.setTitle(<span class="string">&quot;对话框&quot;</span>).setMessage(<span class="string">&quot;您确定选择退出吗？&quot;</span>)</span><br><span class="line">.setPositiveButton(<span class="string">&quot;退出应用&quot;</span>,DialogInterface.OnClickListener&#123;</span><br><span class="line">  onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">    <span class="comment">--print(&quot;您选择了退出&quot;)</span></span><br><span class="line">    activity.finish()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line">.setNegativeButton(<span class="string">&quot;转入后台&quot;</span>,DialogInterface.OnClickListener&#123;</span><br><span class="line">  onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">    intent = Intent(Intent.ACTION_MAIN);</span><br><span class="line">    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);<span class="comment">--当使用这个标志时，如果一个包含此activity的task已经运行了，新的activity不会启动；同时，当前的task将简单的被提到窗口最前面。查看FLAG_ACTIVITY_MULTIPLE_TASK可以禁止这个行为。</span></span><br><span class="line">    intent.addCategory(Intent.CATEGORY_HOME);</span><br><span class="line">    this.startActivity(intent);</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;应用已经转入后台，相当于home键&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line">.setNeutralButton(<span class="string">&quot;待设置的命令&quot;</span>,<span class="literal">nil</span>); </span><br><span class="line">dl.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>扫描中文</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E6%89%AB%E6%8F%8F%E4%B8%AD%E6%96%87-2021-11-07-17-44-31/</url>
    <content><![CDATA[<h1>扫描中文</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">file=luajava.luadir</span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fileList</span><span class="params">(file)</span></span></span><br><span class="line">  <span class="keyword">return</span> luajava.astable(File(<span class="built_in">tostring</span>(file)).listFiles())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">err=&#123;&#125;</span><br><span class="line">import <span class="string">&quot;init&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextFile</span><span class="params">(file)</span></span></span><br><span class="line">  <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(fileList(file)) <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> File(<span class="built_in">tostring</span>(v)).isDirectory() <span class="keyword">then</span></span><br><span class="line">      nextFile(v)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">tostring</span>(v),<span class="string">&quot;.*/(.-)&quot;</span>):<span class="built_in">gsub</span>(<span class="string">&quot;%p&quot;</span>,<span class="string">&quot;&quot;</span>):<span class="built_in">find</span>(<span class="string">&quot;^(%w*)&quot;</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;文件内有中文&quot;</span>..v)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;扫描完成，未发现中文。&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">nextFile(file)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>搜索名</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E6%90%9C%E7%B4%A2%E5%90%8D-2021-11-07-17-43-04/</url>
    <content><![CDATA[<h1>搜索名</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">aa=<span class="string">[[</span></span><br><span class="line"><span class="string">文件4667.apk</span></span><br><span class="line"><span class="string">文件xkxksk.apk</span></span><br><span class="line"><span class="string">文件68464.apk</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> aa:<span class="built_in">gmatch</span>(<span class="string">&quot;文件(.-)%papk&quot;</span>) <span class="keyword">do</span></span><br><span class="line">   <span class="keyword">if</span> <span class="string">&quot;文件4667.apk&quot;</span>==<span class="string">&quot;文件&quot;</span>..k..<span class="string">&quot;.apk&quot;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;文件&quot;</span>..k..<span class="string">&quot;.apk&quot;</span>)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">     </span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">   </span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">png=&#123;<span class="string">&quot;sx&quot;</span>,<span class="string">&quot;777&quot;</span>,<span class="string">&quot;6767777&quot;</span>,<span class="string">&quot;7338&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(png) <span class="keyword">do</span></span><br><span class="line"><span class="keyword">if</span> v:<span class="built_in">find</span>(<span class="string">&#x27;777&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>(v)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>无状态的迭代器</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8-2021-11-07-17-47-35/</url>
    <content><![CDATA[<h1>无状态的迭代器</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">无状态的迭代器是指不保留任何状态的迭代器，因此在循环中我们可以利用无状态迭代器避免创建闭包花费额外的代价。</span><br><span class="line"></span><br><span class="line">每一次迭代，迭代函数都是用两个变量（状态常量和控制变量）的值作为参数被调用，一个无状态的迭代器只利用这两个值可以获取下一个元素。</span><br><span class="line"></span><br><span class="line">这种无状态迭代器的典型的简单的例子是<span class="built_in">ipairs</span>，他遍历数组的每一个元素。</span><br><span class="line"></span><br><span class="line">以下实例我们使用了一个简单的函数来实现迭代器，实现 数字 n 的平方：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">square</span><span class="params">(iteratorMaxCount,currentNumber)</span></span></span><br><span class="line">  <span class="keyword">if</span> currentNumber&lt;iteratorMaxCount</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">    currentNumber = currentNumber+<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> currentNumber, currentNumber*currentNumber</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i,n <span class="keyword">in</span> square,<span class="number">3</span>,<span class="number">0</span></span><br><span class="line">  <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">print</span>(i,n)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">以上实例输出结果为：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"></span><br><span class="line">迭代的状态包括被遍历的表（循环过程中不会改变的状态常量）和当前的索引下标（控制变量），<span class="built_in">ipairs</span>和迭代函数都很简单，我们在Lua中可以这样实现：</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iter</span> <span class="params">(a, i)</span></span></span><br><span class="line">  i = i + <span class="number">1</span></span><br><span class="line">  <span class="keyword">local</span> v = a[i]</span><br><span class="line">  <span class="keyword">if</span> v <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> i, v</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ipairs</span> <span class="params">(a)</span></span></span><br><span class="line">  <span class="keyword">return</span> iter, a, <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">当Lua调用<span class="built_in">ipairs</span>(a)开始循环时，他获取三个值：迭代函数iter、状态常量a、控制变量初始值<span class="number">0</span>；然后Lua调用iter(a,<span class="number">0</span>)返回<span class="number">1</span>,a[<span class="number">1</span>]（除非a[<span class="number">1</span>]=<span class="literal">nil</span>）；第二次迭代调用iter(a,<span class="number">1</span>)返回<span class="number">2</span>,a[<span class="number">2</span>]……直到第一个<span class="literal">nil</span>元素。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>正则表达式</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-2021-11-07-17-49-34/</url>
    <content><![CDATA[<h1>正则表达式</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">.(点): 与任何字符配对</span><br><span class="line">%a: 与任何字母配对</span><br><span class="line">%c: 与任何控制符配对(例如n)</span><br><span class="line">%d: 与任何数字配对</span><br><span class="line">%l: 与任何小写字母配对</span><br><span class="line">%p: 与任何标点(punctuation)配对</span><br><span class="line">%s: 与空白字符配对</span><br><span class="line">%u: 与任何大写字母配对</span><br><span class="line">%w: 与任何字母/数字配对</span><br><span class="line">%x: 与任何十六进制数配对</span><br><span class="line">%z: 与任何代表<span class="number">0</span>的字符配对</span><br><span class="line">%x(此处x是非字母非数字字符): 与字符x配对. 主要用来处理表达式中有功能的字符(^()%.[]*+-?)的配对问题, 例如%%与%配对[数个字符类]: 与任何[]中包含的字符类配对. 例如[%w_]与任何字母/数字, 或下划线符号(_)配对[^数个字符类]: 与任何不包含在[]中的字符类配对. 例如[^%s]与任何非空白字符配对</span><br><span class="line"></span><br><span class="line">当上述的字符类用大写书写时, 表示与非此字符类的任何字符配对. 例如, %S表示与任何非空白字符配对.</span><br><span class="line"></span><br><span class="line">%a  星期简写</span><br><span class="line">%A  星期大写</span><br><span class="line">%b  月份简写</span><br><span class="line">%B  月份大写</span><br><span class="line">%c  日期时间</span><br><span class="line">%d  月份天数</span><br><span class="line">%H  小时[<span class="number">24</span>进制]</span><br><span class="line">%I  小时[<span class="number">12</span>进制]</span><br><span class="line">%j  年中第几天</span><br><span class="line">%m  月份</span><br><span class="line">%M 分钟</span><br><span class="line">%p  am或pm</span><br><span class="line">%S  秒数</span><br><span class="line">%w  星期</span><br><span class="line">%W  第几周</span><br><span class="line">%x  日期</span><br><span class="line">%X  时间</span><br><span class="line">%y  两位数的月份</span><br><span class="line">%Y 完整的月份</span><br><span class="line">%z  时区</span><br><span class="line">%% 百分号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%c - 接受一个数字, 并将其转化为ASCII码表中对应的字符</span><br><span class="line">%d, %i - 接受一个数字并将其转化为有符号的整数格式</span><br><span class="line">%o - 接受一个数字并将其转化为八进制数格式</span><br><span class="line">%u - 接受一个数字并将其转化为无符号整数格式</span><br><span class="line">%x - 接受一个数字并将其转化为十六进制数格式, 使用小写字母</span><br><span class="line">%X - 接受一个数字并将其转化为十六进制数格式, 使用大写字母</span><br><span class="line">%e - 接受一个数字并将其转化为科学记数法格式, 使用小写字母e</span><br><span class="line">%E - 接受一个数字并将其转化为科学记数法格式, 使用大写字母E</span><br><span class="line">%f - 接受一个数字并将其转化为浮点数格式</span><br><span class="line">%g(%G) - 接受一个数字并将其转化为%e(%E, 对应%G)及%f中较短的一种格式</span><br><span class="line">%q - 接受一个字符串并将其转化为可安全被Lua编译器读入的格式</span><br><span class="line">%s - 接受一个字符串并按照给定的参数格式化该字符串</span><br><span class="line">为进一步细化格式, 可以在%号后添加参数. 参数将以如下的顺序读入:</span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>) 符号: 一个+号表示其后的数字转义符将让正数显示正号. 默认情况下只有负数显示符号.</span><br><span class="line">(<span class="number">2</span>) 占位符: 一个<span class="number">0</span>, 在后面指定了字串宽度时占位用. 不填时的默认占位符是空格.</span><br><span class="line">(<span class="number">3</span>) 对齐标识: 在指定了字串宽度时, 默认为右对齐, 增加-号可以改为左对齐.</span><br><span class="line">(<span class="number">4</span>) 宽度数值</span><br><span class="line">(<span class="number">5</span>) 小数位数/字串裁切: 在宽度数值后增加的小数部分n, 若后接f(浮点数转义符, 如%<span class="number">6.3</span>f)则设定该浮点数的小数只保留n位, 若后接s(字符串转义符, 如%<span class="number">5.3</span>s)则设定该字符串只显示前n位.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--实例</span></span><br><span class="line">string1 = <span class="string">&quot;Lua&quot;</span></span><br><span class="line">string2 = <span class="string">&quot;Tutorial&quot;</span></span><br><span class="line">number1 = <span class="number">10</span></span><br><span class="line">number2 = <span class="number">20</span></span><br><span class="line"><span class="comment">-- 基本字符串格式化</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;基本格式化 %s %s&quot;</span>,string1,string2))</span><br><span class="line"><span class="comment">-- 日期格式化</span></span><br><span class="line"><span class="built_in">date</span> = <span class="number">2</span>; month = <span class="number">1</span>; year = <span class="number">2014</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;日期格式化 %02d/%02d/%03d&quot;</span>, <span class="built_in">date</span>, month, year))</span><br><span class="line"><span class="comment">-- 十进制格式化</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.4f&quot;</span>,<span class="number">1</span>/<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">以上代码执行结果为：</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">基本格式化 Lua Tutorial</span></span><br><span class="line"><span class="comment">日期格式化 02/01/2014</span></span><br><span class="line"><span class="comment">0.3333</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--其他例子：</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%c&quot;</span>, <span class="number">83</span>)                 <span class="comment">-- 输出S</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%+d&quot;</span>, <span class="number">17.0</span>)              <span class="comment">-- 输出+17</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%05d&quot;</span>, <span class="number">17</span>)               <span class="comment">-- 输出00017</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%o&quot;</span>, <span class="number">17</span>)                 <span class="comment">-- 输出21</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%u&quot;</span>, <span class="number">3.14</span>)               <span class="comment">-- 输出3</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%x&quot;</span>, <span class="number">13</span>)                 <span class="comment">-- 输出d</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%X&quot;</span>, <span class="number">13</span>)                 <span class="comment">-- 输出D</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%e&quot;</span>, <span class="number">1000</span>)               <span class="comment">-- 输出1.000000e+03</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%E&quot;</span>, <span class="number">1000</span>)               <span class="comment">-- 输出1.000000E+03</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%6.3f&quot;</span>, <span class="number">13</span>)              <span class="comment">-- 输出13.000</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, <span class="string">&quot;OnenTwo&quot;</span>)         <span class="comment">-- 输出&quot;One</span></span><br><span class="line">                                        <span class="comment">-- 　　Two&quot;</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)           <span class="comment">-- 输出monkey</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%10s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)         <span class="comment">-- 输出    monkey</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%5.3s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)        <span class="comment">-- 输出  mon</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>汉诺塔</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E6%B1%89%E8%AF%BA%E5%A1%94-2021-11-07-17-57-04/</url>
    <content><![CDATA[<h1>汉诺塔</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(&#123;</span><br><span class="line">  FrameLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  id=<span class="string">&quot;mFrameLayout&quot;</span>,</span><br><span class="line">&#125;))</span><br><span class="line">activity.setRequestedOrientation(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">AINDEX = ... <span class="keyword">or</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--开发者:DIFFFFFFT</span></span><br><span class="line"><span class="comment">--QQ:672228275</span></span><br><span class="line"><span class="comment">--描述:这是一款小游戏,名字叫汉诺塔小游戏</span></span><br><span class="line"><span class="comment">--基本没啥bug了,优化下UI和音效效果会更好</span></span><br><span class="line"><span class="comment">--代码没啥规范，写的有点烂</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--官网:http://www.hannuota.cn/</span></span><br><span class="line"><span class="comment">--汉诺塔游戏规则:你要将所有的盒子从TOWER 1移动到TOWER 3</span></span><br><span class="line"><span class="comment">--你每次只能移动一个盒子。</span></span><br><span class="line"><span class="comment">--游戏最重要的规则是大的盒子不能放在小的盒子上面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--听说牛逼的人直接挑战第九关</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SCREEN_WIDTH = activity.getHeight()</span><br><span class="line">SCREEN_HEIGHT = activity.getWidth()</span><br><span class="line"></span><br><span class="line">MAX_A = SCREEN_WIDTH/<span class="number">3</span></span><br><span class="line">MAX_B = SCREEN_WIDTH/<span class="number">3</span></span><br><span class="line">MAX_C = SCREEN_WIDTH/<span class="number">3</span></span><br><span class="line"></span><br><span class="line">COLOR_TABLE = &#123;</span><br><span class="line">  <span class="string">&quot;#FF800020&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FF854F18&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FF858500&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FF1B850C&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FF008585&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FF002185&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FF640085&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FF850064&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FFC00090&quot;</span>,</span><br><span class="line">  <span class="string">&quot;#FFC02711&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp2px</span><span class="params">(dp)</span></span></span><br><span class="line">  <span class="keyword">local</span> TypedValue= import <span class="string">&quot;android.util.TypedValue&quot;</span></span><br><span class="line">  <span class="keyword">local</span> a,b=dp:<span class="built_in">match</span>(<span class="string">&quot;^(%-?[%.%d]+)(%a%a)&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> TypedValue.applyDimension(<span class="number">1</span>,<span class="built_in">tonumber</span>(a),activity.getResources().getDisplayMetrics())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span><span class="params">(AINDEX)</span></span></span><br><span class="line">  <span class="keyword">local</span> class = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> views = &#123;&#125;</span><br><span class="line">  <span class="keyword">local</span> num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  class.AINDEX=AINDEX</span><br><span class="line"></span><br><span class="line">  class.addView=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">    num = num + <span class="number">1</span></span><br><span class="line">    item_w = (SCREEN_WIDTH/<span class="number">3</span>)-dp2px(<span class="string">&quot;20dp&quot;</span>)*(num<span class="number">-1</span>)</span><br><span class="line">    item_x = (SCREEN_WIDTH/<span class="number">3</span>-item_w)/<span class="number">2</span></span><br><span class="line">    item_y = (SCREEN_HEIGHT)-dp2px(<span class="string">&quot;40dp&quot;</span>)*num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">local</span> item = loadlayout(&#123;</span><br><span class="line">      TextView,</span><br><span class="line">      gravity=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">      layout_width=item_w,</span><br><span class="line">      layout_height=<span class="string">&quot;40dp&quot;</span>,</span><br><span class="line">      x=item_x,</span><br><span class="line">      y=item_y,</span><br><span class="line">      tag=<span class="number">0</span>,</span><br><span class="line">      text=<span class="string">&quot;&quot;</span>,</span><br><span class="line">      textSize=<span class="number">0</span>,</span><br><span class="line">      backgroundColor=COLOR_TABLE[num],</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    mFrameLayout.addView(item)</span><br><span class="line">    class.onTouch(item)</span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(views,item)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num == AINDEX <span class="keyword">then</span></span><br><span class="line">      item.Text = <span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  class.a2a=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    item.setX((SCREEN_WIDTH/<span class="number">3</span>-item.getWidth())/<span class="number">2</span>)</span><br><span class="line">    item.setY((SCREEN_HEIGHT)-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views))</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  class.a2b=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> BQ.a2b(item) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">remove</span>(views,<span class="built_in">table</span>.<span class="built_in">find</span>(views,item))</span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  class.a2c=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> CQ.a2c(item) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">remove</span>(views,<span class="built_in">table</span>.<span class="built_in">find</span>(views,item))</span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> CQ.win() <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  class.b2a=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> item.getWidth() &gt;= views[#views].getWidth() <span class="keyword">then</span></span><br><span class="line">        BQ.b2b(item)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    BQ.b2a(item)</span><br><span class="line"></span><br><span class="line">    item.setX((SCREEN_WIDTH/<span class="number">3</span>-item.getWidth())/<span class="number">2</span>)</span><br><span class="line">    item.setY((SCREEN_HEIGHT)-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views+<span class="number">1</span>))</span><br><span class="line">    item.tag = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(views,item)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.b2b=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    BQ.b2b(item)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  class.b2c=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    BQ.b2c(item)</span><br><span class="line">    <span class="keyword">if</span> CQ.win() <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  class.c2a=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> item.getWidth() &gt;= views[#views].getWidth() <span class="keyword">then</span></span><br><span class="line">        CQ.c2c(item)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    CQ.c2a(item)</span><br><span class="line"></span><br><span class="line">    item.setX((SCREEN_WIDTH/<span class="number">3</span>-item.getWidth())/<span class="number">2</span>)</span><br><span class="line">    item.setY((SCREEN_HEIGHT)-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views+<span class="number">1</span>))</span><br><span class="line">    item.tag = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(views,item)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  class.c2b=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    CQ.c2b(item)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  class.c2c=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    CQ.c2c(item)</span><br><span class="line">    <span class="keyword">if</span> CQ.win() <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  class.onTouch=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line"></span><br><span class="line">    item.onTouch=<span class="function"><span class="keyword">function</span><span class="params">(view,event)</span></span></span><br><span class="line">      ACTION = event.getAction()</span><br><span class="line">      <span class="keyword">if</span> ACTION == MotionEvent.ACTION_DOWN <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">elseif</span> ACTION == MotionEvent.ACTION_MOVE <span class="keyword">then</span></span><br><span class="line">        sx = event.getRawX()</span><br><span class="line">        sy = event.getRawY()</span><br><span class="line">        l = view.getLeft()</span><br><span class="line">        t = view.getTop()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> item.Text == <span class="string">&quot;first&quot;</span> <span class="keyword">then</span></span><br><span class="line">          view.setX(sx+l-(view.getWidth()/<span class="number">2</span>))</span><br><span class="line">          view.setY(sy+t-(view.getHeight()/<span class="number">2</span>))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">elseif</span> ACTION == MotionEvent.ACTION_UP <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> item.Text ~= <span class="string">&quot;first&quot;</span> <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        lastx = event.getRawX()</span><br><span class="line">        lasty = event.getRawY()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> lastx &gt;= <span class="number">0</span> <span class="keyword">and</span> lastx &lt;= SCREEN_WIDTH/<span class="number">3</span> <span class="keyword">then</span></span><br><span class="line">          tag = <span class="number">0</span></span><br><span class="line">         <span class="keyword">elseif</span> lastx &gt;= SCREEN_WIDTH/<span class="number">3</span> <span class="keyword">and</span> lastx &lt;= SCREEN_WIDTH*<span class="number">2</span>/<span class="number">3</span> <span class="keyword">then</span></span><br><span class="line">          tag = <span class="number">1</span></span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">          tag = <span class="number">2</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> item.tag==<span class="number">0</span> <span class="keyword">and</span> tag==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">          class.a2a(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">0</span> <span class="keyword">and</span> tag==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">          class.a2b(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">1</span> <span class="keyword">and</span> tag==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">          class.b2a(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">1</span> <span class="keyword">and</span> tag==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">          class.b2b(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">0</span> <span class="keyword">and</span> tag==<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">          class.a2c(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">2</span> <span class="keyword">and</span> tag==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">          class.c2a(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">2</span> <span class="keyword">and</span> tag==<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">          class.c2c(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">1</span> <span class="keyword">and</span> tag==<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">          class.b2c(item)</span><br><span class="line">         <span class="keyword">elseif</span> item.tag==<span class="number">2</span> <span class="keyword">and</span> tag==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">          class.c2b(item)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i=<span class="number">1</span>,AINDEX <span class="keyword">do</span></span><br><span class="line">    class.addView()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> class</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> class = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> views = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  class.a2b=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> item.getWidth() &gt;= views[#views].getWidth() <span class="keyword">then</span></span><br><span class="line">        AQ.a2a(item)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    item.setX((SCREEN_WIDTH-item.getWidth())/<span class="number">2</span>)</span><br><span class="line">    item.setY(SCREEN_HEIGHT-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views+<span class="number">1</span>))</span><br><span class="line">    item.tag = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(views,item)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.b2a=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">remove</span>(views,<span class="built_in">table</span>.<span class="built_in">find</span>(views,item))</span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.b2b=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    item.setX((SCREEN_WIDTH-item.getWidth())/<span class="number">2</span>)</span><br><span class="line">    item.setY(SCREEN_HEIGHT-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views))</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.b2c=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> CQ.b2c(item) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">remove</span>(views,<span class="built_in">table</span>.<span class="built_in">find</span>(views,item))</span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> CQ.win() <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.c2b=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> item.getWidth() &gt;= views[#views].getWidth() <span class="keyword">then</span></span><br><span class="line">        CQ.c2c(item)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    item.setX((SCREEN_WIDTH-item.getWidth())/<span class="number">2</span>)</span><br><span class="line">    item.setY(SCREEN_HEIGHT-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views+<span class="number">1</span>))</span><br><span class="line">    item.tag = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(views,item)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> class</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> class = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> views = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  class.a2c=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> item.getWidth() &gt;= views[#views].getWidth() <span class="keyword">then</span></span><br><span class="line">        AQ.a2a(item)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    item.setX(((SCREEN_WIDTH*<span class="number">5</span>)/<span class="number">6</span>)-item.getWidth()/<span class="number">2</span>)</span><br><span class="line">    item.setY(SCREEN_HEIGHT-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views+<span class="number">1</span>))</span><br><span class="line">    item.tag = <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(views,item)</span><br><span class="line">    <span class="keyword">if</span> class.win() <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  class.c2a=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">remove</span>(views,<span class="built_in">table</span>.<span class="built_in">find</span>(views,item))</span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.c2c=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    item.setX(((SCREEN_WIDTH*<span class="number">5</span>)/<span class="number">6</span>)-item.getWidth()/<span class="number">2</span>)</span><br><span class="line">    item.setY(SCREEN_HEIGHT-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views))</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.b2c=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> item.getWidth() &gt;= views[#views].getWidth() <span class="keyword">then</span></span><br><span class="line">        BQ.b2b(item)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    item.setX(((SCREEN_WIDTH*<span class="number">5</span>)/<span class="number">6</span>)-item.getWidth()/<span class="number">2</span>)</span><br><span class="line">    item.setY(SCREEN_HEIGHT-dp2px(<span class="string">&quot;40dp&quot;</span>)*(#views+<span class="number">1</span>))</span><br><span class="line">    item.tag = <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(views,item)</span><br><span class="line">    <span class="keyword">if</span> class.win() <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.c2b=<span class="function"><span class="keyword">function</span><span class="params">(item)</span></span></span><br><span class="line">    <span class="keyword">if</span> BQ.c2b(item) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">remove</span>(views,<span class="built_in">table</span>.<span class="built_in">find</span>(views,item))</span><br><span class="line">    <span class="keyword">if</span> #views~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      views[#views].Text=<span class="string">&quot;first&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  class.win=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> #views==AQ.AINDEX <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">      dialog=AlertDialog.Builder(this)</span><br><span class="line">      .setTitle(<span class="string">&quot;Win&quot;</span>)</span><br><span class="line">      .setMessage(<span class="string">&quot;你赢了&quot;</span>)</span><br><span class="line">      .setPositiveButton(<span class="string">&quot;下一关&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">          activity.finish()</span><br><span class="line">          activity.newActivity(<span class="string">&quot;main&quot;</span>,&#123;AINDEX+<span class="number">1</span>&#125;)</span><br><span class="line">          activity.overridePendingTransition(android.R.anim.fade_in,android.R.anim.fade_out)</span><br><span class="line">        <span class="keyword">end</span>&#125;)</span><br><span class="line">      .setNeutralButton(<span class="string">&quot;退出游戏&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">          activity.finish()</span><br><span class="line">        <span class="keyword">end</span>&#125;)</span><br><span class="line">      .setNegativeButton(<span class="string">&quot;重玩&quot;</span>,&#123;</span><br><span class="line">        onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">          activity.finish()</span><br><span class="line">          activity.newActivity(<span class="string">&quot;main&quot;</span>,&#123;AINDEX&#125;)</span><br><span class="line">          activity.overridePendingTransition(android.R.anim.fade_in,android.R.anim.fade_out)</span><br><span class="line">        <span class="keyword">end</span>&#125;)</span><br><span class="line">      .show()</span><br><span class="line">      dialog.setCanceledOnTouchOutside(<span class="literal">false</span>);</span><br><span class="line">      dialog.<span class="built_in">create</span>()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> class</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">AQ = A(AINDEX)</span><br><span class="line">BQ = B()</span><br><span class="line">CQ = C()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mFrameLayout.addView(loadlayout(&#123;</span><br><span class="line">  Button,</span><br><span class="line">  text=<span class="string">&quot;下一关&quot;</span>,</span><br><span class="line">  onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    activity.finish()</span><br><span class="line">    activity.newActivity(<span class="string">&quot;main&quot;</span>,&#123;AINDEX+<span class="number">1</span>&#125;)</span><br><span class="line">    activity.overridePendingTransition(android.R.anim.fade_in,android.R.anim.fade_out)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mFrameLayout.addView(loadlayout(&#123;</span><br><span class="line">  Button,</span><br><span class="line">  text=<span class="string">&quot;游戏规则&quot;</span>,</span><br><span class="line">  x=<span class="string">&quot;100dp&quot;</span>,</span><br><span class="line">  onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    dialog=AlertDialog.Builder(this)</span><br><span class="line">    .setTitle(<span class="string">&quot;游戏规则&quot;</span>)</span><br><span class="line">    .setMessage(<span class="string">[[你要将所有的盒子从TOWER 1移动到TOWER 3,你每次只能移动一个盒子。游戏最重要的规则是大的盒子不能放在小的盒子上面]]</span>)</span><br><span class="line">    .setPositiveButton(<span class="string">&quot;确定&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">    .show()</span><br><span class="line">    dialog.setCanceledOnTouchOutside(<span class="literal">false</span>)</span><br><span class="line">    dialog.<span class="built_in">create</span>()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">》》</span><br><span class="line">《《视力游戏》》</span><br><span class="line">《《<span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    TextView,</span><br><span class="line">    text=<span class="string">&quot;欢迎使用。&quot;</span>,</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">aa=&#123;</span><br><span class="line"></span><br><span class="line">  GridLayout;</span><br><span class="line">  layout_width=<span class="string">&quot;wrap&quot;</span>;</span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>;  </span><br><span class="line">  columnCount=<span class="string">&quot;6&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">vv</span><span class="params">(a)</span></span></span><br><span class="line">  i= &#123;</span><br><span class="line">    Button;</span><br><span class="line">    background=<span class="string">&quot;#FFFFFFFF&quot;</span>;</span><br><span class="line">    id=a;</span><br><span class="line">    layout_width=<span class="string">&quot;16%w&quot;</span>;</span><br><span class="line">    layout_height=<span class="string">&quot;50dp&quot;</span>;</span><br><span class="line">    layout_margin=<span class="string">&quot;3&quot;</span>;</span><br><span class="line">    textSize=<span class="string">&quot;12sp&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">table</span>.<span class="built_in">insert</span>(aa,i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">42</span>,<span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">  vv(<span class="string">&quot;ee&quot;</span>..i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(aa))</span><br><span class="line">idd=&#123;ee1,ee2,ee3,ee4,ee5,ee6,</span><br><span class="line">  ee7,ee8,ee9,ee10,ee11,ee12,</span><br><span class="line">  ee13,ee14,ee15,ee16,ee17,ee18,</span><br><span class="line">  ee19,ee20,ee21,ee22,ee23,ee24,</span><br><span class="line">  ee25,ee26,ee27,ee28,ee29,ee30,</span><br><span class="line">  ee31,ee32,ee33,ee34,ee35,ee36&#125;</span><br><span class="line">ff=<span class="number">0</span></span><br><span class="line">bo=<span class="literal">true</span></span><br><span class="line">正确=<span class="number">0</span></span><br><span class="line">错误=<span class="number">0</span></span><br><span class="line">提示=<span class="number">5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 随机颜色<span class="params">()</span></span></span><br><span class="line">  f1=Integer.toHexString(<span class="number">155</span>+正确)</span><br><span class="line">  f2=Integer.toHexString(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">22</span>,<span class="number">255</span>))</span><br><span class="line">  f3=Integer.toHexString(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">22</span>,<span class="number">255</span>))</span><br><span class="line">  f4=Integer.toHexString(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">22</span>,<span class="number">255</span>))</span><br><span class="line">  f5=<span class="string">&quot;ff&quot;</span>..f2..f3..f4</span><br><span class="line">  f6=f1..f2..f3..f4</span><br><span class="line">  <span class="keyword">for</span> i=<span class="number">1</span>,#idd <span class="keyword">do</span></span><br><span class="line">    idd[i].BackgroundColor=<span class="built_in">tonumber</span>(f5,<span class="number">16</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  ff=<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">36</span>)</span><br><span class="line">  idd[ff].BackgroundColor=<span class="built_in">tonumber</span>(f6,<span class="number">16</span>)</span><br><span class="line">  <span class="keyword">return</span> ff</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">时间=<span class="number">0</span></span><br><span class="line">ti=Ticker()</span><br><span class="line">ti.Period=<span class="number">1000</span></span><br><span class="line">ti.onTick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  时间=时间+<span class="number">1</span></span><br><span class="line">  ee40.setText(<span class="string">&quot;时间n&quot;</span>..时间)</span><br><span class="line">  <span class="keyword">if</span> 时间==<span class="number">100</span> <span class="keyword">then</span></span><br><span class="line">    ti.stop()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;已结束&quot;</span>)</span><br><span class="line">    ee42.setText(<span class="string">&quot;评分n&quot;</span>..正确-错误+(提示<span class="number">-5</span>))</span><br><span class="line">    ee39.setClickable(<span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">36</span> <span class="keyword">do</span></span><br><span class="line">      idd[<span class="number">1</span>].setClickable(<span class="literal">false</span>)</span><br><span class="line">      idd[i].BackgroundColor=<span class="number">0xFFFFFFFF</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">ti.start()</span><br><span class="line">随机颜色()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,#idd <span class="keyword">do</span></span><br><span class="line">  idd[i].onClick=<span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">    s=<span class="built_in">tostring</span>(x)</span><br><span class="line">    s= s:<span class="built_in">sub</span>(#s<span class="number">-2</span>,#s<span class="number">-1</span>)</span><br><span class="line">    s=<span class="built_in">tonumber</span>(s,<span class="number">16</span>)+<span class="number">1</span></span><br><span class="line">    idd[i].setText(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> s==ff <span class="keyword">then</span></span><br><span class="line">      随机颜色()</span><br><span class="line">      正确=正确+<span class="number">1</span></span><br><span class="line">      ee42.setText(<span class="string">&quot;评分n&quot;</span>..正确-错误+(提示<span class="number">-5</span>))</span><br><span class="line">      ee37.setText(<span class="string">&quot;正确&quot;</span>..<span class="built_in">tostring</span>(正确))</span><br><span class="line">      bo=<span class="literal">true</span></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      错误=错误+<span class="number">1</span></span><br><span class="line">      ee42.setText(<span class="string">&quot;评分n&quot;</span>..正确-错误+(提示<span class="number">-5</span>))</span><br><span class="line">      ee38.setText(<span class="string">&quot;错误n&quot;</span>..错误)</span><br><span class="line">      <span class="keyword">if</span> 错误==<span class="number">5</span> <span class="keyword">then</span></span><br><span class="line">        ti.stop()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;已结束&quot;</span>)</span><br><span class="line">        ee42.setText(<span class="string">&quot;评分n&quot;</span>..正确-错误+(提示<span class="number">-5</span>))</span><br><span class="line">        ee39.setClickable(<span class="literal">false</span>)</span><br><span class="line">        <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">36</span> <span class="keyword">do</span></span><br><span class="line">          idd[i].setClickable(<span class="literal">false</span>)</span><br><span class="line">          idd[i].BackgroundColor=<span class="number">0xFFFFFFFF</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">ee37.setText(<span class="string">&quot;正确n&quot;</span>..正确)</span><br><span class="line">ee38.setText(<span class="string">&quot;错误n&quot;</span>..错误)</span><br><span class="line">ee39.setText(<span class="string">&quot;提示n&quot;</span>..提示)</span><br><span class="line">ee40.setText(<span class="string">&quot;时间n&quot;</span>..时间)</span><br><span class="line">ee41.setText(<span class="string">&quot;重新n&quot;</span>..<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">ee42.setText(<span class="string">&quot;评分n&quot;</span>..<span class="string">&quot;0&quot;</span>)</span><br><span class="line"></span><br><span class="line">ee39.onClick=<span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">  <span class="keyword">if</span> bo <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> 提示&gt;<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      提示=提示<span class="number">-1</span></span><br><span class="line">      idd[ff].setText(<span class="string">&quot;^_^&quot;</span>)</span><br><span class="line">      ee42.setText(<span class="string">&quot;评分n&quot;</span>..正确-错误+(提示<span class="number">-5</span>))</span><br><span class="line">      ee39.setText(<span class="string">&quot;提示n&quot;</span>..提示)</span><br><span class="line">      bo=<span class="literal">false</span></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;提示次数已用完&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;已提示,请操作&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">ee41.onClick=<span class="function"><span class="keyword">function</span><span class="params">(x)</span></span></span><br><span class="line">  activity.recreate()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDestroy</span><span class="params">()</span></span></span><br><span class="line">  ti.stop()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--写代码时间过长易引起眼疲劳</span></span><br><span class="line"><span class="comment">--构思代码时间过长易掉头发</span></span><br><span class="line"><span class="comment">--注意劳逸结合</span></span><br><span class="line"><span class="comment">--二哈+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>理线游戏</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E7%90%86%E7%BA%BF%E6%B8%B8%E6%88%8F-2021-11-07-17-56-32/</url>
    <content><![CDATA[<h1>理线游戏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">import <span class="string">&quot;com.androlua.LuaDrawable&quot;</span></span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">  gravity=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">  layout_width=<span class="number">-1</span>,</span><br><span class="line">  layout_height=<span class="number">-1</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    TextView,</span><br><span class="line">    text=<span class="string">&quot;理线&quot;</span>,</span><br><span class="line">    textSize=<span class="number">20</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    TextView,</span><br><span class="line">    text=<span class="string">&quot;游戏目标：移动端点，使所有的线条互不相交。&quot;</span>,</span><br><span class="line">    textSize=<span class="number">13</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    FrameLayout,</span><br><span class="line">    id=<span class="string">&quot;屏&quot;</span>,</span><br><span class="line">    layout_width=activity.getWidth(),</span><br><span class="line">    layout_height=activity.getWidth(),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">));</span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">作者Rzin</span></span><br><span class="line"><span class="comment">没啥想说的。</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">端点尺寸=<span class="number">10</span>;<span class="comment">--显示尺寸，非触摸尺寸</span></span><br><span class="line">端点颜色=<span class="number">0xffaa1144</span>;</span><br><span class="line">线条宽度=<span class="number">2</span>;</span><br><span class="line">线条颜色=<span class="number">0xff4411aa</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> 端点=&#123;</span><br><span class="line">  <span class="comment">--各端点的坐标。</span></span><br><span class="line">  &#123;<span class="number">250</span>,<span class="number">250</span>&#125;,</span><br><span class="line">  &#123;<span class="number">500</span>,<span class="number">500</span>&#125;,</span><br><span class="line">  &#123;<span class="number">300</span>,<span class="number">300</span>&#125;,</span><br><span class="line">  &#123;<span class="number">450</span>,<span class="number">450</span>&#125;,</span><br><span class="line">  &#123;<span class="number">200</span>,<span class="number">400</span>&#125;,</span><br><span class="line">  &#123;<span class="number">100</span>,<span class="number">600</span>&#125;,</span><br><span class="line">  &#123;<span class="number">350</span>,<span class="number">470</span>&#125;,</span><br><span class="line">  &#123;<span class="number">600</span>,<span class="number">180</span>&#125;,</span><br><span class="line">  &#123;<span class="number">350</span>,<span class="number">200</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> 线条=&#123;</span><br><span class="line">  <span class="comment">--各线条的端点序号。</span></span><br><span class="line">  &#123;<span class="number">1</span>,<span class="number">3</span>&#125;,</span><br><span class="line">  &#123;<span class="number">2</span>,<span class="number">4</span>&#125;,</span><br><span class="line">  &#123;<span class="number">3</span>,<span class="number">5</span>&#125;,</span><br><span class="line">  &#123;<span class="number">6</span>,<span class="number">4</span>&#125;,</span><br><span class="line">  &#123;<span class="number">2</span>,<span class="number">5</span>&#125;,</span><br><span class="line">  &#123;<span class="number">6</span>,<span class="number">2</span>&#125;,</span><br><span class="line">  &#123;<span class="number">7</span>,<span class="number">1</span>&#125;,</span><br><span class="line">  &#123;<span class="number">6</span>,<span class="number">7</span>&#125;,</span><br><span class="line">  &#123;<span class="number">1</span>,<span class="number">5</span>&#125;,</span><br><span class="line">  &#123;<span class="number">6</span>,<span class="number">8</span>&#125;,</span><br><span class="line">  &#123;<span class="number">2</span>,<span class="number">8</span>&#125;,</span><br><span class="line">  &#123;<span class="number">9</span>,<span class="number">4</span>&#125;,</span><br><span class="line">  &#123;<span class="number">3</span>,<span class="number">2</span>&#125;,</span><br><span class="line">  &#123;<span class="number">9</span>,<span class="number">1</span>&#125;,</span><br><span class="line">  &#123;<span class="number">7</span>,<span class="number">4</span>&#125;,</span><br><span class="line">  &#123;<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 刷新屏<span class="params">(p0,p1,p2,p3)</span></span></span><br><span class="line">  <span class="comment">--参：端点尺寸，端点颜色，线条宽度，线条颜色。</span></span><br><span class="line">  屏.setBackground(</span><br><span class="line">  LuaDrawable(</span><br><span class="line">  <span class="function"><span class="keyword">function</span><span class="params">(v0)</span></span></span><br><span class="line">    <span class="keyword">local</span> v1=Paint();<span class="comment">--端点画笔</span></span><br><span class="line">    v1.setColor(p1);</span><br><span class="line">    v1.setStrokeWidth(<span class="number">1</span>);</span><br><span class="line">    v1.setStyle(Paint.Style.FILL);</span><br><span class="line">    v1.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">    v1.setDither(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">local</span> v2=Paint();<span class="comment">--线条画笔</span></span><br><span class="line">    v2.setColor(p3);</span><br><span class="line">    v2.setStrokeWidth(p2);</span><br><span class="line">    v2.setStyle(Paint.Style.STROKE);</span><br><span class="line">    v2.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">    v2.setDither(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,#线条,<span class="number">1</span> <span class="keyword">do</span><span class="comment">--画线条</span></span><br><span class="line">      v0.drawLine(</span><br><span class="line">      端点[线条[i][<span class="number">1</span>]][<span class="number">1</span>],端点[线条[i][<span class="number">1</span>]][<span class="number">2</span>],</span><br><span class="line">      端点[线条[i][<span class="number">2</span>]][<span class="number">1</span>],端点[线条[i][<span class="number">2</span>]][<span class="number">2</span>],</span><br><span class="line">      v2);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,#端点,<span class="number">1</span> <span class="keyword">do</span><span class="comment">--画端点</span></span><br><span class="line">      v0.drawCircle(</span><br><span class="line">      端点[i][<span class="number">1</span>],端点[i][<span class="number">2</span>],</span><br><span class="line">      p0,v1);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  ));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 判断相交<span class="params">()</span></span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> 向量叉乘<span class="params">(p0,p1,p2)</span></span></span><br><span class="line">    <span class="keyword">return</span> (p1[<span class="number">1</span>]-p0[<span class="number">1</span>])*(p2[<span class="number">2</span>]-p0[<span class="number">2</span>])-(p1[<span class="number">2</span>]-p0[<span class="number">2</span>])*(p2[<span class="number">1</span>]-p0[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> 判断<span class="params">(p0,p1)</span></span></span><br><span class="line">    <span class="keyword">local</span> A=&#123;端点[线条[p0][<span class="number">1</span>]][<span class="number">1</span>],端点[线条[p0][<span class="number">1</span>]][<span class="number">2</span>]&#125;;</span><br><span class="line">    <span class="keyword">local</span> B=&#123;端点[线条[p0][<span class="number">2</span>]][<span class="number">1</span>],端点[线条[p0][<span class="number">2</span>]][<span class="number">2</span>]&#125;;</span><br><span class="line">    <span class="keyword">local</span> C=&#123;端点[线条[p1][<span class="number">1</span>]][<span class="number">1</span>],端点[线条[p1][<span class="number">1</span>]][<span class="number">2</span>]&#125;;</span><br><span class="line">    <span class="keyword">local</span> D=&#123;端点[线条[p1][<span class="number">2</span>]][<span class="number">1</span>],端点[线条[p1][<span class="number">2</span>]][<span class="number">2</span>]&#125;;</span><br><span class="line">    <span class="keyword">if</span>(向量叉乘(A,B,C)*向量叉乘(A,B,D)&lt;=<span class="number">0</span></span><br><span class="line">     &amp;&amp;向量叉乘(C,D,A)*向量叉乘(C,D,B)&lt;=<span class="number">0</span></span><br><span class="line">     &amp;&amp;向量叉乘(A,B,C)*向量叉乘(A,B,D)+</span><br><span class="line">       向量叉乘(C,D,A)*向量叉乘(C,D,B)~=<span class="number">0</span>)<span class="keyword">then</span></span><br><span class="line">      <span class="comment">--目前存在的bug：无法识别重合的线条，将视为不相交。</span></span><br><span class="line">      <span class="comment">--其实是因为我懒的弄了，也是有办法解决的，比较麻烦。</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">for</span> i=<span class="number">1</span>,#线条,<span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> j=i+<span class="number">1</span>,#线条,<span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">      <span class="keyword">if</span>(判断(i,j))<span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">选中端点=<span class="number">0</span>;</span><br><span class="line">屏.onTouch=<span class="function"><span class="keyword">function</span><span class="params">(p0,p1)</span></span></span><br><span class="line">  <span class="keyword">local</span> v0=p1.getAction()&amp;<span class="number">255</span>;</span><br><span class="line">  <span class="keyword">if</span>(v0==<span class="number">0</span>)<span class="keyword">then</span><span class="comment">--判断选中的端点</span></span><br><span class="line">    <span class="keyword">local</span> x=p1.getX();</span><br><span class="line">    <span class="keyword">local</span> y=p1.getY();</span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,#端点,<span class="number">1</span> <span class="keyword">do</span></span><br><span class="line">      <span class="keyword">if</span>(端点[i][<span class="number">1</span>]<span class="number">-21</span>&lt;x&amp;&amp;x&lt;端点[i][<span class="number">1</span>]+<span class="number">21</span></span><br><span class="line">        &amp;&amp;端点[i][<span class="number">2</span>]<span class="number">-21</span>&lt;y&amp;&amp;y&lt;端点[i][<span class="number">2</span>]+<span class="number">21</span>)<span class="keyword">then</span></span><br><span class="line">        选中端点=i;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">elseif</span>(v0==<span class="number">2</span>&amp;&amp;选中端点&gt;<span class="number">0</span>)<span class="comment">--移动端点</span></span><br><span class="line">    端点[选中端点][<span class="number">1</span>]=p1.getX();</span><br><span class="line">    端点[选中端点][<span class="number">2</span>]=p1.getY();</span><br><span class="line">    刷新屏(端点尺寸,端点颜色,线条宽度,线条颜色);</span><br><span class="line">   <span class="keyword">elseif</span>(v0==<span class="number">1</span>&amp;&amp;选中端点&gt;<span class="number">0</span>)<span class="comment">--移动结束判断输赢</span></span><br><span class="line">    <span class="keyword">if</span>(!判断相交())<span class="keyword">then</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;成功理清所有线条。&quot;</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    选中端点=<span class="number">0</span>;</span><br><span class="line">    刷新屏(端点尺寸,端点颜色,线条宽度,线条颜色);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">刷新屏(端点尺寸,端点颜色,线条宽度,线条颜色);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>用其他应用打开（自建对话框布局)</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E7%94%A8%E5%85%B6%E4%BB%96%E5%BA%94%E7%94%A8%E6%89%93%E5%BC%80%EF%BC%88%E8%87%AA%E5%BB%BA%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%B8%83%E5%B1%80)-2021-11-07-17-45-04/</url>
    <content><![CDATA[<h1>用其他应用打开（自建对话框布局)</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">  &#123;Button,text=<span class="string">&quot;分享文字&quot;</span>,id=<span class="string">&quot;bt1&quot;</span>;&#125;;</span><br><span class="line">  &#123;Button,text=<span class="string">&quot;分享文件&quot;</span>;id=<span class="string">&quot;bt2&quot;</span>;&#125;;</span><br><span class="line">  &#123;Button,text=<span class="string">&quot;打开链接&quot;</span>;id=<span class="string">&quot;bt3&quot;</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">activity.setTheme(R.LuaGo)</span><br><span class="line">activity.setTitle(<span class="string">&quot;用其他应用打开（自建对话框布局）&quot;</span>)</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bt1.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--意图1（分享文本）</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  intent1= Intent(Intent.ACTION_SEND)</span><br><span class="line">  intent1.setType(<span class="string">&quot;text/plain&quot;</span>)</span><br><span class="line">  intent1.putExtra(Intent.EXTRA_SUBJECT,<span class="string">&quot;测试&quot;</span>)</span><br><span class="line">  intent1.putExtra(Intent.EXTRA_TEXT, <span class="string">&quot;测试&quot;</span>)</span><br><span class="line">  openIntent(intent1)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">bt2.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--意图2（打开文件）</span></span><br><span class="line">  import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.FileProvider&quot;</span></span><br><span class="line">  <span class="built_in">path</span>=activity.getLuaDir()..<span class="string">&quot;/res/path.txt&quot;</span></span><br><span class="line">  FileName=<span class="built_in">tostring</span>(File(<span class="built_in">path</span>).Name)</span><br><span class="line">  ExtensionName=FileName:<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">  Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  <span class="keyword">if</span> Mime <span class="keyword">then</span></span><br><span class="line">    intent2 = Intent()</span><br><span class="line">    intent2.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">    intent2.setAction(Intent.ACTION_VIEW);</span><br><span class="line">    <span class="comment">--  intent2.setDataAndType(Uri.fromFile(File(path)), Mime);</span></span><br><span class="line">    intent2.setDataAndType(FileProvider.getUriForFile(this,this.getPackageName(),File(<span class="built_in">path</span>)),Mime)</span><br><span class="line">    intent2.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);<span class="comment">--允许临时的读</span></span><br><span class="line">    intent2.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION|Intent.FLAG_GRANT_WRITE_URI_PERMISSION);<span class="comment">--允许临时的读和写</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;没有合适的应用打开该文件&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  openIntent(intent2)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bt3.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">  url=<span class="string">&quot;http://baidu.com&quot;</span></span><br><span class="line">  intent3 =Intent(Intent.ACTION_VIEW, Uri.parse(url));</span><br><span class="line">  <span class="comment">-- intent3.setClassName(&quot;com.android.browser&quot;, &quot;com.android.browser.BrowserActivity&quot;);</span></span><br><span class="line">  openIntent(intent3)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">openIntent</span><span class="params">(intent)</span></span></span><br><span class="line">  <span class="comment">--查询是否有该Intent的Activity</span></span><br><span class="line">  packageManager =this. getPackageManager();</span><br><span class="line">  activities = packageManager.queryIntentActivities(intent, <span class="number">0</span>);</span><br><span class="line">  <span class="comment">--activities里面不为空就有，否则就没有</span></span><br><span class="line">  <span class="keyword">if</span> activities.size() ==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">    this.startActivity(intent)</span><br><span class="line">   <span class="keyword">elseif</span> activities.size()&gt;<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    import <span class="string">&quot;android.content.ComponentName&quot;</span></span><br><span class="line">    import <span class="string">&quot;com.androlua.LuaAdapter&quot;</span></span><br><span class="line">    dialog=AlertDialog.Builder(this)</span><br><span class="line">    .setView(loadlayout&#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      Orientation=<span class="string">&#x27;vertical&#x27;</span>;</span><br><span class="line">      layout_width=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">      layout_height=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">      background=<span class="string">&#x27;#ffffff&#x27;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        GridView;</span><br><span class="line">        numColumns=<span class="number">3</span>;</span><br><span class="line">        layout_width=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">        layout_height=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">        id=<span class="string">&quot;list&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)</span><br><span class="line">    .setTitle(<span class="string">&quot;选择应用&quot;</span>)</span><br><span class="line">    .show()</span><br><span class="line">    item=&#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      Orientation=<span class="string">&#x27;vertical&#x27;</span>;</span><br><span class="line">      layout_width=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">      layout_height=<span class="string">&#x27;wrap&#x27;</span>;</span><br><span class="line">      gravity=<span class="string">&#x27;center&#x27;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        ImageView;</span><br><span class="line">        layout_width=<span class="string">&#x27;8%w&#x27;</span>;</span><br><span class="line">        layout_height=<span class="string">&#x27;8%w&#x27;</span>;</span><br><span class="line">        layout_margin=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;icon&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        TextView;</span><br><span class="line">        layout_width=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">        layout_height=<span class="string">&#x27;wrap&#x27;</span>;</span><br><span class="line">        gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;name&quot;</span>;</span><br><span class="line">        layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        TextView;</span><br><span class="line">        layout_width=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        layout_height=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;pkgname&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        TextView;</span><br><span class="line">        layout_width=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        layout_height=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;actname&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    data=&#123;&#125;</span><br><span class="line">    adp=LuaAdapter(this,data,item)</span><br><span class="line">    list.setAdapter(adp)</span><br><span class="line">    list.onItemClick=<span class="function"><span class="keyword">function</span><span class="params">(l,v,o,n)</span></span></span><br><span class="line">      intent.setComponent(ComponentName(v.Tag.pkgname.text,v.Tag.actname.text));</span><br><span class="line">      this.startActivity(intent)</span><br><span class="line">      dialog.dismiss()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">0</span>,activities.size()<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">      info=activities.get(i)</span><br><span class="line">      adp.add(&#123;pkgname=info.activityInfo.packageName,</span><br><span class="line">        actname=info.activityInfo.name,</span><br><span class="line">        name=info.loadLabel(packageManager),</span><br><span class="line">        icon=info.loadIcon(packageManager)&#125;)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;没有合适的应用打开该内容&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>签名验证</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E7%AD%BE%E5%90%8D%E9%AA%8C%E8%AF%81-2021-11-07-17-47-55/</url>
    <content><![CDATA[<h1>签名验证</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--签名验证</span></span><br><span class="line">import <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line"><span class="comment">--获取包管理器</span></span><br><span class="line"><span class="keyword">local</span> pm = activity.getPackageManager();</span><br><span class="line"><span class="keyword">local</span> pm=pm.getPackageInfo(activity.getPackageName(),PackageManager.GET_SIGNATURES).signatures[<span class="number">0</span>].hashCode()</span><br><span class="line"></span><br><span class="line"><span class="comment">--下面这一段是将校验内容复制到剪切板</span></span><br><span class="line"><span class="comment">--打包后自己签名打开软件一遍 会自动复制到剪切板 然后复制到下面</span></span><br><span class="line">import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">activity.getSystemService(Context.CLIPBOARD_SERVICE)</span><br><span class="line">.setText(<span class="built_in">tostring</span>(pm))<span class="comment">--这个获取完后记得删掉</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--将获取到的粘贴骚这个pms=后面</span></span><br><span class="line"><span class="comment">--例如pms=-94378134</span></span><br><span class="line">pms=</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> pm~=pms <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span><span class="string">&quot;不通过&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>统计一个程序的总行数</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E7%BB%9F%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%80%BB%E8%A1%8C%E6%95%B0-2021-11-07-17-51-59/</url>
    <content><![CDATA[<h1>统计一个程序的总行数</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">行=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span><span class="params">(catalog,name)</span></span></span><br><span class="line">  <span class="keyword">local</span> n=<span class="number">0</span></span><br><span class="line">  <span class="keyword">local</span> t=<span class="built_in">os</span>.<span class="built_in">clock</span>()</span><br><span class="line">  <span class="keyword">local</span> ret=&#123;&#125;</span><br><span class="line">  <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.lang.String&quot;</span></span><br><span class="line">  行=<span class="number">0</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">FindFile</span><span class="params">(catalog,name)</span></span></span><br><span class="line">    <span class="keyword">local</span> name=<span class="built_in">tostring</span>(name)</span><br><span class="line">    <span class="keyword">local</span> ls=catalog.listFiles() <span class="keyword">or</span> File&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> 次数=<span class="number">0</span>,#ls<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--local 目录=tostring(ls[次数])</span></span><br><span class="line">      <span class="keyword">local</span> f=ls[次数]</span><br><span class="line">      <span class="keyword">if</span> f.isDirectory() <span class="keyword">then</span><span class="comment">--如果是文件夹则继续匹配</span></span><br><span class="line">        FindFile(f,name)</span><br><span class="line">       <span class="keyword">else</span><span class="comment">--如果是文件则</span></span><br><span class="line">        n=n+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> n%<span class="number">1000</span>==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--print(n,os.clock()-t)</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">local</span> nm=f.Name</span><br><span class="line">        <span class="comment">--xpcall(function()</span></span><br><span class="line">          <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>(<span class="built_in">tostring</span>(f)) <span class="keyword">do</span></span><br><span class="line">            行=行+<span class="number">1</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        <span class="comment">--end,function(e) end)</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      luajava.clear(f)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  FindFile(catalog,name)</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;ok&quot;</span>,行)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line"></span><br><span class="line">catalog=File(<span class="string">&quot;/storage/emulated/0/AndroLua/project/ASD浏览器/&quot;</span>)</span><br><span class="line"></span><br><span class="line">thread(<span class="built_in">find</span>,catalog,<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>能在子页面调用主页面的import</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E8%83%BD%E5%9C%A8%E5%AD%90%E9%A1%B5%E9%9D%A2%E8%B0%83%E7%94%A8%E4%B8%BB%E9%A1%B5%E9%9D%A2%E7%9A%84import-2021-11-07-17-32-00/</url>
    <content><![CDATA[<h1>能在子页面调用主页面的import</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">在开头放<span class="built_in">package</span>.<span class="built_in">path</span>=<span class="built_in">package</span>.<span class="built_in">path</span>..activity.getLuaPath(<span class="string">&quot;../../?.lua;&quot;</span>)</span><br><span class="line">然后就可以import主页代码了</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取系统语言</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E8%AF%AD%E8%A8%80-2021-11-07-17-46-51/</url>
    <content><![CDATA[<h1>获取系统语言</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--获取语言</span></span><br><span class="line">Locale.getDefault().getLanguage()</span><br><span class="line"><span class="comment">--中文返回zh</span></span><br><span class="line"><span class="comment">--英文返回en</span></span><br><span class="line"><span class="comment">--日语返回ja</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取国家</span></span><br><span class="line">Locale.getDefault().getCountry()</span><br><span class="line"><span class="comment">--中国返回CN</span></span><br><span class="line"><span class="comment">--日本返回JP</span></span><br><span class="line"><span class="comment">--其他百度语言和国家代码</span></span><br><span class="line"></span><br><span class="line">语言=Locale.getDefault().getLanguage()</span><br><span class="line">国家=Locale.getDefault().getCountry()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(语言,国家)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>蓝牙</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E8%93%9D%E7%89%99/</url>
    <content><![CDATA[<h1>蓝牙</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.bluetooth.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">import <span class="string">&quot;java.util.UUID&quot;</span></span><br><span class="line">import <span class="string">&quot;java.lang.*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--记得给蓝牙权限</span></span><br><span class="line"></span><br><span class="line">layout=&#123;</span><br><span class="line">  main=&#123;</span><br><span class="line">    LinearLayout,</span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      TextView,</span><br><span class="line">      text=<span class="string">&quot;蓝牙操作示例教程&quot;</span>,</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua+&#x27;</span>)</span><br><span class="line">activity.setTheme(android.R.style.Theme_Holo_Light)</span><br><span class="line"><span class="comment">--布局方式</span></span><br><span class="line">layout=LinearLayout(activity)</span><br><span class="line">layout.Orientation=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">activity.setContentView(layout)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--创建控件</span></span><br><span class="line">txt=TextView(activity)</span><br><span class="line">bbtxt=TextView(activity)</span><br><span class="line">取本地蓝牙地址=TextView(activity)</span><br><span class="line">mac=TextView(activity)</span><br><span class="line">btmsg=TextView(activity)</span><br><span class="line">bn1=Button(activity)</span><br><span class="line">en1=EditText(activity)</span><br><span class="line">btkj=Button(activity)</span><br><span class="line">sao=Button(activity)</span><br><span class="line">fuwuqi=Button(activity)</span><br><span class="line">huo=Button(activity)</span><br><span class="line"></span><br><span class="line">客户端连接=Button(activity)</span><br><span class="line">en2=EditText(activity)</span><br><span class="line">发信息=Button(activity)</span><br><span class="line"></span><br><span class="line"><span class="comment">--这个不解释</span></span><br><span class="line">text=<span class="string">&quot;检测中。。。&quot;</span></span><br><span class="line">bnock=<span class="literal">false</span></span><br><span class="line">btzt=<span class="string">&quot;&quot;</span></span><br><span class="line">listbt=&#123;&#125;</span><br><span class="line">sockss=<span class="literal">nil</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--蓝牙状态链表，statebt()在调用</span></span><br><span class="line">zt=&#123;[<span class="string">&quot;10&quot;</span>]=<span class="string">&quot;【己开启】&quot;</span>,[<span class="string">&quot;11&quot;</span>]=<span class="string">&quot;【开启中】&quot;</span>,[<span class="string">&quot;12&quot;</span>]=<span class="string">&quot;【己关闭】&quot;</span>,[<span class="string">&quot;13&quot;</span>]=<span class="string">&quot;【关闭中】&quot;</span>,[<span class="string">&quot;14&quot;</span>]=<span class="string">&quot;【未知。。】&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--获取蓝牙适配器</span></span><br><span class="line">bt=BluetoothAdapter.getDefaultAdapter()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--判断蓝牙是否打开</span></span><br><span class="line"><span class="keyword">if</span> bt.isEnabled() <span class="keyword">then</span> </span><br><span class="line">  bnock=<span class="literal">true</span></span><br><span class="line">  bn1.setText(<span class="string">&quot;关闭蓝牙&quot;</span>)   </span><br><span class="line">  <span class="keyword">else</span> </span><br><span class="line">  bnock=<span class="literal">false</span></span><br><span class="line">  bn1.setText(<span class="string">&quot;开启蓝牙&quot;</span>)  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--打开蓝牙</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">openbt</span><span class="params">()</span></span></span><br><span class="line">  bt.enable()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--扫描</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listbt</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--判断是否在扫描中</span></span><br><span class="line">   <span class="keyword">local</span> nn=<span class="built_in">tostring</span>(bt.getBondedDevices())</span><br><span class="line">  <span class="comment">--处理地址  特么的总感觉那不对，改截取字符</span></span><br><span class="line"><span class="comment">--  local tx=string.gsub(nn,&quot;%[&quot;,&quot;&quot;)</span></span><br><span class="line"><span class="comment">--  local ty=string.gsub(tx,&quot;%]&quot;,&quot;&quot;)</span></span><br><span class="line">    <span class="keyword">local</span> ty=<span class="built_in">string</span>.<span class="built_in">sub</span>(nn,<span class="number">2</span>,<span class="number">18</span>)</span><br><span class="line">   <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">len</span>(ty) &gt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">     bt.cancelDiscovery()</span><br><span class="line">     bbtxt.setText(<span class="string">&quot;己获取配对数据&quot;</span>)</span><br><span class="line">     sao.setText(<span class="string">&quot;开启扫描&quot;</span>)</span><br><span class="line">     en1.setText(ty)</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line">   </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--关闭扫描</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">closesaomiao</span><span class="params">()</span></span></span><br><span class="line">  bt.cancelDiscovery()</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--关闭蓝牙</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">closebt</span><span class="params">()</span></span></span><br><span class="line">  bt.disable()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--这个不解释了</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">msg</span><span class="params">(text)</span></span></span><br><span class="line">  <span class="built_in">print</span>(text)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">statebt</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--获取state状态 返回int值</span></span><br><span class="line">  <span class="keyword">local</span> xx=bt.getState()</span><br><span class="line">  <span class="comment">--这里可以不用tostring,改下链表既可</span></span><br><span class="line">  <span class="keyword">local</span> yy=<span class="built_in">tostring</span>(xx)</span><br><span class="line">  <span class="keyword">return</span> zt[yy]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--状态显示  12表示打开状况</span></span><br><span class="line">txt.setText(<span class="string">&quot;当前蓝牙状态:&quot;</span>)</span><br><span class="line"><span class="comment">--bbtxt.setText(statebt())</span></span><br><span class="line"></span><br><span class="line">取本地蓝牙地址.setText(<span class="string">&quot;我的蓝牙MAC地址:&quot;</span>..bt.getName())</span><br><span class="line"></span><br><span class="line">mac.setText(bt.getAddress())</span><br><span class="line"></span><br><span class="line">btmsg.setText(<span class="string">&quot;信息框:&quot;</span>)</span><br><span class="line">en1.setText(<span class="string">&quot;\n\t正在等待联机。。\n\t&quot;</span>)</span><br><span class="line"><span class="comment">--编辑框不可编辑</span></span><br><span class="line"><span class="comment">--en1.setFocusable(false)</span></span><br><span class="line"></span><br><span class="line">btkj.setText(<span class="string">&quot;申请蓝牙设备可见&quot;</span>)</span><br><span class="line">sao.setText(<span class="string">&quot;获取地址&quot;</span>)</span><br><span class="line">fuwuqi.setText(<span class="string">&quot;开启服务器&quot;</span>)</span><br><span class="line">huo.setText(<span class="string">&quot;MAC是否可用&quot;</span>)</span><br><span class="line">客户端连接.setText(<span class="string">&quot;客户端直连&quot;</span>)</span><br><span class="line">en2.setText(<span class="string">&quot;输了内容&quot;</span>)</span><br><span class="line"></span><br><span class="line">发信息.setText(<span class="string">&quot;发送信息&quot;</span>)</span><br><span class="line"></span><br><span class="line">layout.addView(txt)</span><br><span class="line">layout.addView(bbtxt)</span><br><span class="line">layout.addView(取本地蓝牙地址)</span><br><span class="line">layout.addView(mac)</span><br><span class="line">layout.addView(bn1)</span><br><span class="line">layout.addView(btmsg)</span><br><span class="line">layout.addView(en1)</span><br><span class="line">layout.addView(btkj)</span><br><span class="line">layout.addView(sao)</span><br><span class="line">layout.addView(fuwuqi)</span><br><span class="line">layout.addView(huo)</span><br><span class="line">layout.addView(客户端连接)</span><br><span class="line">layout.addView(en2)</span><br><span class="line">layout.addView(发信息)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bn1.onClick</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">if</span> bt.isEnabled() <span class="keyword">then</span></span><br><span class="line">    closebt()</span><br><span class="line">    bn1.setText(<span class="string">&quot;开启蓝牙&quot;</span>)</span><br><span class="line">    bn1.setTextColor(<span class="number">0xff000000</span>)</span><br><span class="line">    bbtxt.setText(statebt())</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    openbt()</span><br><span class="line">    bn1.setText(<span class="string">&quot;关闭蓝牙&quot;</span>)</span><br><span class="line">    bn1.setTextColor(<span class="number">0xffff0000</span>)</span><br><span class="line">    bbtxt.setText(statebt())</span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">btkj.onClick</span><span class="params">()</span></span></span><br><span class="line">   <span class="keyword">local</span> kj=Intent(bt.ACTION_REQUEST_DISCOVERABLE)</span><br><span class="line">   <span class="comment">--说好的申请3600秒呢？系统只给120秒！fuck !</span></span><br><span class="line">   kj.putExtra(bt.EXTRA_DISCOVERABLE_DURATION,<span class="number">3600</span>)</span><br><span class="line">   activity.startActivity(kj)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sao.onClick</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--获取己配对的没备列表</span></span><br><span class="line">  <span class="keyword">if</span> bt.isDiscovering() <span class="keyword">then</span></span><br><span class="line">    bbtxt.setText(<span class="string">&quot;蓝牙扫描己关闭。。&quot;</span>)</span><br><span class="line">    bt.cancelDiscovery()</span><br><span class="line">    sao.setText(<span class="string">&quot;关闭扫描&quot;</span>)</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">    bbtxt.setText(<span class="string">&quot;蓝牙扫描己开启。。&quot;</span>)</span><br><span class="line">    bt.startDiscovery()</span><br><span class="line">    sao.setText(<span class="string">&quot;开启扫描&quot;</span>)</span><br><span class="line">    listbt() </span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fuwuqi.onClick</span><span class="params">()</span></span></span><br><span class="line"> <span class="comment">--线程运用   </span></span><br><span class="line">  <span class="keyword">if</span> bt.isEnabled() <span class="keyword">then</span></span><br><span class="line">   thread(fuwu,<span class="number">1</span>)  </span><br><span class="line">   <span class="built_in">print</span> <span class="string">&quot;己开服务器，等待客户连接！&quot;</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   <span class="built_in">print</span><span class="string">&quot;蓝牙未打开&quot;</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fuwu</span><span class="params">(txt)</span></span></span><br><span class="line">  <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.bluetooth.*&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.util.UUID&quot;</span></span><br><span class="line">  bt=BluetoothAdapter.getDefaultAdapter()</span><br><span class="line">  <span class="keyword">local</span> xt=<span class="string">&quot;fa87c0d0-afac-11de-8a39-0800200c9a66&quot;</span></span><br><span class="line">  <span class="keyword">local</span> xy=<span class="string">&quot;00001101-0000-1000-8000-00805F9B34FB&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> btbt=UUID.fromString(xy)</span><br><span class="line">  </span><br><span class="line">  serverSocket=bt.listenUsingRfcommWithServiceRecord(<span class="string">&quot;红米手机&quot;</span>,btbt)</span><br><span class="line">  socks=serverSocket.accept()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> socks==<span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">     socks.<span class="built_in">close</span>()</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;己连接一个设备&quot;</span>)</span><br><span class="line">   sockss=socks</span><br><span class="line">   <span class="built_in">print</span>(socks)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> socks~=<span class="literal">nil</span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> bt.isEnabled() <span class="keyword">then</span></span><br><span class="line">    bttext=socks.getInputStream()</span><br><span class="line">    bs=<span class="built_in">byte</span>[<span class="number">1024</span>]</span><br><span class="line">    data=bttext.<span class="built_in">read</span>(bs)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">tostring</span>(String(bs)))</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span><span class="string">&quot;蓝牙未打开或己关闭&quot;</span></span><br><span class="line">  <span class="keyword">end</span>  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--线程</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">huo.onClick</span><span class="params">()</span></span>  </span><br><span class="line"><span class="keyword">local</span> nnx=<span class="built_in">tostring</span>(bt.getBondedDevices())</span><br><span class="line"><span class="keyword">local</span> tyx=<span class="built_in">string</span>.<span class="built_in">sub</span>(nnx,<span class="number">2</span>,<span class="number">18</span>)</span><br><span class="line"> xxx=bt.checkBluetoothAddress(tyx)</span><br><span class="line"> en1.setText(<span class="built_in">tostring</span>(xxx))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 发信息.<span class="title">onClick</span><span class="params">()</span></span></span><br><span class="line"> </span><br><span class="line">   <span class="built_in">print</span>(sockss)</span><br><span class="line">   </span><br><span class="line">  <span class="comment">-- 写数据=socks.getOutputStream()</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>解析Unicode码</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E8%A7%A3%E6%9E%90Unicode%E7%A0%81-2021-11-07-17-32-48/</url>
    <content><![CDATA[<h1>解析Unicode码</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unicode2utf8</span><span class="params">(s)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">loadstring</span>(<span class="string">[[return &quot;]]</span>..s</span><br><span class="line">  :<span class="built_in">gsub</span>(<span class="string">&quot;\\&quot;</span>,<span class="string">&quot;\\\\&quot;</span>)</span><br><span class="line">  :<span class="built_in">gsub</span>(<span class="string">&quot;\\\\u&quot;</span>,<span class="string">&quot;\\u&quot;</span>)</span><br><span class="line">  :<span class="built_in">gsub</span>(<span class="string">&quot;\&quot;&quot;</span>,<span class="string">&quot;\\\&quot;&quot;</span>)..<span class="string">[[&quot;]]</span>)()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>解析cjson</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E8%A7%A3%E6%9E%90cjson-2021-11-07-17-45-28/</url>
    <content><![CDATA[<h1>解析cjson</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--导入</span></span><br><span class="line">JSON=import <span class="string">&quot;cjson&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--json字符串</span></span><br><span class="line">json_str=<span class="string">[==[</span></span><br><span class="line"><span class="string">[</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">		&quot;title&quot;: &quot;第一本书&quot;,</span></span><br><span class="line"><span class="string">		&quot;bookId&quot;: &quot;book_1&quot;</span></span><br><span class="line"><span class="string">	&#125;,</span></span><br><span class="line"><span class="string">	&#123;</span></span><br><span class="line"><span class="string">		&quot;title&quot;: &quot;第二本书&quot;,</span></span><br><span class="line"><span class="string">		&quot;bookId&quot;: &quot;book_2&quot;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string">]==]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--解析json</span></span><br><span class="line">json_o=JSON.decode(json_str)</span><br><span class="line"></span><br><span class="line"><span class="comment">--打印table</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dump</span>(json_o))</span><br><span class="line"></span><br><span class="line"><span class="comment">--遍历打印table</span></span><br><span class="line"><span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(json_o) <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">print</span>(v.title,v.bookId)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>跑马灯文本控件</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E8%B7%91%E9%A9%AC%E7%81%AF%E6%96%87%E6%9C%AC%E6%8E%A7%E4%BB%B6-2021-11-07-17-48-24/</url>
    <content><![CDATA[<h1>跑马灯文本控件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">跑马灯文本控件必须加入以下属性才能使用</span><br><span class="line">ellipsize=<span class="string">&quot;marquee&quot;</span>;</span><br><span class="line">focusableInTouchMode=<span class="literal">true</span>;</span><br><span class="line">focusable=<span class="literal">true</span>;</span><br><span class="line">singleLine=<span class="literal">true</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>遍历设置字体</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E9%81%8D%E5%8E%86%E8%AE%BE%E7%BD%AE%E5%AD%97%E4%BD%93-2021-11-07-17-47-13/</url>
    <content><![CDATA[<h1>遍历设置字体</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--遍历设置字体</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Typeface&quot;</span></span><br><span class="line">font=Typeface.<span class="built_in">create</span>(<span class="string">&quot;宋体&quot;</span>,Typeface.BOLD)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setFont</span><span class="params">(view)</span></span></span><br><span class="line">  <span class="keyword">if</span> luajava.instanceof(view,TextView) <span class="keyword">then</span></span><br><span class="line">    view.setTypeface(font)</span><br><span class="line">   <span class="keyword">elseif</span> luajava.instanceof(view,ViewGroup) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">0</span>,view.getChildCount()<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">      setFont(view.getChildAt(i))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="comment">--来源：柯南</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">setFont(activity.getDecorView())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>重力球</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E9%87%8D%E5%8A%9B%E7%90%83-2021-11-07-17-52-50/</url>
    <content><![CDATA[<h1>重力球</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">import <span class="string">&quot;android.hardware.Sensor&quot;</span></span><br><span class="line">import <span class="string">&quot;android.hardware.SensorEvent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.hardware.SensorEventListener&quot;</span></span><br><span class="line">import <span class="string">&quot;android.hardware.SensorManager&quot;</span></span><br><span class="line"><span class="comment">--小绵羊233 1935528751</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuffColorFilter&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuff&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.ColorDrawable&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--原物理传感器改造成重力球，倾斜角度越大，小球加速度越大</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--dp转px--</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp2px</span><span class="params">(dpValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = this.getResources().getDisplayMetrics().density</span><br><span class="line">  <span class="keyword">return</span> (dpValue * scale)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">R=dp2px(<span class="number">30</span>)</span><br><span class="line">W=activity.getWidth()</span><br><span class="line">H=activity.getHeight()</span><br><span class="line">xc=W/<span class="number">2</span>-R<span class="comment">--球位于中心时左上角x坐标</span></span><br><span class="line">yc=H/<span class="number">2</span>-R<span class="comment">--球位于中心时左上角y坐标</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  id=<span class="string">&quot;nio&quot;</span>;</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    RelativeLayout;</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    background=<span class="string">&quot;#FFFFFF&quot;</span>;</span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">    id=<span class="string">&quot;ht&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      CardElevation=<span class="string">&quot;4dp&quot;</span>;</span><br><span class="line">      radius=<span class="string">&quot;30dp&quot;</span>;</span><br><span class="line">      layout_width=<span class="string">&quot;60dp&quot;</span>;</span><br><span class="line">      background=<span class="string">&quot;#0090ff&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;60dp&quot;</span>;</span><br><span class="line">      layout_marginTop=<span class="string">&quot;90dp&quot;</span>;</span><br><span class="line">      layout_marginLeft=<span class="string">&quot;100dp&quot;</span>;</span><br><span class="line">      id=<span class="string">&quot;ho&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        Button;</span><br><span class="line">        style=<span class="string">&quot;?android:attr/buttonBarButtonStyle&quot;</span>;</span><br><span class="line">        textColor=<span class="string">&quot;#FFFFFF&quot;</span>;</span><br><span class="line">        layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">        text=<span class="string">&quot;+&quot;</span>;</span><br><span class="line">        textSize=<span class="string">&quot;30dp&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;hy&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      TextView;</span><br><span class="line">      id=<span class="string">&quot;tv&quot;</span>,</span><br><span class="line">      gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">      text=<span class="string">[==[这是一个传感器的物理效果，不是很好，但是...]==]</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      TextView;</span><br><span class="line">      layout_marginTop=<span class="string">&quot;100dp&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">vx=<span class="number">0</span></span><br><span class="line">vy=<span class="number">0</span></span><br><span class="line"></span><br><span class="line">传感器 = activity.getSystemService(Context.SENSOR_SERVICE)</span><br><span class="line"><span class="keyword">local</span> 加速度传感器 = 传感器.getDefaultSensor(Sensor.TYPE_ACCELEROMETER)</span><br><span class="line">sensorEventListener=SensorEventListener(&#123;</span><br><span class="line">  onSensorChanged=<span class="function"><span class="keyword">function</span><span class="params">(event)</span></span></span><br><span class="line">    ax = event.values[<span class="number">0</span>]</span><br><span class="line">    ay = event.values[<span class="number">1</span>]</span><br><span class="line">    vx=vx-ax</span><br><span class="line">    vy=vy+ay</span><br><span class="line">    <span class="keyword">if</span> vx&lt;R-W/<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">      ho.setX(<span class="number">0</span>)</span><br><span class="line">     <span class="keyword">elseif</span> vx&gt;W/<span class="number">2</span>-R <span class="keyword">then</span></span><br><span class="line">      ho.setX(W<span class="number">-2</span>*R)</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      ho.setX(xc+vx)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> vy&lt;R-H/<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">      ho.setY(<span class="number">0</span>)</span><br><span class="line">     <span class="keyword">elseif</span> vy&gt;H/<span class="number">2</span>-R <span class="keyword">then</span></span><br><span class="line">      ho.setY(H<span class="number">-2</span>*R)</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      ho.setY(yc+vy)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span>,<span class="literal">nil</span></span><br><span class="line">&#125;)</span><br><span class="line">传感器.registerListener(sensorEventListener, 加速度传感器, SensorManager.SENSOR_DELAY_NORMAL)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDestroy</span><span class="params">()</span></span></span><br><span class="line">  传感器.unregisterListener(sensorEventListener)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">》》</span><br><span class="line">《《关于QQDialog》》</span><br><span class="line">《《</span><br><span class="line">import <span class="string">&quot;java.lang.Override&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.qq.widget.*&quot;</span></span><br><span class="line"><span class="comment">--QQDialog</span></span><br><span class="line">MyDialog=QQDialog(this);<span class="comment">--设置弹窗进出动画</span></span><br><span class="line">MyDialog.setViewLine(QQDialog.setLineColor.BLUE);<span class="comment">--设置顶部线条颜色</span></span><br><span class="line">MyDialog.setTitle(<span class="string">&quot;标题&quot;</span>,QQDialog.setColors.DEFAULT);<span class="comment">--设置标题文字及颜色</span></span><br><span class="line">MyDialog.setMessage(<span class="string">&quot;这是一个按钮的对话框&quot;</span>);<span class="comment">--设置弹窗内容</span></span><br><span class="line">MyDialog.setPositiveButton(<span class="string">&quot;确定按钮&quot;</span>,QQDialog.setColors.DEFAULT,<span class="comment">--设置按钮文字及颜色</span></span><br><span class="line">&#123;onClick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--按钮点击事件</span></span><br><span class="line">MyDialog.dismiss();<span class="comment">--关闭对话框</span></span><br><span class="line"><span class="keyword">end</span>&#125;);</span><br><span class="line">MyDialog.show();<span class="comment">--显示对话框</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--QQMenuDialog</span></span><br><span class="line">MyMenuDialog=MenuDialog(this);<span class="comment">--设置弹窗进出动画</span></span><br><span class="line">MyMenuDialog.setTitle(<span class="string">&quot;这是菜单栏的标题&quot;</span>,MenuDialog.setTextColor.DEFAULT);<span class="comment">--设置标题文字及颜色</span></span><br><span class="line">MyMenuDialog.setButton(<span class="string">&quot;取消&quot;</span>,MenuDialog.setTextColor.BLACK);<span class="comment">--设置取消按钮文字及颜色</span></span><br><span class="line">MyMenuDialog.addItem(<span class="string">&quot;选项一&quot;</span>,MenuDialog.setTextColor.BLACK,<span class="comment">--设置选项文字及颜色</span></span><br><span class="line">&#123;onClick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--按钮点击事件</span></span><br><span class="line"><span class="keyword">end</span>&#125;);</span><br><span class="line">MyMenuDialog.show();<span class="comment">--显示弹窗</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--QQProgress</span></span><br><span class="line">QQProgress.showPorgressBar(this, <span class="string">&quot;这是一个进度条&quot;</span>,QQProgress.setTheme.DEFAULT);</span><br><span class="line"></span><br><span class="line"><span class="comment">--QQToast</span></span><br><span class="line">QQToast.makeText(this, <span class="string">&quot;这是一个提示&quot;</span>,QQToast.setBackgroundColors.DEFAULT).show();</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用AndroLuaX+1.0.0.4</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>静默安装</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E9%9D%99%E9%BB%98%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h1>静默安装</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;AndroLua+&#x27;</span>)</span><br><span class="line">activity.setTheme(android.R.style.Theme_Holo_Light)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 静默安装<span class="params">(cmd)</span></span></span><br><span class="line"><span class="keyword">local</span> p=<span class="built_in">io</span>.<span class="built_in">popen</span>(<span class="string">&quot;su -c pm install &quot;</span>..cmd)</span><br><span class="line">  s=p:<span class="built_in">read</span>(<span class="string">&quot;*all&quot;</span>)</span><br><span class="line">  p:<span class="built_in">close</span>()</span><br><span class="line">  <span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;开始安装。。。&quot;</span></span><br><span class="line"></span><br><span class="line">静默安装(<span class="string">&quot;/sdcard/demo.apk&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>飞机大战</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98-2021-11-07-17-52-27/</url>
    <content><![CDATA[<h1>飞机大战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.PorterDuff&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;飞机大战/wsdx&#x27;</span>)</span><br><span class="line">activity.setTheme(android.R.style.Theme_Holo_Light)</span><br><span class="line">activity.setContentView(loadlayout(&#123;</span><br><span class="line">  RelativeLayout;</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  background=<span class="string">&quot;#fe000000&quot;</span>;</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  id=<span class="string">&quot;back&quot;</span>;</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="comment">--画面刷新次数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">config</span> = &#123;</span><br><span class="line">  air_width = <span class="number">160</span>,</span><br><span class="line">  air_height = <span class="number">320</span>,</span><br><span class="line">  <span class="comment">--飞机宽高</span></span><br><span class="line"></span><br><span class="line">  pop_width = <span class="number">30</span>,</span><br><span class="line">  pop_height = <span class="number">30</span>,</span><br><span class="line">  <span class="comment">--子弹宽高</span></span><br><span class="line"></span><br><span class="line">  ene_width = <span class="number">160</span>,</span><br><span class="line">  ene_height = <span class="number">320</span>,</span><br><span class="line">  <span class="comment">--敌人宽高</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--相关配置</span></span><br><span class="line"></span><br><span class="line">pos = &#123;</span><br><span class="line">  x = <span class="number">400</span>,</span><br><span class="line">  y = <span class="number">1000</span>,</span><br><span class="line">  size = &#123;<span class="built_in">config</span>.air_width,<span class="built_in">config</span>.air_height&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--记录飞机位置</span></span><br><span class="line"></span><br><span class="line">enes = &#123;</span><br><span class="line">  &#123;x=<span class="number">100</span>,y=<span class="number">0</span>,speed=&#123;<span class="number">0</span>,<span class="number">1</span>&#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--敌人</span></span><br><span class="line"></span><br><span class="line">pops = &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--分数</span></span><br><span class="line">score = &#123;</span><br><span class="line">kill = <span class="number">0</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">back.onTouch = <span class="function"><span class="keyword">function</span><span class="params">(v,e)</span></span></span><br><span class="line">  pos.x = e.x<span class="number">-75</span></span><br><span class="line">  pos.y =e.y<span class="number">-160</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">daf</span><span class="params">(c)</span></span></span><br><span class="line">  <span class="comment">--核心：绘制函数</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> width = c.getWidth()</span><br><span class="line">  <span class="keyword">local</span> height = c.getHeight()</span><br><span class="line"></span><br><span class="line">  <span class="comment">--c.drawColor(Color.TRANSPARENT,PorterDuff.Mode.CLEAR);</span></span><br><span class="line">  <span class="keyword">local</span> pa = Paint()</span><br><span class="line">  pa.setColor(<span class="number">0xFF0000ff</span>)</span><br><span class="line">  pa.setStyle(pa.style.FILL)</span><br><span class="line">  c.drawRect(pos.x,pos.y,pos.x+<span class="built_in">config</span>.air_width,pos.y+<span class="built_in">config</span>.air_height,pa)</span><br><span class="line">  pa.setTextSize(<span class="number">50</span>)</span><br><span class="line">  pa.setColor(<span class="number">0xFFFFFFFF</span>)</span><br><span class="line">  c.drawText(<span class="string">&quot;飞机&quot;</span>,pos.x+<span class="number">30</span>,pos.y+<span class="number">160</span>,pa)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> k,ep <span class="keyword">in</span> <span class="built_in">pairs</span>(pops) <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ep.from == <span class="string">&quot;e&quot;</span> <span class="keyword">then</span></span><br><span class="line">      pa.setColor(<span class="number">0xFFFF0000</span>)</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      pa.setColor(<span class="number">0xFF0000FF</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">--绘制子弹</span></span><br><span class="line">    c.drawRect(ep.x,ep.y,ep.x+ep.size[<span class="number">1</span>],ep.y+ep.size[<span class="number">2</span>],pa)</span><br><span class="line"></span><br><span class="line">    respeed(ep)</span><br><span class="line"></span><br><span class="line">    ep.from = ep.from <span class="keyword">or</span> <span class="string">&quot;a&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> checkscreen(ep,width,height) <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">remove</span>(pops,k)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> k,en <span class="keyword">in</span> <span class="built_in">pairs</span>(enes) <span class="keyword">do</span></span><br><span class="line">      <span class="keyword">if</span> isBit(ep,en) <span class="keyword">and</span> ep.from == <span class="string">&quot;a&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">remove</span>(enes,k)</span><br><span class="line">        score.kill = score.kill + <span class="number">1</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> isBit(ep,pos) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> ep.from == <span class="string">&quot;e&quot;</span> <span class="keyword">then</span></span><br><span class="line">        <span class="comment">--失败</span></span><br><span class="line">        activity.finish()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  pa.setColor(<span class="number">0xFF00FF00</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> k,ep <span class="keyword">in</span> <span class="built_in">pairs</span>(enes) <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">--绘制敌人</span></span><br><span class="line"></span><br><span class="line">    c.drawRect(ep.x,ep.y,ep.x+ep.size[<span class="number">1</span>],ep.y+ep.size[<span class="number">2</span>],pa)</span><br><span class="line"></span><br><span class="line">    respeed(ep)</span><br><span class="line"></span><br><span class="line">    pa.setColor(<span class="number">0xFFFFFFFF</span>)</span><br><span class="line">    c.drawText(<span class="string">&quot;敌人&quot;</span>,ep.x+<span class="number">30</span>,ep.y+<span class="number">160</span>,pa)</span><br><span class="line"></span><br><span class="line">    pa.setColor(<span class="number">0xFF00FF00</span>)</span><br><span class="line">    <span class="keyword">if</span> checkscreen(ep,width,height) <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">remove</span>(enes,k)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> isBit(ep,pos) <span class="keyword">then</span></span><br><span class="line">      activity.finish()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--分数</span></span><br><span class="line">  pa.setColor(<span class="number">0xFF000000</span>)</span><br><span class="line">  pa.setTextSize(<span class="number">50</span>)</span><br><span class="line">  c.drawText(<span class="string">&quot;得分: &quot;</span>..score.kill, <span class="number">50</span>, <span class="number">80</span>, pa)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> c</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">da = LuaDrawable(daf)</span><br><span class="line">back.setBackground(da)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ffi</span><span class="params">()</span></span></span><br><span class="line">  back.invalidate()</span><br><span class="line">  count = count + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> count &gt;= <span class="number">20000</span> <span class="keyword">then</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> count % <span class="number">35</span> == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    shut(&#123;x = pos.x + (<span class="built_in">config</span>.air_width/<span class="number">2</span>),y= pos.y + (<span class="built_in">config</span>.air_height/<span class="number">2</span>),from = <span class="string">&quot;a&quot;</span>,speed=&#123;<span class="number">0</span>,<span class="number">-20</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> k,en <span class="keyword">in</span> <span class="built_in">pairs</span>(enes) <span class="keyword">do</span></span><br><span class="line">      shut(&#123;x = en.x + (en.size[<span class="number">1</span>]/<span class="number">2</span>),y = en.y + (en.size[<span class="number">2</span>]*<span class="number">1.2</span>),from = <span class="string">&quot;e&quot;</span>,speed=&#123;<span class="number">0</span>,<span class="number">20</span>&#125;&#125;)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> count % <span class="number">50</span> == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--生成新敌人</span></span><br><span class="line">    <span class="keyword">local</span> en = &#123;&#125;</span><br><span class="line">    en.x = <span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">2000</span>)</span><br><span class="line">    en.y = <span class="number">0</span></span><br><span class="line">    en.speed = &#123;<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">-20</span>,<span class="number">20</span>),<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">20</span>)&#125;</span><br><span class="line">    en.size = &#123;<span class="built_in">config</span>.ene_width,<span class="built_in">config</span>.ene_height&#125;</span><br><span class="line">    <span class="built_in">table</span>.<span class="built_in">insert</span>(enes,en)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fi</span><span class="params">()</span></span></span><br><span class="line">  call(<span class="string">&quot;ffi&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">gt = timer(fi,<span class="number">100</span>,<span class="number">10</span>)</span><br><span class="line"><span class="comment">--刷新画面</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">respeed</span><span class="params">(en)</span></span></span><br><span class="line">  <span class="comment">--反应速度</span></span><br><span class="line">  en.x = en.x + en.speed[<span class="number">1</span>]</span><br><span class="line">  en.y = en.y + en.speed[<span class="number">2</span>]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscreen</span><span class="params">(en,w,h)</span></span></span><br><span class="line">  <span class="comment">--检查是否超出屏幕</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (en.x &gt; w <span class="keyword">or</span> en.x &lt; <span class="number">0</span>) <span class="keyword">or</span> (en.y&gt;h <span class="keyword">or</span> en.y &lt; <span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadpos</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--加载属性</span></span><br><span class="line">  <span class="keyword">for</span> k,en <span class="keyword">in</span> <span class="built_in">pairs</span>(pops) <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> en.size <span class="keyword">then</span></span><br><span class="line">      en.size = &#123;&#125;</span><br><span class="line">      en.size[<span class="number">1</span>] = <span class="built_in">config</span>.pop_width</span><br><span class="line">      en.size[<span class="number">2</span>] = <span class="built_in">config</span>.pop_height</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> k,en <span class="keyword">in</span> <span class="built_in">ipairs</span>(enes) <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> en.size <span class="keyword">then</span></span><br><span class="line">      en.size = &#123;&#125;</span><br><span class="line">      en.size[<span class="number">1</span>] = <span class="built_in">config</span>.ene_width</span><br><span class="line">      en.size[<span class="number">2</span>] = <span class="built_in">config</span>.ene_height</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBit</span><span class="params">(en1,en2)</span></span></span><br><span class="line">  <span class="comment">--判断碰撞</span></span><br><span class="line">  <span class="keyword">local</span> po1 = &#123;en1.x,en1.y&#125;</span><br><span class="line">  <span class="comment">--一号左上点</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> po2 = &#123;en1.x+en1.size[<span class="number">1</span>],en1.y+en1.size[<span class="number">2</span>]&#125;</span><br><span class="line">  <span class="comment">--一号右下点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--local po3 = &#123;en2.x,en2.y&#125;</span></span><br><span class="line">  <span class="comment">--二号左上点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--local po4 = &#123;en2.x+en2.size[1],en2.y+en2.size[2]&#125;</span></span><br><span class="line">  <span class="comment">--二号右下点</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">local</span> po4 = &#123;en2.x+en2.size[<span class="number">1</span>],en2.y&#125;</span><br><span class="line">  <span class="comment">--二号左下点</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (po1[<span class="number">1</span>] &gt; en2.x <span class="keyword">and</span> po1[<span class="number">1</span>] &lt; en2.x+en2.size[<span class="number">1</span>]) <span class="keyword">and</span> (po1[<span class="number">2</span>] &gt; en2.y <span class="keyword">and</span> po1[<span class="number">2</span>] &lt; en2.y + en2.size[<span class="number">2</span>]) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (po2[<span class="number">1</span>] &gt; en2.x <span class="keyword">and</span> po2[<span class="number">1</span>] &lt; en2.x+en2.size[<span class="number">1</span>]) <span class="keyword">and</span> (po2[<span class="number">2</span>] &gt; en2.y <span class="keyword">and</span> po2[<span class="number">2</span>] &lt; en2.y + en2.size[<span class="number">2</span>]) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (po4[<span class="number">1</span>] &gt; en2.x <span class="keyword">and</span> po4[<span class="number">1</span>] &lt; en2.x+en2.size[<span class="number">1</span>]) <span class="keyword">and</span> (po4[<span class="number">2</span>] &gt; en2.y <span class="keyword">and</span> po4[<span class="number">2</span>] &lt; en2.y + en2.size[<span class="number">2</span>]) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">loadpos()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onStop</span><span class="params">()</span></span></span><br><span class="line">  gt.stop()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shut</span><span class="params">(o)</span></span></span><br><span class="line">  <span class="keyword">local</span> o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">local</span> en = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">  en.size = o.size <span class="keyword">or</span> &#123;<span class="built_in">config</span>.pop_width,<span class="built_in">config</span>.pop_height&#125;</span><br><span class="line">  en.speed = o.speed <span class="keyword">or</span> &#123;<span class="number">0</span>,<span class="number">0</span>&#125;</span><br><span class="line">  en.x = o.x <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">  en.y = o.y <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">  <span class="built_in">table</span>.<span class="built_in">insert</span>(pops,en)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>留言板</title>
    <url>/2019/04/14/messageboard/index/</url>
    <content><![CDATA[<p style="font-size:1.72em;font-weight:bold;text-align: center">
Troubleshooting any problem without the error log <br> 
is like driving with your eyes closed.<br>
在沒有錯誤日誌的情況下診斷任何問題無異於閉眼開車
</p>
<hr>
<div class="note default flat"><p>反饋 Bug 或者詢問使用問題，最好去</p>
<ol>
<li><a href="https://github.com/jerryc127/hexo-theme-butterfly/issues">Issues</a></li>
<li><a href="https://github.com/jerryc127/hexo-theme-butterfly/discussions">Discussions</a></li>
</ol>
</div>
<div class="note info flat"><p>在你反饋 Bug 或者詢問使用問題之前，請注意</p>
<ol>
<li>請確保你已經看了安裝文檔</li>
<li>請確保你已經看了 <a href="https://butterfly.js.org/posts/98d20436/">主題Q&amp;A</a></li>
<li>如果運行期間並無報錯，但是預覽時出現問題。請在瀏覽器打開該網頁的情況下，按 <code>F12</code> 進入開發人員工具，切換到 <code>Console</code> 界面。<br>
如有報錯，請試着解決。或者在提問題之前附上報錯截圖。</li>
<li>詳細描述遇到的問題，附上相關的報錯/截圖/網址</li>
<li>請禮貌用語</li>
</ol>
</div>
<!-- 音乐播放器 --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"> <div class="aplayer" data-id="7212298874" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true" data-volume="0.6" ></div><script>var meting_api='http://api.mizore.cn/meting/api.php?server=:server&type=:type&id=:id'</script><script src="http://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="http://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><!-- 音乐播放器 -->
<p><audio id="bgmMusic" src="demo.mp3" autoplay="autoplay" loop="loop" preload="auto" type="audio/mp3"></audio></p>
]]></content>
  </entry>
  <entry>
    <title>壁紙</title>
    <url>/2021/10/31/png/index/</url>
    <content><![CDATA[<div class="gallery-group-main">

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">壁紙</div>
  <p>收藏的一些壁紙</p>
  <a href='/Gallery/wallpaper'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">漫威</div>
  <p>關於漫威的圖片</p>
  <a href='/Gallery/marvel'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">OH MY GIRL</div>
  <p>關於OH MY GIRL的圖片</p>
  <a href='/Gallery/ohmygirl'></a>
  </figcaption>
  </figure>
  
</div>]]></content>
  </entry>
  <entry>
    <title>写入文件(自动创建父文件夹)</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6(%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E7%88%B6%E6%96%87%E4%BB%B6%E5%A4%B9)-2021-11-08%2013:23:10/</url>
    <content><![CDATA[<h1>写入文件(自动创建父文件夹)</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 写入文件<span class="params">(路径,内容)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  f=File(<span class="built_in">tostring</span>(File(<span class="built_in">tostring</span>(路径)).getParentFile())).mkdirs()</span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">tostring</span>(路径),<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容)):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>写入文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6-2021-11-08%2013:22:54/</url>
    <content><![CDATA[<h1>写入文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">io</span>.<span class="built_in">open</span>(文件路径,<span class="string">&quot;w&quot;</span>):<span class="built_in">write</span>(<span class="string">&quot;内容&quot;</span>):<span class="built_in">close</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>创建新文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%88%9B%E5%BB%BA%E6%96%B0%E6%96%87%E4%BB%B6-2021-11-08%2013:21:34/</url>
    <content><![CDATA[<h1>创建新文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--使用File类</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(文件路径).createNewFile()</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用io库</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;/sdcard/aaaa&quot;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>创建新文件夹</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%88%9B%E5%BB%BA%E6%96%B0%E6%96%87%E4%BB%B6%E5%A4%B9-2021-11-08%2013:21:51/</url>
    <content><![CDATA[<h1>创建新文件夹</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--使用File类</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(文件夹路径).mkdir()</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建多级文件夹</span></span><br><span class="line">File(文件夹路径).mkdirs()</span><br><span class="line"></span><br><span class="line"><span class="comment">--shell</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&#x27;mkdir &#x27;</span>..文件夹路径)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>删除文件或文件夹</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9-2021-11-08%2013:24:14/</url>
    <content><![CDATA[<h1>删除文件或文件夹</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--使用File类</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(文件路径).delete()</span><br><span class="line"><span class="comment">--使用os方法</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">remove</span> (filename)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>判断文件或文件夹存不存在</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9%E5%AD%98%E4%B8%8D%E5%AD%98%E5%9C%A8-2021-11-08%2013:27:30/</url>
    <content><![CDATA[<h1>判断文件或文件夹存不存在</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(路径).exists()</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用io</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">file_exists</span><span class="params">(path)</span></span></span><br><span class="line"><span class="keyword">local</span> f=<span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> f~=<span class="literal">nil</span> <span class="keyword">then</span> <span class="built_in">io</span>.<span class="built_in">close</span>(f) <span class="keyword">return</span> <span class="literal">true</span> <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>判断是不是系统隐藏文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%88%A4%E6%96%AD%E6%98%AF%E4%B8%8D%E6%98%AF%E7%B3%BB%E7%BB%9F%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6-2021-11-08%2013:27:52/</url>
    <content><![CDATA[<h1>判断是不是系统隐藏文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(路径).isHidden()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>判断路径是不是文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%88%A4%E6%96%AD%E8%B7%AF%E5%BE%84%E6%98%AF%E4%B8%8D%E6%98%AF%E6%96%87%E4%BB%B6-2021-11-08%2013:27:15/</url>
    <content><![CDATA[<h1>判断路径是不是文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(路径).isFile()</span><br><span class="line"><span class="comment">--也可用来判断文件存不存在</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>判断路径是不是文件夹</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%88%A4%E6%96%AD%E8%B7%AF%E5%BE%84%E6%98%AF%E4%B8%8D%E6%98%AF%E6%96%87%E4%BB%B6%E5%A4%B9-2021-11-08%2013:27:01/</url>
    <content><![CDATA[<h1>判断路径是不是文件夹</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(路径).isDirectory()</span><br><span class="line"><span class="comment">--也可用来判断文件夹存不存在</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>复制文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6-2021-11-08%2013:24:31/</url>
    <content><![CDATA[<h1>复制文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">LuaUtil.copyDir(from,to)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>按行读取文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E6%8C%89%E8%A1%8C%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6-2021-11-08%2013:23:58/</url>
    <content><![CDATA[<h1>按行读取文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">io</span>.<span class="built_in">lines</span>(文件路径) <span class="keyword">do</span></span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>更新文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E6%9B%B4%E6%96%B0%E6%96%87%E4%BB%B6-2021-11-08%2013:22:40/</url>
    <content><![CDATA[<h1>更新文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">io</span>.<span class="built_in">open</span>(文件路径,<span class="string">&quot;w+&quot;</span>):<span class="built_in">write</span>(<span class="string">&quot;更新的内容&quot;</span>):<span class="built_in">close</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>替换文件内字符串</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E6%9B%BF%E6%8D%A2%E6%96%87%E4%BB%B6%E5%86%85%E5%AD%97%E7%AC%A6%E4%B8%B2-2021-11-08%2013:25:06/</url>
    <content><![CDATA[<h1>替换文件内字符串</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 替换文件字符串<span class="params">(路径,要替换的字符串,替换成的字符串)</span></span></span><br><span class="line"><span class="keyword">if</span> 路径 <span class="keyword">then</span></span><br><span class="line">  路径=<span class="built_in">tostring</span>(路径)</span><br><span class="line">  内容=<span class="built_in">io</span>.<span class="built_in">open</span>(路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">  <span class="built_in">io</span>.<span class="built_in">open</span>(路径,<span class="string">&quot;w+&quot;</span>):<span class="built_in">write</span>(<span class="built_in">tostring</span>(内容:<span class="built_in">gsub</span>(要替换的字符串,替换成的字符串))):<span class="built_in">close</span>()</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件Mime类型</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6Mime%E7%B1%BB%E5%9E%8B-2021-11-08%2013:26:48/</url>
    <content><![CDATA[<h1>获取文件Mime类型</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetFileMime</span><span class="params">(name)</span></span></span><br><span class="line">import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">ExtensionName=<span class="built_in">tostring</span>(name):<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">Mime=MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">tostring</span>(Mime)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(GetFileMime(<span class="string">&quot;/sdcard/a.png&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件列表</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8-2021-11-08%2013:25:20/</url>
    <content><![CDATA[<h1>获取文件列表</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import(<span class="string">&quot;java.io.File&quot;</span>)</span><br><span class="line">luajava.astable(File(文件夹路径).listFiles())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件名称</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%90%8D%E7%A7%B0-2021-11-08%2013:25:33/</url>
    <content><![CDATA[<h1>获取文件名称</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(路径).getName()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件大小</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F-2021-11-08%2013:25:46/</url>
    <content><![CDATA[<h1>获取文件大小</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetFileSize</span><span class="params">(path)</span></span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.text.format.Formatter&quot;</span></span><br><span class="line">  size=File(<span class="built_in">tostring</span>(<span class="built_in">path</span>)).length()</span><br><span class="line">  Sizes=Formatter.formatFileSize(activity, size)</span><br><span class="line">  <span class="keyword">return</span> Sizes</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件字节</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82-2021-11-08%2013:26:19/</url>
    <content><![CDATA[<h1>获取文件字节</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(路径).length()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件或文件夹最后修改时间</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E6%88%96%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9C%80%E5%90%8E%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4-2021-11-08%2013:26:03/</url>
    <content><![CDATA[<h1>获取文件或文件夹最后修改时间</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetFilelastTime</span><span class="params">(path)</span></span></span><br><span class="line">  f = File(<span class="built_in">path</span>); </span><br><span class="line">  cal = Calendar.getInstance();</span><br><span class="line">  <span class="built_in">time</span> = f.lastModified()</span><br><span class="line">  cal.setTimeInMillis(<span class="built_in">time</span>); </span><br><span class="line">  <span class="keyword">return</span> cal.getTime().toLocaleString()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件父文件夹路径</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E7%88%B6%E6%96%87%E4%BB%B6%E5%A4%B9%E8%B7%AF%E5%BE%84-2021-11-08%2013:26:33/</url>
    <content><![CDATA[<h1>获取文件父文件夹路径</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(<span class="built_in">path</span>).getParentFile()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>读取文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6-2021-11-08%2013:23:26/</url>
    <content><![CDATA[<h1>读取文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">io</span>.<span class="built_in">open</span>(文件路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>追加更新文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E8%BF%BD%E5%8A%A0%E6%9B%B4%E6%96%B0%E6%96%87%E4%BB%B6-2021-11-08%2013:22:27/</url>
    <content><![CDATA[<h1>追加更新文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">io</span>.<span class="built_in">open</span>(文件路径,<span class="string">&quot;a+&quot;</span>):<span class="built_in">write</span>(<span class="string">&quot;更新的内容&quot;</span>):<span class="built_in">close</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>递归删除文件夹或文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E9%80%92%E5%BD%92%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%A4%B9%E6%88%96%E6%96%87%E4%BB%B6-2021-11-08%2013:24:50/</url>
    <content><![CDATA[<h1>递归删除文件夹或文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--使用LuaUtil辅助库</span></span><br><span class="line">LuaUtil.rmDir(路径)</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用Shell</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;rm -r &quot;</span>..路径)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>EditText只能输入数字</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/EditText%E5%8F%AA%E8%83%BD%E8%BE%93%E5%85%A5%E6%95%B0%E5%AD%97-2021-11-12%2012:29:10/</url>
    <content><![CDATA[<h1>EditText只能输入数字</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.text.InputType&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.method.DigitsKeyListener&quot;</span></span><br><span class="line">控件ID.setInputType(InputType.TYPE_CLASS_NUMBER)</span><br><span class="line">控件ID.setKeyListener(DigitsKeyListener.getInstance(<span class="string">&quot;0123456789&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>重命名与移动文件</title>
    <url>/2021/11/08/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/%E9%87%8D%E5%91%BD%E5%90%8D%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%96%87%E4%BB%B6-2021-11-08%2013:22:11/</url>
    <content><![CDATA[<h1>重命名与移动文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--Shell</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;mv &quot;</span>..oldname..<span class="string">&quot; &quot;</span>..newname)</span><br><span class="line"></span><br><span class="line"><span class="comment">--os</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">rename</span> (oldname, newname)</span><br><span class="line"></span><br><span class="line"><span class="comment">--File</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(旧).renameTo(File(新))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>文件操作</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>POST提交文件</title>
    <url>/2021/11/12/Http%E6%95%99%E7%A8%8B/POST%E6%8F%90%E4%BA%A4%E6%96%87%E4%BB%B6-2021-11-12%2012:46:12/</url>
    <content><![CDATA[<h1>POST提交文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--需导入的DEX请自行将运行助手拆包，在libs文件夹里</span></span><br><span class="line"><span class="comment">--POST提交文件，除注释外都是固定模板，复制粘贴即可</span></span><br><span class="line">import <span class="string">&#x27;com.kn.okhttp.*&#x27;</span></span><br><span class="line">import <span class="string">&#x27;okhttp3.*&#x27;</span></span><br><span class="line">mediaType = MediaType.parse(<span class="string">&quot;text/x-markdown; charset=utf-8&quot;</span>);</span><br><span class="line">okHttpClient = OkHttpClient();</span><br><span class="line">file = File(activity.getLuaDir()..<span class="string">&#x27;/init.lua&#x27;</span>);<span class="comment">--提交的文件</span></span><br><span class="line">request = Request.Builder()</span><br><span class="line">.url(<span class="string">&quot;https://api.github.com/markdown/raw&quot;</span>)<span class="comment">--URL</span></span><br><span class="line">.post(RequestBody.<span class="built_in">create</span>(mediaType, file))</span><br><span class="line">.build();</span><br><span class="line">okHttpClient.newCall(request).enqueue(Callback &#123;</span><br><span class="line">  onFailure = <span class="function"><span class="keyword">function</span><span class="params">(call, e)</span></span> <span class="comment">--失败</span></span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">  onResponse = <span class="function"><span class="keyword">function</span><span class="params">(call,response)</span></span> <span class="comment">--成功</span></span><br><span class="line">    <span class="built_in">print</span>(response.headers())</span><br><span class="line">    <span class="built_in">print</span>(response.body().<span class="built_in">string</span>())</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script type='text/javascript' src='//pl16715598.trustedgatetocontent.com/3c/39/83/3c398343a60d114d14448277b4de73c1.js'></script>
<script type="text/javascript">
	atOptions = {
		'key' : '90c05383e48990fb7a509956acaed29d',
		'format' : 'iframe',
		'height' : 50,
		'width' : 320,
		'params' : {}
	};
	document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://www.effectiveperformanceformat.com/90c05383e48990fb7a509956acaed29d/invoke.js"></scr' + 'ipt>');
</script>
<script async="async" data-cfasync="false" src="//pl16714935.trustedgatetocontent.com/e7e4b6b8ff15c8b03eee679449da5cdd/invoke.js"></script>
<div id="container-e7e4b6b8ff15c8b03eee679449da5cdd"></div>
]]></content>
      <categories>
        <category>Http教程</category>
      </categories>
      <tags>
        <tag>Http教程</tag>
      </tags>
  </entry>
  <entry>
    <title>Lua数据类型</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/Lua%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2021-11-12%2007:45:24/</url>
    <content><![CDATA[<h1>Lua数据类型</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Lua是动态类型语言，变量不要类型定义,只需要为变量赋值。 值可以存储在变量中，作为参数传递或结果返回。</span><br><span class="line">Lua中有<span class="number">8</span>个基本类型分别为：</span><br><span class="line"></span><br><span class="line"><span class="literal">nil</span>、boolean、number、<span class="built_in">string</span>、userdata、<span class="function"><span class="keyword">function</span>、<span class="title">thread</span>和<span class="title">table</span>。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  我们可以使用<span class="title">type</span>函数测试给定变量或者值的类型：</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(type(&quot;Hello world&quot;)</span></span>)</span><br><span class="line">  <span class="comment">--string</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">10.4</span>*<span class="number">3</span>))</span><br><span class="line">  <span class="comment">--number</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">print</span>))</span><br><span class="line">  <span class="comment">--function</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">type</span>))</span><br><span class="line">  <span class="comment">--function</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">type</span>(<span class="literal">true</span>))</span><br><span class="line">  <span class="comment">--boolean</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">type</span>(<span class="literal">nil</span>))</span><br><span class="line">  <span class="comment">--nil</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(X)))</span><br><span class="line">  <span class="comment">--string</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>SO库</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/SO%E5%BA%93-2021-11-12%2012:26:34/</url>
    <content><![CDATA[<h1>SO库</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">os</span>.<span class="built_in">rename</span>(old,new)</span><br><span class="line"><span class="comment">--重命名文件，old旧，new新。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">remove</span>(<span class="built_in">path</span>)</span><br><span class="line"><span class="comment">--删除文件，path路径。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">exit</span>()</span><br><span class="line"><span class="comment">--中止当前程序的执行</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">getenv</span>(var)</span><br><span class="line"><span class="comment">--返回环境变量</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">time</span>()</span><br><span class="line"><span class="comment">--[[返回一个指定时间点的UNIX时间戳，如不带参数调用的话，就返回当前时间点的UNIX时间戳。</span></span><br><span class="line"><span class="comment">参数table字段包括&#123;</span></span><br><span class="line"><span class="comment">year  年份</span></span><br><span class="line"><span class="comment">month  月份(01-12)</span></span><br><span class="line"><span class="comment">day  天(01-31)</span></span><br><span class="line"><span class="comment">hour  时(00-23)</span></span><br><span class="line"><span class="comment">min  分(00-59)</span></span><br><span class="line"><span class="comment">sec  秒(00-59)</span></span><br><span class="line"><span class="comment">isdst  布尔值，true表示夏令时</span></span><br><span class="line"><span class="comment">其中，year、month、day 三个字段是必须的，其它字段默认取 12:00:00</span></span><br><span class="line"><span class="comment">&#125;]]</span></span><br><span class="line"><span class="built_in">os</span>.data(<span class="built_in">format</span>,sec)</span><br><span class="line"><span class="comment">--os.data 是os.time 的反函数，它将一个UNIX时间戳转换成可读的字符串形式。</span></span><br><span class="line"><span class="comment">--如果省略第2个参数，默认返回当前时间点的日期。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--为了生成一个日期table，可以使用格式字符串&quot;*t&quot;，例如：</span></span><br><span class="line"></span><br><span class="line">tb = <span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;*t&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(tb) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">输出:</span><br><span class="line">year 	<span class="number">2019</span></span><br><span class="line">sec 	<span class="number">46</span></span><br><span class="line">isdst 	<span class="literal">false</span></span><br><span class="line">yday 	<span class="number">173</span></span><br><span class="line">wday 	<span class="number">7</span></span><br><span class="line">month 	<span class="number">6</span></span><br><span class="line">hour 	<span class="number">23</span></span><br><span class="line"><span class="built_in">min</span> 	<span class="number">52</span></span><br><span class="line">day 	<span class="number">22</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">difftime</span>(t2, t1)</span><br><span class="line"><span class="comment">--返回从t1到t2的时间跨度值。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">clock</span>()</span><br><span class="line"><span class="comment">--函数os.clock 返回当前CPU时间的秒数，一般可用于计算一段代码的执行时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[· LUA string库详解</span></span><br><span class="line"><span class="comment">· python 标准库之os</span></span><br><span class="line"><span class="comment">· Lua中os库的使用(execute,date,clock,time)</span></span><br><span class="line"><span class="comment">· 『Golang』—— 标准库之 os]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>TextView可选择复制</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/TextView%E5%8F%AF%E9%80%89%E6%8B%A9%E5%A4%8D%E5%88%B6-2021-11-12%2012:30:19/</url>
    <content><![CDATA[<h1>TextView可选择复制</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--代码中设置</span></span><br><span class="line">t.TextIsSelectable=<span class="literal">true</span></span><br><span class="line"><span class="comment">--布局表中设置</span></span><br><span class="line">textIsSelectable=<span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>MD关于界面</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/MD%E5%85%B3%E4%BA%8E%E7%95%8C%E9%9D%A2-2021-11-12%2012:35:06/</url>
    <content><![CDATA[<h1>MD关于界面</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import<span class="string">&quot;android.text.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--作者QQ2830376751</span></span><br><span class="line">activity.setTitle(<span class="string">&#x27;关于&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> Theme_Color=tointeger(<span class="number">0xFF3F51B5</span>)</span><br><span class="line"></span><br><span class="line">activity.setTheme(android.R.style.Theme_DeviceDefault_Light_DarkActionBar)</span><br><span class="line">activity.ActionBar.show()</span><br><span class="line">activity.ActionBar.setBackgroundDrawable(ColorDrawable(Theme_Color))</span><br><span class="line">activity.getWindow().setStatusBarColor(<span class="number">0xFF303F9F</span>);</span><br><span class="line">activity.getActionBar().setDisplayHomeAsUpEnabled(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onMenuItemSelected</span><span class="params">(id,title)</span></span></span><br><span class="line">  activity.finish()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;</span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    ListView;</span><br><span class="line">    id=<span class="string">&quot;listView&quot;</span>;</span><br><span class="line">    DividerHeight=<span class="string">&quot;0dp&quot;</span>;</span><br><span class="line">    layout_gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">    layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = &#123;&#125;</span><br><span class="line"></span><br><span class="line">setting=</span><br><span class="line">&#123;</span><br><span class="line">  &#123;<span class="comment">--1</span></span><br><span class="line">    LinearLayout;</span><br><span class="line">    gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    layout_height=<span class="string">&quot;75dp&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      gravity=<span class="string">&quot;center_vertical&quot;</span>;</span><br><span class="line">      layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        TextView;</span><br><span class="line">        layout_marginLeft=<span class="string">&quot;15dp&quot;</span>;</span><br><span class="line">        textSize=<span class="string">&quot;16sp&quot;</span>;</span><br><span class="line">        textColor=<span class="number">0xff000000</span>;</span><br><span class="line">        id=<span class="string">&quot;subtitle&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        TextView;</span><br><span class="line">        id=<span class="string">&quot;message&quot;</span>;</span><br><span class="line">        textSize=<span class="string">&quot;15sp&quot;</span>;</span><br><span class="line">        layout_marginLeft=<span class="string">&quot;15dp&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  &#123;<span class="comment">--2</span></span><br><span class="line">    LinearLayout;</span><br><span class="line">    layout_height=<span class="string">&quot;1dp&quot;</span>;</span><br><span class="line">    backgroundColor=<span class="number">0xFFE0E0E0</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  &#123;<span class="comment">--3</span></span><br><span class="line">    LinearLayout;</span><br><span class="line">    gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    layout_height=<span class="string">&quot;55dp&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">      gravity=<span class="string">&quot;center_vertical&quot;</span>;</span><br><span class="line">      layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        TextView;</span><br><span class="line">        layout_marginLeft=<span class="string">&quot;15dp&quot;</span>;</span><br><span class="line">        textSize=<span class="string">&quot;16sp&quot;</span>;</span><br><span class="line">        textColor=<span class="number">0xff000000</span>;</span><br><span class="line">        id=<span class="string">&quot;subtitle&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">adp=LuaMultiAdapter(this,data,setting)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">adp.add&#123;__type=<span class="number">1</span>,subtitle=<span class="string">&quot;App v1.0.1&quot;</span>,message=<span class="string">&quot;Copyright © 2021 Android Does&quot;</span>&#125;</span><br><span class="line">adp.add&#123;__type=<span class="number">2</span>&#125;</span><br><span class="line">adp.add&#123;__type=<span class="number">1</span>,subtitle=<span class="string">&quot;帮助&quot;</span>,message=<span class="string">&quot;常见问题解答&quot;</span>&#125;</span><br><span class="line">adp.add&#123;__type=<span class="number">2</span>&#125;</span><br><span class="line">adp.add&#123;__type=<span class="number">3</span>,subtitle=<span class="string">&quot;表达感谢&quot;</span>&#125;</span><br><span class="line">adp.add&#123;__type=<span class="number">2</span>&#125;</span><br><span class="line">listView.setAdapter(adp)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">listView.setOnItemClickListener(AdapterView.OnItemClickListener&#123;</span><br><span class="line">  onItemClick=<span class="function"><span class="keyword">function</span><span class="params">(id,v,zero,one)</span></span></span><br><span class="line">    <span class="keyword">if</span> v.Tag.subtitle.Text==<span class="literal">nil</span></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">if</span> v.Tag.subtitle.Text==<span class="string">&quot;帮助&quot;</span></span><br><span class="line">        <span class="built_in">print</span>( v.Tag.subtitle.Text)</span><br><span class="line">       <span class="keyword">elseif</span> v.Tag.subtitle.Text==<span class="string">&quot;表达感谢&quot;</span></span><br><span class="line">        <span class="built_in">print</span>( v.Tag.subtitle.Text)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>Toast信息提示</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/Toast%E4%BF%A1%E6%81%AF%E6%8F%90%E7%A4%BA-2021-11-12%2007:44:15/</url>
    <content><![CDATA[<h1>Toast信息提示</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--默认Toast</span></span><br><span class="line">Toast.makeText(activity, <span class="string">&quot;Toast&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--自定义位置Toast</span></span><br><span class="line">Toast.makeText(activity,<span class="string">&quot;自定义位置Toast&quot;</span>, Toast.LENGTH_LONG).setGravity(Gravity.CENTER, <span class="number">0</span>, <span class="number">0</span>).show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--带图片Toast</span></span><br><span class="line">图片=loadbitmap(<span class="string">&quot;/sdcard/a.png&quot;</span>)</span><br><span class="line">toast = Toast.makeText(activity,<span class="string">&quot;带图片的Toast&quot;</span>, Toast.LENGTH_LONG)</span><br><span class="line">toastView = toast.getView()</span><br><span class="line">imageCodeProject = ImageView(activity)</span><br><span class="line">imageCodeProject.setImageBitmap(图片)</span><br><span class="line">toastView.addView(imageCodeProject, <span class="number">0</span>)</span><br><span class="line">toast.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--自定义布局Toast</span></span><br><span class="line">布局=loadlayout(layout)</span><br><span class="line"><span class="keyword">local</span> toast=Toast.makeText(activity,<span class="string">&quot;提示&quot;</span>,Toast.LENGTH_SHORT).setView(布局).show()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>X5内核</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/X5%E5%86%85%E6%A0%B8-2021-11-12%2012:28:02/</url>
    <content><![CDATA[<h1>X5内核</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    X5WebView;<span class="comment">--x5浏览器内核控件</span></span><br><span class="line">    layout_width=<span class="string">&quot;&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;&quot;</span>,</span><br><span class="line">    id=<span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--x5内核导入包↓</span></span><br><span class="line">import <span class="string">&quot;x5init&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.export.external.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.export.external.extension.interfaces.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.tbs.video.interfaces.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.export.external.proxy.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.export.external.extension.proxy.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.export.external.interfaces.ConsoleMessage&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.sdk.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.x5.WebView.*&quot;</span></span><br><span class="line">import <span class="string">&quot;java.util.HashMap&quot;</span></span><br><span class="line"><span class="comment">--x5内核导入包↑</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--x5内核初始化源码↓</span></span><br><span class="line">初始化=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="built_in">require</span><span class="string">&quot;import&quot;</span></span><br><span class="line">  import<span class="string">&quot;com.tencent.smtt.sdk.QbSdk&quot;</span></span><br><span class="line">  QbSdk.initX5Environment(activity,<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">task(初始化,<span class="function"><span class="keyword">function</span><span class="params">(a)</span></span> <span class="keyword">end</span>)</span><br><span class="line">浏览器设置(id)</span><br><span class="line"><span class="comment">--x5内核初始化源码↑</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">下载X5必须文件↓↓复制放到浏览器下载</span><br><span class="line"></span><br><span class="line">https://pan.cccyun.cc/down.php/<span class="number">7</span>c8703672b89cf075c012ac4e1e886fd.zip</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>api接口大全及使用</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/api%E6%8E%A5%E5%8F%A3%E5%A4%A7%E5%85%A8%E5%8F%8A%E4%BD%BF%E7%94%A8-2021-11-12%2012:37:49/</url>
    <content><![CDATA[<h1>api接口大全及使用</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.*&quot;</span></span><br><span class="line">import <span class="string">&quot;layout&quot;</span></span><br><span class="line">import <span class="string">&quot;com.androlua.Http&quot;</span> <span class="comment">--异步请求</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span> <span class="comment">--复制到剪贴板</span></span><br><span class="line">import <span class="string">&quot;cjson&quot;</span> <span class="comment">--解析json</span></span><br><span class="line">import <span class="string">&quot;android.media.MediaPlayer&quot;</span> <span class="comment">--播放音乐</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  ScrollView;</span><br><span class="line">  &#123;</span><br><span class="line">    LinearLayout;</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;二维码：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;QRcode_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;二维码内容&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            WebView;</span><br><span class="line">            id=<span class="string">&quot;QRcode_output&quot;</span>;</span><br><span class="line">            layout_width=<span class="string">&quot;166dp&quot;</span>;</span><br><span class="line">            layout_height=<span class="string">&quot;166dp&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;QRcode_download&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下载&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;有道翻译：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;youDaoTranslate_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;翻译内容&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;youDaoTranslate_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;翻译结果&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;万能翻译：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;translate_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;翻译内容&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;translate_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;翻译结果&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机一言：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;yiYan_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;yiYan_copy&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;复制&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;yiYan_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一句&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机笑话：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;xiaoHua_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;xiaoHua_copy&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;复制&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;xiaoHua_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一个&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机情话：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;qingHua_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;qingHua_copy&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;复制&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;qingHua_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一句&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机骚话：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;saoHua_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;saoHua_copy&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;复制&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;saoHua_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一句&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机风景图(5120*3200)：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          WebView;</span><br><span class="line">          id=<span class="string">&quot;view_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;256dp&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;160dp&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;view_download&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下载&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;view_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一张&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机二次元图片(1920*1080)：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          WebView;</span><br><span class="line">          id=<span class="string">&quot;acgimg_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;240dp&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;135dp&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;acgimg_download&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下载&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;acgimg_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一张&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机手机分辨率美图：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          WebView;</span><br><span class="line">          id=<span class="string">&quot;mobileGirl_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;200dp&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;300dp&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          <span class="comment">--[===[&#123;</span></span><br><span class="line"><span class="comment">            Button;</span></span><br><span class="line"><span class="comment">            id=&quot;mobileGirl_download&quot;;</span></span><br><span class="line"><span class="comment">            text=&quot;下载&quot;;</span></span><br><span class="line"><span class="comment">          &#125;;]===]</span></span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;mobileGirl_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一张&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;随机电脑分辨率美图：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          WebView;</span><br><span class="line">          id=<span class="string">&quot;computerGirl_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;300dp&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;200dp&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          <span class="comment">--[===[&#123;</span></span><br><span class="line"><span class="comment">            Button;</span></span><br><span class="line"><span class="comment">            id=&quot;computerGirl_download&quot;;</span></span><br><span class="line"><span class="comment">            text=&quot;下载&quot;;</span></span><br><span class="line"><span class="comment">          &#125;;]===]</span></span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;computerGirl_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一张&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;ip天气签名档(368*227)：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          WebView;</span><br><span class="line">          id=<span class="string">&quot;weather_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;245.333dp&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;151.333dp&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;weather_download&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下载&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;weather_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;刷新&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;快递查询：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;kuaidi_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;快递单号&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;kuaidi_name_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;name&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;kuaidi_type_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;type&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;kuaidi_info_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;info(json)&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;骚扰电话查询：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;saorao_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;电话号码&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;saorao_baidu_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;百度手机卫士&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;saorao_sogou_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;搜狗号码通&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;手机归属地查询：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;phone_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;电话号码&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;phone_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;归属地&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;IP归属地查询：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;ip_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;IP&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;ip_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;归属地&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;ip_lat_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;纬度&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;ip_lng_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;经度&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;ip_radius_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;精度&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;网抑云随机音乐(mp3)：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;music_name_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;音乐名称&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          WebView;</span><br><span class="line">          id=<span class="string">&quot;music_picture_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;100dp&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;100dp&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;music_download&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下载音乐&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;music_next&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下一首&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;文字转语音：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;song_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;文字&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;song_download&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;下载&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">          &#123;</span><br><span class="line">            Button;</span><br><span class="line">            id=<span class="string">&quot;song_play&quot;</span>;</span><br><span class="line">            text=<span class="string">&quot;播放&quot;</span>;</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;聊天机器人：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;chat_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;发送内容&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;chat_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;返回内容&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_marginBottom=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          text=<span class="string">&quot;垃圾分类：&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;laji_input&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;垃圾名称&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          EditText;</span><br><span class="line">          id=<span class="string">&quot;laji_output&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          hint=<span class="string">&quot;分类结果&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">activity.setTheme(android.R.style.Theme_DeviceDefault_Light)<span class="comment">--设置md主题</span></span><br><span class="line">activity.setTitle(<span class="string">&quot;API调用&quot;</span>)</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">urlEncode</span><span class="params">(s)</span></span></span><br><span class="line">  s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s, <span class="string">&quot;([^%w%.%- ])&quot;</span>, <span class="function"><span class="keyword">function</span><span class="params">(c)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%%02X&quot;</span>, <span class="built_in">string</span>.<span class="built_in">byte</span>(c)) <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">gsub</span>(s, <span class="string">&quot; &quot;</span>, <span class="string">&quot;+&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">urlDecode</span><span class="params">(s)</span></span></span><br><span class="line">  s = <span class="built_in">string</span>.<span class="built_in">gsub</span>(s, <span class="string">&#x27;%%(%x%x)&#x27;</span>, <span class="function"><span class="keyword">function</span><span class="params">(h)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">string</span>.<span class="built_in">char</span>(<span class="built_in">tonumber</span>(h, <span class="number">16</span>)) <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">return</span> s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--二维码输入改变</span></span><br><span class="line">QRcode_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> QRcode_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    QRcode_output.loadUrl(<span class="string">&quot;https://api.vvhan.com/api/qr?text=&quot;</span>..urlEncode(QRcode_input.text))</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--二维码下载</span></span><br><span class="line">QRcode_download.onClick = <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">  <span class="title">Http.download</span><span class="params">(&quot;https://api.vvhan.com/api/qr?text=&quot;..urlEncode(QRcode_input.text)</span></span>, <span class="string">&quot;/sdcard/QRcode.png&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">print</span><span class="params">(&quot;已下载至/sdcard/QRcode.png&quot;)</span></span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--有道翻译改变</span></span><br><span class="line">youDaoTranslate_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> youDaoTranslate_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;http://fanyi.youdao.com/translate?doctype=json&amp;type=AUTO&amp;i=&quot;</span>..urlEncode(youDaoTranslate_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      youDaoTranslate_output.text = json.translateResult[<span class="number">1</span>][<span class="number">1</span>].tgt</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--万能翻译改变</span></span><br><span class="line">translate_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> translate_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;https://api.vvhan.com/api/fy?text=&quot;</span>..urlEncode(translate_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      translate_output.text = json.data.fanyi</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--获取一言</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_yiYan</span><span class="params">()</span></span></span><br><span class="line">  Http.get(<span class="string">&quot;https://api.vvhan.com/api/ian&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">    <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    yiYan_output.text = content</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_yiYan()</span></span><br><span class="line">yiYan_next.onClick = get_yiYan <span class="comment">--下一句</span></span><br><span class="line">yiYan_copy.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--复制</span></span></span><br><span class="line"><span class="function">  <span class="title">activity.getSystemService</span><span class="params">(Context.CLIPBOARD_SERVICE)</span></span>.setText( yiYan_output.text )</span><br><span class="line">  Toast.makeText(activity, <span class="string">&quot;复制成功&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取笑话</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_xiaoHua</span><span class="params">()</span></span></span><br><span class="line">  Http.get(<span class="string">&quot;https://api.vvhan.com/api/xh&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">    <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    xiaoHua_output.text = content</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_xiaoHua()</span></span><br><span class="line">xiaoHua_next.onClick = get_xiaoHua <span class="comment">--下一个</span></span><br><span class="line">xiaoHua_copy.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--复制</span></span></span><br><span class="line"><span class="function">  <span class="title">activity.getSystemService</span><span class="params">(Context.CLIPBOARD_SERVICE)</span></span>.setText( xiaoHua_output.text )</span><br><span class="line">  Toast.makeText(activity, <span class="string">&quot;复制成功&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取情话</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_qingHua</span><span class="params">()</span></span></span><br><span class="line">  Http.get(<span class="string">&quot;https://api.vvhan.com/api/love&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">    <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    qingHua_output.text = content</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_qingHua()</span></span><br><span class="line">qingHua_next.onClick = get_qingHua <span class="comment">--下一句</span></span><br><span class="line">qingHua_copy.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--复制</span></span></span><br><span class="line"><span class="function">  <span class="title">activity.getSystemService</span><span class="params">(Context.CLIPBOARD_SERVICE)</span></span>.setText( qingHua_output.text )</span><br><span class="line">  Toast.makeText(activity, <span class="string">&quot;复制成功&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取情话</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_saoHua</span><span class="params">()</span></span></span><br><span class="line">  Http.get(<span class="string">&quot;https://api.vvhan.com/api/sao&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">    <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    saoHua_output.text = content</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_saoHua()</span></span><br><span class="line">saoHua_next.onClick = get_saoHua <span class="comment">--下一句</span></span><br><span class="line">saoHua_copy.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--复制</span></span></span><br><span class="line"><span class="function">  <span class="title">activity.getSystemService</span><span class="params">(Context.CLIPBOARD_SERVICE)</span></span>.setText( saoHua_output.text )</span><br><span class="line">  Toast.makeText(activity, <span class="string">&quot;复制成功&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取风景图</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_view</span><span class="params">()</span></span></span><br><span class="line">  Http.get(<span class="string">&quot;https://api.vvhan.com/api/view?type=json&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">    <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    view_output.loadUrl(<span class="string">&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;&quot;</span>..json.imgurl..<span class="string">&quot;&#x27; style=&#x27;width:256px; height:160px;&#x27; /&gt;&lt;/body&gt;&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_view()</span></span><br><span class="line">view_next.onClick = get_view <span class="comment">--下一张</span></span><br><span class="line">view_download.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--下载</span></span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">url</span> = <span class="title">string.match</span><span class="params">(view_output.getUrl()</span></span>, <span class="string">&quot;src=&#x27;(.-)&#x27;&quot;</span>)</span><br><span class="line">  <span class="keyword">local</span> addr = <span class="string">&quot;/sdcard/view(&quot;</span>..<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)..<span class="string">&quot;).png&quot;</span></span><br><span class="line">  Http.download(url, addr, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">print</span><span class="params">(&quot;已下载至&quot;..addr)</span></span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取二次元图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_acgimg</span><span class="params">()</span></span></span><br><span class="line">  Http.get(<span class="string">&quot;https://api.vvhan.com/api/acgimg?type=json&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">    <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    acgimg_output.loadUrl(<span class="string">&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;&quot;</span>..json.imgurl..<span class="string">&quot;&#x27; style=&#x27;width:240px; height:135px;&#x27; /&gt;&lt;/body&gt;&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_acgimg()</span></span><br><span class="line">acgimg_next.onClick = get_acgimg <span class="comment">--下一张</span></span><br><span class="line">acgimg_download.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--下载</span></span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">url</span> = <span class="title">string.match</span><span class="params">(acgimg_output.getUrl()</span></span>, <span class="string">&quot;src=&#x27;(.-)&#x27;&quot;</span>)</span><br><span class="line">  <span class="keyword">local</span> addr = <span class="string">&quot;/sdcard/acgimg(&quot;</span>..<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)..<span class="string">&quot;).png&quot;</span></span><br><span class="line">  Http.download(url, addr, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">print</span><span class="params">(&quot;已下载至&quot;..addr)</span></span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取随机手机分辨率美图图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_mobileGirl</span><span class="params">()</span></span></span><br><span class="line">  mobileGirl_output.loadUrl(<span class="string">&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;https://api.vvhan.com/api/mobil.girl&#x27; style=&#x27;width:200px; height:300px;&#x27; /&gt;&lt;/body&gt;&quot;</span>)</span><br><span class="line">  <span class="comment">--[===[Http.get(&quot;https://api.vvhan.com/api/mobil.girl&quot;, nil, nil, nil, function(code, content, cookie, header)</span></span><br><span class="line"><span class="comment">    if code ~= 200 then</span></span><br><span class="line"><span class="comment">      return Toast.makeText(activity, &quot;get错误ncode:&quot;..code..&quot;ncontent:&quot;..content,Toast.LENGTH_SHORT).show()</span></span><br><span class="line"><span class="comment">    end</span></span><br><span class="line"><span class="comment">    local json = cjson.decode(content)</span></span><br><span class="line"><span class="comment">    if not json.success then</span></span><br><span class="line"><span class="comment">      return Toast.makeText(activity, &quot;服务器错误ncontent:&quot;..content,Toast.LENGTH_SHORT).show()</span></span><br><span class="line"><span class="comment">    end</span></span><br><span class="line"><span class="comment">    mobileGirl_output.loadUrl(&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;&quot;..json.imgurl..&quot;&#x27; style=&#x27;width:200px; height:300px;&#x27; /&gt;&lt;/body&gt;&quot;)</span></span><br><span class="line"><span class="comment">  end)]===]</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_mobileGirl()</span></span><br><span class="line">mobileGirl_next.onClick = get_mobileGirl <span class="comment">--下一张</span></span><br><span class="line"><span class="comment">--[===[mobileGirl_download.onClick = function --下载</span></span><br><span class="line"><span class="comment">  local url = mobileGirl_output.getUrl()</span></span><br><span class="line"><span class="comment">  local addr = &quot;/sdcard/mobileGirl(&quot;..os.date(&quot;%Y-%m-%d %H:%M:%S&quot;)..&quot;).pmg&quot;</span></span><br><span class="line"><span class="comment">  Http.download(url, addr, nil, nil, function</span></span><br><span class="line"><span class="comment">    print(&quot;已下载至&quot;..addr)</span></span><br><span class="line"><span class="comment">  end)</span></span><br><span class="line"><span class="comment">end]===]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取随机电脑分辨率美图图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_computerGirl</span><span class="params">()</span></span></span><br><span class="line">  computerGirl_output.loadUrl(<span class="string">&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;https://api.vvhan.com/api/girl&#x27; style=&#x27;width:300px; height:200px;&#x27; /&gt;&lt;/body&gt;&quot;</span>)</span><br><span class="line">  <span class="comment">--[===[Http.get(&quot;https://api.vvhan.com/api/girl&quot;, nil, nil, nil, function(code, content, cookie, header)</span></span><br><span class="line"><span class="comment">    if code ~= 200 then</span></span><br><span class="line"><span class="comment">      return Toast.makeText(activity, &quot;get错误ncode:&quot;..code..&quot;ncontent:&quot;..content,Toast.LENGTH_SHORT).show()</span></span><br><span class="line"><span class="comment">    end</span></span><br><span class="line"><span class="comment">    local json = cjson.decode(content)</span></span><br><span class="line"><span class="comment">    if not json.success then</span></span><br><span class="line"><span class="comment">      return Toast.makeText(activity, &quot;服务器错误ncontent:&quot;..content,Toast.LENGTH_SHORT).show()</span></span><br><span class="line"><span class="comment">    end</span></span><br><span class="line"><span class="comment">    computerGirl_output.loadUrl(&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;&quot;..json.imgurl..&quot;&#x27; style=&#x27;width:300px; height:200px;&#x27; /&gt;&lt;/body&gt;&quot;)</span></span><br><span class="line"><span class="comment">  end)]===]</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_computerGirl()</span></span><br><span class="line">computerGirl_next.onClick = get_computerGirl <span class="comment">--下一张</span></span><br><span class="line"><span class="comment">--[===[mobileGirl_download.onClick = function --下载</span></span><br><span class="line"><span class="comment">  local url = computerGirl_output.getUrl()</span></span><br><span class="line"><span class="comment">  local addr = &quot;/sdcard/computerGirl(&quot;..os.date(&quot;%Y-%m-%d %H:%M:%S&quot;)..&quot;).png&quot;</span></span><br><span class="line"><span class="comment">  Http.download(url, addr, nil, nil, function</span></span><br><span class="line"><span class="comment">    print(&quot;已下载至&quot;..addr)</span></span><br><span class="line"><span class="comment">  end)</span></span><br><span class="line"><span class="comment">end]===]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取ip天气签名档图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_weather</span><span class="params">()</span></span></span><br><span class="line">  weather_output.loadUrl(<span class="string">&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;https://api.vvhan.com/api/ip&#x27; style=&#x27;width:245.333px; height:151.333px;&#x27; /&gt;&lt;/body&gt;&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--get_weather()</span></span><br><span class="line">weather_next.onClick = get_weather</span><br><span class="line">weather_download.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--下载</span></span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">url</span> = &quot;<span class="title">https</span>://<span class="title">api.vvhan.com</span>/<span class="title">api</span>/<span class="title">ip</span>&quot;</span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">addr</span> = &quot;/<span class="title">sdcard</span>/<span class="title">weather</span><span class="params">(&quot;..os.date(&quot;%Y-%m-%d %H:%M:%S&quot;)</span></span>..<span class="string">&quot;).png&quot;</span></span><br><span class="line">  Http.download(url, addr, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">print</span><span class="params">(&quot;已下载至&quot;..addr)</span></span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--快递单号改变</span></span><br><span class="line">kuaidi_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> kuaidi_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;https://api.vvhan.com/api/kuaidi?hao=&quot;</span>..urlEncode(kuaidi_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      kuaidi_name_output.text = cjson.encode(json.name)</span><br><span class="line">      kuaidi_type_output.text = cjson.encode(json.<span class="built_in">type</span>)</span><br><span class="line">      kuaidi_info_output.text = <span class="built_in">string</span>.<span class="built_in">gsub</span>(</span><br><span class="line">      <span class="built_in">string</span>.<span class="built_in">gsub</span>(</span><br><span class="line">      <span class="built_in">string</span>.<span class="built_in">gsub</span>(cjson.encode(json.info), <span class="string">&quot;&#123;&quot;</span>, <span class="string">&quot;&#123;n&quot;</span>)</span><br><span class="line">      , <span class="string">&quot;&#125;&quot;</span>, <span class="string">&quot;n&#125;n&quot;</span>)</span><br><span class="line">      , <span class="string">&quot;,&quot;</span>, <span class="string">&quot;,n&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--骚扰电话号码改变</span></span><br><span class="line">saorao_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> saorao_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;https://api.vvhan.com/api/saorao?tel=&quot;</span>..urlEncode(saorao_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      saorao_baidu_output.text = cjson.encode(json.info[<span class="number">1</span>].message)</span><br><span class="line">      saorao_sogou_output.text = cjson.encode(json.info[<span class="number">2</span>].message)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--归属地电话号码改变</span></span><br><span class="line">phone_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> phone_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;https://api.vvhan.com/api/phone?tel=&quot;</span>..urlEncode(phone_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      phone_output.text = cjson.encode(json.info.<span class="keyword">local</span>)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--IP改变</span></span><br><span class="line">ip_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> ip_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;https://api.vvhan.com/api/getIpInfo?ip=&quot;</span>..urlEncode(phone_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      ip_output.text = cjson.encode(json.info.lsp)</span><br><span class="line">      ip_lat_output.text = json.info.lat..<span class="string">&quot;°&quot;</span></span><br><span class="line">      ip_lng_output.text = json.info.lng..<span class="string">&quot;°&quot;</span></span><br><span class="line">      ip_radius_output.text = json.info.radius..<span class="string">&quot;m&quot;</span></span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--获取音乐</span></span><br><span class="line"><span class="keyword">local</span> musicUrl</span><br><span class="line"><span class="keyword">local</span> mediaPlayer = MediaPlayer()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_music</span><span class="params">()</span></span></span><br><span class="line">  Http.get(<span class="string">&quot;https://api.vvhan.com/api/rand.music?type=json&amp;sort=热歌榜&quot;</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">    <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    music_name_output.text = cjson.encode(json.info.name)</span><br><span class="line">    music_picture_output.loadUrl(<span class="string">&quot;data:text/html,&lt;body style=&#x27;margin:0;&#x27;&gt;&lt;img src=&#x27;&quot;</span>..json.info.picUrl..<span class="string">&quot;&#x27; style=&#x27;width:100px; height:100px;&#x27; /&gt;&lt;/body&gt;&quot;</span>)</span><br><span class="line">    mediaPlayer.reset() <span class="comment">--初始化参数</span></span><br><span class="line">    mediaPlayer.setDataSource(json.info.mp3url) <span class="comment">--设置播放资源</span></span><br><span class="line">    mediaPlayer.prepare() <span class="comment">--开始缓冲资源</span></span><br><span class="line">    <span class="comment">--缓冲完成的监听</span></span><br><span class="line">    mediaPlayer.setOnPreparedListener(MediaPlayer.OnPreparedListener&#123;</span><br><span class="line">      onPrepared = <span class="function"><span class="keyword">function</span><span class="params">(mediaPlayer)</span></span></span><br><span class="line">        mediaPlayer.start()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;缓冲完毕，开始播放&quot;</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    &#125;);</span><br><span class="line">    musicUrl = json.info.mp3url</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">music_next.onClick = get_music <span class="comment">--下一首</span></span><br><span class="line">music_download.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--下载</span></span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">url</span> = <span class="title">musicUrl</span></span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">addr</span> = &quot;/<span class="title">sdcard</span>/<span class="title">music</span><span class="params">(&quot;..os.date(&quot;%Y-%m-%d %H:%M:%S&quot;)</span></span>..<span class="string">&quot;).mp3&quot;</span></span><br><span class="line">  Http.download(url, addr, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">print</span><span class="params">(&quot;已下载至&quot;..addr)</span></span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDestroy</span><span class="params">()</span></span></span><br><span class="line">  mediaPlayer.stop()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--获取语音</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_song</span><span class="params">()</span></span></span><br><span class="line">  mediaPlayer.reset() <span class="comment">--初始化参数</span></span><br><span class="line">  mediaPlayer.setDataSource(<span class="string">&quot;https://api.vvhan.com/api/song?txt=&quot;</span>..song_input.text) <span class="comment">--设置播放资源</span></span><br><span class="line">  mediaPlayer.prepare() <span class="comment">--开始缓冲资源</span></span><br><span class="line">  <span class="comment">--缓冲完成的监听</span></span><br><span class="line">  mediaPlayer.setOnPreparedListener(MediaPlayer.OnPreparedListener&#123;</span><br><span class="line">    onPrepared = <span class="function"><span class="keyword">function</span><span class="params">(mediaPlayer)</span></span></span><br><span class="line">      mediaPlayer.start()</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;缓冲完毕，开始播放&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">song_play.onClick = get_song <span class="comment">--播放</span></span><br><span class="line">song_download.onClick = <span class="function"><span class="keyword">function</span> <span class="comment">--下载</span></span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">url</span> = &quot;<span class="title">https</span>://<span class="title">api.vvhan.com</span>/<span class="title">api</span>/<span class="title">song</span>?<span class="title">txt</span>=&quot;..<span class="title">song_input.text</span></span></span><br><span class="line"><span class="function">  <span class="title">local</span> <span class="title">addr</span> = &quot;/<span class="title">sdcard</span>/<span class="title">song</span><span class="params">(&quot;..os.date(&quot;%Y-%m-%d %H:%M:%S&quot;)</span></span>..<span class="string">&quot;).mp3&quot;</span></span><br><span class="line">  Http.download(url, addr, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">print</span><span class="params">(&quot;已下载至&quot;..addr)</span></span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--聊天机器人发送内容改变</span></span><br><span class="line">chat_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> chat_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;http://api.qingyunke.com/api.php?key=free&amp;appid=0&amp;msg=&quot;</span>..urlEncode(chat_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      <span class="keyword">if</span> json.result~=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      chat_output.text = <span class="built_in">string</span>.<span class="built_in">gsub</span>( cjson.encode(json.content), <span class="string">&quot;&#123;br&#125;&quot;</span>, <span class="string">&quot;n&quot;</span> )</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">--垃圾名称改变</span></span><br><span class="line">laji_input.addTextChangedListener&#123;</span><br><span class="line">  onTextChanged = <span class="function"><span class="keyword">function</span><span class="params">(text, start, before, count)</span></span></span><br><span class="line">    <span class="keyword">if</span> laji_input.text == <span class="string">&quot;&quot;</span> <span class="keyword">then</span> <span class="keyword">return</span> <span class="keyword">end</span> <span class="comment">--无输入</span></span><br><span class="line">    Http.get(<span class="string">&quot;https://api.vvhan.com/api/la.ji?lj=&quot;</span>..urlEncode(laji_input.text), <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="function"><span class="keyword">function</span><span class="params">(code, content, cookie, header)</span></span></span><br><span class="line">      <span class="keyword">if</span> code ~= <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;get错误ncode:&quot;</span>..code..<span class="string">&quot;ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">local</span> json = cjson.decode(content)</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> json.success <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> Toast.makeText(activity, <span class="string">&quot;服务器错误ncontent:&quot;</span>..content,Toast.LENGTH_SHORT).show()</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      laji_output.text = cjson.encode(json.<span class="built_in">sort</span>)</span><br><span class="line">    <span class="keyword">end</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>fas嗅探解析</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/fas%E5%97%85%E6%8E%A2%E8%A7%A3%E6%9E%90-2021-11-08%2022:22:06/</url>
    <content><![CDATA[<h1>fas嗅探解析</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 嗅探视频<span class="params">(解析地址)</span></span></span><br><span class="line"></span><br><span class="line">  xt= ProgressDialog(this)</span><br><span class="line">  xt.setProgressStyle(ProgressDialog.STYLE_SPINNER)</span><br><span class="line">  <span class="comment">--设置进度条的形式为圆形转动的进度条</span></span><br><span class="line">  xt.setMessage(<span class="string">[[正在解析视频中,请稍候...]]</span>)</span><br><span class="line">  xt.setCancelable(<span class="literal">true</span>)<span class="comment">--设置是否可以通过点击Back键取消</span></span><br><span class="line">  xt.setCanceledOnTouchOutside(<span class="literal">false</span>)<span class="comment">--设置在点击Dialog外是否取消Dialog进度条    </span></span><br><span class="line">  xt.show()</span><br><span class="line">  <span class="keyword">local</span> wl=activity.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE).getActiveNetworkInfo(); </span><br><span class="line">  <span class="keyword">if</span> wl== <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    停止加载()</span><br><span class="line">    弹出消息(<span class="string">&quot;请检查网络连接..&quot;</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    webView2=LuaWebView(activity)</span><br><span class="line">    <span class="comment">--设置禁止自动播放视频</span></span><br><span class="line">    webView2.getSettings().setMediaPlaybackRequiresUserGesture(<span class="literal">true</span>);</span><br><span class="line">    webView2.setWebViewClient&#123;</span><br><span class="line">      onLoadResource=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">        <span class="keyword">if</span> (url:<span class="built_in">find</span><span class="string">&#x27;://qq.adinisp.com(.-)/parse_js.php&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-).l.qq.com/&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-)51.la/&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-)cnzz.com/&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-)/kvcollect&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-)/js.php&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-)/c.php&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-)/v.php&#x27;</span>) <span class="keyword">then</span> </span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">if</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-).mp4&#x27;</span>) <span class="keyword">or</span> (url:<span class="built_in">find</span><span class="string">&#x27;://(.-).m3u8&#x27;</span>) <span class="keyword">and</span> (webView2.getUrl()~=<span class="string">&quot;about:blank&quot;</span>) <span class="keyword">then</span></span><br><span class="line">            xt.dismiss()</span><br><span class="line">            视频链接=url :<span class="built_in">gsub</span>(<span class="string">&quot;(.+)?url=&quot;</span>,<span class="string">&quot;&quot;</span>) </span><br><span class="line">            webView2.stopLoading()</span><br><span class="line">            进入子页面(<span class="string">&quot;播放&quot;</span>,&#123;链接=视频链接&#125;)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">end</span>&#125;</span><br><span class="line">    webView2.loadUrl(解析地址..webView.getUrl())    <span class="comment">--解析地址+当前网页</span></span><br><span class="line">    xt.setOnCancelListener&#123;</span><br><span class="line">      onCancel=<span class="function"><span class="keyword">function</span><span class="params">(l)</span></span></span><br><span class="line">        xt.dismiss()</span><br><span class="line">        webView2.stopLoading()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;停止嗅探&quot;</span>)</span><br><span class="line">      <span class="keyword">end</span>&#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>for循环，if判断语句</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/for%E5%BE%AA%E7%8E%AF%EF%BC%8Cif%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5-2021-11-12%2007:46:26/</url>
    <content><![CDATA[<h1>for循环，if判断语句</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--for循环</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--给定条件进行循环</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--输出从1到10</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">10</span> <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">print</span>(i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--输出从10到1</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">10</span>,<span class="number">1</span>,<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">print</span>(i)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--打印数组a中所有的值</span></span><br><span class="line">a=&#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> index,content <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">print</span>(content)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--if判断语句</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--判断值是否为真</span></span><br><span class="line">a=<span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;真&quot;</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;假&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--比较值是否相同</span></span><br><span class="line">a=<span class="literal">true</span></span><br><span class="line">b=<span class="literal">false</span></span><br><span class="line"><span class="keyword">if</span> a==b <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;真&quot;</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;假&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>function函数</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/function%E5%87%BD%E6%95%B0-2021-11-12%2007:45:56/</url>
    <content><![CDATA[<h1>function函数</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">函数有两个用途</span><br><span class="line"><span class="number">1.</span>完成指定功能，函数作为调用语句使用</span><br><span class="line"><span class="number">2.</span>计算并返回值，函数作为赋值语句的表达式使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">实例<span class="number">1</span>:</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 读取文件<span class="params">(路径)</span></span></span><br><span class="line">  文件内容=<span class="built_in">io</span>.<span class="built_in">open</span>(路径):<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> 文件内容<span class="comment">--return用来返回值</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">实例<span class="number">2</span>:</span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.EditText&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.LinearLayout&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 编辑框<span class="params">()</span></span></span><br><span class="line">  <span class="keyword">return</span> EditText(activity)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  id=<span class="string">&quot;父布局&quot;</span>,</span><br><span class="line">  &#123;编辑框,</span><br><span class="line">    id=<span class="string">&quot;edit&quot;</span>,</span><br><span class="line">    text=<span class="string">&quot;文本&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"><span class="comment">--把这段代码放到调试里面去测试</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>if（判断）</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/if%EF%BC%88%E5%88%A4%E6%96%AD%EF%BC%89-2021-11-12%2012:33:10/</url>
    <content><![CDATA[<h1>if（判断）</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--判断值是否为真</span></span><br><span class="line">a=<span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;真&quot;</span>)</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;假&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--比较值是否相同</span></span><br><span class="line">a=<span class="literal">true</span></span><br><span class="line">b=<span class="literal">false</span></span><br><span class="line"><span class="keyword">if</span> a==b <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;真&quot;</span>)</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;假&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>popmenu弹出菜单</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/popmenu%E5%BC%B9%E5%87%BA%E8%8F%9C%E5%8D%95-2021-11-12%2007:45:07/</url>
    <content><![CDATA[<h1>popmenu弹出菜单</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--PopupMenu弹出菜单</span></span><br><span class="line"></span><br><span class="line">pop=PopupMenu(activity,view)</span><br><span class="line">menu=pop.Menu</span><br><span class="line">menu.add(<span class="string">&quot;项目1&quot;</span>).onMenuItemClick=<span class="function"><span class="keyword">function</span><span class="params">(a)</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">menu.add(<span class="string">&quot;项目2&quot;</span>).onMenuItemClick=<span class="function"><span class="keyword">function</span><span class="params">(a)</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">pop.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>timer定时器</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/timer%E5%AE%9A%E6%97%B6%E5%99%A8-2021-11-12%2012:29:45/</url>
    <content><![CDATA[<h1>timer定时器</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--timer定时器</span></span><br><span class="line">t=timer(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span>,延迟,间隔,初始化)</span><br><span class="line"><span class="comment">--暂停timer定时器</span></span><br><span class="line">t.Enable=<span class="literal">false</span></span><br><span class="line"><span class="comment">--启动timer定时器</span></span><br><span class="line">t.Enable=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--Ticker定时器</span></span><br><span class="line">ti=Ticker()</span><br><span class="line">ti.Period=间隔</span><br><span class="line">ti.onTick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--启动Ticker定时器</span></span><br><span class="line">ti.start()</span><br><span class="line"><span class="comment">--停止Ticker定时器</span></span><br><span class="line">ti.stop()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>v4圆形下拉</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/v4%E5%9C%86%E5%BD%A2%E4%B8%8B%E6%8B%89-2021-11-12%2012:28:40/</url>
    <content><![CDATA[<h1>v4圆形下拉</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--设置下拉刷新监听事件</span></span><br><span class="line">swipeRefreshLayout.setOnRefreshListener(this);</span><br><span class="line"><span class="comment">--设置进度条的颜色</span></span><br><span class="line">swipeRefreshLayout.setColorSchemeColors(Color.RED, Color.BLUE, Color.GREEN);</span><br><span class="line"><span class="comment">--设置圆形进度条大小</span></span><br><span class="line">swipeRefreshLayout.setSize(SwipeRefreshLayout.LARGE);</span><br><span class="line"><span class="comment">--设置进度条背景颜色</span></span><br><span class="line">swipeRefreshLayout.setProgressBackgroundColorSchemeColor(Color.DKGRAY);</span><br><span class="line"><span class="comment">--设置下拉多少距离之后开始刷新数据</span></span><br><span class="line">swipeRefreshLayout.setDistanceToTriggerSync(<span class="number">50</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>webView上传</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/webView%E4%B8%8A%E4%BC%A0-2021-11-08%2022:25:43/</url>
    <content><![CDATA[<h1>webView上传</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--下载地址  http://f2.oduuu.com/2020/06/85ED66C412840EEE-103c77e9a1c4ba40.zip</span></span><br><span class="line"><span class="comment">--下载完zip解压出来。把libs文件移动到你的工程目录里！</span></span><br><span class="line"><span class="comment">--支持图床上传，支持文件附件上传。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;com.lua.*&quot;</span><span class="comment">--上传导入包</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span><span class="comment">--导入包</span></span><br><span class="line">import <span class="string">&quot;android.app.Activity&quot;</span><span class="comment">--导入包</span></span><br><span class="line"><span class="comment">--import &quot;layout&quot;</span></span><br><span class="line"><span class="comment">--activity.setTitle(&#x27;AndroLua+&#x27;)</span></span><br><span class="line"><span class="comment">--activity.setTheme(android.R.style.Theme_Holo_Light)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">web=LuaWebView(activity)</span><br><span class="line">activity.setContentView(web)</span><br><span class="line">uploadMessageAboveL=<span class="number">0</span></span><br><span class="line">web.setWebChromeClient(LuaWebChrome(LuaWebChrome.IWebChrine&#123;</span><br><span class="line">  onShowFileChooser=<span class="function"><span class="keyword">function</span><span class="params">(v,fic)</span></span></span><br><span class="line">    uploadMessageAboveL=fic</span><br><span class="line">    <span class="keyword">local</span> intet = Intent(Intent.ACTION_GET_CONTENT);</span><br><span class="line">    intet.addCategory(Intent.CATEGORY_OPENABLE);</span><br><span class="line">    intet.setType(<span class="string">&quot;*/*&quot;</span>);</span><br><span class="line">    activity.startActivityForResult(Intent.createChooser(intet, <span class="string">&quot;File Chooser&quot;</span>), <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;))</span><br><span class="line">web.loadUrl(<span class="string">&quot;http://tu.yaohuo.me/&quot;</span>)</span><br><span class="line">onActivityResult=<span class="function"><span class="keyword">function</span><span class="params">(req,res,intent)</span></span></span><br><span class="line">  <span class="keyword">if</span> (res == Activity.RESULT_CANCELED) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span>(uploadMessageAboveL~=<span class="literal">nil</span> )<span class="keyword">then</span></span><br><span class="line">      uploadMessageAboveL.onReceiveValue(<span class="literal">nil</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">local</span> results</span><br><span class="line">  <span class="keyword">if</span> (res == Activity.RESULT_OK)<span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span>(uploadMessageAboveL==<span class="literal">nil</span> <span class="keyword">or</span> <span class="built_in">type</span>(uploadMessageAboveL)==<span class="string">&quot;number&quot;</span>)<span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> (intent ~= <span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> dataString = intent.getDataString();</span><br><span class="line">      <span class="keyword">local</span> clipData = intent.getClipData();</span><br><span class="line">      <span class="keyword">if</span> (clipData ~= <span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">        results = Uri[clipData.getItemCount()];</span><br><span class="line">        <span class="keyword">for</span> i = <span class="number">0</span>,clipData.getItemCount()<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">          <span class="keyword">local</span> item = clipData.getItemAt(i);</span><br><span class="line">          results[i] = item.getUri();</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> (dataString ~= <span class="literal">nil</span>) <span class="keyword">then</span></span><br><span class="line">        results = Uri[<span class="number">1</span>];</span><br><span class="line">        results[<span class="number">0</span>]=Uri.parse(dataString)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span>(results~=<span class="literal">nil</span>)<span class="keyword">then</span></span><br><span class="line">    uploadMessageAboveL.onReceiveValue(results);</span><br><span class="line">    uploadMessageAboveL = <span class="literal">nil</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>一个尺子源码</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E4%B8%80%E4%B8%AA%E5%B0%BA%E5%AD%90%E6%BA%90%E7%A0%81-2021-11-08%2022:26:44/</url>
    <content><![CDATA[<h1>一个尺子源码</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;com.androlua.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.*&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--仿一个木函尺子功能，代码有点乱。</span></span><br><span class="line"><span class="comment">--想做个吸附功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--各种单位之间转换函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dpTopx</span><span class="params">(sdp)</span></span></span><br><span class="line">  import <span class="string">&quot;android.util.TypedValue&quot;</span></span><br><span class="line">  dm=this.getResources().getDisplayMetrics()</span><br><span class="line">  types=&#123;px=<span class="number">0</span>,dp=<span class="number">1</span>,sp=<span class="number">2</span>,pt=<span class="number">3</span>,[<span class="string">&quot;in&quot;</span>]=<span class="number">4</span>,mm=<span class="number">5</span>&#125;</span><br><span class="line">  n,ty=sdp:<span class="built_in">match</span>(<span class="string">&quot;^(%-?[%.%d]+)(%a%a)&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> TypedValue.applyDimension(types[ty],<span class="built_in">tonumber</span>(n),dm)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mm=dpTopx(<span class="string">&quot;1mm&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(<span class="string">&quot;layout&quot;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--横屏模式</span></span><br><span class="line">activity.setRequestedOrientation(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myLuaDrawable=LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(mCanvas,mPaint,mDrawable)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--画笔属性</span></span><br><span class="line">  mPaint.setColor(<span class="number">0xFF9C9A9D</span>)</span><br><span class="line">  mPaint.setAntiAlias(<span class="literal">true</span>)</span><br><span class="line">  mPaint.setStrokeWidth(<span class="number">2</span>)</span><br><span class="line">  mPaint.setStyle(Paint.Style.FILL)</span><br><span class="line">  mPaint.setStrokeCap(Paint.Cap.ROUND)</span><br><span class="line">  mPaint.setTextSize(<span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  MaxPx=mDrawable.getBounds().right<span class="number">-30</span></span><br><span class="line"></span><br><span class="line">  MaxMm=<span class="built_in">math</span>.<span class="built_in">ceil</span>(MaxPx/<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">--mCanvas.drawColor(0xffffeeaa)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i=<span class="number">0</span>,MaxMm*<span class="number">10</span> <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">10</span>==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">      mCanvas.drawLine(mm*i+mm,<span class="number">0</span>,mm*i+mm,<span class="number">80</span>,mPaint)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      mCanvas.drawText(<span class="built_in">tostring</span>(<span class="built_in">math</span>.<span class="built_in">modf</span>(i/<span class="number">10</span>)),(mm*i+mm)-mm/<span class="number">2</span> ,<span class="number">120</span>, mPaint)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">elseif</span> i%<span class="number">5</span>==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">      mCanvas.drawLine(mm*i+mm,<span class="number">0</span>,mm*i+mm,<span class="number">60</span>,mPaint)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line"></span><br><span class="line">      mCanvas.drawLine(mm*i+mm,<span class="number">0</span>,mm*i+mm,<span class="number">40</span>,mPaint)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--绘制的Drawble设置成控件背景</span></span><br><span class="line">tv.background=myLuaDrawable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tv2.onTouch=<span class="function"><span class="keyword">function</span><span class="params">(v,e)</span></span></span><br><span class="line"></span><br><span class="line">  a=e.getAction()&amp;<span class="number">255</span></span><br><span class="line"></span><br><span class="line">  switch a</span><br><span class="line"></span><br><span class="line">   case MotionEvent.ACTION_DOWN</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   case MotionEvent.ACTION_MOVE</span><br><span class="line"></span><br><span class="line">    moveX=e.getX()</span><br><span class="line"></span><br><span class="line">    tv3.setTranslationX(moveX)</span><br><span class="line"></span><br><span class="line">    <span class="comment">--print(&quot;≈&quot;..math.floor(moveX/mw)..&quot;mm&quot;)</span></span><br><span class="line"></span><br><span class="line">    a=<span class="built_in">math</span>.<span class="built_in">floor</span>((moveX/mm)/<span class="number">10</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">--向上取整</span></span><br><span class="line">    tv4.Text=<span class="built_in">tostring</span>(<span class="built_in">math</span>.<span class="built_in">floor</span>((moveX/mm)/<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">--向上取整</span></span><br><span class="line">    tv5.Text=<span class="built_in">tostring</span>(<span class="built_in">math</span>.<span class="built_in">floor</span>(moveX/mm)-a*<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   case MotionEvent.ACTION_UP</span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myLuaDrawable2=LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(mCanvas,mPaint,mDrawable)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--画笔属性</span></span><br><span class="line">  mPaint.setColor(<span class="number">0xFF636562</span>)</span><br><span class="line">  mPaint.setAntiAlias(<span class="literal">true</span>)</span><br><span class="line">  mPaint.setStrokeWidth(<span class="number">20</span>)</span><br><span class="line">  mPaint.setStyle(Paint.Style.STROKE)</span><br><span class="line"></span><br><span class="line">  <span class="comment">--mCanvas.drawColor(0xffffeeaa)</span></span><br><span class="line"></span><br><span class="line">  mCanvas.drawCircle(<span class="number">150</span>, <span class="number">150</span>, <span class="number">100</span>, mPaint);</span><br><span class="line"></span><br><span class="line">  mPaint.setColor(<span class="number">0xFF9C9A9D</span>)</span><br><span class="line">  mPaint.setStyle(Paint.Style.FILL)</span><br><span class="line"></span><br><span class="line">  mCanvas.drawCircle(<span class="number">150</span>, <span class="number">150</span>, <span class="number">90</span>, mPaint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--绘制的Drawble设置成控件背景</span></span><br><span class="line">tv4.background=myLuaDrawable2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myLuaDrawable3=LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(mCanvas,mPaint,mDrawable)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--画笔属性</span></span><br><span class="line">  mPaint.setColor(<span class="number">0xFF434542</span>)</span><br><span class="line">  mPaint.setAntiAlias(<span class="literal">true</span>)</span><br><span class="line">  mPaint.setStrokeWidth(<span class="number">20</span>)</span><br><span class="line">  mPaint.setStyle(Paint.Style.FILL)</span><br><span class="line"></span><br><span class="line">  mCanvas.drawCircle(<span class="number">225</span>, <span class="number">225</span>, <span class="number">50</span>, mPaint);</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">tv5.background=myLuaDrawable3</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>上下渐变颜色</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E4%B8%8A%E4%B8%8B%E6%B8%90%E5%8F%98%E9%A2%9C%E8%89%B2-2021-11-08%2022:17:13/</url>
    <content><![CDATA[<h1>上下渐变颜色</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">控件ID.setBackgroundDrawable(GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM,&#123;</span><br><span class="line">  <span class="number">0xFFA593E0</span>,<span class="number">0xffffffff</span>,<span class="number">0xffffffff</span>,<span class="number">0xffffffff</span>,</span><br><span class="line">&#125;))<span class="comment">--上下渐变颜色，</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>关于QQDialog</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E5%85%B3%E4%BA%8EQQDialog-2021-11-08%2022:27:13/</url>
    <content><![CDATA[<h1>关于QQDialog</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;java.lang.Override&quot;</span></span><br><span class="line">import <span class="string">&quot;com.tencent.qq.widget.*&quot;</span></span><br><span class="line"><span class="comment">--QQDialog</span></span><br><span class="line">MyDialog=QQDialog(this);<span class="comment">--设置弹窗进出动画</span></span><br><span class="line">MyDialog.setViewLine(QQDialog.setLineColor.BLUE);<span class="comment">--设置顶部线条颜色</span></span><br><span class="line">MyDialog.setTitle(<span class="string">&quot;标题&quot;</span>,QQDialog.setColors.DEFAULT);<span class="comment">--设置标题文字及颜色</span></span><br><span class="line">MyDialog.setMessage(<span class="string">&quot;这是一个按钮的对话框&quot;</span>);<span class="comment">--设置弹窗内容</span></span><br><span class="line">MyDialog.setPositiveButton(<span class="string">&quot;确定按钮&quot;</span>,QQDialog.setColors.DEFAULT,<span class="comment">--设置按钮文字及颜色</span></span><br><span class="line">&#123;onClick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--按钮点击事件</span></span><br><span class="line">MyDialog.dismiss();<span class="comment">--关闭对话框</span></span><br><span class="line"><span class="keyword">end</span>&#125;);</span><br><span class="line">MyDialog.show();<span class="comment">--显示对话框</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--QQMenuDialog</span></span><br><span class="line">MyMenuDialog=MenuDialog(this);<span class="comment">--设置弹窗进出动画</span></span><br><span class="line">MyMenuDialog.setTitle(<span class="string">&quot;这是菜单栏的标题&quot;</span>,MenuDialog.setTextColor.DEFAULT);<span class="comment">--设置标题文字及颜色</span></span><br><span class="line">MyMenuDialog.setButton(<span class="string">&quot;取消&quot;</span>,MenuDialog.setTextColor.BLACK);<span class="comment">--设置取消按钮文字及颜色</span></span><br><span class="line">MyMenuDialog.addItem(<span class="string">&quot;选项一&quot;</span>,MenuDialog.setTextColor.BLACK,<span class="comment">--设置选项文字及颜色</span></span><br><span class="line">&#123;onClick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--按钮点击事件</span></span><br><span class="line"><span class="keyword">end</span>&#125;);</span><br><span class="line">MyMenuDialog.show();<span class="comment">--显示弹窗</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--QQProgress</span></span><br><span class="line">QQProgress.showPorgressBar(this, <span class="string">&quot;这是一个进度条&quot;</span>,QQProgress.setTheme.DEFAULT);</span><br><span class="line"></span><br><span class="line"><span class="comment">--QQToast</span></span><br><span class="line">QQToast.makeText(this, <span class="string">&quot;这是一个提示&quot;</span>,QQToast.setBackgroundColors.DEFAULT).show();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>关于TBSx5内核</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E5%85%B3%E4%BA%8ETBSx5%E5%86%85%E6%A0%B8-2021-11-08%2022:26:20/</url>
    <content><![CDATA[<h1>关于TBSx5内核</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.PixelFormat&quot;</span></span><br><span class="line">import<span class="string">&quot;com.tencent.smtt.sdk.WebViewClient&quot;</span></span><br><span class="line"><span class="comment">--布局表控件 WebView;</span></span><br><span class="line"><span class="comment">--布局表之前导入X5WebView控件</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.sdk.WebView&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--修复上屏闪烁</span></span><br><span class="line">activity.getWindow().setFormat(PixelFormat.TRANSLUCENT);</span><br><span class="line"><span class="comment">--加载网页</span></span><br><span class="line">id.loadUrl(<span class="string">&quot;http://www.baidu.com/&quot;</span>)</span><br><span class="line">webSettings = wv.getSettings();</span><br><span class="line"><span class="comment">--支持JS</span></span><br><span class="line">webSettings.setJavaScriptEnabled(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">--无广告百度UA</span></span><br><span class="line">APP_NAME_UA=<span class="string">&quot;Mozilla/5.0 (Linux; Android 7.0; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/48.0.2564.116 Mobile Safari/537.36 T7/10.3 SearchCraft/2.6.2 (Baidu; P1 7.0)&quot;</span></span><br><span class="line"><span class="comment">--自定义UA</span></span><br><span class="line">webSettings.setUserAgentString(webSettings.getUserAgentString()..APP_NAME_UA);</span><br><span class="line"><span class="comment">--设置字体大小:100表示正常,120表示文字放大1.2倍</span></span><br><span class="line">webSettings.setTextZoom(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--显示版本</span></span><br><span class="line">import <span class="string">&quot;com.tencent.smtt.sdk.QbSdk&quot;</span></span><br><span class="line">tbsVersion = QbSdk.getTbsVersion(this);</span><br><span class="line">TID = QbSdk.getTID();</span><br><span class="line">qBVersion = QbSdk.getMiniQBVersion(this);</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;TBS版本:&quot;</span>..tbsVersion)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--监听事件</span></span><br><span class="line">id.setWebViewClient(WebViewClient()&#123;</span><br><span class="line"></span><br><span class="line">  shouldOverrideUrlLoading=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line"></span><br><span class="line">    view.loadUrl(url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line"></span><br><span class="line">  onReceivedError=<span class="function"><span class="keyword">function</span><span class="params">(var1,var2,var3,var4)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;网页加载失败&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">--与返回键互交</span></span><br><span class="line"><span class="comment">--网页与返回键之间的交互</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(keyCode,event)</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; wv.canGoBack())<span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    id.goBack()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>关于输入法影响布局</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%85%B3%E4%BA%8E%E8%BE%93%E5%85%A5%E6%B3%95%E5%BD%B1%E5%93%8D%E5%B8%83%E5%B1%80-2021-11-12%2007:44:31/</url>
    <content><![CDATA[<h1>关于输入法影响布局</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--使弹出的输入法不影响布局</span></span><br><span class="line">activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--使弹出的输入法影响布局</span></span><br><span class="line">activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>关键词</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%85%B3%E9%94%AE%E8%AF%8D-2021-11-12%2007:45:39/</url>
    <content><![CDATA[<h1>关键词</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">以下列出了 Lua 的保留关键字。保留关键字不能作为常量或变量或其他用户自定义标示符：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">break</span> <span class="keyword">do</span> <span class="keyword">else</span> <span class="keyword">elseif</span> <span class="keyword">end</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">for</span> <span class="function"><span class="keyword">function</span> <span class="title">if</span> <span class="title">in</span> <span class="title">local</span> <span class="title">nil</span> <span class="title">not</span></span></span><br><span class="line"><span class="function">  <span class="title">or</span> <span class="title">repeat</span> <span class="title">return</span> <span class="title">then</span> <span class="title">true</span> <span class="title">until</span> <span class="title">while</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> 一般约定，以下划线开头连接一串大写字母的名字（比如 <span class="title">_VERSION</span>）被保留用于 <span class="title">Lua</span> 内部全局变量。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>关闭对话框</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%85%B3%E9%97%AD%E5%AF%B9%E8%AF%9D%E6%A1%86-2021-11-12%2012:31:19/</url>
    <content><![CDATA[<h1>关闭对话框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--将dl.show赋值</span></span><br><span class="line">dialog=dl.show()</span><br><span class="line"><span class="comment">--在某按钮点击后关闭这个对话框</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zc.onClick</span><span class="params">()</span></span></span><br><span class="line">  dialog.dismiss()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>再按一次退出程序美化</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E5%86%8D%E6%8C%89%E4%B8%80%E6%AC%A1%E9%80%80%E5%87%BA%E7%A8%8B%E5%BA%8F%E7%BE%8E%E5%8C%96-2021-11-08%2022:21:29/</url>
    <content><![CDATA[<h1>再按一次退出程序美化</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--退出</span></span><br><span class="line">参数=<span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(code,event)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="built_in">tostring</span>(event),<span class="string">&quot;KEYCODE_BACK&quot;</span>) ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> 参数+<span class="number">2</span> &gt; <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">time</span>()) <span class="keyword">then</span></span><br><span class="line">      退出程序()</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      to=&#123;</span><br><span class="line">        CardView;</span><br><span class="line">        CardBackgroundColor=<span class="string">&quot;#FFffffff&quot;</span>;</span><br><span class="line">        elevation=<span class="string">&quot;8dp&quot;</span>;</span><br><span class="line">        layout_width=<span class="string">&quot;95%w&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;42dp&quot;</span>;</span><br><span class="line">        radius=<span class="string">&quot;15&quot;</span>;</span><br><span class="line">        id=<span class="string">&quot;to&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          textSize=<span class="string">&quot;15sp&quot;</span>;</span><br><span class="line">          TextColor=<span class="string">&quot;#FFa0a0a0&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;95%w&quot;</span>;</span><br><span class="line">          layout_height=<span class="string">&quot;42dp&quot;</span>;</span><br><span class="line">          gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">          text=<span class="string">&quot;出错&quot;</span>;</span><br><span class="line">          id=<span class="string">&quot;texttc&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">local</span> to=Toast.makeText(activity,<span class="string">&quot;内容&quot;</span>,Toast.LENGTH_SHORT).setView(loadlayout(to))</span><br><span class="line">      <span class="comment">--LENGTH_SHORT     2s</span></span><br><span class="line">      <span class="comment">--LENGTH_LONG      3.5s</span></span><br><span class="line">      to.setGravity(Gravity.BOTTOM,<span class="number">0</span>,<span class="number">60</span>)</span><br><span class="line">      <span class="comment">--Gravity.BOTTOM   底部</span></span><br><span class="line">      <span class="comment">--Gravity.CENTER   中部</span></span><br><span class="line">      <span class="comment">--Gravity.TOP      顶部</span></span><br><span class="line">      texttc.Text=<span class="built_in">tostring</span>(<span class="string">&quot;再按一次退出程序！&quot;</span>)</span><br><span class="line">      to.show()</span><br><span class="line">      参数=<span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">time</span>())</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>列表下滑到最底事件</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%88%97%E8%A1%A8%E4%B8%8B%E6%BB%91%E5%88%B0%E6%9C%80%E5%BA%95%E4%BA%8B%E4%BB%B6-2021-11-12%2012:28:55/</url>
    <content><![CDATA[<h1>列表下滑到最底事件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">list.setOnScrollListener&#123;</span><br><span class="line">  onScrollStateChanged=<span class="function"><span class="keyword">function</span><span class="params">(l,s)</span></span></span><br><span class="line">    <span class="keyword">if</span> list.getLastVisiblePosition()==list.getCount()<span class="number">-1</span> <span class="keyword">then</span></span><br><span class="line">      <span class="comment">--事件</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>列表单击事件</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%88%97%E8%A1%A8%E5%8D%95%E5%87%BB%E4%BA%8B%E4%BB%B6-2021-11-12%2007:47:35/</url>
    <content><![CDATA[<h1>列表单击事件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ID.setOnItemClickListener(AdapterView.OnItemClickListener&#123;</span><br><span class="line">  onItemClick=<span class="function"><span class="keyword">function</span><span class="params">(parent, v, pos,id)</span></span></span><br><span class="line">    <span class="comment">--事件</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>列表长按事件</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%88%97%E8%A1%A8%E9%95%BF%E6%8C%89%E4%BA%8B%E4%BB%B6-2021-11-12%2007:47:19/</url>
    <content><![CDATA[<h1>列表长按事件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ID.setOnItemLongClickListener(AdapterView.OnItemClickListener&#123;</span><br><span class="line">  onItemLongClick=<span class="function"><span class="keyword">function</span><span class="params">(parent, v, pos,id)</span></span></span><br><span class="line">    <span class="comment">--事件</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>删除文件与文件夹，递归删除文件与文件夹</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E4%B8%8E%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E9%80%92%E5%BD%92%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E4%B8%8E%E6%96%87%E4%BB%B6%E5%A4%B9-2021-11-12%2007:47:04/</url>
    <content><![CDATA[<h1>删除文件与文件夹，递归删除文件与文件夹</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--删除文件与文件夹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用File类</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span><span class="comment">--导入File类</span></span><br><span class="line">File(文件路径).delete()</span><br><span class="line"><span class="comment">--使用os方法</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">remove</span> (filename)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--递归删除文件与文件夹</span></span><br><span class="line"><span class="comment">--使用LuaUtil辅助库</span></span><br><span class="line">LuaUtil.rmDir(路径)</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用Shell</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;rm -r &quot;</span>..路径)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>加载框</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%8A%A0%E8%BD%BD%E6%A1%86-2021-11-12%2012:27:43/</url>
    <content><![CDATA[<h1>加载框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">dialog= ProgressDialog.show(this,<span class="literal">nil</span>, <span class="string">&quot;对话框内容..&quot;</span>,<span class="literal">false</span>, <span class="literal">true</span>).hide()</span><br><span class="line">dialog.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">--2秒后关闭加载框</span></span><br><span class="line">task(<span class="number">2000</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  dialog.dismiss()</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>加载框示例</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%8A%A0%E8%BD%BD%E6%A1%86%E7%A4%BA%E4%BE%8B-2021-11-12%2012:31:36/</url>
    <content><![CDATA[<h1>加载框示例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> dl=ProgressDialog.show(activity,<span class="literal">nil</span>,<span class="string">&#x27;登录中&#x27;</span>)</span><br><span class="line">dl.show()</span><br><span class="line"><span class="keyword">local</span> a=<span class="number">0</span></span><br><span class="line"><span class="keyword">local</span> tt=Ticker()</span><br><span class="line">tt.start()</span><br><span class="line">tt.onTick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  a=a+<span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> a==<span class="number">3</span> <span class="keyword">then</span></span><br><span class="line">    dl.dismiss()</span><br><span class="line">    tt.stop()</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>匹配汉字</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%8C%B9%E9%85%8D%E6%B1%89%E5%AD%97-2021-11-12%2007:43:58/</url>
    <content><![CDATA[<h1>匹配汉字</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter_spec_chars</span><span class="params">(s)</span></span></span><br><span class="line">  <span class="keyword">local</span> ss = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> k = <span class="number">1</span>, #s <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> c = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> c <span class="keyword">then</span> <span class="keyword">break</span> <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">if</span> (c&gt;=<span class="number">48</span> <span class="keyword">and</span> c&lt;=<span class="number">57</span>) <span class="keyword">or</span> (c&gt;= <span class="number">65</span> <span class="keyword">and</span> c&lt;=<span class="number">90</span>) <span class="keyword">or</span> (c&gt;=<span class="number">97</span> <span class="keyword">and</span> c&lt;=<span class="number">122</span>) <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">string</span>.<span class="built_in">char</span>(c):<span class="built_in">find</span>(<span class="string">&quot;%w&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(ss, <span class="built_in">string</span>.<span class="built_in">char</span>(c))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">elseif</span> c&gt;=<span class="number">228</span> <span class="keyword">and</span> c&lt;=<span class="number">233</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> c1 = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k+<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">local</span> c2 = <span class="built_in">string</span>.<span class="built_in">byte</span>(s,k+<span class="number">2</span>)</span><br><span class="line">      <span class="keyword">if</span> c1 <span class="keyword">and</span> c2 <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">local</span> a1,a2,a3,a4 = <span class="number">128</span>,<span class="number">191</span>,<span class="number">128</span>,<span class="number">191</span></span><br><span class="line">        <span class="keyword">if</span> c == <span class="number">228</span> <span class="keyword">then</span> a1 = <span class="number">184</span></span><br><span class="line">        <span class="keyword">elseif</span> c == <span class="number">233</span> <span class="keyword">then</span> a2,a4 = <span class="number">190</span>,c1 ~= <span class="number">190</span> <span class="keyword">and</span> <span class="number">191</span> <span class="keyword">or</span> <span class="number">165</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">if</span> c1&gt;=a1 <span class="keyword">and</span> c1&lt;=a2 <span class="keyword">and</span> c2&gt;=a3 <span class="keyword">and</span> c2&lt;=a4 <span class="keyword">then</span></span><br><span class="line">          k = k + <span class="number">2</span></span><br><span class="line">          <span class="built_in">table</span>.<span class="built_in">insert</span>(ss, <span class="built_in">string</span>.<span class="built_in">char</span>(c,c1,c2))</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">table</span>.<span class="built_in">concat</span>(ss)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(filter_spec_chars(<span class="string">&quot;A1B2汉C3D4字E5F6,,,&quot;</span>))</span><br><span class="line"><span class="comment">--来源网络,加了个if过滤掉英文与数字,使其只捕获中文</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>圆形图片</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%9C%86%E5%BD%A2%E5%9B%BE%E7%89%87-2021-11-12%2007:40:00/</url>
    <content><![CDATA[<h1>圆形图片</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--圆形图片</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 圆形图片<span class="params">(bitmap)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.PorterDuffXfermode&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.RectF&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.PorterDuffMode&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Rect&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.graphics.Canvas&quot;</span></span><br><span class="line">  import <span class="string">&quot;android.util.Config&quot;</span></span><br><span class="line">  width = bitmap.getWidth()</span><br><span class="line">  <span class="built_in">output</span> = Bitmap.createBitmap(width, bitmap.getHeight(),Bitmap.Config.ARGB_8888)</span><br><span class="line">  canvas = Canvas(<span class="built_in">output</span>);</span><br><span class="line">  color = <span class="number">0xff424242</span>;</span><br><span class="line">  paint = Paint()</span><br><span class="line">  rect = Rect(<span class="number">0</span>, <span class="number">0</span>, bitmap.getWidth(), bitmap.getHeight());</span><br><span class="line">  rectF = RectF(rect);</span><br><span class="line">  paint.setAntiAlias(<span class="literal">true</span>);</span><br><span class="line">  canvas.drawARGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  paint.setColor(color);</span><br><span class="line">  canvas.drawRoundRect(rectF, width/<span class="number">2</span>, bitmap.getHeight()/<span class="number">2</span>, paint);</span><br><span class="line">  paint.setXfermode(PorterDuffXfermode(Mode.SRC_IN));</span><br><span class="line">  canvas.drawBitmap(bitmap, rect, rect, paint);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">output</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用示例</span></span><br><span class="line">img=ImageView(activity)</span><br><span class="line">activity.setContentView(img)</span><br><span class="line">img.setImageBitmap(圆形图片(loadbitmap(<span class="string">&quot;https://image.uisdc.com/wp-content/uploads/2019/06/uisdc-banner-20190614-2.jpg&quot;</span>)))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>圆角度控件</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E5%9C%86%E8%A7%92%E5%BA%A6%E6%8E%A7%E4%BB%B6-2021-11-08%2022:14:12/</url>
    <content><![CDATA[<h1>圆角度控件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--圆角度控件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CircleButton</span><span class="params">(view,InsideColor,radiu)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">  drawable = GradientDrawable() </span><br><span class="line">  drawable.setShape(GradientDrawable.RECTANGLE) </span><br><span class="line">  drawable.setColor(InsideColor)</span><br><span class="line">  drawable.setCornerRadii(&#123;radiu,radiu,radiu,radiu,radiu,radiu,radiu,radiu&#125;);</span><br><span class="line">  view.setBackgroundDrawable(drawable)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用方法</span></span><br><span class="line">角度=<span class="number">30</span></span><br><span class="line">控件id=控件的ID</span><br><span class="line">控件颜色=<span class="number">0xff1e8ae8</span></span><br><span class="line">CircleButton(控件id,控件颜色,角度)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>复制文本到剪贴板</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E5%88%B0%E5%89%AA%E8%B4%B4%E6%9D%BF-2021-11-12%2012:30:50/</url>
    <content><![CDATA[<h1>复制文本到剪贴板</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--先导入包</span></span><br><span class="line">import <span class="string">&quot;android.content.*&quot;</span></span><br><span class="line">activity.getSystemService(Context.CLIPBOARD_SERVICE).setText(文本)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>安卓跳转动画</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%AE%89%E5%8D%93%E8%B7%B3%E8%BD%AC%E5%8A%A8%E7%94%BB-2021-11-12%2012:30:33/</url>
    <content><![CDATA[<h1>安卓跳转动画</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">android.R.anim.accelerate_decelerate_interpolator</span><br><span class="line">android.R.anim.accelerate_interpolator</span><br><span class="line">android.R.anim.anticipate_interpolator</span><br><span class="line">android.R.anim.anticipate_overshoot_interpolator</span><br><span class="line">android.R.anim.bounce_interpolator</span><br><span class="line">android.R.anim.cycle_interpolator</span><br><span class="line">android.R.anim.decelerate_interpolatoandroid.R.anim.r</span><br><span class="line">android.R.anim.fade_in</span><br><span class="line">android.R.anim.fade_out</span><br><span class="line">android.R.anim.linear_interpolator</span><br><span class="line">android.R.anim.overshoot_interpolator</span><br><span class="line">android.R.anim.slide_in_left</span><br><span class="line">android.R.anim.slide_out_right</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>安装APK</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%AE%89%E8%A3%85APK-2021-11-12%2007:47:50/</url>
    <content><![CDATA[<h1>安装APK</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.*&quot;</span> </span><br><span class="line">import <span class="string">&quot;android.net.*&quot;</span> </span><br><span class="line"></span><br><span class="line">intent = Intent(Intent.ACTION_VIEW); </span><br><span class="line">intent.setDataAndType(Uri.parse(<span class="string">&quot;file:///sdcard/jc.apk&quot;</span>), <span class="string">&quot;application/vnd.android.package-archive&quot;</span>); </span><br><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); </span><br><span class="line">activity.startActivity(intent); </span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>布局设置点击水波纹效果</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%B8%83%E5%B1%80%E8%AE%BE%E7%BD%AE%E7%82%B9%E5%87%BB%E6%B0%B4%E6%B3%A2%E7%BA%B9%E6%95%88%E6%9E%9C-2021-11-12%2007:48:05/</url>
    <content><![CDATA[<h1>布局设置点击水波纹效果</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--5.0或以上可以实现点击水波纹效果</span></span><br><span class="line"><span class="comment">--在布局加入：</span></span><br><span class="line"></span><br><span class="line">style=<span class="string">&quot;?android:attr/buttonBarButtonStyle&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>延迟时间</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%BB%B6%E8%BF%9F%E6%97%B6%E9%97%B4-2021-11-12%2012:30:03/</url>
    <content><![CDATA[<h1>延迟时间</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--这个会卡进程，配合线程使用</span></span><br><span class="line">Thread.sleep(延迟时间)</span><br><span class="line"><span class="comment">--这个不会卡进程</span></span><br><span class="line"><span class="comment">--500指延迟500毫秒</span></span><br><span class="line">task(<span class="number">500</span>‚<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--延迟之后执行的事件</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>弹出再按一次返回键</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E5%BC%B9%E5%87%BA%E5%86%8D%E6%8C%89%E4%B8%80%E6%AC%A1%E8%BF%94%E5%9B%9E%E9%94%AE-2021-11-08%2022:21:12/</url>
    <content><![CDATA[<h1>弹出再按一次返回键</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--导包</span></span><br><span class="line">import <span class="string">&quot;com.tencent.qq.widget.*&quot;</span></span><br><span class="line">参数=<span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(code,event)</span></span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="built_in">tostring</span>(event),<span class="string">&quot;KEYCODE_BACK&quot;</span>) ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> 参数+<span class="number">2</span> &gt; <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">time</span>()) <span class="keyword">then</span></span><br><span class="line">      MyMenuDialog=MenuDialog(this);</span><br><span class="line">      MyMenuDialog.setTitle(<span class="string">&quot;您确定要退出吗？&quot;</span>,MenuDialog.setTextColor.DEFAULT);</span><br><span class="line">      MyMenuDialog.setButton(<span class="string">&quot;取消&quot;</span>,MenuDialog.setTextColor.BLACK);</span><br><span class="line"></span><br><span class="line">      MyMenuDialog.addItem(<span class="string">&quot;确定&quot;</span>,MenuDialog.setTextColor.BLACK,</span><br><span class="line">      &#123;onClick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">         <span class="comment">-- 结束程序()</span></span><br><span class="line">         关闭页面()</span><br><span class="line">        <span class="keyword">end</span>&#125;);</span><br><span class="line">      MyMenuDialog.show();</span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      <span class="comment">--Toast.makeText(activity,&quot;再按一次返回键&quot; , Toast.LENGTH_SHORT )</span></span><br><span class="line">      <span class="comment">--  .show()</span></span><br><span class="line">      参数=<span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">time</span>())</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>弹出窗口</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%BC%B9%E5%87%BA%E7%AA%97%E5%8F%A3-2021-11-12%2007:44:48/</url>
    <content><![CDATA[<h1>弹出窗口</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--弹出窗口</span></span><br><span class="line"></span><br><span class="line">pop=PopupWindow(activity)<span class="comment">--创建PopWindow</span></span><br><span class="line">pop.setContentView(loadlayout(布局))<span class="comment">--设置布局</span></span><br><span class="line">pop.setWidth(activity.Width*<span class="number">0.3</span>)<span class="comment">--设置宽度</span></span><br><span class="line">pop.setHeight(activity.Width*<span class="number">0.3</span>)<span class="comment">--设置高度</span></span><br><span class="line">pop.setFocusable(<span class="literal">true</span>)<span class="comment">--设置可获得焦点</span></span><br><span class="line">window.setTouchable(<span class="literal">true</span>)<span class="comment">--设置可触摸</span></span><br><span class="line"><span class="comment">--设置点击外部区域是否可以消失</span></span><br><span class="line">pop.setOutsideTouchable(<span class="literal">false</span>)</span><br><span class="line"><span class="comment">--显示</span></span><br><span class="line">pop.showAtLocation(view,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>弹窗框架</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E5%BC%B9%E7%AA%97%E6%A1%86%E6%9E%B6-2021-11-08%2022:16:29/</url>
    <content><![CDATA[<h1>弹窗框架</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">dialog= AlertDialog.Builder(this)</span><br><span class="line">dialog1=dialog.show()</span><br><span class="line">dialog1.getWindow().setContentView(loadlayout(layout));</span><br><span class="line"><span class="comment">--dialog1.setCanceledOnTouchOutside(false)--设置点击阴影部分不会关闭公告</span></span><br><span class="line"><span class="comment">--dialog1.setCancelable(false)--设置点击返回键不会关闭公告</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.ColorDrawable&quot;</span></span><br><span class="line">dialog1.getWindow().setBackgroundDrawable(ColorDrawable(<span class="number">0x00000000</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>弹窗视图(可弹出输入法)</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E5%BC%B9%E7%AA%97%E8%A7%86%E5%9B%BE(%E5%8F%AF%E5%BC%B9%E5%87%BA%E8%BE%93%E5%85%A5%E6%B3%95)-2021-11-08%2022:16:06/</url>
    <content><![CDATA[<h1>弹窗视图(可弹出输入法)</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--弹窗视图(可弹出输入法)</span></span><br><span class="line">AlertDialog.Builder(this)</span><br><span class="line">.setView(loadlayout(layout))</span><br><span class="line">.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>强制结束自身并清除数据</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E5%BC%BA%E5%88%B6%E7%BB%93%E6%9D%9F%E8%87%AA%E8%BA%AB%E5%B9%B6%E6%B8%85%E9%99%A4%E6%95%B0%E6%8D%AE-2021-11-12%2007:43:23/</url>
    <content><![CDATA[<h1>强制结束自身并清除数据</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--强制结束自身并清除数据</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;pm clear &quot;</span>..activity.getPackageName())</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>控件可视，不可视或隐藏</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E6%8E%A7%E4%BB%B6%E5%8F%AF%E8%A7%86%EF%BC%8C%E4%B8%8D%E5%8F%AF%E8%A7%86%E6%88%96%E9%9A%90%E8%97%8F-2021-11-12%2012:32:36/</url>
    <content><![CDATA[<h1>控件可视，不可视或隐藏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--控件可视</span></span><br><span class="line">控件ID.setVisibility(View.VISIBLE)</span><br><span class="line"><span class="comment">--控件不可视</span></span><br><span class="line">控件ID.setVisibility(View.INVISIBLE)</span><br><span class="line"><span class="comment">--控件隐藏</span></span><br><span class="line">控件ID.setVisibility(View.GONE)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>控件波纹</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%8E%A7%E4%BB%B6%E6%B3%A2%E7%BA%B9-2021-11-08%2022:29:11/</url>
    <content><![CDATA[<h1>控件波纹</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--控件波纹</span></span><br><span class="line">import <span class="string">&quot;android.content.res.ColorStateList&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 波纹<span class="params">(id,lx,color)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    ripple = activity.obtainStyledAttributes(&#123;android.R.attr.selectableItemBackgroundBorderless&#125;).getResourceId(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">    ripples = activity.obtainStyledAttributes(&#123;android.R.attr.selectableItemBackground&#125;).getResourceId(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> index,content <span class="keyword">in</span> <span class="built_in">ipairs</span>(id) <span class="keyword">do</span></span><br><span class="line">      <span class="keyword">if</span> lx==<span class="string">&quot;圆&quot;</span> <span class="keyword">then</span></span><br><span class="line">        content.setBackgroundDrawable(activity.Resources.getDrawable(ripple).setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;color&#125;)))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">if</span> lx==<span class="string">&quot;方&quot;</span> <span class="keyword">then</span></span><br><span class="line">        content.setBackgroundDrawable(activity.Resources.getDrawable(ripples).setColor(ColorStateList(int[<span class="number">0</span>].class&#123;int&#123;&#125;&#125;,int&#123;color&#125;)))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">(e)</span></span><span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">波纹(id,lx,color)</span></span><br><span class="line"><span class="comment">id：控件id,table</span></span><br><span class="line"><span class="comment">lx：波纹类型,圆或方,string</span></span><br><span class="line"><span class="comment">color 波纹颜色,number</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">安卓5及以上可用。</span></span><br><span class="line"><span class="comment">该代码需要MD主题。</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用例子</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="built_in">print</span>(<span class="string">&quot;FALua编程手册&quot;</span>)<span class="keyword">end</span>;</span><br><span class="line">  layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">  layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">  id=<span class="string">&quot;lay&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line">activity.setTheme(android.R.style.Theme_DeviceDefault_Light)</span><br><span class="line">波纹(&#123;lay&#125;,<span class="string">&quot;圆&quot;</span>,<span class="number">0x21000000</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>控件点击</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E6%8E%A7%E4%BB%B6%E7%82%B9%E5%87%BB-2021-11-12%2012:32:54/</url>
    <content><![CDATA[<h1>控件点击</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 控件<span class="title">ID.onClick</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">控件ID.onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>控件背景渐变动画</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%8E%A7%E4%BB%B6%E8%83%8C%E6%99%AF%E6%B8%90%E5%8F%98%E5%8A%A8%E7%94%BB-2021-11-08%2022:11:18/</url>
    <content><![CDATA[<h1>控件背景渐变动画</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">view=控件id</span><br><span class="line">color1 = <span class="number">0xffFF8080</span>;</span><br><span class="line">color2 = <span class="number">0xff8080FF</span>;</span><br><span class="line">color3 = <span class="number">0xff80ffff</span>;</span><br><span class="line">color4 = <span class="number">0xff80ff80</span>;</span><br><span class="line">import <span class="string">&quot;android.animation.ObjectAnimator&quot;</span></span><br><span class="line">import <span class="string">&quot;android.animation.ArgbEvaluator&quot;</span></span><br><span class="line">import <span class="string">&quot;android.animation.ValueAnimator&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">colorAnim = ObjectAnimator.ofInt(view,<span class="string">&quot;backgroundColor&quot;</span>,&#123;color1, color2, color3,color4&#125;)</span><br><span class="line">colorAnim.setDuration(<span class="number">3000</span>)</span><br><span class="line">colorAnim.setEvaluator(ArgbEvaluator())</span><br><span class="line">colorAnim.setRepeatCount(ValueAnimator.INFINITE)</span><br><span class="line">colorAnim.setRepeatMode(ValueAnimator.REVERSE)</span><br><span class="line">colorAnim.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>控件被单击，控件被长按</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%8E%A7%E4%BB%B6%E8%A2%AB%E5%8D%95%E5%87%BB%EF%BC%8C%E6%8E%A7%E4%BB%B6%E8%A2%AB%E9%95%BF%E6%8C%89-2021-11-08%2022:23:34/</url>
    <content><![CDATA[<h1>控件被单击，控件被长按</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--控件被单击</span></span><br><span class="line">控件ID.setonClickListener&#123;</span><br><span class="line">onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--控件被长按</span></span><br><span class="line"><span class="comment">--控件被长按</span></span><br><span class="line">控件ID.setonLongClickListener&#123;</span><br><span class="line">onLongClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>控件被长按</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E6%8E%A7%E4%BB%B6%E8%A2%AB%E9%95%BF%E6%8C%89-2021-11-12%2012:33:28/</url>
    <content><![CDATA[<h1>控件被长按</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">控件ID.onLongClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 控件<span class="title">ID.onLongClick</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>提示框</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E6%8F%90%E7%A4%BA%E6%A1%86-2021-11-12%2012:32:02/</url>
    <content><![CDATA[<h1>提示框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.DialogInterface&quot;</span></span><br><span class="line"><span class="keyword">local</span> dl=AlertDialog.Builder(activity)</span><br><span class="line">.setTitle(<span class="string">&quot;提示框标题&quot;</span>)</span><br><span class="line">.setMessage(<span class="string">&quot;提示框内容&quot;</span>)</span><br><span class="line">.setPositiveButton(<span class="string">&quot;按钮标题&quot;</span>,DialogInterface</span><br><span class="line">.OnClickListener&#123;</span><br><span class="line">  onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">    <span class="comment">--事件</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line">.setNegativeButton(<span class="string">&quot;按钮标题&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">.<span class="built_in">create</span>()</span><br><span class="line">dl.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>标签栏模板</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%A0%87%E7%AD%BE%E6%A0%8F%E6%A8%A1%E6%9D%BF-2021-11-08%2022:16:56/</url>
    <content><![CDATA[<h1>标签栏模板</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--程序启动时会执行的事件</span></span><br><span class="line">toolbar.Visibility=<span class="number">8</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp2px</span><span class="params">(dpValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> dpValue * scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> mheight=activity.getResources().getDimensionPixelSize(luajava.bindClass(<span class="string">&quot;com.android.internal.Rdimen&quot;</span>)().status_bar_height)</span><br><span class="line">mheight=mheight+dp2px(<span class="number">46</span>)<span class="comment">--48就是标签栏高</span></span><br><span class="line"><span class="keyword">local</span> linearParams = toolbar.parent.getLayoutParams()</span><br><span class="line">linearParams.height =mheight</span><br><span class="line">toolbar.parent.setLayoutParams(linearParams)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>标题栏菜单按钮</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%A0%87%E9%A2%98%E6%A0%8F%E8%8F%9C%E5%8D%95%E6%8C%89%E9%92%AE-2021-11-08%2022:22:50/</url>
    <content><![CDATA[<h1>标题栏菜单按钮</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">title=&#123;<span class="string">&quot;分享&quot;</span>,<span class="string">&quot;帮助&quot;</span>,<span class="string">&quot;皮肤&quot;</span>,<span class="string">&quot;退出&quot;</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onCreateOptionsMenu</span><span class="params">(menu)</span></span> </span><br><span class="line">  <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(title) <span class="keyword">do</span> </span><br><span class="line">    <span class="keyword">if</span> title[v] <span class="keyword">then</span> </span><br><span class="line">      <span class="keyword">local</span> m=menu.addSubMenu(v) </span><br><span class="line">      <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(title[v]) <span class="keyword">do</span> </span><br><span class="line">        m.add(v) </span><br><span class="line">      <span class="keyword">end</span> </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">      <span class="keyword">local</span> m=menu.add(v) </span><br><span class="line">      m.setShowAsActionFlags(<span class="number">1</span>) </span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onMenuItemSelected</span><span class="params">(id,title)</span></span> </span><br><span class="line">  <span class="keyword">if</span> y[title.getTitle()] <span class="keyword">then</span> </span><br><span class="line">    y[title.getTitle()]() </span><br><span class="line">  <span class="keyword">end</span> </span><br><span class="line"><span class="keyword">end</span> </span><br><span class="line"></span><br><span class="line">y=&#123;&#125;</span><br><span class="line">y[<span class="string">&quot;帮助&quot;</span>]=<span class="function"><span class="keyword">function</span><span class="params">()</span></span> </span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>标题栏返回按钮</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%A0%87%E9%A2%98%E6%A0%8F%E8%BF%94%E5%9B%9E%E6%8C%89%E9%92%AE-2021-11-08%2022:28:02/</url>
    <content><![CDATA[<h1>标题栏返回按钮</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--标题栏返回按钮</span></span><br><span class="line">activity.getActionBar().setDisplayHomeAsUpEnabled(<span class="literal">true</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>正则取文件名</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E6%AD%A3%E5%88%99%E5%8F%96%E6%96%87%E4%BB%B6%E5%90%8D-2021-11-12%2007:42:51/</url>
    <content><![CDATA[<h1>正则取文件名</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 取文件名<span class="params">(path)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">path</span>:<span class="built_in">match</span>(<span class="string">&quot;.+/(.+)&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 取文件名无后缀<span class="params">(path)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">path</span>:<span class="built_in">match</span>(<span class="string">&quot;.+/(.+)%..+&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(取文件名(<span class="string">&quot;/com/mukapp/top/muk.lua&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(取文件名无后缀(<span class="string">&quot;/com/mukapp/top/muk.lua&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>沉浸状态栏</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%B2%89%E6%B5%B8%E7%8A%B6%E6%80%81%E6%A0%8F-2021-11-08%2022:19:31/</url>
    <content><![CDATA[<h1>沉浸状态栏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--这个需要系统SDK21以上才能用</span></span><br><span class="line"><span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(<span class="number">0xff4285f4</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--这个需要系统SDK19以上才能用</span></span><br><span class="line"><span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">19</span> <span class="keyword">then</span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>沉浸状态栏</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E6%B2%89%E6%B5%B8%E7%8A%B6%E6%80%81%E6%A0%8F-2021-11-12%2012:31:04/</url>
    <content><![CDATA[<h1>沉浸状态栏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--这个需要系统SDK21以上才能用</span></span><br><span class="line"><span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(<span class="number">0xff4285f4</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--这个需要系统SDK19以上才能用</span></span><br><span class="line"><span class="keyword">if</span> Build.VERSION.SDK_INT &gt;= <span class="number">19</span> <span class="keyword">then</span></span><br><span class="line">  activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器控件js</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8E%A7%E4%BB%B6js-2021-11-08%2022:19:53/</url>
    <content><![CDATA[<h1>浏览器控件js</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">webView.setLuaWebEvents&#123;</span><br><span class="line">  onPageFinished=<span class="function"><span class="keyword">function</span><span class="params">(view,url)</span></span></span><br><span class="line">    webView.evaluateJavascript(<span class="string">[[JavaScript代码]]</span>,<span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">end</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器设置可以支持缩放</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AE%BE%E7%BD%AE%E5%8F%AF%E4%BB%A5%E6%94%AF%E6%8C%81%E7%BC%A9%E6%94%BE-2021-11-08%2022:17:29/</url>
    <content><![CDATA[<h1>浏览器设置可以支持缩放</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">控件ID.getSettings().setSupportZoom(<span class="literal">true</span>);<span class="comment">--设置可以支持缩放       </span></span><br><span class="line">控件ID.getSettings().setBuiltInZoomControls(<span class="literal">true</span>);<span class="comment">--设置出现缩放工具  </span></span><br><span class="line">控件ID.getSettings().setUseWideViewPort(<span class="literal">true</span>);<span class="comment">--扩大比例的缩放 将图片调整到适合WebView的大小  </span></span><br><span class="line">控件ID.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);<span class="comment">--自适应屏幕   </span></span><br><span class="line">控件ID.getSettings().setLoadWithOverviewMode(<span class="literal">true</span>);<span class="comment">--设置WebView是否使用预览模式加载界面。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>渐变色</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E6%B8%90%E5%8F%98%E8%89%B2-2021-11-08%2022:12:52/</url>
    <content><![CDATA[<h1>渐变色</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--顶栏渐变色</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 渐变<span class="params">(left_jb,right_jb,id)</span></span></span><br><span class="line">  drawable = GradientDrawable(GradientDrawable.Orientation.TR_BL,&#123;</span><br><span class="line">    right_jb,</span><br><span class="line">    left_jb,</span><br><span class="line">  &#125;);</span><br><span class="line">  id.setBackgroundDrawable(drawable)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">渐变(<span class="number">0xFF28D1DB</span>,<span class="number">0xFF28D1DB</span>,toolbarParent)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>申请root</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E7%94%B3%E8%AF%B7root-2021-11-12%2007:49:00/</url>
    <content><![CDATA[<h1>申请root</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--申请root</span></span><br><span class="line"><span class="comment">--shell命令的方法</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;su&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>禁用编辑框</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E7%A6%81%E7%94%A8%E7%BC%96%E8%BE%91%E6%A1%86-2021-11-12%2012:28:25/</url>
    <content><![CDATA[<h1>禁用编辑框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--代码中设置</span></span><br><span class="line">editText.setFocusable(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">--布局表中设置</span></span><br><span class="line">Focusable=<span class="literal">false</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>第三方状态栏 沉浸透明 隐藏标题栏</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E7%AC%AC%E4%B8%89%E6%96%B9%E7%8A%B6%E6%80%81%E6%A0%8F%20%E6%B2%89%E6%B5%B8%E9%80%8F%E6%98%8E%20%E9%9A%90%E8%97%8F%E6%A0%87%E9%A2%98%E6%A0%8F-2021-11-08%2022:13:05/</url>
    <content><![CDATA[<h1>第三方状态栏 沉浸透明 隐藏标题栏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--设置状态栏颜色</span></span><br><span class="line">activity.getWindow().setStatusBarColor(<span class="number">0x00000000</span>);</span><br><span class="line">activity.setTheme(android.R.style.Theme_DeviceDefault_Light)</span><br><span class="line"><span class="comment">--设置底部虚拟按键沉浸透明</span></span><br><span class="line">activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION)</span><br><span class="line"><span class="comment">--隐藏标题栏</span></span><br><span class="line">activity.ActionBar.hide()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>简单列表示列</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E7%AE%80%E5%8D%95%E5%88%97%E8%A1%A8%E7%A4%BA%E5%88%97-2021-11-08%2022:24:10/</url>
    <content><![CDATA[<h1>简单列表示列</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--列表布局，把布局代码复制到视图编辑器里可修改，修改好后再把修改好的代码粘贴到下面。从layout=处开始（不包含&#123;）</span></span><br><span class="line"></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">  padding=<span class="string">&quot;10dp&quot;</span>;</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    TextView;</span><br><span class="line">    id=<span class="string">&quot;标题&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  &#123;</span><br><span class="line">    TextView;</span><br><span class="line">    id=<span class="string">&quot;内容&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">adp=LuaAdapter(activity,layout)</span><br><span class="line"></span><br><span class="line"><span class="comment">--可以详细设置列表id中的内容。标题=&#123;方法名=参数&#125;</span></span><br><span class="line">adp.add&#123;标题=&#123;text=<span class="string">&quot;我是标题&quot;</span>,TextColor=<span class="number">0xff009688</span>&#125;,内容=<span class="string">&quot;我是内容&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">adp.add&#123;标题=<span class="string">&quot;我是标题&quot;</span>,内容=<span class="string">&quot;我是内容&quot;</span>&#125;</span><br><span class="line">adp.add&#123;标题=<span class="string">&quot;我是标题&quot;</span>,内容=<span class="string">&quot;我是内容&quot;</span>&#125;</span><br><span class="line">adp.add&#123;标题=<span class="string">&quot;我是标题&quot;</span>,内容=<span class="string">&quot;我是内容&quot;</span>&#125;</span><br><span class="line">列表id.Adapter=adp</span><br><span class="line"></span><br><span class="line"><span class="comment">--列表的点击事件</span></span><br><span class="line">列表id.onItemClick=<span class="function"><span class="keyword">function</span><span class="params">(parent, v, pos,id)</span></span></span><br><span class="line">  a=v.Tag.标题.Text</span><br><span class="line">  b=v.Tag.内容.Text</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(a)</span><br><span class="line">  <span class="built_in">print</span>(b)</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>简单文件管理器</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8-2021-11-12%2012:34:29/</url>
    <content><![CDATA[<h1>简单文件管理器</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line"><span class="comment">--import &quot;android.app.*&quot;</span></span><br><span class="line"><span class="comment">--import &quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span> <span class="comment">--文件系统</span></span><br><span class="line">import <span class="string">&quot;android.app.AlertDialog&quot;</span> <span class="comment">--对话框</span></span><br><span class="line">import <span class="string">&quot;android.webkit.MimeTypeMap&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span> <span class="comment">--系统打开文件</span></span><br><span class="line">import <span class="string">&quot;com.androlua.LuaUtil&quot;</span> <span class="comment">--辅助库 删除文件夹</span></span><br><span class="line">import <span class="string">&quot;android.text.format.Formatter&quot;</span> <span class="comment">--格式化文件大小</span></span><br><span class="line"></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout;</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    TextView;</span><br><span class="line">    id=<span class="string">&quot;path_TextView&quot;</span>;</span><br><span class="line">    text=<span class="string">&quot;path: /sdcard&quot;</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  &#123;</span><br><span class="line">    LinearLayout;</span><br><span class="line">    &#123;</span><br><span class="line">      Button;</span><br><span class="line">      id=<span class="string">&quot;addFile_Button&quot;</span>;</span><br><span class="line">      text=<span class="string">&quot;+文件&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      Button;</span><br><span class="line">      id=<span class="string">&quot;addDir_Button&quot;</span>;</span><br><span class="line">      text=<span class="string">&quot;+文件夹&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  &#123;</span><br><span class="line">    AbsoluteLayout;</span><br><span class="line">    layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;</span><br><span class="line">      id=<span class="string">&quot;fileEdit_LinearLayout&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          Button;</span><br><span class="line">          id=<span class="string">&quot;back_Button&quot;</span>;</span><br><span class="line">          text=<span class="string">&quot;&lt;返回&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          Button;</span><br><span class="line">          id=<span class="string">&quot;save_Button&quot;</span>;</span><br><span class="line">          text=<span class="string">&quot;保存&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">      &#123;</span><br><span class="line">        EditText;</span><br><span class="line">        id=<span class="string">&quot;file_EditText&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        gravity=<span class="string">&quot;start&quot;</span>;</span><br><span class="line">        backgroundColor=<span class="string">&quot;#fffae8&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">    &#123;</span><br><span class="line">      ListView;</span><br><span class="line">      id=<span class="string">&quot;dir_ListView&quot;</span>;</span><br><span class="line">      layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">      layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setTheme(android.R.style.Theme_DeviceDefault_Light)<span class="comment">--设置md主题</span></span><br><span class="line">activity.setTitle(<span class="string">&quot;文件管理&quot;</span>)</span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">path</span> = <span class="string">&quot;/sdcard&quot;</span></span><br><span class="line"><span class="keyword">local</span> adp = ArrayAdapter(activity, android.R.layout.simple_list_item_1)</span><br><span class="line">dir_ListView.setAdapter(adp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">()</span></span></span><br><span class="line">  path_TextView.text = <span class="string">&quot;path: &quot;</span>..<span class="built_in">path</span></span><br><span class="line">  <span class="keyword">if</span> File(<span class="built_in">path</span>).isDirectory() <span class="keyword">then</span> <span class="comment">--打开文件夹</span></span><br><span class="line">    dir_ListView.setVisibility(View.VISIBLE)</span><br><span class="line">    fileEdit_LinearLayout.setVisibility(View.GONE)</span><br><span class="line"></span><br><span class="line">    adp.clear() <span class="comment">--清空</span></span><br><span class="line">    adp.add(<span class="string">&quot;../&quot;</span>) <span class="comment">--父文件夹</span></span><br><span class="line">    <span class="keyword">local</span> ls = File(<span class="built_in">path</span>).listFiles()</span><br><span class="line">    <span class="keyword">if</span> ls <span class="keyword">then</span> <span class="comment">--不为空</span></span><br><span class="line">      <span class="keyword">local</span> fileList = luajava.astable( ls )</span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">sort</span>(fileList, <span class="function"><span class="keyword">function</span><span class="params">(a,b)</span></span> <span class="comment">--排序</span></span><br><span class="line">        <span class="keyword">return</span> (a.isDirectory()~=b.isDirectory() <span class="keyword">and</span> a.isDirectory()) <span class="keyword">or</span> ((a.isDirectory()==b.isDirectory()) <span class="keyword">and</span> a.Name&lt;b.Name)</span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line">      <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(fileList) <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> v.isDirectory() <span class="keyword">then</span> <span class="comment">--文件夹</span></span><br><span class="line">          adp.add(v.Name..<span class="string">&quot;/&quot;</span>)</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">          <span class="keyword">local</span> cal = Calendar.getInstance()</span><br><span class="line">          <span class="keyword">local</span> <span class="built_in">time</span> = v.lastModified() <span class="comment">--最后修改时间</span></span><br><span class="line">          cal.setTimeInMillis(<span class="built_in">time</span>)</span><br><span class="line">          adp.add( v.Name..<span class="string">&quot;nttt&quot;</span>..Formatter.formatFileSize(activity, v.length())..<span class="string">&quot;tttttt&quot;</span>..cal.getTime().toLocaleString() )</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">else</span> <span class="comment">--查看文件</span></span><br><span class="line">    dir_ListView.setVisibility(View.GONE)</span><br><span class="line">    fileEdit_LinearLayout.setVisibility(View.VISIBLE)</span><br><span class="line">    <span class="keyword">local</span> file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="built_in">path</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line">    file_EditText.text = file:<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line">    file:<span class="built_in">close</span>(file)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">update()</span><br><span class="line"></span><br><span class="line"><span class="comment">--系统打开文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">openFile</span><span class="params">(path)</span></span></span><br><span class="line">  <span class="keyword">local</span> FileName = <span class="built_in">tostring</span>(File(<span class="built_in">path</span>).Name)</span><br><span class="line">  <span class="keyword">local</span> ExtensionName = FileName:<span class="built_in">match</span>(<span class="string">&quot;%.(.+)&quot;</span>)</span><br><span class="line">  <span class="keyword">local</span> Mime = MimeTypeMap.getSingleton().getMimeTypeFromExtension(ExtensionName)</span><br><span class="line">  <span class="keyword">if</span> Mime <span class="keyword">then</span></span><br><span class="line">    intent = Intent()</span><br><span class="line">    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)</span><br><span class="line">    intent.setAction(Intent.ACTION_VIEW);</span><br><span class="line">    intent.setDataAndType(Uri.fromFile(File(<span class="built_in">path</span>)), Mime);</span><br><span class="line">    activity.startActivity(intent)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--列表点击事件</span></span><br><span class="line">dir_ListView.onItemClick=<span class="function"><span class="keyword">function</span><span class="params">(l,v,p,s)</span></span></span><br><span class="line">  <span class="keyword">local</span> name = v.Text</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">sub</span>(name, <span class="number">-1</span>) == <span class="string">&quot;/&quot;</span> <span class="keyword">then</span></span><br><span class="line">    name = <span class="built_in">string</span>.<span class="built_in">sub</span>(name, <span class="number">1</span>, <span class="number">-2</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    name = <span class="built_in">string</span>.<span class="built_in">match</span>(name, <span class="string">&quot;(.-)n&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> name == <span class="string">&quot;..&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">path</span> = <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">path</span>, <span class="string">&quot;(.*)/.+&quot;</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">path</span> = <span class="built_in">path</span>..<span class="string">&quot;/&quot;</span>..name</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  update()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> pop = PopupMenu(activity, path_TextView) <span class="comment">--弹出菜单</span></span><br><span class="line"><span class="keyword">local</span> menu = pop.Menu</span><br><span class="line"><span class="comment">--系统打开</span></span><br><span class="line">menu.add(<span class="string">&quot;打开(系统)&quot;</span>).onMenuItemClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">  openFile(<span class="built_in">path</span>)</span><br><span class="line">  <span class="built_in">path</span> = <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">path</span>, <span class="string">&quot;(.*)/.+&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--删除文件/文件夹</span></span><br><span class="line">menu.add(<span class="string">&quot;删除&quot;</span>).onMenuItemClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">  AlertDialog.Builder(this)</span><br><span class="line">  .setTitle(<span class="string">&quot;真的要删除&quot;</span>..<span class="built_in">path</span>..<span class="string">&quot;吗？&quot;</span>)</span><br><span class="line">  .setMessage(<span class="string">&quot;（将无法恢复）&quot;</span>)</span><br><span class="line">  .setPositiveButton(<span class="string">&quot;删除&quot;</span>,<span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">LuaUtil.rmDir</span><span class="params">( File(path)</span></span> )</span><br><span class="line">    <span class="built_in">path</span> = <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">path</span>, <span class="string">&quot;(.*)/.+&quot;</span>)</span><br><span class="line">    update()</span><br><span class="line">    Toast.makeText(activity, <span class="string">&quot;删除成功&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line">  .setNeutralButton(<span class="string">&quot;取消&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">  .show()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--重命名/移动文件</span></span><br><span class="line">menu.add(<span class="string">&quot;重命名/移动&quot;</span>).onMenuItemClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">  <span class="keyword">local</span> editText = EditText(activity)</span><br><span class="line"></span><br><span class="line">  AlertDialog.Builder(this)</span><br><span class="line">  .setTitle(<span class="string">&quot;请输入&quot;</span>)</span><br><span class="line">  .setIcon(android.R.drawable.ic_dialog_info)</span><br><span class="line">  .setView(editText)</span><br><span class="line">  .setPositiveButton(<span class="string">&quot;确定&quot;</span>, <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">    <span class="title">File</span><span class="params">(path)</span></span>.renameTo(</span><br><span class="line">    File( <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">path</span>, <span class="string">&quot;(.*)/.+&quot;</span>)..<span class="string">&quot;/&quot;</span>..editText.text )</span><br><span class="line">    )</span><br><span class="line">    Toast.makeText(activity, <span class="string">&quot;移动成功&quot;</span>,Toast.LENGTH_SHORT).show()</span><br><span class="line">    <span class="built_in">path</span> = <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">path</span>, <span class="string">&quot;(.*)/.+&quot;</span>)</span><br><span class="line">    update()</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line">  .setNegativeButton(<span class="string">&quot;取消&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">  .show();</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--列表项目长按</span></span><br><span class="line">dir_ListView.onItemLongClick = <span class="function"><span class="keyword">function</span><span class="params">(l,v,p,s)</span></span></span><br><span class="line">  <span class="keyword">local</span> name = v.text</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">sub</span>(name, <span class="number">-1</span>) == <span class="string">&quot;/&quot;</span> <span class="keyword">then</span></span><br><span class="line">    name = <span class="built_in">string</span>.<span class="built_in">sub</span>(name, <span class="number">1</span>, <span class="number">-2</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    name = <span class="built_in">string</span>.<span class="built_in">match</span>(name, <span class="string">&quot;(.-)n&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> name == <span class="string">&quot;..&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">path</span> = <span class="built_in">string</span>.<span class="built_in">match</span>(<span class="built_in">path</span>, <span class="string">&quot;(.*)/.+&quot;</span>)</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">path</span> = <span class="built_in">path</span>..<span class="string">&quot;/&quot;</span>..name</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  pop.show() <span class="comment">--弹出菜单</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--返回父文件夹</span></span><br><span class="line">back_Button.onClick = <span class="function"><span class="keyword">function</span></span></span><br><span class="line"><span class="function">  <span class="title">path</span> = <span class="title">string.match</span><span class="params">(path, &quot;(.*)</span></span>/.+<span class="string">&quot;)</span></span><br><span class="line"><span class="string">  update()</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">--保存文件</span></span><br><span class="line"><span class="string">save_Button.onClick = function</span></span><br><span class="line"><span class="string">  local file = io.open(path, &quot;</span>w<span class="string">&quot;)</span></span><br><span class="line"><span class="string">  file:write(file_EditText.text)</span></span><br><span class="line"><span class="string">  file:close(file)</span></span><br><span class="line"><span class="string">  Toast.makeText(activity, &quot;</span>保存成功<span class="string">&quot;,Toast.LENGTH_SHORT).show()</span></span><br><span class="line"><span class="string">  path = string.match(path, &quot;</span>(.*)/.+<span class="string">&quot;)</span></span><br><span class="line"><span class="string">  update()</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">--新建文件</span></span><br><span class="line"><span class="string">addFile_Button.onClick = function</span></span><br><span class="line"><span class="string">  local editText = EditText(activity)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  AlertDialog.Builder(this)</span></span><br><span class="line"><span class="string">  .setTitle(&quot;</span>请输入<span class="string">&quot;)</span></span><br><span class="line"><span class="string">  .setIcon(android.R.drawable.ic_dialog_info)</span></span><br><span class="line"><span class="string">  .setView(editText)</span></span><br><span class="line"><span class="string">  .setPositiveButton(&quot;</span>确定<span class="string">&quot;, function</span></span><br><span class="line"><span class="string">    File(path..&quot;</span>/<span class="string">&quot;..editText.text).createNewFile()</span></span><br><span class="line"><span class="string">    update()</span></span><br><span class="line"><span class="string">  end)</span></span><br><span class="line"><span class="string">  .setNegativeButton(&quot;</span>取消<span class="string">&quot;, nil)</span></span><br><span class="line"><span class="string">  .show();</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">--新建文件夹</span></span><br><span class="line"><span class="string">addDir_Button.onClick = function</span></span><br><span class="line"><span class="string">  local editText = EditText(activity)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  AlertDialog.Builder(this)</span></span><br><span class="line"><span class="string">  .setTitle(&quot;</span>请输入<span class="string">&quot;)</span></span><br><span class="line"><span class="string">  .setIcon(android.R.drawable.ic_dialog_info)</span></span><br><span class="line"><span class="string">  .setView(editText)</span></span><br><span class="line"><span class="string">  .setPositiveButton(&quot;</span>确定<span class="string">&quot;, function</span></span><br><span class="line"><span class="string">    File(path..&quot;</span>/<span class="string">&quot;..editText.text).mkdirs()</span></span><br><span class="line"><span class="string">    update()</span></span><br><span class="line"><span class="string">  end)</span></span><br><span class="line"><span class="string">  .setNegativeButton(&quot;</span>取消<span class="string">&quot;, nil)</span></span><br><span class="line"><span class="string">  .show();</span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>自动切换适应主题</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E9%80%82%E5%BA%94%E4%B8%BB%E9%A2%98-2021-11-08%2022:24:49/</url>
    <content><![CDATA[<h1>自动切换适应主题</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--自动切换适应主题</span></span><br><span class="line"><span class="comment">--载入切换</span></span><br><span class="line"><span class="comment">--根据Android SDK判断是否支持MD主题，否则使用Holo主题</span></span><br><span class="line"><span class="comment">--注意要把代码放到activity.setContentView(loadlayout(layout))上面去。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> sdk = Build.VERSION.SDK_INT</span><br><span class="line"><span class="keyword">if</span> sdk &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">  theme=... <span class="keyword">or</span> android.R.style.Theme_Material_Light</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  theme=... <span class="keyword">or</span> android.R.style.Theme_Holo_Light</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">activity.setTheme(theme)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--点击按钮切换</span></span><br><span class="line">控件id.onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">  <span class="keyword">local</span> sdk = Build.VERSION.SDK_INT</span><br><span class="line">  <span class="keyword">if</span> sdk &gt;= <span class="number">21</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> theme==android.R.style.Theme_Material <span class="keyword">then</span></span><br><span class="line">      activity.finish()</span><br><span class="line">      activity.newActivity(<span class="string">&quot;main&quot;</span>,android.R.anim.fade_in,android.R.anim.fade_out,&#123;android.R.style.Theme_Material_Light&#125;)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      activity.finish()</span><br><span class="line">      activity.newActivity(<span class="string">&quot;main&quot;</span>,android.R.anim.fade_in,android.R.anim.fade_out,&#123;android.R.style.Theme_Material&#125;)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> theme==android.R.style.Theme_Holo <span class="keyword">then</span></span><br><span class="line">      activity.finish()</span><br><span class="line">      activity.newActivity(<span class="string">&quot;main&quot;</span>,android.R.anim.fade_in,android.R.anim.fade_out,&#123;android.R.style.Theme_Holo_Light&#125;)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      activity.finish()</span><br><span class="line">      activity.newActivity(<span class="string">&quot;main&quot;</span>,android.R.anim.fade_in,android.R.anim.fade_out,&#123;android.R.style.Theme_Holo&#125;)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>自定义Callback</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%87%AA%E5%AE%9A%E4%B9%89Callback-2021-11-12%2007:42:36/</url>
    <content><![CDATA[<h1>自定义Callback</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--自定义Callback</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SentText</span><span class="params">(text,callback)</span></span></span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    Toast.makeText(activity,text,Toast.LENGTH_SHORT).show()</span><br><span class="line">    callback(<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">end</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    callback(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">SentText(<span class="string">&quot;emmmm&quot;</span>,<span class="function"><span class="keyword">function</span><span class="params">(is)</span></span></span><br><span class="line">  <span class="built_in">print</span>(is)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>自定义弹窗颜色</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%B9%E7%AA%97%E9%A2%9C%E8%89%B2-2021-11-12%2007:49:16/</url>
    <content><![CDATA[<h1>自定义弹窗颜色</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">dialog=AlertDialog.Builder(this)</span><br><span class="line">.setTitle(<span class="string">&quot;标题&quot;</span>)</span><br><span class="line">.setMessage(<span class="string">&quot;消息&quot;</span>)</span><br><span class="line">.setPositiveButton(<span class="string">&quot;积极&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span> <span class="built_in">print</span><span class="string">&quot;点击了积极按钮&quot;</span><span class="keyword">end</span>&#125;)</span><br><span class="line">.setNeutralButton(<span class="string">&quot;中立&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">.setNegativeButton(<span class="string">&quot;否认&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">.show()</span><br><span class="line">dialog.<span class="built_in">create</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--更改消息颜色</span></span><br><span class="line">message=dialog.findViewById(android.R.id.message)</span><br><span class="line">message.setTextColor(<span class="number">0xff1DA6DD</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--更改Button颜色</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">dialog.getButton(dialog.BUTTON_POSITIVE).setTextColor(<span class="number">0xff1DA6DD</span>)</span><br><span class="line">dialog.getButton(dialog.BUTTON_NEGATIVE).setTextColor(<span class="number">0xff1DA6DD</span>)</span><br><span class="line">dialog.getButton(dialog.BUTTON_NEUTRAL).setTextColor(<span class="number">0xff1DA6DD</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--更改Title颜色</span></span><br><span class="line">import <span class="string">&quot;android.text.SpannableString&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.style.ForegroundColorSpan&quot;</span></span><br><span class="line">import <span class="string">&quot;android.text.Spannable&quot;</span></span><br><span class="line">sp = SpannableString(<span class="string">&quot;标题&quot;</span>)</span><br><span class="line">sp.setSpan(ForegroundColorSpan(<span class="number">0xff1DA6DD</span>),<span class="number">0</span>,#sp,Spannable.SPAN_EXCLUSIVE_INCLUSIVE)</span><br><span class="line">dialog.setTitle(sp)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取LiveView垂直坐标</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96LiveView%E5%9E%82%E7%9B%B4%E5%9D%90%E6%A0%87-2021-11-12%2007:48:42/</url>
    <content><![CDATA[<h1>获取LiveView垂直坐标</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollY</span><span class="params">()</span></span></span><br><span class="line">  c = ls.getChildAt(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">local</span> firstVisiblePosition = ls.getFirstVisiblePosition();</span><br><span class="line">  <span class="keyword">local</span> top = c.getTop();</span><br><span class="line">  <span class="keyword">return</span> -top + firstVisiblePosition * c.getHeight() ;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取与设置Cookie</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E4%B8%8E%E8%AE%BE%E7%BD%AECookie-2021-11-12%2007:41:17/</url>
    <content><![CDATA[<h1>获取与设置Cookie</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.webkit.CookieSyncManager&quot;</span></span><br><span class="line">import <span class="string">&quot;android.webkit.CookieManager&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 设置<span class="title">Cookie</span><span class="params">(context,url,content)</span></span></span><br><span class="line">  CookieSyncManager.createInstance(context)</span><br><span class="line">  <span class="keyword">local</span> cookieManager = CookieManager.getInstance()</span><br><span class="line">  cookieManager.setAcceptCookie(<span class="literal">true</span>)</span><br><span class="line">  cookieManager.removeSessionCookie()</span><br><span class="line">  cookieManager.removeAllCookie()</span><br><span class="line">  cookieManager.setCookie(url, content)</span><br><span class="line">  CookieSyncManager.getInstance().sync()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取<span class="title">Cookie</span><span class="params">(url)</span></span></span><br><span class="line">  <span class="keyword">local</span> cookieManager = CookieManager.getInstance();</span><br><span class="line">  <span class="keyword">return</span> cookieManager.getCookie(url);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--示例</span></span><br><span class="line"><span class="comment">--获取https://www.baidu.com的cookie并打印</span></span><br><span class="line"><span class="built_in">print</span>(获取Cookie(<span class="string">&quot;https://www.baidu.com&quot;</span>))</span><br><span class="line"><span class="comment">--设置https://www.baidu.com的cookie为This is cookie</span></span><br><span class="line">设置Cookie(activity,<span class="string">&quot;https://www.baidu.com&quot;</span>,<span class="string">&quot;This is cookie&quot;</span>)</span><br><span class="line"><span class="comment">--获取https://www.baidu.com的cookie并打印</span></span><br><span class="line"><span class="built_in">print</span>(获取Cookie(<span class="string">&quot;https://www.baidu.com&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取已安装的程序</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E5%B7%B2%E5%AE%89%E8%A3%85%E7%9A%84%E7%A8%8B%E5%BA%8F-2021-11-12%2012:27:09/</url>
    <content><![CDATA[<h1>获取已安装的程序</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetAppInfo</span><span class="params">(包名)</span></span></span><br><span class="line">  import <span class="string">&quot;android.content.pm.PackageManager&quot;</span></span><br><span class="line">  <span class="keyword">local</span> pm = activity.getPackageManager();</span><br><span class="line">  <span class="keyword">local</span> 图标 = pm.getApplicationInfo(<span class="built_in">tostring</span>(包名),<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">local</span> 图标 = 图标.loadIcon(pm);</span><br><span class="line">  <span class="keyword">local</span> pkg = activity.getPackageManager().getPackageInfo(包名, <span class="number">0</span>); </span><br><span class="line">  <span class="keyword">local</span> 应用名称 = pkg.applicationInfo.loadLabel(activity.getPackageManager())</span><br><span class="line">  <span class="keyword">local</span> 版本号 = activity.getPackageManager().getPackageInfo(包名, <span class="number">0</span>).versionName</span><br><span class="line">  <span class="keyword">local</span> 最后更新时间 = activity.getPackageManager().getPackageInfo(包名, <span class="number">0</span>).lastUpdateTime</span><br><span class="line">  <span class="keyword">local</span> cal = Calendar.getInstance();</span><br><span class="line">  cal.setTimeInMillis(最后更新时间); </span><br><span class="line">  <span class="keyword">local</span> 最后更新时间 = cal.getTime().toLocaleString()</span><br><span class="line">  <span class="keyword">return</span> 包名,版本号,最后更新时间,图标,应用名称</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取悬浮窗权限</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E6%82%AC%E6%B5%AE%E7%AA%97%E6%9D%83%E9%99%90-2021-11-12%2007:39:43/</url>
    <content><![CDATA[<h1>获取悬浮窗权限</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--获取悬浮窗权限</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">import <span class="string">&quot;android.provider.Settings&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取悬浮窗权限<span class="params">()</span></span></span><br><span class="line">  intent = Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);</span><br><span class="line">  intent.setData(Uri.parse(<span class="string">&quot;package:&quot;</span> .. activity.getPackageName()));</span><br><span class="line">  activity.startActivityForResult(intent, <span class="number">100</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用示例</span></span><br><span class="line">获取悬浮窗权限()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取控件图片</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E6%8E%A7%E4%BB%B6%E5%9B%BE%E7%89%87-2021-11-12%2007:40:59/</url>
    <content><![CDATA[<h1>获取控件图片</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--获取控件图片</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 获取控件图片<span class="params">(view)</span></span></span><br><span class="line">  <span class="keyword">local</span> linearParams = view.getLayoutParams()</span><br><span class="line">  <span class="keyword">local</span> vw=linearParams.width</span><br><span class="line">  <span class="keyword">local</span> linearParams = view.getLayoutParams()</span><br><span class="line">  <span class="keyword">local</span> vh=linearParams.height</span><br><span class="line">  view.setDrawingCacheEnabled(<span class="literal">true</span>)</span><br><span class="line">  view.layout(<span class="number">0</span>,<span class="number">0</span>,vw,vh)</span><br><span class="line">  <span class="keyword">return</span> Bitmap.createBitmap(view.getDrawingCache())</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用示例</span></span><br><span class="line"><span class="comment">--布局</span></span><br><span class="line">layout=&#123;</span><br><span class="line">  LinearLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    TextView,</span><br><span class="line">    textSize=<span class="string">&quot;14sp&quot;</span>;</span><br><span class="line">    layout_width=<span class="string">&quot;56dp&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;42dp&quot;</span>,</span><br><span class="line">    text=<span class="string">&quot;TextView1&quot;</span>,</span><br><span class="line">    textColor=<span class="string">&quot;#FFFFFFFF&quot;</span>;</span><br><span class="line">    background=<span class="string">&quot;#212121&quot;</span>,</span><br><span class="line">    id=<span class="string">&quot;tv&quot;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    ImageView,</span><br><span class="line">    layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">    id=<span class="string">&quot;img&quot;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--设置布局</span></span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"><span class="comment">--获取tv的图片设置给img</span></span><br><span class="line">img.setImageBitmap(获取控件图片(tv))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取控件高度</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E6%8E%A7%E4%BB%B6%E9%AB%98%E5%BA%A6-2021-11-12%2007:43:40/</url>
    <content><![CDATA[<h1>获取控件高度</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--获取控件高度</span></span><br><span class="line"><span class="comment">--导入包</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getwh</span><span class="params">(view)</span></span></span><br><span class="line">  view.measure(View.MeasureSpec.makeMeasureSpec(<span class="number">0</span>,View.MeasureSpec.UNSPECIFIED),View.MeasureSpec.makeMeasureSpec(<span class="number">0</span>,View.MeasureSpec.UNSPECIFIED));</span><br><span class="line">  height =view.getMeasuredHeight();</span><br><span class="line">  width =view.getMeasuredWidth();</span><br><span class="line">  <span class="keyword">return</span> width,height</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用方法</span></span><br><span class="line"><span class="built_in">print</span>(getwh(控件ID))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取文件或者文件夹最后修改时间</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E6%96%87%E4%BB%B6%E5%A4%B9%E6%9C%80%E5%90%8E%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4-2021-11-12%2012:33:44/</url>
    <content><![CDATA[<h1>获取文件或者文件夹最后修改时间</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetFilelastTime</span><span class="params">(path)</span></span></span><br><span class="line">  f = File(<span class="built_in">path</span>);</span><br><span class="line">  cal = Calendar.getInstance();</span><br><span class="line">  <span class="built_in">time</span> = f.lastModified()</span><br><span class="line">  cal.setTimeInMillis(<span class="built_in">time</span>);</span><br><span class="line">  <span class="keyword">return</span> cal.getTime().toLocaleString()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>获取视图文本</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%8E%B7%E5%8F%96%E8%A7%86%E5%9B%BE%E6%96%87%E6%9C%AC-2021-11-12%2012:26:54/</url>
    <content><![CDATA[<h1>获取视图文本</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetAllText</span><span class="params">(view)</span></span></span><br><span class="line">textTable=&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetText</span><span class="params">(Parent)</span></span></span><br><span class="line"><span class="keyword">local</span> number=Parent.getChildCount()</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">0</span>,number <span class="keyword">do</span></span><br><span class="line"><span class="keyword">local</span> view=Parent.getChildAt(i)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>view.addView(TextView(activity))<span class="keyword">end</span>) <span class="keyword">then</span></span><br><span class="line">GetText(view)</span><br><span class="line"><span class="keyword">elseif</span> <span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>view.getText()<span class="keyword">end</span>) <span class="keyword">then</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(textTable,<span class="built_in">tostring</span>(view.Text))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">GetText(view)</span><br><span class="line"><span class="keyword">return</span> textTable</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>.<span class="built_in">unpack</span>(GetAllText(Parent)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>视频异形屏的全屏</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%A7%86%E9%A2%91%E5%BC%82%E5%BD%A2%E5%B1%8F%E7%9A%84%E5%85%A8%E5%B1%8F-2021-11-12%2007:40:17/</url>
    <content><![CDATA[<h1>视频异形屏的全屏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 全屏<span class="params">()</span></span></span><br><span class="line">  window = activity.getWindow();</span><br><span class="line">  window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN|View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);</span><br><span class="line">  window.addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN)</span><br><span class="line">  <span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">    lp = window.getAttributes();</span><br><span class="line">    lp.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES;</span><br><span class="line">    window.setAttributes(lp);</span><br><span class="line">  <span class="keyword">end</span>,</span><br><span class="line">  <span class="function"><span class="keyword">function</span><span class="params">(e)</span></span></span><br><span class="line">  <span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--使用该代码可能需要隐藏ActionBar</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用示例</span></span><br><span class="line">全屏()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>最方便的二进制调用</title>
    <url>/2021/11/07/lua%E4%BB%A3%E7%A0%81/%E6%9C%80%E6%96%B9%E4%BE%BF%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%B0%83%E7%94%A8-2021-11-07-17-49-56/</url>
    <content><![CDATA[<h1>最方便的二进制调用</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"> <span class="comment">--SCP二进制中文函数调用模块(所有框架通用)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--【1】调用二进制中文函数模块包↓</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 二进制执行<span class="params">(二进制路径,二进制开关提示)</span></span><span class="comment">--中文函数</span></span><br><span class="line">二进制调用=activity.getLuaDir(二进制路径)<span class="comment">--自动获取lua文件的执行路径,只需填二进制在插件的目录路径即可</span></span><br><span class="line"><span class="keyword">local</span> Root,<span class="built_in">exit</span>,numb=<span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;su&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> Root==<span class="literal">true</span> <span class="keyword">then</span><span class="comment">--判断有root则执行以下命令↓</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;su -c chmod 777 &quot;</span>..二进制调用)<span class="comment">--授予777权限</span></span><br><span class="line">Runtime.getRuntime().exec(<span class="string">&quot;su -c &quot;</span>..二进制调用)<span class="comment">--执行二进制功能</span></span><br><span class="line"><span class="built_in">print</span>(二进制开关提示)</span><br><span class="line"><span class="keyword">else</span><span class="comment">--没有root则执行以下命令↓</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">execute</span>(<span class="string">&quot;chmod 777 &quot;</span>..二进制调用)<span class="comment">--授予777权限</span></span><br><span class="line">Runtime.getRuntime().exec(<span class="string">&quot;&quot;</span>..二进制调用)<span class="comment">--执行二进制功能</span></span><br><span class="line"><span class="built_in">print</span>(二进制开关提示)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--调用路径写入&gt;&gt;&gt;二进制执行(二进制路径,二进制提示)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-------------------------------------------------------------我是分割线</span></span><br><span class="line"></span><br><span class="line"><span class="comment">---【2】二进制调用模块包↓</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--全枪聚点无后</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a1.OnCheckedChangeListener</span><span class="params">()</span></span></span><br><span class="line"><span class="keyword">if</span> a1.checked <span class="keyword">then</span></span><br><span class="line">二进制执行(<span class="string">&quot;libso/a01_on&quot;</span>,<span class="string">&quot;全枪聚点无后开启成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">二进制执行(<span class="string">&quot;libso/a01_off&quot;</span>,<span class="string">&quot;全枪聚点无后关闭成功&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>lua代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>记录Log日志</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%AE%B0%E5%BD%95Log%E6%97%A5%E5%BF%97-2021-11-12%2012:33:58/</url>
    <content><![CDATA[<h1>记录Log日志</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--留下的日志可以在编辑页工具栏&quot;Log日志&quot;查看</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--Log记录可以为以下几种方式</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.util.Log&quot;</span></span><br><span class="line">Log.i(String,String)</span><br><span class="line">Log.e(String,String)</span><br><span class="line">Log.d(String,String)</span><br><span class="line">Log.v(String,String)</span><br><span class="line">Log.w(String,String)</span><br><span class="line">Log.wtf(String,String)</span><br><span class="line">Log.wtfStack(String,String)</span><br><span class="line">Log.ws(String,String)</span><br><span class="line">Log.println(int,String,String)</span><br><span class="line"></span><br><span class="line"><span class="comment">--更多记录方式在JavaAPI中util.log类查看</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>设置activity背景颜色</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AEactivity%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2-2021-11-08%2022:28:41/</url>
    <content><![CDATA[<h1>设置activity背景颜色</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--设置activity背景颜色</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">activity</span>背景颜色<span class="params">(color)</span></span></span><br><span class="line">  _window = activity.getWindow();</span><br><span class="line">  _window.setBackgroundDrawable(ColorDrawable(color));</span><br><span class="line">  _wlp = _window.getAttributes();</span><br><span class="line">  _wlp.gravity = Gravity.BOTTOM;</span><br><span class="line">  _wlp.width = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">  _wlp.height = WindowManager.LayoutParams.MATCH_PARENT;<span class="comment">--WRAP_CONTENT</span></span><br><span class="line">  _window.setAttributes(_wlp);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--该函数需设置布局后使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用例子</span></span><br><span class="line">activity.setContentView(LinearLayout(activity))</span><br><span class="line">activity背景颜色(<span class="number">0xff424242</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>设置填充色，设置圆角，设置边框</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AE%E5%A1%AB%E5%85%85%E8%89%B2%EF%BC%8C%E8%AE%BE%E7%BD%AE%E5%9C%86%E8%A7%92%EF%BC%8C%E8%AE%BE%E7%BD%AE%E8%BE%B9%E6%A1%86-2021-11-08%2022:23:13/</url>
    <content><![CDATA[<h1>设置填充色，设置圆角，设置边框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">InsideColor = Color.parseColor(<span class="string">&quot;#FFC5BCEB&quot;</span>)</span><br><span class="line">radiu = <span class="number">60</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">drawable = GradientDrawable()</span><br><span class="line">drawable.setShape(GradientDrawable.RECTANGLE)</span><br><span class="line"><span class="comment">--设置填充色</span></span><br><span class="line">drawable.setColor(InsideColor)</span><br><span class="line"><span class="comment">--设置圆角 : 左上 右上 右下 左下</span></span><br><span class="line">drawable.setCornerRadii(&#123;<span class="number">720</span>, <span class="number">600</span>, <span class="number">720</span>, <span class="number">600</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>&#125;);</span><br><span class="line"><span class="comment">--设置边框 : 宽度 颜色</span></span><br><span class="line">drawable.setStroke(<span class="number">2</span>, Color.parseColor(<span class="string">&quot;#FF73AB80&quot;</span>))</span><br><span class="line">控件ID.setBackgroundDrawable(drawable)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>设置控件大小</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AE%E6%8E%A7%E4%BB%B6%E5%A4%A7%E5%B0%8F-2021-11-12%2012:29:27/</url>
    <content><![CDATA[<h1>设置控件大小</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--设置宽度</span></span><br><span class="line">linearParams = 控件ID.getLayoutParams()</span><br><span class="line">linearParams.width =宽度</span><br><span class="line">控件ID.setLayoutParams(linearParams)</span><br><span class="line"><span class="comment">--同理设置高度</span></span><br><span class="line">linearParams = 控件ID.getLayoutParams()</span><br><span class="line">linearParams.height =高度</span><br><span class="line">控件ID.setLayoutParams(linearParams)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>设置控件字体</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AE%E6%8E%A7%E4%BB%B6%E5%AD%97%E4%BD%93-2021-11-12%2007:43:06/</url>
    <content><![CDATA[<h1>设置控件字体</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.Typeface&quot;</span></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--布局表中调用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 字体<span class="params">(t)</span></span></span><br><span class="line">  <span class="keyword">return</span> Typeface.createFromFile(File(activity.getLuaDir()..<span class="string">&quot;/res/&quot;</span>..t..<span class="string">&quot;.ttf&quot;</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--栗子:Typeface=字体(&quot;Product&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--代码中调用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 字体设置<span class="params">(id,t)</span></span></span><br><span class="line">  id.setTypeface(Typeface.createFromFile(File(activity.getLuaDir()..<span class="string">&quot;/res/&quot;</span>..t..<span class="string">&quot;.ttf&quot;</span>)))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--栗子:字体设置(tv,&quot;Product&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--字体需要放在res文件夹下</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>设置时间</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%97%B4-2021-11-08%2022:15:50/</url>
    <content><![CDATA[<h1>设置时间</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 时间<span class="params">()</span></span></span><br><span class="line">  hb()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">十二小时制=<span class="number">1</span></span><br><span class="line"><span class="comment">--文本控件的ID｜</span></span><br><span class="line">asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H:%M:%S&quot;</span>))</span><br><span class="line"><span class="keyword">if</span> 十二小时制==<span class="number">0</span> <span class="keyword">or</span> 十二==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;24&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;00:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;23&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;11:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;22&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;10:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;21&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;9:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;20&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;8:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;19&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;7:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;18&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;6:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;17&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;5:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;16&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;4:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;15&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;3:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;14&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;2:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;13&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;1:%M&quot;</span>))</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hb</span><span class="params">(十二)</span></span></span><br><span class="line">  asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H:%M:%S&quot;</span>))</span><br><span class="line">  <span class="comment">--检测时间并设置时间段</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&gt;=<span class="built_in">tonumber</span>(<span class="string">&quot;24&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;半夜&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&gt;=<span class="built_in">tonumber</span>(<span class="string">&quot;19&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;晚上&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&gt;=<span class="built_in">tonumber</span>(<span class="string">&quot;17&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;傍晚&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&gt;=<span class="built_in">tonumber</span>(<span class="string">&quot;14&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;下午&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&gt;=<span class="built_in">tonumber</span>(<span class="string">&quot;12&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;中午&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&gt;=<span class="built_in">tonumber</span>(<span class="string">&quot;10&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;上午&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&gt;=<span class="built_in">tonumber</span>(<span class="string">&quot;7&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;早上&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))&lt;=<span class="built_in">tonumber</span>(<span class="string">&quot;5&quot;</span>) <span class="keyword">then</span></span><br><span class="line">    asp2.setText(<span class="string">&quot;清晨&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> asp.text:<span class="built_in">find</span><span class="string">&quot;00&quot;</span> <span class="keyword">then</span></span><br><span class="line">    asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H:%M:%S&quot;</span>))</span><br><span class="line">    <span class="keyword">if</span> 十二小时制==<span class="number">0</span> <span class="keyword">or</span> 十二==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;24&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;00:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;23&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;11:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;22&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;10:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;21&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;9:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;20&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;8:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;19&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;7:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;18&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;6:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;17&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;5:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;16&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;4:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;15&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;3:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;14&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;2:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;13&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;1:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%S&quot;</span>))&lt;<span class="number">03</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--print(&quot;less than 02&quot;)</span></span><br><span class="line">    <span class="keyword">if</span> 十二小时制==<span class="number">0</span> <span class="keyword">or</span> 十二==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">if</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;24&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;00:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;23&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;11:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;22&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;10:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;21&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;9:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;20&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;8:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;19&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;7:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;18&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;6:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;17&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;5:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;16&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;4:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;15&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;3:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;14&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;2:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">elseif</span> <span class="built_in">tonumber</span>(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;%H&quot;</span>))==<span class="built_in">tonumber</span>(<span class="string">&quot;13&quot;</span>) <span class="keyword">then</span></span><br><span class="line">        asp.setText(<span class="built_in">os</span>.<span class="built_in">date</span>(<span class="string">&quot;1:%M&quot;</span>))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 刷新<span class="params">()</span></span></span><br><span class="line">  <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">  <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    Thread.sleep(<span class="number">100</span>)</span><br><span class="line">    call(<span class="string">&quot;时间&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">thread(刷新)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>设置状态栏背景颜色，分割状态栏</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AE%E7%8A%B6%E6%80%81%E6%A0%8F%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%EF%BC%8C%E5%88%86%E5%89%B2%E7%8A%B6%E6%80%81%E6%A0%8F-2021-11-08%2022:13:56/</url>
    <content><![CDATA[<h1>设置状态栏背景颜色，分割状态栏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE|WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN)</span><br><span class="line"><span class="comment">--分割状态栏，去除阴影效果,若想改颜色必用此效果</span></span><br><span class="line">activity.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS | WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION);</span><br><span class="line"><span class="comment">--设置状态栏背景颜色</span></span><br><span class="line">activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS).setStatusBarColor(<span class="number">0xFF7368EA</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>设置边框圆角函数</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AE%E8%BE%B9%E6%A1%86%E5%9C%86%E8%A7%92%E5%87%BD%E6%95%B0-2021-11-08%2022:14:42/</url>
    <content><![CDATA[<h1>设置边框圆角函数</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--设置边框圆角函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> 卡片<span class="params">(边框厚度,边框颜色,背景颜色,圆角度)</span></span></span><br><span class="line">  import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line">  drawable=GradientDrawable()</span><br><span class="line">  drawable.setShape(GradientDrawable.RECTANGLE)</span><br><span class="line">  drawable.setStroke(边框厚度,<span class="built_in">tonumber</span>(边框颜色))<span class="comment">--边框厚度和背景颜色</span></span><br><span class="line">  drawable.setColor(<span class="built_in">tonumber</span>(背景颜色))<span class="comment">--背景颜色</span></span><br><span class="line">  drawable.setCornerRadius(圆角度)<span class="comment">--圆角</span></span><br><span class="line">  <span class="keyword">return</span> drawable</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用方法</span></span><br><span class="line"><span class="comment">--分别为:ID,边框厚度,边框颜色,背景颜色,圆角度</span></span><br><span class="line">控件ID.BackgroundDrawable=卡片(<span class="number">3</span>,<span class="number">0xdb00ffe6</span>,<span class="number">0xffffff</span>,<span class="number">35</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>设置选择字体风格</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%AE%BE%E7%BD%AE%E9%80%89%E6%8B%A9%E5%AD%97%E4%BD%93%E9%A3%8E%E6%A0%BC-2021-11-08%2022:25:08/</url>
    <content><![CDATA[<h1>设置选择字体风格</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.Typeface&quot;</span></span><br><span class="line"><span class="comment">--选择字体风格：</span></span><br><span class="line">Typeface=Typeface.DEFAULT<span class="comment">--默认字体</span></span><br><span class="line">Typeface=Typeface.DEFAULT_BOLD<span class="comment">--加粗字体</span></span><br><span class="line">Typeface=Typeface.MONOSPACE<span class="comment">--monospace字体</span></span><br><span class="line">Typeface=Typeface.SANS_SERIF<span class="comment">--sans字体</span></span><br><span class="line">Typeface=Typeface.SERIF<span class="comment">--serif字体</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>读写文件</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6-2021-11-12%2012:32:19/</url>
    <content><![CDATA[<h1>读写文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--读文件</span></span><br><span class="line"><span class="keyword">local</span> file=<span class="built_in">io</span>.<span class="built_in">input</span>(<span class="string">&quot;地址&quot;</span>)</span><br><span class="line"><span class="keyword">local</span> str=<span class="built_in">io</span>.<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>)</span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">close</span>()</span><br><span class="line"><span class="built_in">print</span>(str)</span><br><span class="line"><span class="comment">--写文件</span></span><br><span class="line"><span class="keyword">local</span> file=<span class="built_in">io</span>.<span class="built_in">output</span>(<span class="string">&quot;地址&quot;</span>)</span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">write</span>(写入内容)</span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">flush</span>()</span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">close</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>贝塞尔曲线</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF-2021-11-12%2007:40:40/</url>
    <content><![CDATA[<h1>贝塞尔曲线</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;com.androlua.LuaDrawable&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Path&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dp2px</span><span class="params">(dpValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> dpValue * scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">px2dp</span><span class="params">(pxValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> pxValue / scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">px2sp</span><span class="params">(pxValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity;</span><br><span class="line">  <span class="keyword">return</span> pxValue / scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sp2px</span><span class="params">(spValue)</span></span></span><br><span class="line">  <span class="keyword">local</span> scale = activity.getResources().getDisplayMetrics().scaledDensity</span><br><span class="line">  <span class="keyword">return</span> spValue * scale + <span class="number">0.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">layout=&#123;</span><br><span class="line">  RelativeLayout;</span><br><span class="line">  layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">  background=backgroundc;</span><br><span class="line">  layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">  &#123;</span><br><span class="line">    RelativeLayout,</span><br><span class="line">    layout_width=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;-1&quot;</span>,</span><br><span class="line">    id=<span class="string">&quot;llb&quot;</span>,</span><br><span class="line">    gravity=<span class="string">&quot;bottom&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      RelativeLayout,</span><br><span class="line">      layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;56dp&quot;</span>,</span><br><span class="line">      clickable=<span class="string">&quot;true&quot;</span>,</span><br><span class="line">      id=<span class="string">&quot;ll&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        LinearLayout;</span><br><span class="line">        layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        gravity=<span class="string">&quot;left|center&quot;</span>;</span><br><span class="line">        paddingLeft=<span class="string">&quot;8dp&quot;</span>;</span><br><span class="line">        paddingRight=<span class="string">&quot;8dp&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          LinearLayout;</span><br><span class="line">          layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;-2&quot;</span>;</span><br><span class="line">          layout_weight=<span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        &#123;</span><br><span class="line">          TextView;</span><br><span class="line">          layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">          layout_width=<span class="string">&quot;56dp&quot;</span>;</span><br><span class="line">          layout_marginRight=<span class="string">&quot;20dp&quot;</span>;</span><br><span class="line">          layout_marginLeft=<span class="string">&quot;8dp&quot;</span>;</span><br><span class="line">          <span class="comment">--background=grayc;</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    LinearLayout;</span><br><span class="line">    layout_width=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">    layout_height=<span class="string">&quot;-1&quot;</span>;</span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>;</span><br><span class="line">    gravity=<span class="string">&quot;right|bottom&quot;</span>;</span><br><span class="line">    &#123;</span><br><span class="line">      CardView;</span><br><span class="line">      layout_width=<span class="string">&quot;56dp&quot;</span>,</span><br><span class="line">      layout_height=<span class="string">&quot;56dp&quot;</span>,</span><br><span class="line">      radius=<span class="string">&quot;28dp&quot;</span>;</span><br><span class="line">      layout_margin=<span class="string">&quot;28dp&quot;</span>;</span><br><span class="line">      CardBackgroundColor=<span class="string">&quot;0xffffffff&quot;</span>;</span><br><span class="line">      elevation=<span class="string">&quot;6dp&quot;</span>;</span><br><span class="line">      alpha=<span class="number">1</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(layout))</span><br><span class="line"></span><br><span class="line">myLuaDrawable=LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(mCanvas,mPaint,mDrawable)</span></span></span><br><span class="line"></span><br><span class="line">  mPaint.setColor(<span class="number">0xffffffff</span>)</span><br><span class="line">  mPaint.setAntiAlias(<span class="literal">true</span>)</span><br><span class="line">  mPaint.setStrokeWidth(<span class="number">20</span>)</span><br><span class="line">  mPaint.setStyle(Paint.Style.FILL)</span><br><span class="line">  mPaint.setStrokeCap(Paint.Cap.ROUND)</span><br><span class="line"></span><br><span class="line">  w=mDrawable.getBounds().right</span><br><span class="line">  h=mDrawable.getBounds().bottom</span><br><span class="line"></span><br><span class="line">  mPath=Path()</span><br><span class="line"></span><br><span class="line">  mPath.moveTo(w, h);</span><br><span class="line">  mPath.lineTo(<span class="number">0</span>, h);</span><br><span class="line">  mPath.lineTo(<span class="number">0</span>, h-dp2px(<span class="number">56</span>));</span><br><span class="line"></span><br><span class="line">  mPath.lineTo(w-dp2px(<span class="number">56</span>+<span class="number">16</span>+<span class="number">16</span>+<span class="number">8</span>), h-dp2px(<span class="number">56</span>));</span><br><span class="line">  mPath.rQuadTo(dp2px(<span class="number">8</span>), dp2px(<span class="number">0</span>),dp2px(<span class="number">8</span>+<span class="number">1</span>), dp2px(<span class="number">8</span>))</span><br><span class="line">  mPath.rCubicTo(dp2px(<span class="number">8</span><span class="number">-1</span>), dp2px(<span class="number">28</span>+<span class="number">4</span>),dp2px(<span class="number">56</span><span class="number">-1</span>), dp2px(<span class="number">28</span>+<span class="number">4</span>),dp2px(<span class="number">56</span>+<span class="number">8</span><span class="number">-2</span>), dp2px(<span class="number">0</span>))</span><br><span class="line">  mPath.rQuadTo(dp2px(<span class="number">1</span>), dp2px(<span class="number">-8</span>),dp2px(<span class="number">8</span>+<span class="number">1</span>), dp2px(<span class="number">-8</span>))</span><br><span class="line">  mPath.rLineTo(w, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  mCanvas.drawColor(<span class="number">0x00000000</span>)</span><br><span class="line">  mCanvas.drawPath(mPath, mPaint);</span><br><span class="line"></span><br><span class="line">  mPath.<span class="built_in">close</span>();</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">ll.background=myLuaDrawable</span><br><span class="line"></span><br><span class="line">myLuaDrawable=LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(mCanvas,mPaint,mDrawable)</span></span></span><br><span class="line"></span><br><span class="line">  mPaint.setColor(<span class="number">0x21000000</span>)</span><br><span class="line">  mPaint.setAntiAlias(<span class="literal">true</span>)</span><br><span class="line">  mPaint.setStrokeWidth(dp2px(<span class="number">4</span>))</span><br><span class="line">  mPaint.setStyle(Paint.Style.FILL)</span><br><span class="line">  mPaint.setStrokeCap(Paint.Cap.ROUND)</span><br><span class="line"></span><br><span class="line">  w=mDrawable.getBounds().right</span><br><span class="line">  h=mDrawable.getBounds().bottom</span><br><span class="line"></span><br><span class="line">  mPath=Path()</span><br><span class="line"></span><br><span class="line">  mPath.moveTo(w, h);</span><br><span class="line">  mPath.lineTo(<span class="number">0</span>, h);</span><br><span class="line">  mPath.lineTo(<span class="number">0</span>, h-dp2px(<span class="number">56</span>));</span><br><span class="line"></span><br><span class="line">  mPath.lineTo(w-dp2px(<span class="number">56</span>+<span class="number">16</span>+<span class="number">16</span>+<span class="number">8</span>), h-dp2px(<span class="number">56</span>));</span><br><span class="line">  mPath.rQuadTo(dp2px(<span class="number">8</span>), dp2px(<span class="number">0</span>),dp2px(<span class="number">8</span>+<span class="number">1</span>), dp2px(<span class="number">8</span>))</span><br><span class="line">  mPath.rCubicTo(dp2px(<span class="number">8</span><span class="number">-1</span>), dp2px(<span class="number">28</span>+<span class="number">4</span>),dp2px(<span class="number">56</span><span class="number">-1</span>), dp2px(<span class="number">28</span>+<span class="number">4</span>),dp2px(<span class="number">56</span>+<span class="number">8</span><span class="number">-2</span>), dp2px(<span class="number">0</span>))</span><br><span class="line">  mPath.rQuadTo(dp2px(<span class="number">1</span>), dp2px(<span class="number">-8</span>),dp2px(<span class="number">8</span>+<span class="number">1</span>), dp2px(<span class="number">-8</span>))</span><br><span class="line">  mPath.rLineTo(w, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  mCanvas.drawColor(<span class="number">0x00000000</span>)</span><br><span class="line">  mPaint.setShadowLayer(dp2px(<span class="number">1</span>), <span class="number">0</span>, dp2px(<span class="number">-1</span>), <span class="number">0x70FFFFFF</span>);</span><br><span class="line"></span><br><span class="line">  mCanvas.drawPath(mPath, mPaint);</span><br><span class="line"></span><br><span class="line">  mPath.<span class="built_in">close</span>();</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line">llb.background=myLuaDrawable</span><br><span class="line"></span><br><span class="line">》》</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《《使用系统TTS播报语音》》</span><br><span class="line">《《</span><br><span class="line"></span><br><span class="line"><span class="comment">--使用系统TTS播报语音</span></span><br><span class="line">import <span class="string">&quot;android.speech.tts.*&quot;</span></span><br><span class="line"></span><br><span class="line">mTextSpeech = TextToSpeech(activity, TextToSpeech.OnInitListener&#123;</span><br><span class="line">  onInit=<span class="function"><span class="keyword">function</span><span class="params">(status)</span></span></span><br><span class="line">    <span class="comment">--如果装载TTS成功</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">status</span> == TextToSpeech.SUCCESS)</span><br><span class="line">      result = mTextSpeech.setLanguage(Locale.CHINESE);</span><br><span class="line">      <span class="comment">--[[LANG_MISSING_DATA--&gt;语言的数据丢失</span></span><br><span class="line"><span class="comment">          LANG_NOT_SUPPORTED--&gt;语言不支持]]</span></span><br><span class="line">      <span class="keyword">if</span> (result == TextToSpeech.LANG_MISSING_DATA <span class="keyword">or</span> result == TextToSpeech.LANG_NOT_SUPPORTED)</span><br><span class="line">        <span class="comment">--不支持中文</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;您的手机不支持中文语音播报功能。&quot;</span>);</span><br><span class="line">        result = mTextSpeech.setLanguage(Locale.ENGLISH);</span><br><span class="line">        <span class="keyword">if</span> (result == TextToSpeech.LANG_MISSING_DATA <span class="keyword">or</span> result == TextToSpeech.LANG_NOT_SUPPORTED)</span><br><span class="line">          <span class="comment">--不支持中文和英文</span></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;您的手机不支持语音播报功能。&quot;</span>);</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">          <span class="comment">--不支持中文但支持英文</span></span><br><span class="line">          <span class="comment">--语调,1.0默认</span></span><br><span class="line">          mTextSpeech.setPitch(<span class="number">1</span>);</span><br><span class="line">          <span class="comment">--语速,1.0默认</span></span><br><span class="line">          mTextSpeech.setSpeechRate(<span class="number">1</span>);</span><br><span class="line">          mTextSpeech.speak(<span class="string">&quot;hello,MLua Manual.Hello,World!&quot;</span>, TextToSpeech.QUEUE_FLUSH, <span class="literal">nil</span>);</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">        <span class="comment">--支持中文</span></span><br><span class="line">        <span class="comment">--语调,1.0默认</span></span><br><span class="line">        mTextSpeech.setPitch(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">--语速,1.0默认</span></span><br><span class="line">        mTextSpeech.setSpeechRate(<span class="number">1</span>);</span><br><span class="line">        mTextSpeech.speak(<span class="string">&quot;你好，MLua手册。你好，世界！&quot;</span>, TextToSpeech.QUEUE_FLUSH, <span class="literal">nil</span>);</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>载入窗口传参，窗口回调事件</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%BD%BD%E5%85%A5%E7%AA%97%E5%8F%A3%E4%BC%A0%E5%8F%82%EF%BC%8C%E7%AA%97%E5%8F%A3%E5%9B%9E%E8%B0%83%E4%BA%8B%E4%BB%B6-2021-11-08%2022:27:33/</url>
    <content><![CDATA[<h1>载入窗口传参，窗口回调事件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--载入窗口传参</span></span><br><span class="line">activity.newActivity(<span class="string">&quot;窗口名&quot;</span>,&#123;参数&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--渐变动画效果的，中间是安卓跳转动画代码</span></span><br><span class="line">activity.newActivity(<span class="string">&quot;窗口名&quot;</span>,android.R.anim.fade_in,android.R.anim.fade_out,&#123;参数&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--窗口回调事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onActivityResult</span><span class="params">()</span></span></span><br><span class="line">  <span class="comment">--事件</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>返回最小化</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%BF%94%E5%9B%9E%E6%9C%80%E5%B0%8F%E5%8C%96-2021-11-12%2007:46:42/</url>
    <content><![CDATA[<h1>返回最小化</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--小菜鸟，这个可以挂后台</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onKeyDown</span><span class="params">(e)</span></span></span><br><span class="line">  <span class="keyword">if</span> e==<span class="number">4</span> <span class="keyword">then</span></span><br><span class="line">    import <span class="string">&quot;android.content.Intent&quot;</span><span class="comment">--记得这个</span></span><br><span class="line">    intent=Intent();</span><br><span class="line">    intent.setAction(<span class="string">&quot;android.intent.action.MAIN&quot;</span>);</span><br><span class="line">    intent.addCategory(<span class="string">&quot;android.intent.category.HOME&quot;</span>);</span><br><span class="line">    activity.startActivity(intent)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>返回桌面</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E8%BF%94%E5%9B%9E%E6%A1%8C%E9%9D%A2-2021-11-12%2007:41:49/</url>
    <content><![CDATA[<h1>返回桌面</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">home=Intent(Intent.ACTION_MAIN);</span><br><span class="line">home.addCategory(Intent.CATEGORY_HOME);</span><br><span class="line">activity.startActivity(home);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>返回键与menu共存</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%BF%94%E5%9B%9E%E9%94%AE%E4%B8%8Emenu%E5%85%B1%E5%AD%98-2021-11-08%2022:23:50/</url>
    <content><![CDATA[<h1>返回键与menu共存</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--显示返回按钮</span></span><br><span class="line">activity.ActionBar.setDisplayHomeAsUpEnabled(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--添加menu</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onCreateOptionsMenu</span><span class="params">(menu)</span></span></span><br><span class="line"></span><br><span class="line">  menu.add(<span class="string">&quot;嘿嘿&quot;</span>) </span><br><span class="line">  menu.add(<span class="string">&quot;哈哈&quot;</span>) </span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onOptionsItemSelected</span><span class="params">(z)</span></span></span><br><span class="line">  t=z.getTitle()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> t==<span class="string">&quot;嘿嘿&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你点击了嘿嘿&quot;</span>)</span><br><span class="line">  <span class="keyword">elseif</span> z==<span class="string">&quot;哈哈&quot;</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(你点击了哈哈<span class="string">&quot;)</span></span><br><span class="line"><span class="string"> else</span></span><br><span class="line"><span class="string">    print(&quot;</span>退出程序<span class="string">&quot;)</span></span><br><span class="line"><span class="string">    activity.finish()</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">end</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>进度条变音量</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E8%BF%9B%E5%BA%A6%E6%9D%A1%E5%8F%98%E9%9F%B3%E9%87%8F-2021-11-08%2022:24:27/</url>
    <content><![CDATA[<h1>进度条变音量</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--导入AudioManager类</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line">import <span class="string">&quot;android.media.AudioManager&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--注意是改变媒体音量</span></span><br><span class="line"><span class="comment">--作者messy</span></span><br><span class="line"><span class="comment">--seekbar为进度条ID</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--得到音频管理对象</span></span><br><span class="line">mAudioManager = activity.getSystemService(Context.AUDIO_SERVICE);</span><br><span class="line"></span><br><span class="line"><span class="comment">--获取当前音乐音量</span></span><br><span class="line">mVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC); </span><br><span class="line"></span><br><span class="line"><span class="comment">--设置为seekbar音量的最大阶数</span></span><br><span class="line">seekbar.setMax(mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC));</span><br><span class="line"></span><br><span class="line"><span class="comment">--设置seekbar为当前音量进度 </span></span><br><span class="line">seekbar.setProgress(mVolume);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--绑定监听</span></span><br><span class="line">seekbar.setOnSeekBarChangeListener&#123;</span><br><span class="line">  onProgressChanged=<span class="function"><span class="keyword">function</span><span class="params">(a,i)</span></span></span><br><span class="line">    <span class="comment">--拖动seekbar时改变音量</span></span><br><span class="line">    mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, i, <span class="number">1</span>);<span class="comment">--设置1显示音量调节窗口0为隐藏</span></span><br><span class="line">    px=<span class="built_in">math</span>.<span class="built_in">floor</span>(i/mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC)*<span class="number">100</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;音量:&quot;</span>..px..<span class="string">&quot;%&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>退出页面，退出程序，结束程序</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E9%80%80%E5%87%BA%E9%A1%B5%E9%9D%A2%EF%BC%8C%E9%80%80%E5%87%BA%E7%A8%8B%E5%BA%8F%EF%BC%8C%E7%BB%93%E6%9D%9F%E7%A8%8B%E5%BA%8F-2021-11-08%2022:22:35/</url>
    <content><![CDATA[<h1>退出页面，退出程序，结束程序</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--退出页面</span></span><br><span class="line">activity.finish()</span><br><span class="line"></span><br><span class="line"><span class="comment">--退出程序</span></span><br><span class="line">activity.finish()</span><br><span class="line"></span><br><span class="line">………………………………</span><br><span class="line"><span class="comment">--结束进程</span></span><br><span class="line"><span class="built_in">os</span>.<span class="built_in">exit</span>()</span><br><span class="line"></span><br><span class="line">………………………………</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">结束程序()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">…………………………</span><br><span class="line"></span><br><span class="line"><span class="comment">--关闭对话框</span></span><br><span class="line"></span><br><span class="line">dl.dismiss()关闭对话框</span><br><span class="line">………………………………</span><br><span class="line"></span><br><span class="line"><span class="comment">--将dl.show赋值</span></span><br><span class="line">dialog=dl.show()</span><br><span class="line"><span class="comment">--在某按钮点击后关闭这个对话框</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zc.onClick</span><span class="params">()</span></span></span><br><span class="line">  dialog.dismiss()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>透明对话框</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E9%80%8F%E6%98%8E%E5%AF%B9%E8%AF%9D%E6%A1%86-2021-11-12%2012:27:27/</url>
    <content><![CDATA[<h1>透明对话框</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> 对话框=AlertDialog.Builder(this)</span><br><span class="line">.setMessage(<span class="string">&quot;透明&quot;</span>)</span><br><span class="line">.setPositiveButton(<span class="string">&quot;确定&quot;</span>, null)</span><br><span class="line">.<span class="built_in">create</span>() </span><br><span class="line"><span class="keyword">local</span> window =对话框.getWindow()</span><br><span class="line"><span class="keyword">local</span> lp =window.getAttributes()</span><br><span class="line">lp.alpha = <span class="number">0.6</span></span><br><span class="line">window.setAttributes(lp)</span><br><span class="line">对话框.show()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>递归搜索文件</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E9%80%92%E5%BD%92%E6%90%9C%E7%B4%A2%E6%96%87%E4%BB%B6-2021-11-12%2007:48:25/</url>
    <content><![CDATA[<h1>递归搜索文件</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span><span class="params">(catalog,name)</span></span></span><br><span class="line">  <span class="keyword">local</span> n=<span class="number">0</span></span><br><span class="line">  <span class="keyword">local</span> t=<span class="built_in">os</span>.<span class="built_in">clock</span>()</span><br><span class="line">  <span class="keyword">local</span> ret=&#123;&#125;</span><br><span class="line">  <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">  import <span class="string">&quot;java.io.File&quot;</span> </span><br><span class="line">  import <span class="string">&quot;java.lang.String&quot;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">FindFile</span><span class="params">(catalog,name)</span></span></span><br><span class="line">    <span class="keyword">local</span> name=<span class="built_in">tostring</span>(name)</span><br><span class="line">    <span class="keyword">local</span> ls=catalog.listFiles() <span class="keyword">or</span> File&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> 次数=<span class="number">0</span>,#ls<span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--local 目录=tostring(ls[次数])</span></span><br><span class="line">      <span class="keyword">local</span> f=ls[次数]</span><br><span class="line">      <span class="keyword">if</span> f.isDirectory() <span class="keyword">then</span><span class="comment">--如果是文件夹则继续匹配</span></span><br><span class="line">        FindFile(f,name)</span><br><span class="line">      <span class="keyword">else</span><span class="comment">--如果是文件则</span></span><br><span class="line">        n=n+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> n%<span class="number">1000</span>==<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--print(n,os.clock()-t)</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">local</span> nm=f.Name</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">find</span>(nm,name) <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--thread(insert,目录)</span></span><br><span class="line">          <span class="built_in">table</span>.<span class="built_in">insert</span>(ret,nm)</span><br><span class="line">          <span class="built_in">print</span>(nm)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      luajava.clear(f)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  FindFile(catalog,name)</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;ok&quot;</span>,n,#ret)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;java.io.File&quot;</span></span><br><span class="line"></span><br><span class="line">catalog=File(<span class="string">&quot;sdcard/&quot;</span>)</span><br><span class="line">name=<span class="string">&quot;.j?pn?g&quot;</span></span><br><span class="line"><span class="comment">--task(find,catalog,name,print)</span></span><br><span class="line">thread(<span class="built_in">find</span>,catalog,name)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>通知图库更新图片</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E9%80%9A%E7%9F%A5%E5%9B%BE%E5%BA%93%E6%9B%B4%E6%96%B0%E5%9B%BE%E7%89%87-2021-11-12%2007:42:20/</url>
    <content><![CDATA[<h1>通知图库更新图片</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--方法1 通过广播</span></span><br><span class="line">activity.sendBroadcast(Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,Uri.parse(<span class="string">&quot;file://&quot;</span>..图片路径)))</span><br><span class="line"></span><br><span class="line"><span class="comment">--方法2 MediaScannerConnection</span></span><br><span class="line">import <span class="string">&quot;android.media.MediaScannerConnection&quot;</span></span><br><span class="line">MediaScannerConnection.scanFile(activity, &#123;File(图片路径).getAbsolutePath()&#125;, <span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>部分属性代码</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E9%83%A8%E5%88%86%E5%B1%9E%E6%80%A7%E4%BB%A3%E7%A0%81-2021-11-08%2022:10:56/</url>
    <content><![CDATA[<h1>部分属性代码</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--垂直方向 </span></span><br><span class="line"> orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--垂直方向 </span></span><br><span class="line"><span class="comment">--水平方向 </span></span><br><span class="line"> orientation=<span class="string">&quot;horizontal&quot;</span>,<span class="comment">--水平方向 </span></span><br><span class="line"><span class="comment">--布局宽度 </span></span><br><span class="line"> layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度 </span></span><br><span class="line"><span class="comment">--布局高度 </span></span><br><span class="line"> layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度 </span></span><br><span class="line"><span class="comment">--权重值分配 </span></span><br><span class="line"> layout_weight=<span class="string">&quot;1&quot;</span>,<span class="comment">--权重值分配 </span></span><br><span class="line"><span class="comment">--重力属性 </span></span><br><span class="line"> gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--顶：top｜中：center｜左：left｜右：right｜底：bottom </span></span><br><span class="line"><span class="comment">--布局背景 </span></span><br><span class="line"> background=<span class="string">&quot;#ffffffff&quot;</span>,<span class="comment">--布局背景 </span></span><br><span class="line"><span class="comment">--控件设置ID </span></span><br><span class="line"> id=<span class="string">&quot;button&quot;</span>,<span class="comment">--控件ID </span></span><br><span class="line"><span class="comment">--单击事件 </span></span><br><span class="line"> onClick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span><span class="comment">--单击事件</span></span><br><span class="line"><span class="keyword">end</span>,<span class="comment">--单击事件 结束 </span></span><br><span class="line"><span class="comment">--↹布局边距 </span></span><br><span class="line"> layout_margin=<span class="string">&quot;8dp&quot;</span>,<span class="comment">--布局边距 </span></span><br><span class="line"><span class="comment">--∧布局顶距 </span></span><br><span class="line"> layout_marginTop=<span class="string">&quot;15dp&quot;</span>,<span class="comment">--布局顶距 </span></span><br><span class="line"><span class="comment">--＜布局左距 </span></span><br><span class="line"> layout_marginLeft=<span class="string">&quot;4%w&quot;</span>,<span class="comment">--布局左距 </span></span><br><span class="line"><span class="comment">--＞布局右距 </span></span><br><span class="line"> layout_marginRight=<span class="string">&quot;4%w&quot;</span>,<span class="comment">--布局右距 </span></span><br><span class="line"><span class="comment">--∨布局底距 </span></span><br><span class="line"> layout_marginBottom=<span class="string">&quot;15dp&quot;</span>,<span class="comment">--布局底距 </span></span><br><span class="line"><span class="comment">--布局填充 </span></span><br><span class="line"> padding=<span class="string">&quot;2dp&quot;</span>,<span class="comment">--布局填充 </span></span><br><span class="line"><span class="comment">--重力居顶↑置中 </span></span><br><span class="line"> gravity=<span class="string">&quot;top|center&quot;</span>,<span class="comment">--重力居顶｜置中 </span></span><br><span class="line"><span class="comment">--重力居底↓置中 </span></span><br><span class="line"> gravity=<span class="string">&quot;bottom|center&quot;</span>,<span class="comment">--重力居底｜置中 </span></span><br><span class="line"><span class="comment">--重力居顶↖置左 </span></span><br><span class="line"> gravity=<span class="string">&quot;top|left&quot;</span>,<span class="comment">--重力居顶｜置左 </span></span><br><span class="line"><span class="comment">--重力居顶↗置右 </span></span><br><span class="line"> gravity=<span class="string">&quot;top|right&quot;</span>,<span class="comment">--重力居顶｜置右 </span></span><br><span class="line"><span class="comment">--重力居左←置中 </span></span><br><span class="line"> gravity=<span class="string">&quot;left|center&quot;</span>,<span class="comment">--重力居左｜置中 </span></span><br><span class="line"><span class="comment">--重力居右→置中 </span></span><br><span class="line"> gravity=<span class="string">&quot;right|center&quot;</span>,<span class="comment">--重力居右｜置中 </span></span><br><span class="line"><span class="comment">--重力居左↙置底 </span></span><br><span class="line"> gravity=<span class="string">&quot;left|bottom&quot;</span>,<span class="comment">--重力居左｜置底 </span></span><br><span class="line"><span class="comment">--重力居右↘置底 </span></span><br><span class="line"> gravity=<span class="string">&quot;right|bottom&quot;</span>,<span class="comment">--重力居右｜置底 </span></span><br><span class="line"><span class="comment">--视图路径 </span></span><br><span class="line"> src=<span class="string">&quot;drawable/icon.png&quot;</span>,<span class="comment">--视图路径 </span></span><br><span class="line"><span class="comment">--图片颜色 </span></span><br><span class="line"> colorFilter=<span class="string">&quot;#ffffff&quot;</span>,<span class="comment">--图片颜色 </span></span><br><span class="line"><span class="comment">--图片显示类型 </span></span><br><span class="line"> scaleType=<span class="string">&quot;fitXY&quot;</span>,<span class="comment">--图片显示类型：centerCrop </span></span><br><span class="line"><span class="comment">--文本内容 </span></span><br><span class="line"> text=<span class="string">&quot;文本内容&quot;</span>,<span class="comment">--文本内容 </span></span><br><span class="line"><span class="comment">--文本大小 </span></span><br><span class="line"> textSize=<span class="string">&quot;16sp&quot;</span>,<span class="comment">--文本大小 </span></span><br><span class="line"><span class="comment">--文本颜色 </span></span><br><span class="line"> textColor=<span class="string">&quot;#ffffff&quot;</span>,<span class="comment">--文本颜色 </span></span><br><span class="line"><span class="comment">--文本显示类型 </span></span><br><span class="line"> typeface=Typeface.DEFAULT_BOLD,<span class="comment">--文本显示类型 </span></span><br><span class="line"><span class="comment">--文本可选复制 </span></span><br><span class="line"> textIsSelectable=<span class="literal">true</span>,<span class="comment">--内容可选复制 </span></span><br><span class="line"><span class="comment">--圆角半径 </span></span><br><span class="line"> radius=<span class="string">&quot;10dp&quot;</span>,<span class="comment">--圆角半径 </span></span><br><span class="line"><span class="comment">--卡片提升 </span></span><br><span class="line"> cardElevation=<span class="string">&quot;12dp&quot;</span>,<span class="comment">--卡片提升 </span></span><br><span class="line"><span class="comment">--阴影层次 </span></span><br><span class="line"> elevation=<span class="string">&quot;4dp&quot;</span>,<span class="comment">--阴影层次 </span></span><br><span class="line"><span class="comment">--卡片背景色 </span></span><br><span class="line"> cardBackgroundColor=<span class="string">&quot;#ffffff&quot;</span>,<span class="comment">--卡片背景色 </span></span><br><span class="line"><span class="comment">--纽扣背景色 </span></span><br><span class="line"> backgroundColor=<span class="string">&quot;#8EC0E4&quot;</span>,<span class="comment">--背景色 </span></span><br><span class="line"><span class="comment">--控件显示/隐藏/不可视 </span></span><br><span class="line"> visibility=<span class="number">8</span>,<span class="comment">--不可视4--隐藏8--显示0 </span></span><br><span class="line"><span class="comment">--控件透明度 </span></span><br><span class="line"> alpha=<span class="number">0.6</span>,<span class="comment">--控件透明度 </span></span><br><span class="line"><span class="comment">--开关控件颜色 </span></span><br><span class="line"> 填写控件ID.ThumbDrawable.setColorFilter(PorterDuffColorFilter(<span class="number">0xffff0000</span>,PorterDuff.Mode.SRC_ATOP))<span class="comment">--开关控件颜色 </span></span><br><span class="line"><span class="comment">--进度条颜色 </span></span><br><span class="line"> 填写控件ID.IndeterminateDrawable.setColorFilter(PorterDuffColorFilter(<span class="number">0xffff0000</span>,PorterDuff.Mode.SRC_ATOP))<span class="comment">--进度条颜色 </span></span><br><span class="line"><span class="comment">--隐藏光标 </span></span><br><span class="line"> cursorVisible=<span class="literal">false</span>,<span class="comment">--false隐藏,true则为显示 </span></span><br><span class="line"><span class="comment">--隐藏圆弧阴影 </span></span><br><span class="line"> overScrollMode=View.OVER_SCROLL_NEVER,<span class="comment">--隐藏圆弧阴影 </span></span><br><span class="line"><span class="comment">--输入法｜Enter键 </span></span><br><span class="line"> imeOptions=<span class="string">&quot;actionSearch&quot;</span>,<span class="comment">--输入法Enter键 </span></span><br><span class="line"><span class="comment">--编辑框｜限制最多输入 </span></span><br><span class="line"> maxLength=<span class="string">&quot;10&quot;</span>,<span class="comment">--限制最多输入文字 </span></span><br><span class="line"><span class="comment">--编辑框｜只可输入数字 </span></span><br><span class="line"> inputType=<span class="string">&quot;number&quot;</span>,<span class="comment">--设置只可输入数字 </span></span><br><span class="line"><span class="comment">--编辑框｜禁止换行输入 </span></span><br><span class="line"> singleLine=<span class="literal">true</span>,<span class="comment">--禁止换行输入 </span></span><br><span class="line"><span class="comment">--编辑框｜隐藏为*号 </span></span><br><span class="line"> password=<span class="literal">true</span>,<span class="comment">--自动隐藏为*号 </span></span><br><span class="line"><span class="comment">--编辑框｜文字过长隐藏 </span></span><br><span class="line"> ellipsize=<span class="string">&quot;end&quot;</span>,<span class="comment">--文字过长自动隐藏 </span></span><br><span class="line"><span class="comment">--编辑框｜气泡提示 </span></span><br><span class="line"> <span class="built_in">error</span>=<span class="string">&quot;请输入&quot;</span>,<span class="comment">--气泡提示 </span></span><br><span class="line"><span class="comment">--编辑框｜为空时显示 </span></span><br><span class="line"> hint=<span class="string">&quot; 请输入&quot;</span><span class="comment">--内容为空时显示 </span></span><br><span class="line"><span class="comment">--禁止弹出输入法 </span></span><br><span class="line"> focusableInTouchMode=<span class="literal">true</span>,<span class="comment">--禁止弹出输入法 </span></span><br><span class="line"><span class="comment">--禁用编辑框 </span></span><br><span class="line"> focusable=<span class="literal">false</span>,<span class="comment">--禁用编辑框 </span></span><br><span class="line"><span class="comment">--隐藏纵向滑条 </span></span><br><span class="line"> verticalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏纵向滑条 </span></span><br><span class="line"><span class="comment">--隐藏横向滑条 </span></span><br><span class="line"> horizontalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏横向滑条 </span></span><br><span class="line"><span class="comment">--控件是否可使用 </span></span><br><span class="line"> enabled=<span class="literal">false</span>,<span class="comment">--是否可使用 </span></span><br><span class="line"><span class="comment">--控件是否可点击 </span></span><br><span class="line"> focusable=<span class="literal">true</span>,<span class="comment">--是否可点击 </span></span><br><span class="line"><span class="comment">--调用系统窗口 </span></span><br><span class="line"> fitsSystemWindows=<span class="literal">true</span>,<span class="comment">--调用系统窗口 </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>LuaWebView设置UA</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/LuaWebView%E8%AE%BE%E7%BD%AEUA-2021-11-12%2007:41:34/</url>
    <content><![CDATA[<h1>LuaWebView设置UA</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.webkit.WebSettings&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> webSettings = LuaWebViewID.getSettings();</span><br><span class="line"><span class="keyword">local</span> newUserAgent = <span class="string">&quot;UA字符串&quot;</span>;</span><br><span class="line">webSettings.setUserAgentString(newUserAgent);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>防止抓包</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E9%98%B2%E6%AD%A2%E6%8A%93%E5%8C%85-2021-11-08%2022:21:46/</url>
    <content><![CDATA[<h1>防止抓包</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">back=<span class="literal">false</span></span><br><span class="line">thread(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">    import <span class="string">&quot;java.net.NetworkInterface&quot;</span></span><br><span class="line">    import <span class="string">&quot;java.util.Collections&quot;</span></span><br><span class="line">    import <span class="string">&quot;java.util.Enumeration&quot;</span></span><br><span class="line">    import <span class="string">&quot;java.util.Iterator&quot;</span></span><br><span class="line">    <span class="keyword">local</span> niList = NetworkInterface.getNetworkInterfaces()</span><br><span class="line">    <span class="keyword">if</span> niList ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">local</span> it = Collections.list(niList).iterator()</span><br><span class="line">      <span class="keyword">while</span> it.hasNext() <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">local</span> intf = it.<span class="built_in">next</span>()</span><br><span class="line">        <span class="keyword">if</span> intf.isUp() <span class="keyword">and</span> intf.getInterfaceAddresses().size() ~= <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">          <span class="keyword">if</span> String(<span class="string">&quot;tun0&quot;</span>).equals(intf.getName()) <span class="keyword">or</span> String(<span class="string">&quot;ppp0&quot;</span>).equals(intf.getName()) <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">            activity.finish()</span><br><span class="line">            back = <span class="literal">true</span></span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">            <span class="comment">--print(&quot;未开启VPN&quot;)</span></span><br><span class="line">            back = <span class="literal">false</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>隐藏顶部标题栏，隐藏标题栏</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E9%9A%90%E8%97%8F%E9%A1%B6%E9%83%A8%E6%A0%87%E9%A2%98%E6%A0%8F%EF%BC%8C%E9%9A%90%E8%97%8F%E6%A0%87%E9%A2%98%E6%A0%8F-2021-11-08%2022:20:24/</url>
    <content><![CDATA[<h1>隐藏顶部标题栏，隐藏标题栏</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">隐藏顶部标题栏①</span><br><span class="line"><span class="comment">--隐藏顶部标题栏</span></span><br><span class="line">activity.ActionBar.hide()activity.getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">隐藏标题栏②</span><br><span class="line"><span class="comment">--隐藏标题栏</span></span><br><span class="line">activity.ActionBar.hide()<span class="comment">--隐藏标题栏</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>震动</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E9%9C%87%E5%8A%A8-2021-11-08%2022:28:23/</url>
    <content><![CDATA[<h1>震动</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--震动</span></span><br><span class="line">import <span class="string">&quot;android.content.Context&quot;</span></span><br><span class="line"><span class="comment">--导入包</span></span><br><span class="line">vibrator = activity.getSystemService(Context.VIBRATOR_SERVICE)</span><br><span class="line">vibrator.vibrate( long&#123;<span class="number">100</span>,<span class="number">800</span>&#125; ,<span class="number">-1</span>)</span><br><span class="line"><span class="comment">--&#123;等待时间,振动时间,等待时间,振动时间,…&#125;</span></span><br><span class="line"><span class="comment">--&#123;0,1000,500,1000,500,1000&#125;</span></span><br><span class="line"><span class="comment">--别忘了申明权限</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>页内查找</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E9%A1%B5%E5%86%85%E6%9F%A5%E6%89%BE-2021-11-08%2022:17:51/</url>
    <content><![CDATA[<h1>页内查找</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">首先你需要写一个输入框</span><br><span class="line">EditText</span><br><span class="line">下面这个是查找功能，输入文字 然后查找</span><br><span class="line">浏览器id.findAllAsync(输入框id.text)</span><br><span class="line"></span><br><span class="line">下面这个是查找后的上翻功能，上一个关键词</span><br><span class="line">浏览器id.findNext(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">下面这个是查找后的下翻功能，下一个关键词</span><br><span class="line">浏览器id.findNext(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">下面这个是 在输入时后的一个输入框内容监听</span><br><span class="line">文本内容为 当前是第几个查找到的关键词 (position+<span class="number">1</span>)，和页内总共有几个关键词 all</span><br><span class="line">浏览器id.setFindListener&#123;</span><br><span class="line">  onFindResultReceived=<span class="function"><span class="keyword">function</span><span class="params">(position,all, b)</span></span> </span><br><span class="line">    文本控件id.setText(<span class="string">&quot;当前第&quot;</span>..(position+<span class="number">1</span>)..<span class="string">&quot;个文件&quot;</span>..<span class="string">&quot;总共找到&quot;</span>..all..<span class="string">&quot;个&quot;</span>); </span><br><span class="line"></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fa的浏览器id为webview 或者首字母大写</span><br><span class="line">其他浏览器id 可自定义写浏览器控件</span><br><span class="line"></span><br><span class="line">需要输入文字就自动查找页内文字的 </span><br><span class="line">可以把查找功能的代码 放到 文本控件id.setText的那行的代码的下一行里边</span><br><span class="line">有问题找我<span class="number">1577315441</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>高斯模糊</title>
    <url>/2021/11/12/alp%E4%BB%A3%E7%A0%81/%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A-2021-11-12%2007:39:20/</url>
    <content><![CDATA[<h1>高斯模糊</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--高斯模糊</span></span><br><span class="line"><span class="comment">--高斯模糊</span></span><br><span class="line"></span><br><span class="line">import <span class="string">&quot;android.renderscript.Element&quot;</span></span><br><span class="line">import <span class="string">&quot;android.renderscript.Allocation&quot;</span></span><br><span class="line">import <span class="string">&quot;android.renderscript.RenderScript&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Bitmap&quot;</span></span><br><span class="line">import <span class="string">&quot;android.renderscript.ScriptIntrinsicBlur&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Matrix&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 高斯模糊<span class="params">(id,tp,radius1,radius2)</span></span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">blur</span><span class="params">( context, bitmap, blurRadius)</span></span></span><br><span class="line">    renderScript = RenderScript.<span class="built_in">create</span>(context);</span><br><span class="line">    blurScript = ScriptIntrinsicBlur.<span class="built_in">create</span>(renderScript, Element.U8_4(renderScript));</span><br><span class="line">    inAllocation = Allocation.createFromBitmap(renderScript, bitmap);</span><br><span class="line">    outputBitmap = bitmap;</span><br><span class="line">    outAllocation = Allocation.createTyped(renderScript, inAllocation.getType());</span><br><span class="line">    blurScript.setRadius(blurRadius);</span><br><span class="line">    blurScript.setInput(inAllocation);</span><br><span class="line">    blurScript.forEach(outAllocation);</span><br><span class="line">    outAllocation.copyTo(outputBitmap);</span><br><span class="line">    inAllocation.destroy();</span><br><span class="line">    outAllocation.destroy();</span><br><span class="line">    renderScript.destroy();</span><br><span class="line">    blurScript.destroy();</span><br><span class="line">    <span class="keyword">return</span> outputBitmap;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">zoomBitmap</span><span class="params">(bitmap,scale)</span></span></span><br><span class="line">    w = bitmap.getWidth();</span><br><span class="line">    h = bitmap.getHeight();</span><br><span class="line">    matrix = Matrix();</span><br><span class="line">    matrix.postScale(scale, scale);</span><br><span class="line">    bitmap = Bitmap.createBitmap(bitmap, <span class="number">0</span>, <span class="number">0</span>, w, h, matrix, <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> bitmap;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">blurAndZoom</span><span class="params">(context,bitmap,blurRadius,scale)</span></span></span><br><span class="line">    <span class="keyword">return</span> zoomBitmap(blur(context,zoomBitmap(bitmap, <span class="number">1</span> / scale), blurRadius), scale);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  id.setImageBitmap(blurAndZoom(activity,tp,radius1,radius2))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">高斯模糊(id,tp,radius1,radius2)</span></span><br><span class="line"><span class="comment">radius1 范围：1-25</span></span><br><span class="line"><span class="comment">radius2 范围：1-？(据图片而定太大报错)</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--调用例子</span></span><br><span class="line">img=ImageView(activity)</span><br><span class="line">activity.setContentView(img)</span><br><span class="line"></span><br><span class="line">高斯模糊(img,loadbitmap(<span class="string">&quot;https://image.uisdc.com/wp-content/uploads/2019/06/uisdc-banner-20190614-2.jpg&quot;</span>),<span class="number">4</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>alp代码</tag>
      </tags>
  </entry>
  <entry>
    <title>部分布局代码</title>
    <url>/2021/11/08/alp%E4%BB%A3%E7%A0%81/%E9%83%A8%E5%88%86%E5%B8%83%E5%B1%80%E4%BB%A3%E7%A0%81-2021-11-08%2022:10:37/</url>
    <content><![CDATA[<h1>部分布局代码</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">《线性布局》</span><br><span class="line"> &#123;</span><br><span class="line">  LinearLayout,<span class="comment">--线性布局</span></span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;,<span class="comment">--线性布局结束</span></span><br><span class="line"> </span><br><span class="line">《帧布局》</span><br><span class="line"> &#123;</span><br><span class="line">  FrameLayout,<span class="comment">--帧布局</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;,<span class="comment">--帧布局结束</span></span><br><span class="line"> </span><br><span class="line">《相对布局》</span><br><span class="line"> &#123;</span><br><span class="line">  RelativeLayout,<span class="comment">--相对布局</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;,<span class="comment">--相对布局结束</span></span><br><span class="line"> </span><br><span class="line">《绝对布局》</span><br><span class="line"> &#123;</span><br><span class="line">  AbsoluteLayout,<span class="comment">--绝对布局</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;,<span class="comment">--绝对布局结束</span></span><br><span class="line"> </span><br><span class="line">《表格布局》</span><br><span class="line"> &#123;</span><br><span class="line">  TableLayout,<span class="comment">--表格布局</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;,<span class="comment">--表格布局结束</span></span><br><span class="line"> </span><br><span class="line">《纵向滑动控件》</span><br><span class="line"> &#123;</span><br><span class="line">  ScrollView,<span class="comment">--纵向滑动控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  overScrollMode=View.OVER_SCROLL_NEVER,<span class="comment">--隐藏圆弧阴影</span></span><br><span class="line">  verticalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏纵向滑条</span></span><br><span class="line">  &#123;</span><br><span class="line">    LinearLayout,<span class="comment">--线性布局</span></span><br><span class="line">    orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--布局方向</span></span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  &#125;,<span class="comment">--线性布局结束</span></span><br><span class="line">&#125;,<span class="comment">--纵向滑动控件结束</span></span><br><span class="line"> </span><br><span class="line">《横向滑动控件》</span><br><span class="line"> &#123;</span><br><span class="line">  HorizontalScrollView,<span class="comment">--横向滑动控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  overScrollMode=View.OVER_SCROLL_NEVER,<span class="comment">--隐藏圆弧阴影</span></span><br><span class="line">  horizontalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏横向滑条</span></span><br><span class="line">  &#123;</span><br><span class="line">    LinearLayout,<span class="comment">--线性布局</span></span><br><span class="line">    orientation=<span class="string">&quot;horizontal&quot;</span>,<span class="comment">--布局方向</span></span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">    gravity=<span class="string">&quot;left|center&quot;</span>,<span class="comment">--重力居左｜置中</span></span><br><span class="line">  &#125;,<span class="comment">--线性布局结束</span></span><br><span class="line">&#125;,<span class="comment">--横向滑动控件结束</span></span><br><span class="line"> </span><br><span class="line">《文本框控件》</span><br><span class="line"> &#123;</span><br><span class="line">  TextView,<span class="comment">--文本框控件</span></span><br><span class="line">  text=<span class="string">&quot;文本内容&quot;</span>,<span class="comment">--文本内容</span></span><br><span class="line">  textSize=<span class="string">&quot;15sp&quot;</span>,<span class="comment">--文本大小</span></span><br><span class="line">  textColor=<span class="string">&quot;#333333&quot;</span>,<span class="comment">--文本颜色</span></span><br><span class="line">  <span class="comment">--singleLine=true,--禁止换行输入</span></span><br><span class="line">&#125;, </span><br><span class="line">《纽扣控件》</span><br><span class="line"> &#123;</span><br><span class="line">  Button,<span class="comment">--纽扣控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  padding=<span class="string">&quot;2dp&quot;</span>,<span class="comment">--布局填充</span></span><br><span class="line">  text=<span class="string">&quot;纽扣名称&quot;</span>,<span class="comment">--文本内容</span></span><br><span class="line">&#125;, </span><br><span class="line">《图片框控件》</span><br><span class="line"> &#123;</span><br><span class="line">  ImageView,<span class="comment">--图片框控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;56dp&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;25dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  src=<span class="string">&quot;icon.png&quot;</span>,<span class="comment">--视图路径</span></span><br><span class="line">&#125;, </span><br><span class="line">《圆形图片控件》</span><br><span class="line"> &#123;</span><br><span class="line">  CircleImageView,<span class="comment">--圆形图片控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;60dp&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;60dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  src=<span class="string">&quot;icon.png&quot;</span>,<span class="comment">--视图路径</span></span><br><span class="line">&#125;, </span><br><span class="line">《卡片框控件》</span><br><span class="line"> &#123;</span><br><span class="line">  CardView,<span class="comment">--卡片框控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;80dp&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;80dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  cardElevation=<span class="string">&quot;2dp&quot;</span>,<span class="comment">--卡片提升</span></span><br><span class="line">  cardBackgroundColor=<span class="string">&quot;#ffffff&quot;</span>,<span class="comment">--卡片背景色</span></span><br><span class="line">  radius=<span class="string">&quot;10dp&quot;</span>,<span class="comment">--圆角半径</span></span><br><span class="line">&#125;,<span class="comment">--卡片框控件结束</span></span><br><span class="line"> </span><br><span class="line">《编辑框控件》</span><br><span class="line"> &#123;</span><br><span class="line">  EditText,<span class="comment">--编辑框控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  hint=<span class="string">&quot;输入内容&quot;</span>,<span class="comment">--编辑框内容为空时提示</span></span><br><span class="line">  textSize=<span class="string">&quot;15sp&quot;</span>,<span class="comment">--文本大小</span></span><br><span class="line">  singleLine=<span class="literal">true</span>,<span class="comment">--禁止换行输入</span></span><br><span class="line">  id=<span class="string">&quot;edit&quot;</span>,<span class="comment">--控件ID</span></span><br><span class="line">&#125;, </span><br><span class="line">《浏览器控件》</span><br><span class="line"> &#123;</span><br><span class="line">  LuaWebView,<span class="comment">--浏览器控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  id=<span class="string">&quot;llq&quot;</span>,<span class="comment">--控件ID</span></span><br><span class="line">&#125;, </span><br><span class="line">《视频控件》</span><br><span class="line"> &#123;</span><br><span class="line">  VideoView,<span class="comment">--视频控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  id=<span class="string">&quot;shiping&quot;</span>,<span class="comment">--控件ID</span></span><br><span class="line">&#125;, </span><br><span class="line">《水平分割线》</span><br><span class="line"> 水平分割线=&#123;</span><br><span class="line">  TextView,<span class="comment">--水平分割线</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;1px&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">  backgroundColor=<span class="string">&quot;#ffbebebe&quot;</span>,<span class="comment">--背景色</span></span><br><span class="line">&#125; </span><br><span class="line">《垂直分割线》</span><br><span class="line"> 垂直分割线=&#123;</span><br><span class="line">  TextView,<span class="comment">--垂直分割线</span></span><br><span class="line">  layout_width=<span class="string">&quot;1px&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">  backgroundColor=<span class="string">&quot;#ffbebebe&quot;</span>,<span class="comment">--背景色</span></span><br><span class="line">&#125; </span><br><span class="line">《针角分割线》</span><br><span class="line"> &#123;</span><br><span class="line">  CardView,<span class="comment">--针角分割线</span></span><br><span class="line">  layout_width=<span class="string">&quot;190%w&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;1px&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">  cardBackgroundColor=<span class="string">&quot;#FFBEBEBE&quot;</span>,<span class="comment">--卡片背景色</span></span><br><span class="line">  cardElevation=<span class="string">&quot;0dp&quot;</span>,<span class="comment">--卡片提升</span></span><br><span class="line">  radius=<span class="string">&quot;200dp&quot;</span>,<span class="comment">--圆角半径</span></span><br><span class="line">&#125;, </span><br><span class="line">《进度条控件》</span><br><span class="line"> &#123;</span><br><span class="line">  ProgressBar,<span class="comment">--进度条控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;60dp&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;60dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;, </span><br><span class="line">《单选控件》</span><br><span class="line"> &#123;</span><br><span class="line">  RadioGroup,<span class="comment">--单选控件</span></span><br><span class="line">  orientation=<span class="string">&quot;vertical&quot;</span>,<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  gravity=<span class="string">&quot;left|center&quot;</span>,<span class="comment">--重力居左｜置中</span></span><br><span class="line">  &#123;</span><br><span class="line">    RadioButton,<span class="comment">--单选按钮控件</span></span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">    layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">    text=<span class="string">&quot;文本内容&quot;</span>,<span class="comment">--文本内容</span></span><br><span class="line">    <span class="comment">--checked=true,--是否选中</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,<span class="comment">--单选控件结束</span></span><br><span class="line"> </span><br><span class="line">《复选框控件》</span><br><span class="line"> &#123;</span><br><span class="line">  CheckBox,<span class="comment">--复选框控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  text=<span class="string">&quot;文本内容&quot;</span>,<span class="comment">--文本内容</span></span><br><span class="line">  checked=<span class="literal">true</span>,<span class="comment">--是否选中</span></span><br><span class="line">&#125;, </span><br><span class="line">《开关控件》</span><br><span class="line"> &#123;</span><br><span class="line">  Switch,<span class="comment">--开关控件</span></span><br><span class="line">  switchMinWidth=<span class="string">&quot;50%w&quot;</span>,<span class="comment">--开关最小宽度</span></span><br><span class="line">  switchPadding=<span class="string">&quot;10%w&quot;</span>,<span class="comment">--设置开关与文字的空白距离</span></span><br><span class="line">  text=<span class="string">&quot;文本内容&quot;</span>,<span class="comment">--文本内容</span></span><br><span class="line">  textSize=<span class="string">&quot;16sp&quot;</span>,<span class="comment">--文本大小</span></span><br><span class="line">  textColor=<span class="string">&quot;#ff0000&quot;</span>,<span class="comment">--文本颜色</span></span><br><span class="line">  textOff=<span class="string">&quot;开&quot;</span>,<span class="comment">--设置开关checked的文字</span></span><br><span class="line">  textOn=<span class="string">&quot;关&quot;</span>,<span class="comment">--设置开关关闭时的文字  </span></span><br><span class="line">  showText=<span class="literal">true</span>,<span class="comment">--设置是否显示开关上的文字（API21及以上）</span></span><br><span class="line">  id=<span class="string">&quot;kaig&quot;</span>,<span class="comment">--控件ID</span></span><br><span class="line">&#125;, </span><br><span class="line">《页面视图控件》</span><br><span class="line"> &#123;</span><br><span class="line">  PageView,<span class="comment">--页面视图控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_weight=<span class="string">&quot;1&quot;</span>,<span class="comment">--重力分配</span></span><br><span class="line">  id=<span class="string">&quot;huadong&quot;</span>,<span class="comment">--控件ID</span></span><br><span class="line">  pages=&#123;</span><br><span class="line">    页面名称<span class="number">1</span>,</span><br><span class="line">    页面名称<span class="number">2</span>,</span><br><span class="line">    页面名称<span class="number">3</span>,</span><br><span class="line">  &#125;,<span class="comment">--页面控件结束</span></span><br><span class="line">&#125;,<span class="comment">--页面视图控件结束</span></span><br><span class="line"> </span><br><span class="line">《列表视图控件》</span><br><span class="line"> &#123;</span><br><span class="line">  ListView,<span class="comment">--列表视图控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  dividerHeight=<span class="string">&quot;1&quot;</span>,<span class="comment">--分割线高度</span></span><br><span class="line">  verticalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏滑条</span></span><br><span class="line">&#125;, </span><br><span class="line">《网格控件》</span><br><span class="line"> &#123;</span><br><span class="line">  GridView,<span class="comment">--网格控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">  numColumns=<span class="string">&quot;3&quot;</span>,<span class="comment">--设置列数</span></span><br><span class="line">  overScrollMode=<span class="string">&quot;2&quot;</span>,<span class="comment">--去除滑动圆弧形</span></span><br><span class="line">  verticalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏滑条</span></span><br><span class="line">  id=<span class="string">&quot;list&quot;</span>,<span class="comment">--控件ID</span></span><br><span class="line">&#125;, </span><br><span class="line">《堆栈视图控件》</span><br><span class="line"> &#123;</span><br><span class="line">  StackView,<span class="comment">--堆栈视图控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;, </span><br><span class="line">《表面视图控件》</span><br><span class="line"> &#123;</span><br><span class="line">  SurfaceView,<span class="comment">--表面视图控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;, </span><br><span class="line">《多级列表控件》</span><br><span class="line"> &#123;</span><br><span class="line">  ExpandableListView,<span class="comment">--多级列表控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  dividerHeight=<span class="string">&quot;0&quot;</span>,<span class="comment">--去掉分割线，则修改为1</span></span><br><span class="line">  verticalScrollBarEnabled=<span class="literal">false</span>,<span class="comment">--隐藏滑条</span></span><br><span class="line">&#125;, </span><br><span class="line">《拖动条控件》</span><br><span class="line"> &#123;</span><br><span class="line">  SeekBar,<span class="comment">--拖动条控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;wrap&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_weight=<span class="string">&quot;1&quot;</span>,<span class="comment">--重力分配</span></span><br><span class="line">  layout_gravity=<span class="string">&quot;center&quot;</span>,<span class="comment">--重力居中</span></span><br><span class="line">&#125;, </span><br><span class="line">《查看视图控件》</span><br><span class="line"> &#123;</span><br><span class="line">  View,<span class="comment">--查看视图控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;1px&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;, </span><br><span class="line">《按钮控件》</span><br><span class="line"> &#123;</span><br><span class="line">  ToggleButton,<span class="comment">--按钮控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;40%w&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;50dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">&#125;, </span><br><span class="line">《图片按钮控件》</span><br><span class="line"> &#123;</span><br><span class="line">  ImageButton,<span class="comment">--图片按钮控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;50dp&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;50dp&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  src=<span class="string">&quot;icon.png&quot;</span>,<span class="comment">--视图路径</span></span><br><span class="line">&#125;, </span><br><span class="line">《Lua编辑控件》</span><br><span class="line"> &#123;</span><br><span class="line">  LuaEditor,<span class="comment">--lua编辑框控件</span></span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,<span class="comment">--布局高度</span></span><br><span class="line">  layout_weight=<span class="string">&quot;1&quot;</span>,<span class="comment">--重力分配</span></span><br><span class="line">  id=<span class="string">&quot;edit&quot;</span>,<span class="comment">--控件ID</span></span><br><span class="line">&#125;, </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《自动补全文本框》</span><br><span class="line">&#123;</span><br><span class="line">AutoCompleteTextView;<span class="comment">--自动补全文本框</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">Gravity=<span class="string">&#x27;&#x27;</span>;<span class="comment">--对齐方式</span></span><br><span class="line">textColor=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">textSize=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">《计时器》</span><br><span class="line">&#123;</span><br><span class="line">Chronometer;<span class="comment">--计时器</span></span><br><span class="line">Gravity=<span class="string">&#x27;&#x27;</span>;<span class="comment">--对齐方式</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--计时器宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--计时器高度</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">《日期选择器》</span><br><span class="line">&#123;</span><br><span class="line">DatePicker;<span class="comment">--日期选择器</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--日期宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--日期高度</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">《折叠列表》</span><br><span class="line">&#123;</span><br><span class="line">ExpandableListView;<span class="comment">--折叠列表</span></span><br><span class="line">id=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">《网格控件》</span><br><span class="line">&#123;</span><br><span class="line">GridView;<span class="comment">--网格控件</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--网格宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--网格高度</span></span><br><span class="line">Gravity=<span class="string">&#x27;&#x27;</span>;<span class="comment">--对齐方式</span></span><br><span class="line">NumColumns=<span class="string">&#x27;&#x27;</span>;<span class="comment">--列数</span></span><br><span class="line"><span class="comment">--ColumnWidth=&#x27;&#x27;;--每一列的宽度</span></span><br><span class="line"><span class="comment">--StretchMode=&#x27;&#x27;;--缩放</span></span><br><span class="line"><span class="comment">--HorizontalSpacing=&#x27;&#x27;;--两列直接的边距</span></span><br><span class="line"><span class="comment">--VerticalSpacing=&#x27;&#x27;;--两行之间的间距</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《横向列表视图》</span><br><span class="line">&#123;</span><br><span class="line">HorizontalListView;<span class="comment">--横向列表视图</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《图片按钮》</span><br><span class="line">&#123;</span><br><span class="line">ImageButton;<span class="comment">--图片按钮</span></span><br><span class="line">src=<span class="string">&#x27;&#x27;</span>;<span class="comment">--图片路径</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--按钮宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--按钮高度</span></span><br><span class="line">layout_gravity=<span class="string">&#x27;&#x27;</span>;<span class="comment">--对齐方式</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《列表视图》</span><br><span class="line">&#123;</span><br><span class="line">ListView;<span class="comment">--列表视图</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">DividerHeight=<span class="string">&#x27;&#x27;</span>;<span class="comment">--设置分隔线宽度,0表示无分隔线</span></span><br><span class="line">background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《跑马灯》</span><br><span class="line">&#123;</span><br><span class="line">MarText;<span class="comment">--跑马灯</span></span><br><span class="line"><span class="comment">--TextView;--跑马灯</span></span><br><span class="line">Selected=<span class="literal">true</span>;<span class="comment">--文本可选</span></span><br><span class="line">ellipsize=<span class="string">&#x27;marquee&#x27;</span>;</span><br><span class="line">singleLine=<span class="literal">true</span>;<span class="comment">--单行显示</span></span><br><span class="line">text=<span class="string">&#x27;&#x27;</span>;<span class="comment">--显示的文本</span></span><br><span class="line">textColor=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">--注:文本字数需要大于屏幕宽才能滚起来</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《数值选择器》</span><br><span class="line">&#123;</span><br><span class="line">NumberPicker;<span class="comment">--数值选择器</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《图片缩放》</span><br><span class="line">&#123;</span><br><span class="line">PhotoView;<span class="comment">--图片缩放</span></span><br><span class="line">src=<span class="string">&#x27;&#x27;</span>;<span class="comment">--图片路径</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--图片宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--图片高度</span></span><br><span class="line">layout_gravity=<span class="string">&#x27;&#x27;</span>;<span class="comment">--子控件在父布局中的对齐方式</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《进度条》</span><br><span class="line">&#123;</span><br><span class="line">ProgressBar;<span class="comment">--进度条</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--进度条宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--进度条高度</span></span><br><span class="line">Max=<span class="string">&#x27;&#x27;</span>;<span class="comment">--设置最大进度</span></span><br><span class="line">Progress=<span class="string">&#x27;&#x27;</span>;<span class="comment">--设置当前进度</span></span><br><span class="line">SecondaryProgress=<span class="string">&#x27;&#x27;</span>;<span class="comment">--设置第二进度</span></span><br><span class="line"><span class="comment">--indeterminate=false;--设置是否为不明确进度进度条,true为明确</span></span><br><span class="line"><span class="comment">--indeterminate=false;--模糊模式,true为开启</span></span><br><span class="line"><span class="comment">--默认是圆圈</span></span><br><span class="line"><span class="comment">--超大号圆形风格</span></span><br><span class="line">style=<span class="string">&#x27;?android:attr/progressBarStyleLarge&#x27;</span>;</span><br><span class="line"><span class="comment">--小号风格</span></span><br><span class="line">style=<span class="string">&#x27;?android:attr/progressBarStyleSmall&#x27;</span>;</span><br><span class="line"><span class="comment">--标题型风格</span></span><br><span class="line">style=<span class="string">&#x27;?android:attr/progressBarStyleSmallTitle&#x27;</span>;</span><br><span class="line"><span class="comment">--长形进度条</span></span><br><span class="line">style=<span class="string">&#x27;?android:attr/progressBarStyleHorizontal&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《Pulling刷新》</span><br><span class="line">&#123;</span><br><span class="line">PullingLayout;<span class="comment">--Pulling刷新</span></span><br><span class="line">PullUpEnabled=<span class="literal">true</span>;<span class="comment">--上拉刷新</span></span><br><span class="line">PullDownEnabled=<span class="literal">true</span>;<span class="comment">--下拉刷新</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《评分条》</span><br><span class="line">&#123;</span><br><span class="line">RatingBar;<span class="comment">--评分条</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--评分条宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--评分条高度</span></span><br><span class="line"><span class="comment">--NumStars=&#x27;&#x27;;--设置当前显示的星数</span></span><br><span class="line"><span class="comment">--Rating=&#x27;&#x27;;--修改总共的星数</span></span><br><span class="line"><span class="comment">--StepSize=&#x27;&#x27;;--星增加时的步长</span></span><br><span class="line"><span class="comment">--isIndicator=true;--设置评分条是否可用</span></span><br><span class="line"><span class="comment">--大样式</span></span><br><span class="line"><span class="comment">--style=&#x27;?android:attr/ratingBarStyleIndicator&#x27;;</span></span><br><span class="line"><span class="comment">--小样式</span></span><br><span class="line"><span class="comment">--style=&#x27;?android:attr/ratingBarStyleSmall&#x27;;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《搜索控件》</span><br><span class="line">&#123;</span><br><span class="line">SearchView;<span class="comment">--搜索控件</span></span><br><span class="line">MaxWidth=<span class="string">&#x27;&#x27;</span>;<span class="comment">--最大宽度</span></span><br><span class="line">QueryHint=<span class="string">&#x27;&#x27;</span>;<span class="comment">--搜索框为空时提示的文本</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《拖动条控件》</span><br><span class="line">&#123;</span><br><span class="line">SeekBar;<span class="comment">--拖动条控件</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--拖动条宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--拖动条高度</span></span><br><span class="line">Max=<span class="string">&#x27;&#x27;</span>;<span class="comment">--设置最大进度</span></span><br><span class="line">Progress=<span class="string">&#x27;&#x27;</span>;<span class="comment">--设置当前进度</span></span><br><span class="line">SecondaryProgress=<span class="string">&#x27;&#x27;</span>;<span class="comment">--设置第二进度</span></span><br><span class="line"><span class="comment">--indeterminate=false;--设置是否为不明确进度进度条,true为明确</span></span><br><span class="line"><span class="comment">--indeterminate=false;--模糊模式,true为开启</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《下拉列表》</span><br><span class="line">&#123;</span><br><span class="line">Spinner;<span class="comment">--下拉列表</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《表格项》</span><br><span class="line">&#123;</span><br><span class="line">TableRow;<span class="comment">--表格项</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--表格宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--表格高度</span></span><br><span class="line">layout_column=<span class="string">&#x27;&#x27;</span>;<span class="comment">--指定该单元格在第几列显示</span></span><br><span class="line">layout_span=<span class="string">&#x27;&#x27;</span>;<span class="comment">--指定该单元格占据的列数(默认为1)</span></span><br><span class="line">Gravity=<span class="string">&#x27;&#x27;</span>;<span class="comment">--对齐方式</span></span><br><span class="line">background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《时间文本》</span><br><span class="line">&#123;</span><br><span class="line">TextClock;<span class="comment">--时间文本</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">layout_gravity=<span class="string">&#x27;&#x27;</span>;<span class="comment">--子控件在父布局中的对齐方式</span></span><br><span class="line">textColor=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">textSize=<span class="string">&#x27;&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">Format24Hour=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">Format12Hour=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="comment">--后两个的属性</span></span><br><span class="line"><span class="comment">--yyyy.MM.dd 年.月.日,</span></span><br><span class="line"><span class="comment">--EE 周几,部分手机上会显示星期几</span></span><br><span class="line"><span class="comment">--aa 上午或下午,24小时的时候什么都不会显示,12小时的时候会显示am或者pm部分手机显示的上午或下午</span></span><br><span class="line"><span class="comment">--MMMM.dd 月份.日</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《切换按钮》</span><br><span class="line">&#123;</span><br><span class="line">ToggleButton;<span class="comment">--切换按钮</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--按钮宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--按钮高度</span></span><br><span class="line">text=<span class="string">&#x27;&#x27;</span>;<span class="comment">--按钮初始化文本</span></span><br><span class="line">textOff=<span class="string">&#x27;&#x27;</span>;<span class="comment">--按钮未被选中时显示的文本</span></span><br><span class="line">textOn=<span class="string">&#x27;&#x27;</span>;<span class="comment">--按钮被选中时显示的文本</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《视频控件》</span><br><span class="line">&#123;</span><br><span class="line">VideoView;<span class="comment">--视频控件</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--视频宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--视频高度</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《水波纹布局》</span><br><span class="line">&#123;</span><br><span class="line">RippleLayout,<span class="comment">--水波纹布局</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">RippleColor=<span class="string">&#x27;&#x27;</span>;<span class="comment">--水波纹颜色</span></span><br><span class="line">RippleLineColor=<span class="string">&#x27;&#x27;</span>;<span class="comment">--水波纹线条颜色</span></span><br><span class="line">Circle=<span class="literal">true</span>;<span class="comment">--长按圆圈</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《滑动菜单布局》</span><br><span class="line">&#123;</span><br><span class="line">SlidingLayout;<span class="comment">--滑动菜单布局</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《表格布局》</span><br><span class="line">&#123;</span><br><span class="line">TableLayout;<span class="comment">--表格布局</span></span><br><span class="line">orientation=<span class="string">&#x27;&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《网格布局》</span><br><span class="line">&#123;</span><br><span class="line">GridLayout;<span class="comment">--网格布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">RowCount=<span class="string">&#x27;&#x27;</span>;<span class="comment">--行数</span></span><br><span class="line">ColumnCount=<span class="string">&#x27;&#x27;</span>;<span class="comment">--列数</span></span><br><span class="line">layout_width=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《纵向滚动》</span><br><span class="line">&#123;</span><br><span class="line">ScrollView,<span class="comment">--纵向滑动</span></span><br><span class="line">layout_width=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--高度</span></span><br><span class="line">VerticalScrollBarEnabled=<span class="literal">false</span>;<span class="comment">--隐藏纵向滑条</span></span><br><span class="line"><span class="comment">--布局写这</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《横向滚动》</span><br><span class="line">&#123;</span><br><span class="line">HorizontalScrollView,<span class="comment">--横向滑动</span></span><br><span class="line">layout_width=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--高度</span></span><br><span class="line">horizontalScrollBarEnabled=<span class="literal">false</span>;<span class="comment">--隐藏横向滑条</span></span><br><span class="line"><span class="comment">--布局写这</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《开关控件》</span><br><span class="line">&#123;</span><br><span class="line">Switch,<span class="comment">--开关控件</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《选择按钮》</span><br><span class="line">&#123;</span><br><span class="line">ToggleButton,<span class="comment">--选择按钮</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">《复选框》</span><br><span class="line">&#123;</span><br><span class="line">CheckBox,<span class="comment">--复选框</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>alp代码</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 安裝文檔(一) 快速開始</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E5%AE%89%E8%A3%9D%E6%96%87%E6%AA%94-%E4%B8%80-%E5%BF%AB%E9%80%9F%E9%96%8B%E5%A7%8B/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2021 年 09 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p>
<p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/3.8.4">3.8.4</a></p>
</div>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>📚  文檔目錄</p>
<p><a href="#">Post not found: Butterfly-安裝文檔-一-快速開始 🚀 快速開始</a> - <a href="#">Post not found: Butterfly-安裝文檔-二-主題頁面 📑 主題頁面</a> - <a href="#">Post not found: Butterfly-安裝文檔-三-主題配置-1 🛠 主題配置-1</a> - <a href="#">Post not found: Butterfly-安裝文檔-四-主題配置-2 ⚔️ 主題配置-2</a> - <a href="#">Post not found: Butterfly-安裝文檔-五-主題問答 ❓ 主題問答</a> - <a href="#">Post not found: Butterfly-安裝文檔-六-進階教程 ⚡️ 進階教程</a> - <a href="#">Post not found: Butterfly-安裝文檔-七-更新日誌 ✨ 更新日誌</a> - <a href="#">Post not found: Butterfly-打賞 🤞 打賞</a></p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示</p>
</div>
<hr>
<p><code>hexo-theme-butterfly</code>是基於 <a href="https://github.com/Molunerfinn/hexo-theme-melody">hexo-theme-melody</a> 的基礎上進行開發的。</p>
<h2 id="安裝">安裝</h2>
<div class="tabs" id="butterfly-install"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#butterfly-install-1"><i class="fab fa-github-square"></i>Git安裝 (Github)</button></li><li class="tab"><button type="button" data-href="#butterfly-install-2"><i class="fab fa-git-square"></i>Git安裝 (Gitee)</button></li><li class="tab"><button type="button" data-href="#butterfly-install-3"><i class="fab fa-npm"></i>npm安裝</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="butterfly-install-1"><p><strong>穩定版【建議】</strong></p>
<p>在你的 Hexo 根目錄裏</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> master https://github.com/jerryc127/hexo<span class="literal">-theme</span><span class="literal">-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure>
<p><strong>測試版</strong></p>
<blockquote>
<p>測試版可能存在 bug，追求穩定的請安裝穩定版</p>
</blockquote>
<p>如果想要安裝比較新的 dev 分支，可以</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> dev https://github.com/jerryc127/hexo<span class="literal">-theme</span><span class="literal">-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>升級方法：在主題目錄下，運行 <code>git pull</code></p>
</div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="butterfly-install-2"><p><strong>穩定版【建議】</strong></p>
<p>在你的 Hexo 根目錄裏</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> master https://gitee.com/immyw/hexo<span class="literal">-theme</span><span class="literal">-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure>
<p><strong>測試版</strong></p>
<blockquote>
<p>測試版可能存在Bugs，追求穩定的請安裝穩定版</p>
</blockquote>
<p>如果想要安裝比較新的dev分支，可以</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git clone <span class="literal">-b</span> dev https://gitee.com/immyw/hexo<span class="literal">-theme</span><span class="literal">-butterfly</span>.git themes/butterfly</span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>升級方法：在主題目錄下，運行<code>git pull</code></p>
</div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="butterfly-install-3"><blockquote>
<p>此方法只支持 Hexo 5.0.0 以上版本</p>
<p><em><strong>通過 npm 安裝並不會在 themes 裏生成主題文件夾，而是在 node_modules 裏生成</strong></em></p>
</blockquote>
<p>在你的 Hexo 根目錄裏</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">npm i hexo<span class="literal">-theme</span><span class="literal">-butterfly</span></span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>升級方法：在 Hexo 根目錄下，運行 <code>npm update hexo-theme-butterfly</code></p>
</div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="應用主題">應用主題</h2>
<p>修改 Hexo 根目錄下的 <code>_config.yml</code>，把主題改為<code>butterfly</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure>
<h2 id="安裝插件">安裝插件</h2>
<p>如果你沒有 pug 以及 stylus 的渲染器，請下載安裝：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">npm install hexo<span class="literal">-renderer</span><span class="literal">-pug</span> hexo<span class="literal">-renderer</span><span class="literal">-stylus</span> -<span class="literal">-save</span></span><br></pre></td></tr></table></figure>
<h2 id="升級建議">升級建議</h2>
<div class="note blue icon flat"><i class="note-icon fas fa-train"></i><p>升級完成後，請到 Github 的 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases">Releases</a> 界面 或者 <a href="https://butterfly.js.org/posts/198a4240/">文檔七</a> 查看新版的更新內容。</p>
<p>裏面有標注  <code>_config</code> 文件的變更內容（如有），請根據實際情況更新你的配置內容。</p>
</div>
<p>為了減少升級主題後帶來的不便，請使用以下方法（<strong>建議，可以不做</strong>）。</p>
<div class="tabs" id="update-suggestion"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#update-suggestion-1">_config.butterfly.yml</button></li><li class="tab"><button type="button" data-href="#update-suggestion-2">butterfly.yml【已棄用】</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="update-suggestion-1"><blockquote>
<p>此方法只支持 Hexo 5.0.0 以上版本，建議使用。</p>
<p>如果已經在 <code>source/_data/</code> 創建了 <code>butterfly.yml</code>，請記得<strong>刪除</strong>掉。</p>
</blockquote>
<p>在 hexo 的根目錄創建一個文件 <code>_config.butterfly.yml</code>，並把<strong>主題</strong>目錄的 <code>_config.yml</code> <strong>內容</strong>複製到 <code>_config.butterfly.yml</code> 去。( <strong>注意: 複製的是主題的 <code>_config.yml</code> ,而不是 hexo 的 <code>_config.yml</code></strong>)</p>
<blockquote>
<p><strong>注意：</strong> 不要把主題目錄的 <code>_config.yml</code> 刪掉</p>
</blockquote>
<blockquote>
<p><strong>注意：</strong> 以後只需要在 <code>_config.butterfly.yml</code>進行配置就行。<br>
如果使用了 <code>_config.butterfly.yml</code>， 配置主題的 <code>_config.yml</code> 將不會有效果。</p>
</blockquote>
<p>Hexo會自動<strong>合併</strong>主題中的<code>_config.yml</code>和 <code>_config.butterfly.yml</code>裏的配置，如果存在同名配置，會使用<code>_config.butterfly.yml</code>的配置，其優先度較高。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-docs-install-suggestion-1.png" alt="image-20200805191531090"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="update-suggestion-2"><div class="note pink icon flat"><i class="note-icon fas fa-bahai"></i><p>從 3.3.0 開始，這種方法不再支持</p>
</div>
<p><s>為了減少升級主題後帶來的不便, <code>Butterfly</code> 使用了 <a href="https://hexo.io/docs/data-files.html">data files</a> 特性。</s></p>
<p><s>推薦把<strong>主題</strong>默認的配置文件<code>_config.yml</code> 複製到 Hexo 根目錄下的<code>source/_data/</code> 目錄下，然後將文件名改為 <code>butterfly.yml</code>（如果<code>source/_data/</code> 的目錄不存在就創建一個）。</s></p>
<div class="note warning flat"><p><s>注意，如果你創建了<code>butterfly.yml</code>, 它將會替換主題默認配置文件<code>_config.yml</code>裏的配置項 (<s>不是合併而是替換</s>，3.1.0開始將會是合併)</s></p>
<p><s>採用<code>butterfly.yml</code>的目的是，因為升級主題的時候，有可能會覆蓋到配置文件，以至於每次更新的時候都需要重新配置文件。如果使用<code>butterfly.yml</code>，就算主題目錄下的<code>_config.yml</code>被覆蓋，主題只會去<code>butterfly.yml</code>讀取配置。</s></p>
<p><s>由於主題在添加功能或者修復Bugs的情況下，可能會涉及到<strong>配置文件</strong>的修改。這時候，如果升級主題，需要把新增加的配置添加到<code>butterfly.yml</code>去，不然很大機會會出現報錯。（ 3.1.0 之後，應該不會出現這種情況）</s></p>
</div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<a class="btn-beautify button--animated block right larger" href="/posts/dc584b87/" 
  title="📑 Butterfly 安裝文檔(二) 主題頁面"><i class="far fa-hand-point-right"></i><span>📑 Butterfly 安裝文檔(二) 主題頁面</span></a>
]]></content>
      <categories>
        <category>Docs文檔</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 安裝文檔(七) 更新日誌</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E5%AE%89%E8%A3%9D%E6%96%87%E6%AA%94-%E4%B8%83-%E6%9B%B4%E6%96%B0%E6%97%A5%E8%AA%8C/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2021 年 09 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p>
<p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/3.8.4">3.8.4</a></p>
</div>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>📚  文檔目錄</p>
<p><a href="#">Post not found: Butterfly-安裝文檔-一-快速開始 🚀 快速開始</a> - <a href="#">Post not found: Butterfly-安裝文檔-二-主題頁面 📑 主題頁面</a> - <a href="#">Post not found: Butterfly-安裝文檔-三-主題配置-1 🛠 主題配置-1</a> - <a href="#">Post not found: Butterfly-安裝文檔-四-主題配置-2 ⚔️ 主題配置-2</a> - <a href="#">Post not found: Butterfly-安裝文檔-五-主題問答 ❓ 主題問答</a> - <a href="#">Post not found: Butterfly-安裝文檔-六-進階教程 ⚡️ 進階教程</a> - <a href="#">Post not found: Butterfly-安裝文檔-七-更新日誌 ✨ 更新日誌</a> - <a href="#">Post not found: Butterfly-打賞 🤞 打賞</a></p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示</p>
</div>
<hr>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.8.4 (2021/09/18)</span></div>
    <div class="hide-content"><h2 id="3-8-4-2021-09-18">3.8.4 (2021/09/18)</h2>
<h2 id="Fix">Fix</h2>
<ol>
<li>修復開啟 photofigcaption 後，導致 inlineImg 標籤外掛顯示錯亂的 bug close #667</li>
<li>修復使用本地搜索時，搜索插件配置為不搜索文章內容會無法使用搜索的 bug close #666</li>
<li>修復可能導致相關文章鏈接出錯的 bug close #549</li>
</ol>
<h2 id="Improvement">Improvement</h2>
<ol>
<li>調整代碼框滾動條顏色 close #651</li>
<li>當圖片沒有 figcaption 時，不會添加 figcaption 代碼</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.8.3 (2021/07/30)</span></div>
    <div class="hide-content"><h2 id="3-8-3-2021-07-30">3.8.3 (2021/07/30)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復 Waline 評論系統 設置 avatarCDN 無效的 bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.8.2 (2021/07/20)</span></div>
    <div class="hide-content"><h2 id="3-8-2-2021-07-20">3.8.2 (2021/07/20)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復 footer 在部分瀏覽器沒有顯示在底部的 bug #616</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>修改配置文件註釋 #613</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.8.1 (2021/07/10)</span></div>
    <div class="hide-content"><h2 id="3-8-1-2021-07-10">3.8.1 (2021/07/10)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復 inline mathjax 有滾動條的 bug</li>
<li>修復友情鏈接的頭像帶有 Medium Zoom 燈箱的 bug #607</li>
<li>修復友情鏈接的頭像帶有 FancyBox 燈箱的 bug #607</li>
</ol>
<h3 id="Dependencies">Dependencies</h3>
<ol>
<li>update hexo-renderer-pug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.8.0 (2021/07/04)</span></div>
    <div class="hide-content"><h2 id="3-8-0-2021-07-04">3.8.0 (2021/07/04)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>archives 的 標題 在 menu 配置中獲取</p>
</li>
<li>
<p>移除最新評論的評論服務商選擇，默認為配置的第一個評論服務商</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: false</span><br><span class="line">  sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  limit: 6</span><br><span class="line">  storage: 10 # unit: mins, save data to localStorage</span><br><span class="line">  avatar: true</span><br><span class="line"><span class="deletion">-  # You can only choose one, or neither</span></span><br><span class="line"><span class="deletion">-  valine: false</span></span><br><span class="line"><span class="deletion">-  github_issues:</span></span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line"><span class="deletion">-    repo:</span></span><br><span class="line"><span class="deletion">-  disqus:</span></span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line"><span class="deletion">-    forum:</span></span><br><span class="line"><span class="deletion">-    api_key:</span></span><br><span class="line"><span class="deletion">-  twikoo: false</span></span><br><span class="line"><span class="deletion">-  waline: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>widget 寫法更改/可添加非 sticky 區域 widget</p>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>修改最新評論 icon</p>
</li>
<li>
<p>waline 顔色適配主題色</p>
</li>
<li>
<p>增加 waline avatarCDN 配置（最新評論也會更新）</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">waline:</span><br><span class="line">	...</span><br><span class="line"><span class="addition">+	avatarCDN： # Gravatar CDN baseURL</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>升級 facebook comment js 到 v10</p>
</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復友情鏈接和aside 頭像在 lazyload blur下的顯示 bug</li>
<li>修復設置 highlight_shrink: true 後，部分代碼框依舊展開的 bug #602</li>
<li>修復 mathjax 在列表下，導致 列表沒有樣式的 bug  #586</li>
<li>修復文章頁 mathjax 因字體小導致顯示重疊的 bug #587</li>
<li>修復當內容過少時，footer 沒有底部靠攏的 bug</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>UI 優化</li>
<li>waline 字體大小，頭像特效調整</li>
<li>pjax 優化</li>
<li>減少卡頓，apple 裝置首頁背景 background-attachment 設為 scroll</li>
<li>404 頁面不再顯示 rightside</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.7.8 (2021/06/05)</span></div>
    <div class="hide-content"><h2 id="3-7-8-2021-06-05">3.7.8 (2021/06/05)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>移除 waline 的 emojiCDN 和 emojiMaps 配置</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復 升級到 waline 1.x 而出現的 bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.7.7 (2021/05/11)</span></div>
    <div class="hide-content"><h2 id="3-7-7-2021-05-11">3.7.7 (2021/05/11)</h2>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>適配新版 waline 夜間模式</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.7.6 (2021/05/09)</span></div>
    <div class="hide-content"><h2 id="3-7-6-2021-05-09">3.7.6 (2021/05/09)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復標題/博客名有 ‘ 時，pjax 會報錯的 bug</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>css 調整</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.7.5 (2021/05/05)</span></div>
    <div class="hide-content"><h2 id="3-7-5-2021-05-05">3.7.5 (2021/05/05)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>site_verification 優化，需自行配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# Google Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# See: https://www.google.com/webmasters/</span></span><br><span class="line"><span class="deletion">-google_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Bing Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# See: https://www.bing.com/webmaster/</span></span><br><span class="line"><span class="deletion">-bing_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Baidu Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# See: https://ziyuan.baidu.com/site/</span></span><br><span class="line"><span class="deletion">-baidu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# 360 Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# see http://zhanzhang.so.com/</span></span><br><span class="line"><span class="deletion">-qihu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Yandex Webmaster tools verification setting</span></span><br><span class="line"><span class="deletion">-# see https://webmaster.yandex.com/</span></span><br><span class="line"><span class="deletion">-yandex_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+site_verification:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>lazyload 優化 (增加高斯模糊過度特效，增加配置 lazyload 範圍，佔位圖應用到全站)</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="deletion">-  post: /img/loading.gif</span></span><br><span class="line"><span class="addition">+  field: site # site/post</span></span><br><span class="line"><span class="addition">+  placeholder: /img/loading.gif</span></span><br><span class="line"><span class="addition">+  blur: false</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>增加 tags 標簽外掛 - label</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復開啟anchor後，文章頁跳轉回主頁，主頁網址的hash添加上文章頁最後一個標題的 bug</li>
<li>修復開啟anchor後,瀏覽器上一頁/下一頁 跳轉會 404 的bug (文章頁的url hash 在pjax下變成 undefined)</li>
<li>修復 lazyload 報 undefined 的 bug close #532</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>優化 pjax 下 404 頁面</li>
<li>優化 button tags 標簽外掛</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.7.1 (2021/03/30)</span></div>
    <div class="hide-content"><h2 id="3-7-1-2021-03-30">3.7.1 (2021/03/30)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復 github-issues 最新評論 獲取的url格式 bug</li>
<li>修復當標題有符號’時，disqus 和 disqusjs 無法加載的 bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.7.0 (2021/03/18)</span></div>
    <div class="hide-content"><h2 id="3-7-0-2021-03-18">3.7.0 (2021/03/18)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>更改子目錄的寫法，與父目錄一致</p>
</li>
<li>
<p>移除 artitalk （如需要，請安裝 hexo-butterfly-artitalk)</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# Artitalk</span></span><br><span class="line"><span class="deletion">-# see https://artitalk.js.org/</span></span><br><span class="line"><span class="deletion">-artitalk:</span></span><br><span class="line"><span class="deletion">-  appId:</span></span><br><span class="line"><span class="deletion">-  appKey:</span></span><br><span class="line"><span class="deletion">-  option:</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="deletion">-	artitalk: https://cdn.jsdelivr.net/npm/artitalk</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>katex_copytex 的js 和 css cdn 更換</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-katex_copytex: https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js</span></span><br><span class="line"><span class="deletion">-katex_copytex_css: https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+katex_copytex: https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js</span></span><br><span class="line"><span class="addition">+katex_copytex_css: https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>新增設置代碼高度限制，顯示展開按鈕</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+highlight_height_limit: false # unit: px</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>prismjs 也可以配置 code_word_wrap</p>
</li>
<li>
<p>增加 kbd 樣式 #507</p>
</li>
<li>
<p>添加waline,valine 和twikoo 提供的文章閲讀數配置 #502</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line"><span class="addition">+  visitor: false</span></span><br><span class="line">waline:</span><br><span class="line"><span class="addition">+  visitor: false</span></span><br><span class="line">twikoo:</span><br><span class="line"><span class="addition">+  visitor: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加 HexoPlusPlus_Talk（需要安裝 hexo-butterfly-hpptalk)</p>
</li>
<li>
<p>增加 tags 標簽外掛 inlineImg</p>
</li>
<li>
<p>gitalk 增加 option 配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  createIssueManually: false # Gitalk will create a corresponding github issue for your every single page automatically</span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復prismjs 在 ios safari 下自動換行的bug</li>
<li>修復默認代碼大小不會隨着字體放大/放小而改變的bug</li>
<li>修復prismjs 無法識別的語言 顯示 null 而不是顯示 code 的 bug</li>
<li>在完全沒有配置的情況下，運行時控制枱報null 的問題</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>主頁分頁會定位到文章區域 #519</li>
<li>css 優化，簡化自定義代碼色的 css 配置</li>
<li>搜索 hover 效果與其它目錄一致</li>
<li>百度統計適配 pjax #516</li>
<li>當文章頁cover 和 cover 的 default_img都沒有配置時，會去讀取default_top_img的參數</li>
<li>一句API 改為 https</li>
<li>pug代碼優化</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.6.2 (2021/02/03)</span></div>
    <div class="hide-content"><h2 id="3-6-2-2021-02-03">3.6.2 (2021/02/03)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>mathjax 和 katex 沒有加載js的bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.6.1 (2021/02/01)</span></div>
    <div class="hide-content"><h2 id="3-6-1-2021-02-01">3.6.1 (2021/02/01)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>非ios設備下，手機頁面下文章頁有toc的界面出現滾動條</li>
<li>非ios設備下，在layout標簽內的元素，如是position: fixed，其相對定位會更改 #482 #483</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.6.0 (2021/01/30)</span></div>
    <div class="hide-content"><h2 id="3-6-0-2021-01-30">3.6.0 (2021/01/30)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>增加首頁評論數顯示</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">comments:</span><br><span class="line">  ...</span><br><span class="line">  count: false # Display comment count in post&#x27;s top_img</span><br><span class="line"><span class="addition">+  card_post_count: false # Display comment count in Home Page</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>最新評論更新</p>
<ol>
<li><code>&lt;a&gt;</code> 標簽將會顯示 <code>[鏈接]</code></li>
<li><code>&lt;img&gt;</code>標簽將會顯示 <code>[圖片]</code></li>
<li><code>&lt;pre&gt;&lt;code&gt;</code> 標簽將顯示 <code>[代碼]</code></li>
<li>github-issues 獲取到的 url 改為對應文章地址，而不是issues地址</li>
<li>時間 time 增加 datetime屬性</li>
<li>waline 獲取到頭像會先匹配 waline數據庫是否有qq頭像屬性</li>
<li>部分評論顯示的時間改為更新時間</li>
</ol>
</li>
<li>
<p>aside ‘查看更多’按鈕 改為 圖標顯示在右上角</p>
</li>
<li>
<p>可配置最新評論的緩存時間</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: false</span><br><span class="line">  sort_order: # Don&#x27;t modify the setting unless you know how it works</span><br><span class="line">  limit: 6</span><br><span class="line"><span class="addition">+  storage: 10 # unit: mins, save data to localStorage</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加 post_pagination 配置(可關閉/配置分頁展示邏輯)</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# post_pagination (分頁)</span></span><br><span class="line"><span class="addition">+# value: 1 || 2 || false</span></span><br><span class="line"><span class="addition">+# 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="addition">+# 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="addition">+# false: disable pagination</span></span><br><span class="line"><span class="addition">+post_pagination: 1</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>文章版權右上角改為 版權icon</p>
</li>
<li>
<p>增加配置 disable_top_img，禁用所有的top_img</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Disable all banner image</span></span><br><span class="line"><span class="addition">+disable_top_img: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加 文章編輯</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Post edit</span></span><br><span class="line"><span class="addition">+# Easily browse and edit blog source code online.</span></span><br><span class="line"><span class="addition">+post_edit:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  # url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/</span></span><br><span class="line"><span class="addition">+  # For example: https://github.com/jerryc127/butterfly.js.org/edit/main/source/</span></span><br><span class="line"><span class="addition">+  url:</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復 文章頁面上滑子菜單圖標文字無法顯示的 bug #481</li>
<li>修復在 chrome上，進入頁面時，頁面元素會出現模糊到清晰 的 bug #479</li>
<li>修復夜間模式下，閲讀模式代碼塊背景顔色的顯示bug</li>
<li>修復打賞按鈕字數過多導致Hover異常的bug #473</li>
<li>修復評論裏  行內元素（表情/圖片）變成塊級元素（換行）的bug</li>
<li>修復點擊toc後，滾動完toc的highlight在點擊的上一個元素</li>
<li>修復子目錄下，打賞圖片跳轉鏈接會錯誤的bug</li>
<li>修復文字點擊關閉random無效的bug</li>
<li>修復手持設備橫向翻轉時，menu 沒有進行判斷,而導致樣式錯亂的bug</li>
<li>修復pjax下不會跳轉404頁面的bug</li>
<li>修復twikoo 評論數獲取會因為地域問題報錯的bug</li>
<li>修復 background-image 遇到鏈接有括號時會無法顯示的bug</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>meta description  限制在150字以內 #480</li>
<li>pug優化和結構調整</li>
<li>pug 判斷優化</li>
<li>友情鏈接界面增加title顯示（top_img設為false時）</li>
<li>升級facebook comment sdk版本</li>
<li>優化toc顯示，當向上滾動時，導航欄不會遮擋 toc #472</li>
<li>pangu 改為全站渲染</li>
<li>最新評論js優化</li>
<li>調整 Readmode 標題邊距</li>
<li>卡片 hover box-shadow 微調</li>
<li>404頁面卡片增加hover</li>
<li>刪除部分多餘的代碼</li>
</ol>
<h3 id="Remove">Remove</h3>
<ol>
<li>
<p>移除百度推送（百度已棄用）和百度轉碼</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# Disable Baidu transformation on mobile devices (禁止百度轉碼)</span></span><br><span class="line"><span class="deletion">-disable_baidu_transformation: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# Baidu Push (百度推送)</span></span><br><span class="line"><span class="deletion">-baidu_push: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>移除 fragment_cache 配置（默認開啟）</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# Caches the contents in a fragment, speed up the generation (開啟hexo自帶的緩存,加快生成速度)</span></span><br><span class="line"><span class="deletion">-fragment_cache: true</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.5.1 (2020/12/31)</span></div>
    <div class="hide-content"><h2 id="3-5-1-2020-12-31">3.5.1 (2020/12/31)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>twikoo增加 region 配置</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復twikoo 廣州地域下，最新評論無法讀取的bugs</li>
<li>修復waline背景設置無效的bugs</li>
<li>修復twikoo 廣州地域下，page 頁進入post頁，twikoo評論報錯的bugs</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.5.0 (2020/12/30)</span></div>
    <div class="hide-content"><h2 id="3-5-0-2020-12-30">3.5.0 (2020/12/30)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>aside 個人資料widget可關閉button</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line"> ...</span><br><span class="line">  card_author:</span><br><span class="line">    enable: true</span><br><span class="line">    description:</span><br><span class="line">    button:</span><br><span class="line"><span class="addition">+      enable: true</span></span><br><span class="line">      icon: fab fa-github</span><br><span class="line">      text: 主題 GitHub</span><br><span class="line">      link: https://github.com/jerryc127/hexo-theme-butterfly</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>新增 Cloudflare Analytics</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Cloudflare Analytics</span></span><br><span class="line"><span class="addition">+# https://www.cloudflare.com/zh-tw/web-analytics/</span></span><br><span class="line"><span class="addition">+cloudflare_analytics:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>新增 Microsoft Clarity</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Microsoft Clarity</span></span><br><span class="line"><span class="addition">+# https://clarity.microsoft.com/</span></span><br><span class="line"><span class="addition">+microsoft_clarity:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>readmode 優化</p>
</li>
<li>
<p>aside 增加自定義 widget</p>
</li>
<li>
<p>aside widget 增加排序（只對page頁和sticky內的有效）</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line"> ...</span><br><span class="line">  card_recent_post:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_categories:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_tags:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_archives:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  card_webinfo:</span><br><span class="line"><span class="addition">+    sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"></span><br><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  sort_order: # Don&#x27;t modify the setting unless you know how it works</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>twikoo 增加 option 配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># Twikoo</span><br><span class="line"># https://github.com/imaegoo/twikoo</span><br><span class="line"><span class="deletion">-twikoo:</span></span><br><span class="line"><span class="addition">+twikoo:</span></span><br><span class="line"><span class="addition">+  envId:</span></span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加waline評論</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# waline - A simple comment system with backend support fork from Valine</span></span><br><span class="line"><span class="addition">+# https://waline.js.org/</span></span><br><span class="line"><span class="addition">+waline:</span></span><br><span class="line"><span class="addition">+  serverURL: # Waline server address url</span></span><br><span class="line"><span class="addition">+  avatar: monsterid # gravatar style https://zh-tw.gravatar.com/site/implement/images/#default-image</span></span><br><span class="line"><span class="addition">+  emojiCDN: # emoji CDN</span></span><br><span class="line"><span class="addition">+  bg: /img/comment_bg.png # waline background</span></span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加waline評論數顯示</p>
</li>
<li>
<p>增加waline最新評論模塊</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line">	...</span><br><span class="line"><span class="addition">+  waline: false</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>
<p>最新評論url 增加描點</p>
</li>
<li>
<p>html結構優化</p>
</li>
<li>
<p>修改newest_comments的leancloud為valine，並刪除其配置，改為讀取valine配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># Aside widget - Newest Comments</span><br><span class="line">newest_comments:</span><br><span class="line">  ...</span><br><span class="line"><span class="deletion">-  leancloud:</span></span><br><span class="line"><span class="deletion">-    enable: false</span></span><br><span class="line"><span class="deletion">-    appId: # leancloud application app id</span></span><br><span class="line"><span class="deletion">-    appKey: # leancloud application app key</span></span><br><span class="line"><span class="deletion">-    serverURL: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line"><span class="deletion">-    default_avatar: # mp/identicon/monsterid/wavatar/retro/robohash/blank</span></span><br><span class="line"><span class="addition">+ valine: false</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.4.2 (2020/12/27)</span></div>
    <div class="hide-content"><h2 id="3-4-2-2020-12-27">3.4.2 (2020/12/27)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復開啟 gitalk 評論數後與 toc 衝突的 bug #462</li>
<li>修復 jquery 在一些介面仍然載入問題</li>
<li>修復 medium zoom 報錯的 bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.4.1 (2020/12/15)</span></div>
    <div class="hide-content"><h2 id="3-4-1-2020-12-15">3.4.1 (2020/12/15)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復tabs 標簽外掛設為-1時，按鈕點擊沒反應的bugs</li>
</ol>
</div></div>
 <div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.4.0 (2020/12/13)</span></div>
    <div class="hide-content"><h2 id="3-4-0-2020-12-13">3.4.0 (2020/12/13)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>去除 jQuery</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>可配置是否添加css前綴</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Add the vendor prefixes to ensure compatibility</span></span><br><span class="line"><span class="addition">+css_prefix: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>點擊文字特效增加隨機配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">ClickShowText:</span><br><span class="line">  enable: false</span><br><span class="line">  text:</span><br><span class="line">    - I</span><br><span class="line">    - LOVEeeeeeeeeeeeee</span><br><span class="line">    - YOU</span><br><span class="line">  fontSize: 15px</span><br><span class="line"><span class="addition">+  random: true</span></span><br><span class="line">  mobile: false</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>右下角增加字體調整按鈕</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Change font size</span></span><br><span class="line"><span class="addition">+change_font_size: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加twikoo 最新評論</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">newest_comments:</span><br><span class="line">  enable: true</span><br><span class="line">	....</span><br><span class="line"><span class="addition">+  twikoo: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加twikoo評論數顯示</p>
</li>
<li>
<p>增加toc簡潔模式</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  number: true</span><br><span class="line"><span class="addition">+  style_simple: false</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復子目錄下，配置justifiedGallery CDN（相對鏈接）後，連接會無法訪問的bugs</li>
<li>修復沒有滾動條時，右下角按鈕顯示問題  #439</li>
<li>修復 pangu 配置post 後，仍在全站生效的bugs</li>
<li>修復resize 時，toc 的位置問題</li>
</ol>
<h3 id="Improvement">Improvement</h3>
<ol>
<li>最新評論頭像增加lazyload</li>
<li>最新評論優化，當沒有評論時顯示’沒有評論‘</li>
<li>toc點擊時改用document.getElementById獲取，預防有些字符導致無法跳轉 #426</li>
<li>若瀏覽器支持。scroll將採用原生瀏覽器支持的滾動方法</li>
<li>搜索優化</li>
<li>html格式優化</li>
<li>當屏幕沒有滾動條時，rightside會直接顯示</li>
<li>手機端toc邊距微調</li>
<li>fontawesome和google字體增加異步加載</li>
<li>夜間模式下，廣告降低亮度</li>
<li>當設置aside mobile為false時，toc仍然能顯示</li>
</ol>
<h3 id="Remove">Remove</h3>
<ol>
<li>刪除ICP配置， 如需要，請使用custom_text配置</li>
<li>刪除不必要的語言文件</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.3.0 (2020/10/28)</span></div>
    <div class="hide-content"><h2 id="3-3-0-2020-10-28">3.3.0 (2020/10/28)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>只支持 hexo 5.0.0 及以上版本</li>
<li>不再支持 butterfly.yml 寫法</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>Valine 增加 option 設置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line"><span class="addition">+  option:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>toc改為aside顯示,去掉sidebar</p>
<ol>
<li>
<p>手機toc ui 修改</p>
</li>
<li>
<p>去掉 toc auto_open 配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  number: true</span><br><span class="line"><span class="deletion">-  auto_open: true # auto open the sidebar</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>優化手機toc 的特效和按鈕出現的時機</p>
</li>
<li>
<p>aside狀態存<em>localStorage</em></p>
</li>
</ol>
</li>
<li>
<p>文章標題改為居中</p>
</li>
<li>
<p>aside 可配置隱藏/增加按鈕可展開或收縮aside</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  hide: false</span></span><br><span class="line"><span class="addition">+  button: true</span></span><br><span class="line">  mobile: true # display on mobile</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加Twikoo評論</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+twikoo:</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Improvements">Improvements</h3>
<ol>
<li>完善note標籤在readmode上的顯示</li>
<li>精簡css 和 js</li>
<li>pjax 優化</li>
<li>文章頁標題改為h1(seo)</li>
<li>canonical 改為hexo提供的函數生成</li>
<li>ICP SEO優化 <a href="https://github.com/jerryc127/hexo-theme-butterfly/pull/393">#393</a></li>
<li>調大sidebar的寬度</li>
<li>html結構調整，mobile-sidebar改為sidebar/search調整</li>
<li>滾動到評論按鈕只要用評論的頁面就出現</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復網站壓縮後，mermaid 會無法生成顯示的Bugs</li>
<li>修復當文章頁top_img設為false時，閲讀模式下文章內容不顯示的bugs</li>
<li>修復valine背景圖片再次出現時，由左到右移動的bugs</li>
<li>修復disqusjs沒有設置api時，沒有反代的bugs</li>
</ol>
<h3 id="Remove">Remove</h3>
<ol>
<li>刪除搜索不必要的配置</li>
<li>移除豆瓣配置,如需配置，請使用 hexo-butterfly-douban</li>
<li>刪除多餘的css和pug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.2.0 (2020/09/28)</span></div>
    <div class="hide-content"><h2 id="3-2-0-2020-09-28">3.2.0 (2020/09/28)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>更改canvas_ribbon_piao 為 canvas_fluttering_ribbon</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-canvas_ribbon_piao:</span></span><br><span class="line"><span class="addition">+canvas_fluttering_ribbon:</span></span><br><span class="line">  enable: false</span><br><span class="line">  mobile: false</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>刪除特效js,改為cdn引入</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">CDN:</span><br><span class="line">  # background effect</span><br><span class="line"><span class="deletion">-  canvas_ribbon: /js/third-party/canvas-ribbon.js</span></span><br><span class="line"><span class="deletion">-  canvas_ribbon_piao: /js/third-party/piao.js</span></span><br><span class="line"><span class="deletion">-  canvas_nest: /js/third-party/canvas-nest.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+  canvas_ribbon: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js</span></span><br><span class="line"><span class="addition">+  canvas_fluttering_ribbon: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js</span></span><br><span class="line"><span class="addition">+  canvas_nest: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js</span></span><br><span class="line"></span><br><span class="line">  # effect</span><br><span class="line"><span class="deletion">-  activate_power_mode: /js/third-party/activate-power-mode.js</span></span><br><span class="line"><span class="deletion">-  fireworks: /js/third-party/fireworks.js</span></span><br><span class="line"><span class="deletion">-  click_heart: /js/third-party/click_heart.js</span></span><br><span class="line"><span class="deletion">-  ClickShowText: /js/third-party/ClickShowText.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+  activate_power_mode: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js</span></span><br><span class="line"><span class="addition">+  fireworks: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js</span></span><br><span class="line"><span class="addition">+  click_heart: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js</span></span><br><span class="line"><span class="addition">+  ClickShowText: https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>可設置首頁文章不顯示內容/description</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># Display the article introduction on homepage</span><br><span class="line"># 1: description</span><br><span class="line"># 2: both (if the description exists, it will show description, or show the auto_excerpt)</span><br><span class="line"># 3: auto_excerpt (default)</span><br><span class="line"><span class="addition">+# false: do not show the article introduction</span></span><br><span class="line"><span class="comment">index_post_content:</span></span><br><span class="line">  method: 3</span><br><span class="line">  length: 500 # if you set method to 2 or 3, the length need to config</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>主頁文章時間和文章頁文章時間可以配置顯示日期還是相對時間</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  page: # Home Page</span><br><span class="line"><span class="addition">+    date_format: relative # date/relative 顯示日期還是相對日期</span></span><br><span class="line">  post:</span><br><span class="line"><span class="addition">+    date_format: relative # date/relative 顯示日期還是相對日期</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>top_img 可配置 （留空（默認色）/顏色（HEX值/RGB值/顔色單詞/漸變色)/圖片鏈接/ false（不顯示top_img））</p>
</li>
<li>
<p>footer可配置背景 [留空/false(默認色)/顏色（HEX值/RGB值/顔色單詞/漸變色)/圖片鏈接/true(跟top_img一樣)]</p>
</li>
<li>
<p>網站背景可配置 （顏色（HEX值/RGB值/顔色單詞/漸變色)/漸變色/圖片鏈接）</p>
</li>
<li>
<p>增加 tag_per_img 配置（可為各個tag 單獨配置top_img）</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+tag_per_img:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加 category_per_img 配置（可為各個category單獨配置top_img）</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+category_per_img:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>note 標籤優化(可自定義icon圖標/可覆蓋配置中的style)</p>
</li>
<li>
<p>夜間模式下，背景顔色/top-img/footer-bg 設置為顔色時，不再強制顯示黑色，而是改為遮罩降低亮度</p>
</li>
<li>
<p>增加部分特效 Mobile設置（activate_power_mode/fireworks/click_heart/ClickShowText)</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">activate_power_mode:</span><br><span class="line">  ...</span><br><span class="line"><span class="addition">+  mobile: false</span></span><br><span class="line"></span><br><span class="line">fireworks:</span><br><span class="line">   ...</span><br><span class="line"><span class="addition">+  mobile: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-click_heart: false</span></span><br><span class="line"><span class="addition">+click_heart:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  mobile: false</span></span><br><span class="line"></span><br><span class="line">ClickShowText:</span><br><span class="line">  enable: false</span><br><span class="line">  ...</span><br><span class="line"><span class="addition">+  mobile: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>添加 artitalk 説説插件</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Artitalk</span></span><br><span class="line"><span class="addition">+# see https://artitalk.js.org/</span></span><br><span class="line"><span class="addition">+artitalk:</span></span><br><span class="line"><span class="addition">+  appId:</span></span><br><span class="line"><span class="addition">+  appKey:</span></span><br><span class="line"><span class="addition">+  option:</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="addition">+  artitalk: https://cdn.jsdelivr.net/npm/artitalk</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>網頁進入動畫效果可關閉</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Enter transitions (開啟網頁進入效果)</span></span><br><span class="line"><span class="addition">+enter_transitions: true</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Improvements">Improvements</h3>
<ol>
<li>preloader 在 pjax 下 每個頁面都會加載</li>
<li>修改判斷，避免用户設置2個lightbox 而導致報錯（只能設置一個）</li>
<li>精確時間顯示 （剛剛/幾分鐘前/幾小時前/幾天前/幾個月前）</li>
<li>刪除不必要的語言文件和css</li>
<li>Open_Graph 改為 hexo 內置 生成</li>
<li>當隱藏部分沒配置時，左下角設置按鈕會消失 #353</li>
<li>aside 分類 收縮/展開 增加slide效果</li>
<li>darkmode 字體顔色加深</li>
<li>優化nav的進入，應該修復一些用户在本地測試中無法顯示nav的bugs</li>
<li>最新評論 leancloud呼叫由js sdk 改為 rest api 呼叫。應用可以不與valine同一個</li>
<li>最新評論增加錯誤輸出</li>
<li>tags 設定彩色顯示後，字型大小將根據tag的文章數量而變化 close #365</li>
<li>調整tags頁和categories頁在寬度小於768時的字體大小</li>
<li>主題文件分類調正</li>
<li>當點擊評論框時，valine背景圖片隱藏</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復當hexo的_config沒有設置description時，會導致pjax在頁面與文章間切換會無效 #381</li>
<li>修復鼠標點擊文字特效，文字過長導致頁面有滾動條的bugs</li>
<li>修復本地搜索文章鏈接無法跳轉bugs</li>
</ol>
<h3 id="Remove">Remove</h3>
<ol>
<li>
<p>移除anime js， 集成在fireworks的js裏</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  anime: https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>刪除不必要的語言檔案</p>
</li>
</ol>
<h3 id="chore">chore</h3>
<ol>
<li>update hexo-renderer-stylus to 2.0.1</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.1.1 (2020/09/06)</span></div>
    <div class="hide-content"><h2 id="3-1-1-2020-09-06">3.1.1 (2020/09/06)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復關閉last push date 後， 報 ‘hour’ 找不到的bugs</li>
<li>修復開啟 prismjs 後， 在低版本的 safari 會出現 js 報錯的 Bugs</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.1.0 (2020/08/31)</span></div>
    <div class="hide-content"><h2 id="3-1-0-2020-08-31">3.1.0 (2020/08/31)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>只支持 hexo 4.2.0 以上版本</li>
<li>butterfly.yml 採用deepMerge, 與_config文件進行合併而不是替換</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>適配 hexo 5.0.0 的 prismjs, 代碼主題和各項功能</p>
</li>
<li>
<p>適配hexo 5.1.0 prismjs caption</p>
</li>
<li>
<p>可隱藏 Mobile sidebar 子菜單</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Hide the child menu items in mobile sidebar</span></span><br><span class="line"><span class="addition">+hide_sidebar_menu_child: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>當寬度小於1024時，點擊toc滾動，增加滾動效果</p>
</li>
<li>
<p>可配置font-size/更改配置中 code-font 為 code-font-family</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">font:</span><br><span class="line"><span class="addition">+  global-font-size:</span></span><br><span class="line"><span class="addition">+  code-font-size:</span></span><br><span class="line">   font-family:</span><br><span class="line"><span class="deletion">-   code-font:</span></span><br><span class="line"><span class="addition">+   code-font-family:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>部分css由’px’改為’em’，適應font-size值改變而改變</p>
</li>
<li>
<p>pjax增加exclude配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-pjax: false</span></span><br><span class="line"><span class="addition">+pjax:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  exclude:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>新增 cnzz_analytics</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># Analysis</span><br><span class="line"># --------------------------------------</span><br><span class="line"></span><br><span class="line"># Baidu Analytics</span><br><span class="line"># https://tongji.baidu.com/web/welcome/login</span><br><span class="line">baidu_analytics:</span><br><span class="line"></span><br><span class="line"># Google Analytics</span><br><span class="line"># https://analytics.google.com/analytics/web/</span><br><span class="line">google_analytics:</span><br><span class="line"></span><br><span class="line"># Tencent Analytics</span><br><span class="line"># https://mta.qq.com/</span><br><span class="line">tencent_analytics: #500727214</span><br><span class="line"></span><br><span class="line"><span class="addition">+# CNZZ Analytics</span></span><br><span class="line"><span class="addition">+# https://www.umeng.com/</span></span><br><span class="line"><span class="addition">+cnzz_analytics:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>騰訊分析改為騰訊移動分析，並適配pjax</p>
</li>
<li>
<p>aside增加position sticky</p>
</li>
<li>
<p>更改addtoany item的寫法</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">addtoany:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="deletion">-  item:</span></span><br><span class="line"><span class="deletion">-    - facebook</span></span><br><span class="line"><span class="deletion">-    - twitter</span></span><br><span class="line"><span class="deletion">-    - wechat</span></span><br><span class="line"><span class="deletion">-    - sina_weibo</span></span><br><span class="line"><span class="deletion">-    - facebook_messenger</span></span><br><span class="line"><span class="deletion">-    - email</span></span><br><span class="line"><span class="deletion">-    - copy_link</span></span><br><span class="line"><span class="addition">+	item: facebook,twitter,wechat,sina_weibo,facebook_messenger,email,copy_link</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加最後更新時間顯示/增加post count 配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line"><span class="deletion">-  card_webinfo: true</span></span><br><span class="line"><span class="addition">+  card_webinfo:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    post_count: true</span></span><br><span class="line"><span class="addition">+    last_push_date: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加 aside 最新評論部件</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+newest_comments:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  limit: 6</span></span><br><span class="line"><span class="addition">+  avatar: true</span></span><br><span class="line"><span class="addition">+  leancloud:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">++    appId: # leancloud application app id</span></span><br><span class="line"><span class="addition">+    appKey: # leancloud application app key</span></span><br><span class="line"><span class="addition">+    serverURL: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line"><span class="addition">+    default_avatar: mp # mp/identicon/monsterid/wavatar/retro/robohash/blank</span></span><br><span class="line"><span class="addition">+  github_issues:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    repo:</span></span><br><span class="line"><span class="addition">+  disqus:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    forum:</span></span><br><span class="line"><span class="addition">+    api_key:</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Improvements">Improvements</h3>
<ol>
<li>archives和card-post 改為flex佈局</li>
<li>點擊滾動，如果滾動是向上時，將會偏移60px， 避免導航欄遮擋 close #317</li>
<li>改cookies為<em>localStorage</em>存儲</li>
<li>設置中的theme_color可單獨配置幾個，而不需要全部開啟 close #314</li>
<li>調整webinfo 寬度小時的顯示</li>
<li>aside 內容邊距調整</li>
<li>Pjax下，刷新頁面時，會滾動到上次瀏覽的位置</li>
<li>修復mathjax溢出屏幕的Bugs # 321</li>
<li>部分css調整和html優化</li>
<li>刪除pwa中的theme-color配置，默認生成meta theme-color #340</li>
<li>補全card-categories和card-archives的 '查看更多‘鏈接 #337</li>
<li>代碼名字全大寫</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復canvas_nest 配置沒有生效的Bugs</li>
<li>修復rightsize-bottom配置無效的bug</li>
<li>修復夜間模式下代碼塊有背景的bugs（沒開啟渲染的情況下）</li>
<li>修復 prismjs 在 tags-toggle 外掛標簽裏，代碼塊顯示一行的bugs</li>
<li>修復當關閉代碼渲染後，標簽外掛裏的代碼塊會被壓縮到一行的bugs</li>
<li>修復在modern樣式下，note 標簽外掛沒有使用tags名時，沒有背景色和夜間模式文字顯示不清楚的bugs</li>
<li>修復主頁文章cover在深色模式下，邊角有小白邊的bugs #278</li>
<li>修復note標簽外掛下，代碼塊顯示背景色的bugs close #339</li>
<li>修復toc 滾動百分比不準的Bugs</li>
<li>修復comments沒設置時，報Unexpected token ')'的bugs #344</li>
<li>修復網站子目錄下，相關文章cover無法顯示的bugs #334</li>
</ol>
<h3 id="Remove">Remove</h3>
<ol>
<li>去除字體放大、縮小按鈕</li>
<li>移除 代碼default主題</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.0.1 (2020/08/11)</span></div>
    <div class="hide-content"><h2 id="3-0-1-2020-08-11">3.0.1 (2020/08/11)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復導航側邊欄沒有進入特效的Bugs</li>
<li>修復Hexo 5.0.0 以下版本， toc遇到中文不會滾動的bugs</li>
<li>修復pjax下，同時開啟Open_Graph_meta和Livere，Livere評論後台顯示的來源頁面與實際不同 的bugs</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.0.0 (2020/08/05)</span></div>
    <div class="hide-content"><h2 id="3-0-0-2020-08-05">3.0.0 (2020/08/05)</h2>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復文章頁沒有lazyload的bugs</li>
<li>修復文章頁沒有lazyload的bugs</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.0.0-RC2 (2020/08/01)</span></div>
    <div class="hide-content"><h2 id="3-0-0-RC2-2020-08-01">3.0.0-RC2 (2020/08/01)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>支持雙評論系統配置/評論配置整理/評論增加lazyload</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+comments:</span></span><br><span class="line"><span class="addition">+  # Up to two comments system, the first will be shown as default</span></span><br><span class="line"><span class="addition">+  # Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Utterances/Facebook Comments</span></span><br><span class="line"><span class="addition">+  use:</span></span><br><span class="line"><span class="addition">+  # - Valine</span></span><br><span class="line"><span class="addition">+  # - Disqus</span></span><br><span class="line"><span class="addition">+  text: true # Display the comment name next to the button</span></span><br><span class="line"><span class="addition">+  # lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line"><span class="addition">+  # If you set it to false, the comment count will be invalid</span></span><br><span class="line"><span class="addition">+  lazyload: false</span></span><br><span class="line"><span class="addition">+  count: false # Display comment count in top_img</span></span><br><span class="line"></span><br><span class="line">disqus:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">disqusjs:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">livere:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line">gitalk:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">valine:</span><br><span class="line"><span class="deletion">-  enable: false # if you want use valine,please set this value is true</span></span><br><span class="line"><span class="deletion">-  count: false # dispaly comment count in top_img</span></span><br><span class="line"></span><br><span class="line">utterances:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line">facebook_comments:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  count: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>footer配置整理，修改部分用語  #279</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-since: 2020</span></span><br><span class="line"><span class="deletion">-footer_custom_text:</span></span><br><span class="line"><span class="deletion">-footer_copyright: true</span></span><br><span class="line"><span class="deletion">-ICP:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  url:</span></span><br><span class="line"><span class="deletion">-  text:</span></span><br><span class="line"><span class="deletion">-  icon: /img/icp.png</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+footer:</span></span><br><span class="line"><span class="addition">+  owner:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    since: 2020</span></span><br><span class="line"><span class="addition">+  custom_text: </span></span><br><span class="line"><span class="addition">+  copyright: true # Copyright of theme and framework</span></span><br><span class="line"><span class="addition">+  ICP: # Chinese ICP License</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    url:</span></span><br><span class="line"><span class="addition">+    text:</span></span><br><span class="line"><span class="addition">+    icon: /img/icp.png</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>移除‘添加書籤’功能，可執行配置按鈕</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line">  card_author:</span><br><span class="line">    enable: true</span><br><span class="line">    description:</span><br><span class="line"><span class="addition">+    button:</span></span><br><span class="line"><span class="addition">+      icon: fab fa-github</span></span><br><span class="line"><span class="addition">+      text: Follow Me</span></span><br><span class="line"><span class="addition">+      link: https://github.com/xxxxxx</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>copy的copyright增加字數限制配置，可配置多少字以上才添加版權信息</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">copy:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="deletion">-  copyright: false</span></span><br><span class="line"><span class="addition">+  copyright:</span></span><br><span class="line"><span class="addition">+    enable: false</span></span><br><span class="line"><span class="addition">+    limit_count: 50</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>aside recent post可設置按發表時間或者更新時間排序</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line">  card_recent_post:</span><br><span class="line">    enable: true</span><br><span class="line">    limit: 5 # if set 0 will show all</span><br><span class="line"><span class="addition">+    sort: date # date or updated</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>更換typed.js/meting CDN</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-typed: https://cdn.jsdelivr.net/npm/typed.js</span></span><br><span class="line"><span class="deletion">-meting_js: https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+typed: https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js</span></span><br><span class="line"><span class="addition">+meting_js: https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>增加文章過期提醒</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Displays outdated notice for a post (文章過期提醒)</span></span><br><span class="line"><span class="addition">+noticeOutdate:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  style: flat # style: simple/flat</span></span><br><span class="line"><span class="addition">+  limit_day: 500 # When will it be shown</span></span><br><span class="line"><span class="addition">+  position: top # position: top/bottom</span></span><br><span class="line"><span class="addition">+  message_prev: It has been</span></span><br><span class="line"><span class="addition">+  message_next: days since the last update, the content of the article may be outdated.</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加mac light 代碼框配色</p>
</li>
<li>
<p>文章copyright 可單獨配置</p>
</li>
<li>
<p>card-category 中category名稱和數字限制一行顯示</p>
</li>
<li>
<p>簡繁轉換優化，placeholder也會被轉換</p>
</li>
<li>
<p>引入css變數，減少css體積</p>
</li>
<li>
<p>新增 Pjax #234</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Pjax [Beta]</span></span><br><span class="line"><span class="addition">+# It may contain bugs and unstable, give feedback when you find the bugs.</span></span><br><span class="line"><span class="addition">+# https://github.com/MoOx/pjax</span></span><br><span class="line"><span class="addition">+pjax: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>添加第三方chat服務 crisp</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# crisp</span></span><br><span class="line"><span class="addition">+# https://crisp.chat/en/</span></span><br><span class="line"><span class="addition">+crisp:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  website_id:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>谷歌廣告增加自動廣告配置，減少不必要的js加載</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">google_adsense:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="addition">+  auto_ads: true</span></span><br><span class="line">  js: https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js</span><br><span class="line">  client:</span><br><span class="line">  enable_page_level_ads: true</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>當post_asset_folder為true時，post的top_img和cover可直接引用同名文件夾下的圖片，只需要寫圖片名字和後綴就行 #270</p>
</li>
<li>
<p>增加Yandex Webmaster tools verification配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Yandex Webmaster tools verification setting</span></span><br><span class="line"><span class="addition">+# see https://webmaster.yandex.com/</span></span><br><span class="line"><span class="addition">+yandex_site_verification:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>post-meta可以配置是否顯示文字</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">post_meta:</span><br><span class="line">  page: # Home Page</span><br><span class="line">    date_type: created # created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span><br><span class="line">    categories: true # true or false 主頁是否顯示分類</span><br><span class="line">    tags: false # true or false 主頁是否顯示標籤</span><br><span class="line"><span class="addition">+    label: true # true or false 顯示描述性文字</span></span><br><span class="line">  post:</span><br><span class="line">    date_type: both # created or updated or both 文章頁日期是創建日或者更新日或都顯示</span><br><span class="line">    categories: true # true or false 文章頁是否顯示分類</span><br><span class="line">    tags: true # true or false 文章頁是否顯示標籤</span><br><span class="line"><span class="addition">+    label: true # true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>手機端post-meta調整顯示/支持顯示分類</p>
</li>
<li>
<p>代碼框滾動條顔色隨代碼主題變化</p>
</li>
<li>
<p>頭像/打賞圖片 增加lazyload</p>
</li>
<li>
<p>提升highlight-tool的加載速度</p>
</li>
<li>
<p>disqus/disqusjs/facebook comments 可隨夜間模式按鈕切換而轉換主題</p>
</li>
<li>
<p>mathjax升級到3 #216</p>
</li>
<li>
<p>pangu.js 只會渲染 body-wrap 區域</p>
</li>
<li>
<p>放大字體和縮小字體 限制在 10px~20px</p>
</li>
<li>
<p>更新谷歌分析代碼（gtag）</p>
</li>
<li>
<p>移除blueimp_md5 js</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-blueimp_md5: https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>夜間模式和閲讀模式微調</p>
</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復右下角按鈕被button標籤外掛遮擋的bugs</li>
<li>修復開啟photofigcaption後，圖庫會出現界面錯亂的Bugs</li>
<li>修復tabs外掛標簽與aplayer插件衝突而異常的bugs</li>
<li>aplayer的間距調整</li>
<li>修復文章front-matter的highlight_shrink和toc為空時，會出現js報錯的bugs</li>
<li>修復BUTTON標籤嵌套使用在其他標籤時，生成多了br標籤而導致樣式不同的bugs</li>
<li>修復部分設備遇到mobile-sidebar無法滾動的bugs</li>
<li>修復文章頁部分元素內文字溢出的Bugs</li>
<li>調整當card-category有收縮按鈕時的顯示佈局</li>
<li>修復配置PWA參數時，如果網站是子目錄時，會出現加載不到文件的bugs</li>
<li>修復hexo douban插件 點擊上/下一頁出現圖片變為null的bugs</li>
<li>適配hexo 5.0.0 修復toc點擊不會跳轉的bugs</li>
<li>適配hexo 5.0.0 修復toc不會隨著文章而滾動的bugs</li>
<li>修復Valine 的requiredFields設置為空 無效的bugs</li>
<li>調整手機界面下ol ul li的邊距 #267</li>
<li>修復facebook comments 在手機下寬度不是100%的bugs</li>
<li>修復share.js 分享的文章圖片都顯示同一張的bugs</li>
<li>去除note標籤外掛設為modern時，a標籤的下劃線</li>
<li>修正一些不正確的html結構</li>
<li>修復fancybox的alt會顯示undefined的bugs</li>
<li>修復footer藍色背景下，icp 文字hover 文字變藍看不清的Bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>3.0.0-RC1 (2020/06/16)</span></div>
    <div class="hide-content"><h2 id="3-0-0-RC1-2020-06-16">3.0.0-RC1 (2020/06/16)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>從3.0開始，不再對IE瀏覽器進行適配</p>
</li>
<li>
<p>強制使用fontawesome v5（會對一些自定義icon產生影響，請替換為V5圖標）</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# fontawesome圖標</span></span><br><span class="line"><span class="deletion">-# 默認使用的是 fontawesome v4版本的圖標</span></span><br><span class="line"><span class="deletion">-fontawesome_v5:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  # fontawesome</span></span><br><span class="line"><span class="deletion">-  fontawesome_v4: https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css</span></span><br><span class="line"><span class="deletion">-  fontawesome_v5: https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css</span></span><br><span class="line"><span class="addition">+	fontawesome: https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>_config.yml 內容修改</p>
<ol>
<li>
<p>精簡baidu_push/instantpage/click_heart/readmode/footer_copyright/medium_zoom/fancybox配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-baidu_push:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-instantpage:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-click_heart:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-readmode:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-footer_copyright:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-medium_zoom:</span></span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-fancybox:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+baidu_push: false</span></span><br><span class="line"><span class="addition">+instantpage: true</span></span><br><span class="line"><span class="addition">+click_heart: false</span></span><br><span class="line"><span class="addition">+readmode: true</span></span><br><span class="line"><span class="addition">+footer_copyright: true</span></span><br><span class="line"><span class="addition">+medium_zoom: false</span></span><br><span class="line"><span class="addition">+fancybox: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>修改runtimeshow 的start_date 為publish_date</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">runtimeshow:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="deletion">-  start_date: 6/7/2018 00:00:00</span></span><br><span class="line"><span class="addition">+  publish_date: 6/7/2018 00:00:00</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>laibili 改名為 LiveRe</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-laibili:</span></span><br><span class="line"><span class="addition">+livere:</span></span><br><span class="line">  enable: false</span><br><span class="line">  uid:</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>改hr為hr_icon 可設置取消icon</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># 水平分隔綫</span><br><span class="line"><span class="deletion">-hr:</span></span><br><span class="line"><span class="addition">+hr_icon:</span></span><br><span class="line">  enable: true</span><br><span class="line">  icon: #fontawesome上圖標的Unicode</span><br><span class="line">  icon-top:</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>更改loading_bg為error_img，post-loading移到lazyload去</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-lodding_bg:</span></span><br><span class="line"><span class="addition">+error_img:</span></span><br><span class="line">  flink: /img/friend_404.gif #404後圖片</span><br><span class="line">  post_page: /img/404.jpg #404後圖片</span><br><span class="line"><span class="deletion">-  post: /img/loading.gif #加載動畫</span></span><br><span class="line"></span><br><span class="line">lazyload:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  post: /img/loading.gif #加載動畫</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>pangu 的field配置只能配置site/post</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">pangu:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="deletion">-  field: page # page/post</span></span><br><span class="line"><span class="addition">+  field: site # site/post</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>整合auto_open_sidebar到toc去</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">toc:</span><br><span class="line">  enable: true</span><br><span class="line">  number: true</span><br><span class="line"><span class="addition">+  auto_open: true # auto open the sidebar</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# auto open the sidebar in &#x27;post&#x27;</span></span><br><span class="line"><span class="deletion">-auto_open_sidebar:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>font去除enable配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># 全局字體</span><br><span class="line">font:</span><br><span class="line"><span class="deletion">-  enable: false</span></span><br><span class="line"><span class="deletion">-  font-family: Lato, Helvetica Neue For Number, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, PingFang SC, Hiragino Sans GB, MicrMicrosoft YaHei&quot;, Helvetica Neue, Helvetica, Arial, sans-serif</span></span><br><span class="line"><span class="deletion">-  code-font: consolas, Menlo, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, monospace, Helvetica Neue For Number</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+  font-family:</span></span><br><span class="line"><span class="addition">+  code-font:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>刪除部分配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line"><span class="deletion">-  notify: false # valine mail notify (true/false) Deprecated in v1.4.0+</span></span><br><span class="line"><span class="deletion">-  verify: false # valine verify code (true/false) Deprecated in v1.4.0+</span></span><br><span class="line"></span><br><span class="line">translate:</span><br><span class="line"><span class="deletion">-  #博客網址</span></span><br><span class="line"><span class="deletion">-  cookieDomain: &#x27;https://xxx/&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>刪除twitter_meta配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# twitter分享自動帶上樣式</span></span><br><span class="line"><span class="deletion">-# -https://i.loli.net/2019/09/08/qm3RfvUCKbct1Wz.png</span></span><br><span class="line"><span class="deletion">-twitter_meta: true</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>table寬度佔滿顯示</p>
</li>
<li>
<p>增加系統Darkmode切換監控，當系統切換Darkmode時，主題會立刻切換</p>
</li>
<li>
<p>card_description 支持html書寫</p>
</li>
<li>
<p>Dark Mode和Light Mode 切換按鈕icon更換</p>
</li>
<li>
<p>適配hexo自帶標簽 Pullquote</p>
</li>
<li>
<p>百度推送鏈接增加dns-prefetch</p>
</li>
<li>
<p>canonical 設為默認生成 不再提供配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# 避免重複網址分散seo</span></span><br><span class="line"><span class="deletion">-canonical: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>instantpage js 加載增加defer</p>
</li>
<li>
<p>fireworks 增加z-index配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">fireworks:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="addition">+  zIndex: 9999 # -1 or 9999</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>新的Tag Plugins - button</p>
</li>
<li>
<p>新的Tag Plugins - tabs</p>
</li>
<li>
<p>可配置justifiedGallery CDN</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # justifiedGallery</span></span><br><span class="line"><span class="addition">+  justifiedGallery_js: https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js</span></span><br><span class="line"><span class="addition">+  justifiedGallery_css: https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>新設計404頁面</p>
</li>
<li>
<p>aplayer js /css 可配置，在文章front-matter中設置aplayer. 防止aplayer在每個頁面都插入代碼</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # aplayer</span></span><br><span class="line"><span class="addition">+  aplayer_css: https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css</span></span><br><span class="line"><span class="addition">+  aplayer_js: https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js</span></span><br><span class="line"><span class="addition">+  meting_js: https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加在綫聊天 Chat Services (chatra/tidio/daovoice/gitter), 可配置主題chat按鈕替換原在綫聊天按鈕</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Chat Button [recommend]</span></span><br><span class="line"><span class="addition">+# It will create a button in the bottom right corner of website, and hide the origin button</span></span><br><span class="line"><span class="addition">+chat_btn: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# The origin chat button is displayed when scrolling up, and the button is hidden when scrolling down</span></span><br><span class="line"><span class="addition">+chat_hide_show: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# chatra</span></span><br><span class="line"><span class="addition">+# https://chatra.io/</span></span><br><span class="line"><span class="addition">+chatra:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  id:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# tidio</span></span><br><span class="line"><span class="addition">+# https://www.tidio.com/</span></span><br><span class="line"><span class="addition">+tidio:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  public_key:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# daovoice</span></span><br><span class="line"><span class="addition">+# http://daovoice.io/</span></span><br><span class="line"><span class="addition">+daovoice:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  app_id:</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# gitter</span></span><br><span class="line"><span class="addition">+# https://gitter.im/</span></span><br><span class="line"><span class="addition">+gitter:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  room:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>可配置rightside按鈕與底部的距</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# 右下角按鈕距離底部的距離(默認單位為px)</span></span><br><span class="line"><span class="addition">+rightside-bottom:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>更換lazyload服務商</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-	lazyload: https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js</span></span><br><span class="line"><span class="addition">+	lazyload: https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>card-categories增加收縮/展開按鈕</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line">  card_categories:</span><br><span class="line">    enable: true</span><br><span class="line">    limit: 8 # if set 0 will show all</span><br><span class="line"><span class="addition">+    expand: none # none/true/false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>更改auto_excerpt為index_post_content，並擁有三種方法可選</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# 自動節選</span></span><br><span class="line"><span class="deletion">-auto_excerpt:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"><span class="deletion">-  length: 150</span></span><br><span class="line"> </span><br><span class="line"><span class="addition">+# Display the article introduction on homepage</span></span><br><span class="line"><span class="addition">+# 1: description</span></span><br><span class="line"><span class="addition">+# 2: both (if the description exists, it will show description. or show the auto_excerpt)</span></span><br><span class="line"><span class="addition">+# 3: auto_excerpt (default)</span></span><br><span class="line"><span class="addition">+index_post_content:</span></span><br><span class="line"><span class="addition">+  method: 3</span></span><br><span class="line"><span class="addition">+  length: 500 # if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>可在post裏單獨設置 auto_open: false關掉sidebar自動打開 #232</p>
</li>
<li>
<p>友情鏈接界面代碼優化/增加分類描述/分類名字和描述可以不寫/友情鏈接yml寫法更改（舊的寫法依舊有效，沒影響）</p>
</li>
<li>
<p>文章/頁面font-matter 可設置highlight_shrink (true or false)</p>
</li>
<li>
<p>代碼框優化</p>
<ol>
<li>調整部分代碼顔色</li>
<li>增加一款代碼主題 mac</li>
<li>代碼框主題支持自定義</li>
</ol>
</li>
<li>
<p>閲讀模式下去掉代碼高亮</p>
</li>
<li>
<p>disqusjs更新js/css版本，增加nocomment配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">disqusjs:</span><br><span class="line">  enable: false</span><br><span class="line">  shortname:</span><br><span class="line">  siteName:</span><br><span class="line">  apikey:</span><br><span class="line"><span class="deletion">-  api: https://disqus.skk.moe/disqus/ #一般情況下無需修改 API 地址</span></span><br><span class="line"><span class="addition">+  api:</span></span><br><span class="line"><span class="addition">+  nocomment: # display when a blog post or an article has no comment attached</span></span><br><span class="line">  admin:</span><br><span class="line">  adminLabel:</span><br><span class="line">  count: false # dispaly comment count in top_img</span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  disqusjs: https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqus.js</span></span><br><span class="line"><span class="deletion">-  disqusjs_css: https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css</span></span><br><span class="line"><span class="addition">+  disqusjs: https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js</span></span><br><span class="line"><span class="addition">+  disqusjs_css: https://cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>打賞增加鏈接配置 /打賞寫法更改（舊寫法依然有用）#240</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># 打賞按鈕</span><br><span class="line">reward:</span><br><span class="line">  enable: true</span><br><span class="line">  QR_code:</span><br><span class="line"><span class="deletion">-    - itemlist:</span></span><br><span class="line"><span class="deletion">-        img: /img/wechat.jpg</span></span><br><span class="line"><span class="deletion">-        text: 微信</span></span><br><span class="line"><span class="deletion">-    - itemlist:</span></span><br><span class="line"><span class="deletion">-        img: /img/alipay.jpg</span></span><br><span class="line"><span class="deletion">-        text: 支付寶</span></span><br><span class="line"><span class="addition">+    - img: /img/wechat.jpg</span></span><br><span class="line"><span class="addition">+      link:</span></span><br><span class="line"><span class="addition">+      text: 微信</span></span><br><span class="line"><span class="addition">+    - img: /img/alipay.jpg</span></span><br><span class="line"><span class="addition">+      link:</span></span><br><span class="line"><span class="addition">+      text: 支付寶</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>移除JS-COOKIES</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">CDN:</span><br><span class="line"><span class="deletion">-  js_cookies: https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>可為文章配置是否顯示TOC,即使配置中已把toc設為false</p>
</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修正側邊欄目錄收縮、展開圖標不對齊的bugs</li>
<li>修改部分用語(zh-CN/zh-TW/en)</li>
<li>修復card-categories和card-archives 邊緣點擊沒有跳轉的bugs</li>
<li>修復網站是子目錄時，社交網站為相對地址時，地址生成錯誤的bugs</li>
<li>修復最後一篇文章的Pagination沒有佔據全寬度的Bug</li>
<li>修復推薦文章佈局在microsoft edge(舊版)顯示的Bug</li>
<li>修復閲讀模式下 黑色代碼框下字體顯示不清楚 #223</li>
<li>修復當blog_title_font不是設置google字體時，加載了preconnect  <a href="//fonts.googleapis.com">//fonts.googleapis.com</a> 的bugs</li>
<li>修復設置copy為false時，會導致代碼複製也無法複製的bugs</li>
<li>閲讀模式調整</li>
<li>修復部分壓縮軟件壓縮html報錯的bugs</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>2.3.5(2020/05/01)</span></div>
    <div class="hide-content"><h2 id="2-3-5-2020-05-01">2.3.5 (2020/05/01)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>
<p>beautify 可配置生效於全站還是post頁 #218</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">beautify:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  field: post # site/post</span></span><br><span class="line">  title-prefix-icon: &#x27;\f0c1&#x27;</span><br><span class="line">  title-prefix-icon-color: &#x27;#F47466&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>更換lazyload js</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-lazyload:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+lazyload: true</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"></span><br><span class="line"><span class="deletion">-  lazyload: https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js</span></span><br><span class="line"><span class="addition">+  lazyload: https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加文章anchor配置</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+ # anchor</span></span><br><span class="line"><span class="addition">+ # when you scroll in post , the url will update according to header id.</span></span><br><span class="line"><span class="addition">+ anchor: false</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>修復當menu沒設置圖標時，會報Cannot read property ‘trim’ of undefined 的bug</li>
<li>修復meta description 自動生成文章前200文字時部分沒有轉義的bug</li>
<li>修復開啟lazyload後，使用 無法顯示照片的bug</li>
<li>修復tags頁標籤只顯示8個的bug</li>
<li>修復當博客root不是’/'時,引用本地圖片會顯示不出的bug</li>
<li>修復替換url hash 導致頁面跳動的bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>2.3.0(2020/04/26)</span></div>
    <div class="hide-content"><h2 id="2-3-0-2020-04-26">2.3.0(2020/04/26)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>增加Facebook Comments</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# Facebook Comments Plugin</span></span><br><span class="line"><span class="addition">+# https://developers.facebook.com/docs/plugins/comments/</span></span><br><span class="line"><span class="addition">+facebook_comments:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"><span class="addition">+  app_id:</span></span><br><span class="line"><span class="addition">+  user_id: # optional</span></span><br><span class="line"><span class="addition">+  pageSize: 10 # The number of comments to show</span></span><br><span class="line"><span class="addition">+  order_by: social # social/time/reverse_time</span></span><br><span class="line"><span class="addition">+  lang: en_US # Language en_US/zh_CN/zh_TW and so on</span></span><br><span class="line"><span class="addition">+  count: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加頁面加載動畫Preloader #193</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# 加載動畫 Loading Animation</span></span><br><span class="line"><span class="addition">+preloader: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>aside card-tags可配置是否顯示顏色/aside subtitle可配置，優先顯示配置內容、沒有的顯示頁面subtitle #191 /aside widget 增加部分參數可配置/aside widget的Categories，Tags，post,Archives可配置limit/整合公告欄配置到aside去</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">aside:</span><br><span class="line">  enable: true</span><br><span class="line">  mobile: true # 手機頁面( 顯示寬度 &lt; 768px )是否顯示aside內容</span><br><span class="line">  position: right # left or right</span><br><span class="line"><span class="deletion">-  card_author: true</span></span><br><span class="line"><span class="deletion">-  card_announcement: true</span></span><br><span class="line"><span class="deletion">-  card_recent_post: true</span></span><br><span class="line"><span class="deletion">-  card_categories: true</span></span><br><span class="line"><span class="deletion">-  card_tags: true</span></span><br><span class="line"><span class="deletion">-  card_archives: true</span></span><br><span class="line"><span class="addition">+  card_author:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    description:</span></span><br><span class="line"><span class="addition">+  card_announcement:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    content: This is my Blog</span></span><br><span class="line"><span class="addition">+  card_recent_post:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    limit: 5 # if set 0 will show all</span></span><br><span class="line"><span class="addition">+  card_categories:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    limit: 8 # if set 0 will show all</span></span><br><span class="line"><span class="addition">+  card_tags:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    limit: 40 # if set 0 will show all</span></span><br><span class="line"><span class="addition">+    color: false</span></span><br><span class="line"><span class="addition">+  card_archives:</span></span><br><span class="line"><span class="addition">+    enable: true</span></span><br><span class="line"><span class="addition">+    type: monthly # yearly or monthly</span></span><br><span class="line"><span class="addition">+    format: MMMM YYYY # eg: YYYY年MM月</span></span><br><span class="line"><span class="addition">+    order: -1 # Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line"><span class="addition">+    limit: 8 # if set 0 will show all</span></span><br><span class="line">  card_webinfo: true</span><br><span class="line">  </span><br><span class="line"><span class="deletion">-# 網站公告</span></span><br><span class="line"><span class="deletion">-announcement:</span></span><br><span class="line"><span class="deletion">-  content: 感謝訪問本站，若喜歡請收藏 ^_^</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>改CDN_USE為inject,可插入代碼到head或者bottom</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# CDN</span></span><br><span class="line"><span class="deletion">-# 網站必須</span></span><br><span class="line"><span class="deletion">-# 可根據需要自行添加js/css</span></span><br><span class="line"><span class="deletion">-CDN_USE:</span></span><br><span class="line"><span class="deletion">-  css:</span></span><br><span class="line"><span class="deletion">-    - /css/index.css</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-  js:</span></span><br><span class="line"><span class="deletion">-    - https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js #/js/third-party/jquery.min.js</span></span><br><span class="line"><span class="deletion">-    - /js/utils.js</span></span><br><span class="line"><span class="deletion">-    - /js/main.js</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+# inject</span></span><br><span class="line"><span class="addition">+# 插入代碼到頭部&lt;/head&gt;之前 和 尾部&lt;/body&gt;之前</span></span><br><span class="line"><span class="addition">+inject:</span></span><br><span class="line"><span class="addition">+  head:</span></span><br><span class="line"><span class="addition">+  	# - &lt;link rel=&quot;stylesheet&quot; href=&quot;xxxxx&quot;&gt;</span></span><br><span class="line"><span class="addition">+  bottom:</span></span><br><span class="line"><span class="addition">+  	# - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"></span><br><span class="line"># CDN</span><br><span class="line"># 非必要不要修改</span><br><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # main</span></span><br><span class="line"><span class="addition">+  main_css: /css/index.css</span></span><br><span class="line"><span class="addition">+  jquery: https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js</span></span><br><span class="line"><span class="addition">+  main: /js/main.js</span></span><br><span class="line"><span class="addition">+  utils: /js/utils.js</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>適配valine 1.4.5以上版本</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">valine:</span><br><span class="line">  enable: false # if you want use valine,please set this value is true</span><br><span class="line">  appId: # leancloud application app id</span><br><span class="line">  appKey: # leancloud application app key</span><br><span class="line">  notify: false # valine mail notify (true/false) Deprecated in v1.4.0+</span><br><span class="line">  verify: false # valine verify code (true/false) Deprecated in v1.4.0+</span><br><span class="line">  pageSize: 10 # comment list page size</span><br><span class="line">  avatar: monsterid # gravatar style https://valine.js.org/#/avatar</span><br><span class="line">  lang: en # i18n: zh-CN/zh-TW/en/ja</span><br><span class="line">  placeholder: Please leave your footprints # valine comment input placeholder(like: Please leave your footprints )</span><br><span class="line">  guest_info: nick,mail,link #valine comment header info</span><br><span class="line">  recordIP: false # Record reviewer IP</span><br><span class="line">  serverURLs: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span><br><span class="line"><span class="addition">+  emojiCDN: # emoji CDN</span></span><br><span class="line"><span class="addition">+  enableQQ: false # enable the Nickname box to automatically get QQ Nickname and QQ Avatar</span></span><br><span class="line"><span class="addition">+  requiredFields: nick,mail # required fields nick/mail/link</span></span><br><span class="line">  bg: /img/comment_bg.png # valine background</span><br><span class="line">  count: false # dispaly comment count in top_img</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>移除對文章隱藏的支持</p>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>增加標籤外掛 tag-toggle</li>
<li>適配hexo-generator-indexed插件</li>
<li>Dark mode和Read mode配色微調</li>
<li>增加頁面keywords設置 #191</li>
<li>algolia-search highlight文字加深</li>
<li>調整子目錄的排版(向左對齊)</li>
<li>調整aside和mobile sidebar 網頁資訊佈局，當缺少一個時，寬度依舊平分</li>
<li>sidebar menu 增加頭像轉圈hover</li>
<li>當沒有設置Description時，會自動讀取文章前200個文字作為meta Description</li>
<li>meta增加article:published_time和article:modified_time</li>
<li>subtitle修改為網頁加載完後再加載，防止API迴應過慢而阻礙網頁顯示</li>
<li>移除subtitle金山詞霸每日一句，增加搏天API的隨機語錄</li>
<li>本地搜索支持顯示文章內容和高亮keyword</li>
<li>Read mode下可以切換Dark mode和Light mode</li>
<li>高分辨率下的界面適配 #163</li>
<li>修復Dark Mode下，note標籤的顯示bug</li>
<li>添加 dns_prefetch</li>
</ol>
<h3 id="Fixed">Fixed</h3>
<ol>
<li>修復 articleSort 設置文章封面邏輯不一致的問題 #194</li>
<li>修正zh-TW部分用語</li>
<li>修復hide-block 配置顏色顯示出錯的bug</li>
<li>修復只能點擊子目錄文字才能跳轉的bug</li>
<li>修復搜索結果在手機端無法滾動的bug</li>
<li>修復aside categories 查看更多跳轉到tags頁面的bug #188</li>
<li>修復當flink.yml內容為空時，報錯的bug</li>
<li>修復Dark mode下 aside 查看更多文字顏色太淺的bug</li>
<li>修復POST-META關閉閲讀分鐘和訪問量後,評論量前有分割線的bug</li>
<li>修復canvas_ribbon透明度變為1再變回預設值bug</li>
<li>修復當default_cover沒設置時，會出現無圖片的bug</li>
<li>修復文章頁替換url hash值而導致歷史記錄過多的問題</li>
<li>修復DarkMode下，note標籤的顯示bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>2.2.5(2020/03/28)</span></div>
    <div class="hide-content"><h2 id="2-2-5-2020-03-28">2.2.5(2020/03/28)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>增加自動廣告位置</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+ad:</span></span><br><span class="line"><span class="addition">+ index:</span></span><br><span class="line"><span class="addition">+ aside:</span></span><br><span class="line"><span class="addition">+ post:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加圖片Figcaption顯示</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+ photofigcaption: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加全站總字數顯示，可配置是否關閉wordcout閲讀時間/字數統計/全站總字數</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">wordcount:</span><br><span class="line">  enable: false</span><br><span class="line"><span class="addition">+  post_wordcount: true</span></span><br><span class="line"><span class="addition">+  min2read: true</span></span><br><span class="line"><span class="addition">+  total_wordcount: true</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>文章頁上滑出現的頂欄顯示目錄</li>
<li>全站post-meta增加提示文本(Tooltip Text)</li>
<li>調整文章頁post-meta和主頁post-meta的間距</li>
<li>文章頁，當設置只顯示一個日期時，增加文字顯示</li>
</ol>
<h3 id="Fixed">Fixed</h3>
<ol>
<li>修復lazyload中，img標籤的class在src後面時，導致替換出錯的bug</li>
<li>修復複製版權信息url為undefined的bug</li>
<li>修復aside 的 “查看更多” 不居中的bug</li>
<li>修復highlight_shrink設為false時,js報錯的bug</li>
<li>修復highlight_shrink設為true,點擊無反應，沒有打開代碼框的bug</li>
<li>Darkmode下，出現切換按鈕icon沒有改變的bug</li>
<li>修復簡繁轉換無效的bug</li>
<li>修復首頁文章日期顯示錯誤的bug</li>
<li>修復因註釋掉豆瓣設置導致報Cannot read property ‘meta’ of undefined的bug</li>
<li>修復Gitalk報Error: Cannot read property ‘repository’ of undefined 的bug</li>
<li>修復評論utterances 在display_mode設置為dark時，仍顯示light主題的bug</li>
<li>修復display_mode設置dark沒有效果的bug</li>
<li>評論增加夜間模式、文章頁判斷,減少不必要的js加載</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>2.2.0 (2020/03/17)</span></div>
    <div class="hide-content"><h2 id="2-2-0-2020-03-17">2.2.0 (2020/03/17)</h2>
<h3 id="Breaking-Change">Breaking Change</h3>
<ol>
<li>
<p>不再支持hexo 4.0.0以下版本</p>
</li>
<li>
<p>添加hexo fragment_cache,加快生成速度</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+ fragment_cache: true</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>完善V5圖標顯示，不再需要同時加載V4和v5圖標</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+ fontawesome_v5:</span></span><br><span class="line"><span class="addition">+  enable: false</span></span><br><span class="line"></span><br><span class="line">CDN_USE:</span><br><span class="line">  css:</span><br><span class="line">    - /css/index.css</span><br><span class="line"><span class="deletion">-   - https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css</span></span><br><span class="line"><span class="deletion">-   - https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css #fontawesomeV5_css</span></span><br><span class="line"></span><br><span class="line">CDN:</span><br><span class="line"><span class="addition">+  # fontawesome</span></span><br><span class="line"><span class="addition">+  fontawesome_v4: https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css</span></span><br><span class="line"><span class="addition">+  fontawesome_v5: https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>去除cheerio依賴</p>
</li>
<li>
<p>整合豆瓣配置，增加配置遊戲，圖書頁面top_img,可設置是否設置meta,解決部分瀏覽器無法顯示圖片問題</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- # 如果你有使用hexo-douban去生成movie界面，可配置這個</span></span><br><span class="line"><span class="deletion">- movies_img: https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/movie.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ douban:</span></span><br><span class="line"><span class="addition">+   meta: false</span></span><br><span class="line"><span class="addition">+   movies_img:</span></span><br><span class="line"><span class="addition">+   books_img:</span></span><br><span class="line"><span class="addition">+   games_img:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>友情鏈接除列表外可自定義內容</p>
</li>
<li>
<p>可設置主頁標題距離頂部距離</p>
 <figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"># 主頁設置</span><br><span class="line"># 默認top_img全屏，site_info在中間</span><br><span class="line"># 使用默認, 都無需填寫(建議默認)</span><br><span class="line"><span class="addition">+index_site_info_top: # 主頁標題距離頂部距離  例如 300px/300em/300rem/10%</span></span><br><span class="line"><span class="comment">index_top_img_height: # 主頁top_img高度 例如 300px/300em/300rem  不能使用百分比</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>側邊欄可隱藏,可設置手機頁面是否隱藏</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-aside_mobile: true</span></span><br><span class="line"></span><br><span class="line">aside:</span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  mobile: true # 手機頁面( 顯示寬度 &lt; 768px )是否顯示aside內容</span></span><br><span class="line">  position: right # left or right</span><br><span class="line">  card_author: true</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加disqusjs和utterances 兩個評論</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+disqusjs:</span></span><br><span class="line"><span class="addition">+  enable: false #開啟改為 true</span></span><br><span class="line"><span class="addition">+  shortname:</span></span><br><span class="line"><span class="addition">+  siteName:</span></span><br><span class="line"><span class="addition">+  apikey:</span></span><br><span class="line"><span class="addition">+  api: https://disqus.skk.moe/disqus/ #一般情況下無需修改 API 地址</span></span><br><span class="line"><span class="addition">+  admin:</span></span><br><span class="line"><span class="addition">+  adminLabel:</span></span><br><span class="line"><span class="addition">+  count: true # top_img顯示評論數</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ utterances:</span></span><br><span class="line"><span class="addition">+   enable: false</span></span><br><span class="line"><span class="addition">+   repo: jerryc127/jerryc127.github.io # 可選 pathname/url/title/og:title</span></span><br><span class="line"><span class="addition">+   issue_term: pathname # 可選 github-light/github-dark/github-dark-orange/icy-dark/dark-blue/photon-dark</span></span><br><span class="line"><span class="addition">+  light_theme: github-light</span></span><br><span class="line"><span class="addition">+  dark_theme: photon-dark</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>首頁subtitle可關閉打字效果，可設置打字效果顯示一次或loop</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">subtitle:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  # 打字效果</span></span><br><span class="line"><span class="addition">+  effect: true</span></span><br><span class="line"><span class="addition">+  # 循環或者只打字一次</span></span><br><span class="line"><span class="addition">+  loop: false</span></span><br><span class="line">  # source調用第三方服務</span><br><span class="line">  # source: false 關閉調用</span><br><span class="line">  # source: 1  調用金山詞霸的每日一句(簡體)</span><br><span class="line">  # source: 2  調用一言網的一句話(簡體) #https://hitokoto.cn/</span><br><span class="line">  # source: 3  調用一句網(簡體) http://yijuzhan.com/</span><br><span class="line">  # source: 4  調用今日詩詞(簡體) https://www.jinrishici.com/</span><br><span class="line">  # subtitle 會先顯示 source , 再顯示 sub 的內容</span><br><span class="line">  source: 2</span><br><span class="line">  # (如果有英文逗號&#x27; , &#x27;，請使用轉義字符 &amp;#44;)</span><br><span class="line">  # 如果關閉打字效果，subtitle只會顯示sub的第一行文字</span><br><span class="line">  sub:</span><br><span class="line">    - 今日事&amp;#44;今日畢</span><br><span class="line">    - Never put off till tomorrow what you can do today</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加valine和gitalk的配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">gitalk:</span><br><span class="line">  enable: false</span><br><span class="line">  client_id:</span><br><span class="line">  client_secret:</span><br><span class="line">  repo:</span><br><span class="line">  owner:</span><br><span class="line">  admin:</span><br><span class="line">  language: zh-CN # en , zh-CN , zh-TW</span><br><span class="line"><span class="addition">+  perPage: 10 # Pagination size, with maximum 100.</span></span><br><span class="line"><span class="addition">+  distractionFreeMode: false # Facebook-like distraction free mode.</span></span><br><span class="line"><span class="addition">+  pagerDirection: last # Comment sorting direction, available values are last and first.</span></span><br><span class="line"><span class="addition">+  createIssueManually: false # Gitalk will create a corresponding github issue for your every single page automatically</span></span><br><span class="line">  count: true # top_img顯示評論數</span><br><span class="line"></span><br><span class="line">valine:</span><br><span class="line">  enable: false # if you want use valine,please set this value is true</span><br><span class="line">  appId:  # leancloud application app id</span><br><span class="line">  appKey:  # leancloud application app key</span><br><span class="line">  notify: false # valine mail notify (true/false) https://github.com/xCss/Valine/wiki</span><br><span class="line">  verify: false # valine verify code (true/false)</span><br><span class="line">  pageSize: 10 # comment list page size</span><br><span class="line">  avatar: monsterid # gravatar style https://valine.js.org/#/avatar</span><br><span class="line">  lang: en # i18n: zh-cn/en</span><br><span class="line">  placeholder: 記得留下你的暱稱和郵箱....可以快速收到回覆 # valine comment input placeholder(like: Please leave your footprints )</span><br><span class="line">  guest_info: nick,mail,link #valine comment header info</span><br><span class="line"><span class="addition">+  recordIP: false # Record reviewer IP</span></span><br><span class="line"><span class="addition">+  serverURLs: # This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  bg: /img/comment_bg.png # valine background</span><br><span class="line">  count: true # top_img顯示評論數</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>darkmode配置整理</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- # 夜間模式</span></span><br><span class="line"><span class="deletion">- darkmode:</span></span><br><span class="line"><span class="deletion">-  enable: true</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-# 自動切換 dark mode和 light mode</span></span><br><span class="line"><span class="deletion">-# autoChangeMode: 1  跟隨系統而變化，不支持的瀏覽器/系統將按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="deletion">-# autoChangeMode: 2  只按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="deletion">-# autoChangeMode: false 取消自動切換</span></span><br><span class="line"><span class="deletion">-autoChangeMode: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ darkmode:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  # dark mode和 light mode切換按鈕</span></span><br><span class="line"><span class="addition">+  button: true</span></span><br><span class="line"><span class="addition">+  # 自動切換 dark mode和 light mode</span></span><br><span class="line"><span class="addition">+  # autoChangeMode: 1  跟隨系統而變化，不支持的瀏覽器/系統將按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="addition">+  # autoChangeMode: 2  只按照時間晚上6點到早上6點之間切換為 dark mode</span></span><br><span class="line"><span class="addition">+  # autoChangeMode: false 取消自動切換</span></span><br><span class="line"><span class="addition">+  autoChangeMode: false</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加404頁面</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# A simple 404 page</span></span><br><span class="line"><span class="addition">+error_404:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  subtitle: &quot;頁面沒有找到&quot;</span></span><br><span class="line"><span class="addition">+  background:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>post_beautify改為beautify，頁面美化不再只限於post頁，page頁也一樣</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-post_beautify:</span></span><br><span class="line"><span class="addition">+beautify:</span></span><br><span class="line">  enable: true</span><br><span class="line">  title-prefix-icon: &#x27;\f0c1&#x27;</span><br><span class="line">  title-prefix-icon-color: &quot;#F47466&quot;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>可設置是否顯示cover，可設置各位置的cover顯示</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-# the default cover of the post</span></span><br><span class="line"><span class="deletion">-default_cover: https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-index_post_cover: both</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+cover:</span></span><br><span class="line"><span class="addition">+  # 是否顯示文章封面</span></span><br><span class="line"><span class="addition">+  index_enable: true</span></span><br><span class="line"><span class="addition">+  aside_enable: true</span></span><br><span class="line"><span class="addition">+  archives_enable: true</span></span><br><span class="line"><span class="addition">+  # 封面顯示的位置</span></span><br><span class="line"><span class="addition">+  # 三個值可配置 left , right , both</span></span><br><span class="line"><span class="addition">+  position: both</span></span><br><span class="line"><span class="addition">+  # 當沒有設置cover時，默認的封面顯示</span></span><br><span class="line"><span class="addition">+  default_cover:</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加mermaid,可畫流程圖、狀態圖、時序圖、甘特圖等等</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# https://github.com/knsv/mermaid</span></span><br><span class="line"><span class="addition">+mermaid:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  # built-in themes: default/forest/dark/neutral</span></span><br><span class="line"><span class="addition">+  theme: default</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加pangu配置，中英文之間添加空格</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+# https://github.com/vinta/pangu.js</span></span><br><span class="line"><span class="addition">+# 中英文之間添加空格</span></span><br><span class="line"><span class="addition">+pangu:</span></span><br><span class="line"><span class="addition">+  enable: true</span></span><br><span class="line"><span class="addition">+  field: page # page/post</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>整合部分配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-avatar_effect: false</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+avatar:</span></span><br><span class="line"><span class="addition">+  img: /img/avatar.png</span></span><br><span class="line"><span class="addition">+  effect: true # 頭像會一直轉圈</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>post-copyright增加decode網址 (可以顯示中文)</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line"><span class="addition">+  decode: false</span></span><br><span class="line">  license: CC BY-NC-SA 4.0</span><br><span class="line">  license_url: https://creativecommons.org/licenses/by-nc-sa/4.0/</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>增加部分顏色配置</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">theme_color:</span><br><span class="line">  enable: true</span><br><span class="line">  main: &quot;#49B1F5&quot;</span><br><span class="line">  paginator: &quot;#00c4b6&quot;</span><br><span class="line">  button_hover: &quot;#FF7242&quot;</span><br><span class="line">  text_selection: &quot;#00c4b6&quot;</span><br><span class="line">  link_color: &quot;#99a9bf&quot;</span><br><span class="line">  meta_color: &#x27;#858585&#x27;</span><br><span class="line">  hr_color: &quot;#A4D8FA&quot;</span><br><span class="line"><span class="deletion">-  read-mode-bg_color: &#x27;#FAF9DE&#x27;</span></span><br><span class="line"><span class="deletion">-  inline-code-color: &#x27;#F47466&#x27;</span></span><br><span class="line"><span class="addition">+  code_foreground: &quot;#F47466&quot;</span></span><br><span class="line"><span class="addition">+  code_background: &quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line"><span class="addition">+  toc_color: &quot;#00c4b6&quot;</span></span><br><span class="line"><span class="addition">+  blockquote_padding_color: &quot;#49b1f5&quot;</span></span><br><span class="line"><span class="addition">+  blockquote_background_color: &quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>主頁文章增加tags和更新日期顯示，可以配置post_meta</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">post_meta:</span><br><span class="line"><span class="deletion">-  date_type: both # or created or updated 文章日期是創建日或者更新日或都顯示</span></span><br><span class="line"><span class="deletion">-  categories: true # or false 是否顯示分類</span></span><br><span class="line"><span class="deletion">-  tags: true # or false 是否顯示標籤</span></span><br><span class="line"><span class="addition">+  page:</span></span><br><span class="line"><span class="addition">+    date_type: both # created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line"><span class="addition">+    categories: true # true or false 主頁是否顯示分類</span></span><br><span class="line"><span class="addition">+    tags: true # true or false 主頁是否顯示標籤</span></span><br><span class="line"><span class="addition">+  post:</span></span><br><span class="line"><span class="addition">+    date_type: both # created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line"><span class="addition">+    categories: true # true or false 文章頁是否顯示分類</span></span><br><span class="line"><span class="addition">+    tags: true # true or false 文章頁是否顯示標籤</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>適配IE</li>
<li>增加一個Tag Plugins: 圖庫集</li>
<li>增加一個Tag Plugins: tag-hide 功能 inline/block</li>
<li>去除page頁開頭顯示與標題一樣的內容</li>
<li>aside 公告欄設置，支持html代碼</li>
<li>手機界面sidebar顯示進度條和加深對應的標題</li>
<li>主頁subtitle 的 hitokoto 顯示內容出處</li>
<li>footer 的hexo鏈接改為https</li>
<li>修改手機下，menus和toc的打開效果</li>
<li>手機頁面下，搜索界面全屏顯示</li>
<li>SEO優化，標題欄改為h1顯示</li>
<li>閲讀模式優化，可根據light mode 和darkmode調整背景</li>
<li>當屏蔽js時，header會出現(之前用js控制，會隱藏)</li>
</ol>
<h3 id="Fixed">Fixed</h3>
<ol>
<li>修復Tencent Analytics的script加載為https #105</li>
<li>修復相關文章，日期顯示錯誤bug</li>
<li>修復gitalk報錯問題</li>
<li>修復當valine background 是絕對地址時無法顯示的bug</li>
<li>修復medium-zoom 無法使用的bug</li>
<li>修復在safari下，點擊或移動到首頁文章cover，圓角變成正方形的bug #114</li>
<li>修復在部分瀏覽器下，aside,友情鏈接頭像轉動變形的bug</li>
<li>修復在寬度限制下，表格內容溢出屏幕外而出現滾動條的bug #138</li>
<li>修復gitalk js 在一些沒有設置評論的page里加載的bug</li>
<li>修復tag plugins 的gist 在不同主題下的背景顏色問題(黑色主題下，文字不易觀看)</li>
<li>修復highlight figcaption 顯示不全的bug</li>
<li>修復disqus評論數無法獲取的bug</li>
<li>修復子目錄在觸摸屏下點擊,偶爾不出現的bug</li>
<li>修復a標籤太長(連續英文字母)不會換行的bug</li>
<li>修復toc滾動時，閲讀進度條也跟着滾動的bug</li>
<li>修復aside的圖片，可點擊顯示大圖bug</li>
<li>修復activate-power-mode設置參數無效bug</li>
<li>修復語言上的錯誤 #156</li>
<li>修復主頁在safari桌面端，首頁滾動卡頓的bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>2.1.0 (2019/12/20)</span></div>
    <div class="hide-content"><h2 id="2-1-0-2019-12-20">2.1.0 (2019/12/20)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>可設置隱藏文章</li>
<li>適配 Hexo 的 Tag Plugins Code Block With marked lines 顯示</li>
<li>可配置首頁 cover 顯示的位置</li>
<li>更改深色模式下的配色</li>
<li>activate_power_mode 增加關閉顏色和抖動</li>
<li>增加谷歌廣告，騰訊分析</li>
<li>相關文章增加時間顯示，調整佈局，垂直居中</li>
<li>文章頁面，top_img 增加評論數顯示</li>
<li>可以取消點擊圖片觀看大圖</li>
<li>mathjax 和 kathex 可設置每頁都加載還是按需加載</li>
<li>深色模式下，滾動條顏色的適配</li>
<li>優化 gitalk 在 dark mode 下的顯示</li>
<li>文章頁，文章標題過長時，只顯示三行內容</li>
<li>深色模式下，背景圖片加上蒙板</li>
<li>優化深色/閲讀模式下，canvas 的顯示</li>
<li>優化打賞的特效和移動到二維碼不會立刻消失</li>
<li>優化 sub-menu 樣式</li>
<li>修改 aside 的 tags 顏色，在深色模式下不會出現觀看困難</li>
<li>升級 normalize.css 到最新版</li>
<li>優化手機上 toc 和 menu 的打開動畫</li>
<li>優化代碼框打開關閉的特效</li>
<li>精簡 js,部分操作改為 css 控制</li>
<li>優化主題的一些動畫，不會過於生硬</li>
</ol>
<h3 id="Fixed">Fixed</h3>
<ol>
<li>修復當圖片被 a 標籤包圍時，點擊圖標沒有跳轉到對應網頁而是出現大圖觀看模式的 bug</li>
<li>修復當網址有 subdirectory 時，menu、打賞二維碼和 lodding_bg 鏈接路徑錯誤的 bug</li>
<li>修復當網址有 subdirectory 時,</li>
<li>修復 katex 的 CSS 無法讀取 bug</li>
<li>修復搜索按鈕在文章頁不顯示的 bug</li>
<li>修復 gitalk css 引用失敗的 bug</li>
<li>修復 點擊特效 煙花 無效的 bug</li>
<li>修復 gitalk 報 path.startsWith is not a function 的 bug</li>
<li>修復 閲讀模式下，背景沒有變純色的 bug</li>
<li>修復閲讀模式下，header 偶爾出現沒有靠攏頂部的 bug</li>
<li>修復 Hexo Tag Plugins Block Quote 裏的鏈接顯示出外面的 Bug</li>
<li>修復 aside 歸檔日期過長導致錯位的 bug</li>
<li>修復 toc 為空時，toc 按鈕仍存在的 bug</li>
<li>修復關閉懶加載後，頭像無法顯示的 bug</li>
<li>修復深色模式下，切換 readmode 偶爾會無效的 bug</li>
<li>修復在一些手機設備上，toc 和 menu 的按鈕顯示不對齊的 bug #72</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>2.0.0 (2019/11/03)</span></div>
    <div class="hide-content"><h2 id="2-0-0-2019-11-03">2.0.0 (2019/11/03)</h2>
<h3 id="Breaking-change">Breaking change</h3>
<ol>
<li>手機端界面卡片化，同時，手機端也可以顯示側邊欄的內容</li>
<li>修復當menu過多時，header界面出現錯亂的bug。當menu過多時，會變為sidebar模式</li>
<li>增加medium-zoom大圖查看模式</li>
<li>增加鼠標點擊特效：文字和愛心 兩個點擊特效</li>
<li>主頁subtitle可以調用第三方api(金山詞霸每日一句、一言網的一句話、一句網、今日詩詞)</li>
<li>添加 snackbar 彈窗</li>
<li>修改nightshift為darkmode，darkmode可隨系統設置而自動切換，可設置隨時間而切換darkmode</li>
<li>修復hexo自帶的標籤外掛(Tag Plugins)顯示bug(Block Quote、Code Block With caption、Gist、Youtube、Vimeo)</li>
<li>主題所需要的css和js可根據需要配置CDN</li>
<li>更改darkmode的加載方式，網站設置dark mode後，現在進入網頁不會在’閃’一下</li>
<li>背景特效和背景圖片在手機界面也會顯示</li>
<li>增加justified-gallery圖片顯示(Tag Plugins)</li>
</ol>
<h3 id="Feature">Feature</h3>
<ol>
<li>文章頁面，字數統計、閲讀時長和閲讀量前面添加icon</li>
<li>更改懶加載js</li>
<li>升級typed.js/instantpage.js到最新版</li>
<li>搜索和右下角按鈕添加退出特效</li>
</ol>
<h3 id="Fixed">Fixed</h3>
<ol>
<li>修復在 Hexo 4.0.0下，一些按鈕點擊會跳出一個空白頁的bug</li>
<li>修復在 Hexo 4.0.0下，分頁按鈕出現代碼的bug</li>
<li>修復當沒有設置評論時，右下角依舊出現’直達評論’按鈕的bug</li>
<li>優化sidebar的打開速度</li>
<li>修復文章頁標題左右邊距不平等的bug</li>
<li>修復keywords讀取的bug</li>
<li>修復當post/page 內容為空時，footer位置錯亂的bug</li>
<li>修復在手機safari，toc sidebar底部內容被遮擋的bug</li>
<li>完善Dark mode,一些界面的配色</li>
<li>修復 card-archives 查看更多 跳轉bug</li>
</ol>
<h3 id="Remove">Remove</h3>
<ol>
<li>移除Gitment</li>
<li>移除Gallery</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.2.0 (2019/09/24)</span></div>
    <div class="hide-content"><h2 id="1-2-0-2019-09-24">1.2.0 (2019/09/24)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>更改手機頁面的menu和toc的顯示方式和顯示特效(ipad也能看TOC)</li>
<li>可設置禁止複製網站內容</li>
<li>可設置複製時，內容自動加上版權信息</li>
<li>可修改tag的top_img</li>
<li>可修改category的top_img</li>
<li>可修改valine的背景</li>
<li>archives頁UI優化</li>
<li>ICP增加icon #37</li>
<li>可設置主頁top_img的高度</li>
<li>可設置主頁site-info的位置</li>
<li>category頁和tag頁的UI可以設置與主頁UI一樣 #31</li>
<li>主頁subtitle可設置多個句子(不再限制2個) #37</li>
<li>設置menu時，頭尾添加空格不受影響</li>
<li>調整post頁的佈局</li>
<li>書籤添加icon</li>
<li>公告icon效果</li>
<li>首頁歸檔模塊，可設置數量限制，會顯示’查看更多’按鈕</li>
<li>右下角按鈕調整。</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol start="19">
<li>修復文章cover隨機圖片生成，同一篇文章，不同地方的cover顯示不一樣的bug</li>
<li>修復gitalk語言設置無效的bug #35</li>
<li>修復post頁面，當沒有設置word count時，閲讀量前有’|&quot;</li>
<li>修復sub-menu在safari的顯示問題</li>
<li>修復tags頁評論居中問題</li>
<li>修復header a hover 白色問題</li>
<li>修復夜間模式下footer的顏色bug</li>
<li>修復英文語言下，書籤英文顯示不完整的問題</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.1.5 (2019/09/08)</span></div>
    <div class="hide-content"><h2 id="1-1-5-2019-09-08">1.1.5 (2019/09/08)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>Feature: 可設置內聯代碼塊樣式 #26</li>
<li>Feature: 可設置夜間模式作為默認樣式</li>
<li>Feature: 可設置是否顯示code language名稱</li>
<li>Feature: 可設置是否展開或關閉代碼框</li>
<li>Feature: 可設置背景圖片/顏色</li>
<li>Feature: 可設置是否顯示footer背景</li>
<li>Feature: 增加 canvas-nest.js</li>
<li>Feature: 頭像可設置效果(轉圈圈)</li>
<li>Feature: menu可設置分組</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol start="10">
<li>Fix: 優化打賞和搜索打開特效</li>
<li>Fix: 優化sidebar的打開特效，避免與文章頁特效不同步</li>
<li>Fix: 適配<strong>hexo-blog-encrypt</strong>，現在可以顯示toc</li>
<li>Fix: 修復設置不顯示評論時，直達評論按鈕沒有消失的bug</li>
<li>Fix: 修復post頁底欄，當沒有顯示評論，不顯示TOC，評論和toc都不顯示 這三種狀態下按鈕的bug</li>
<li>Fix: 修復代碼框左右滑動時，代碼名字跟着滑動的bug</li>
<li>Fix: 其他page頁標題的字體顯示</li>
<li>Fix: 修復當設置開啟canvas_ribbons，進入網站會先顯示canvas_ribbons的bug</li>
<li>Fix: 完善夜間模式下，字體顯示問題</li>
<li>Fix: 修復代碼框 複製 和 代碼名 z-index bug #25</li>
<li>Fix: 完善閲讀模式</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.1.0 (2019/08/29)</span></div>
    <div class="hide-content"><h2 id="1-1-0-2019-08-29">1.1.0 (2019/08/29)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>Feature: 手機menu界面重新設計</li>
<li>Feature: 文章頁增加美化(原 melody主題功能),並增加更改標題前綴圖標和顏色</li>
<li>Feature: PC端增加直達評論按鈕</li>
<li>Feature: 可以對單獨文章設置是否顯示版權信息</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>Fix: 修復閲讀模式下，調整字體大小對代碼無效的bug</li>
<li>Fix: 調整Valine字體顯示問題</li>
<li>Fix: 修正夜間模式下Valine的適配問題</li>
<li>Fix: 修復Valine設置notify和verify無效的bug (thx @VincentTV )</li>
<li>Fix: 修復使用hexo-asset-image,開啟懶加載後，圖片會出現無法加載問題</li>
<li>Fix:修復 '返回頂部’箭頭無法點擊的bug</li>
</ol>
<h3 id="Remove">Remove</h3>
<ol>
<li>Remove: 去掉主題&quot;閲讀更多&quot;按鈕</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.0.8 (2019/08/11)</span></div>
    <div class="hide-content"><h2 id="1-0-8-2019-08-11">1.0.8 (2019/08/11)</h2>
<ol>
<li>Feature: 可關閉圖片懶加載</li>
<li>Feature: 增加頁面排版，可選擇把右邊欄放在左邊</li>
<li>Feature: 增加 Note (Bootstrap Callout) (移植於next主題)</li>
<li>Feature: 手機上能夠查看TOC</li>
<li>Feature: 增加直達評論按鈕</li>
<li>Fix: 修復post頁在寬度1024px下的顯示bug</li>
<li>Fix: 修復代碼框部分語言沒有顯示正確的代碼語言</li>
<li>Fix: 修復設置裏把Disqus註釋掉無法運行的bug</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.0.7 (2019/07/29)</span></div>
    <div class="hide-content"><h2 id="1-0-7-2019-07-29">1.0.7 (2019/07/29)</h2>
<h3 id="Feature">Feature</h3>
<ol>
<li>Feature: add the option to change the site name font-family</li>
<li>Feature: add the option to close instant-page</li>
<li>Feature: the sidebar can auto scroll when the toc out of the screen</li>
</ol>
<h3 id="Fix">Fix</h3>
<ol>
<li>Fix: random cover of previous post and next post</li>
<li>Fix: Display null when the subtitle not set</li>
<li>Fix: display related post’s headline when it is not related posts</li>
<li>Fix: the bugs of image display</li>
<li>Fix: When the picture is loaded, the picture appears black frame</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.0.6 (2019/07/06)</span></div>
    <div class="hide-content"><h2 id="1-0-6-2019-07-06">1.0.6 (2019/07/06)</h2>
<ol>
<li>Feature: random cover #10</li>
<li>Fix: valine lang not work</li>
<li>Fix: archives page site name not change when the language change</li>
<li>Fix: related posts url error</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.0.5 (2019/06/28)</span></div>
    <div class="hide-content"><h2 id="1-0-5-2019-06-28">1.0.5 (2019/06/28)</h2>
<ol>
<li>fix bugs of gitalk #9</li>
<li>fix bugs of valine</li>
<li>new look of the mobile menu</li>
</ol>
</div></div>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>1.0.0 (2019.06/17)</span></div>
    <div class="hide-content"><h2 id="1-0-0-2019-06-17">1.0.0 (2019.06/17)</h2>
<p>first release</p>
</div></div>]]></content>
      <categories>
        <category>Docs文檔</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 安裝文檔(二) 主題頁面</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E5%AE%89%E8%A3%9D%E6%96%87%E6%AA%94-%E4%BA%8C-%E4%B8%BB%E9%A1%8C%E9%A0%81%E9%9D%A2/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2021 年 09 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p>
<p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/3.8.4">3.8.4</a></p>
</div>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>📚  文檔目錄</p>
<p><a href="#">Post not found: Butterfly-安裝文檔-一-快速開始 🚀 快速開始</a> - <a href="#">Post not found: Butterfly-安裝文檔-二-主題頁面 📑 主題頁面</a> - <a href="#">Post not found: Butterfly-安裝文檔-三-主題配置-1 🛠 主題配置-1</a> - <a href="#">Post not found: Butterfly-安裝文檔-四-主題配置-2 ⚔️ 主題配置-2</a> - <a href="#">Post not found: Butterfly-安裝文檔-五-主題問答 ❓ 主題問答</a> - <a href="#">Post not found: Butterfly-安裝文檔-六-進階教程 ⚡️ 進階教程</a> - <a href="#">Post not found: Butterfly-安裝文檔-七-更新日誌 ✨ 更新日誌</a> - <a href="#">Post not found: Butterfly-打賞 🤞 打賞</a></p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示</p>
</div>
<hr>
<h2 id="Front-matter">Front-matter</h2>
<p><strong>Front-matter 是 markdown 文件最上方以 <code>---</code> 分隔的區域，用於指定個別檔案的變數。</strong></p>
<ul>
<li>Page Front-matter 用於<code>頁面</code>配置</li>
<li>Post Front-matter 用於<code>文章頁</code>配置</li>
</ul>
<div class="note info flat"><p>如果標注<code>可選</code>的參數，可根據自己需要添加，不用全部都寫在markdown裏</p>
</div>
<h3 id="Page-Front-matter">Page Front-matter</h3>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">type:</span><br><span class="line">comments:</span><br><span class="line">description:</span><br><span class="line">keywords:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aside:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>寫法</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>【必需】頁面標題</td>
</tr>
<tr>
<td>date</td>
<td>【必需】頁面創建日期</td>
</tr>
<tr>
<td>type</td>
<td>【必需】標籤、分類和友情鏈接三個頁面需要配置</td>
</tr>
<tr>
<td>updated</td>
<td>【可選】頁面更新日期</td>
</tr>
<tr>
<td>description</td>
<td>【可選】頁面描述</td>
</tr>
<tr>
<td>keywords</td>
<td>【可選】頁面關鍵字</td>
</tr>
<tr>
<td>comments</td>
<td>【可選】顯示頁面評論模塊(默認 true)</td>
</tr>
<tr>
<td>top_img</td>
<td>【可選】頁面頂部圖片</td>
</tr>
<tr>
<td>mathjax</td>
<td>【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)</td>
</tr>
<tr>
<td>katex</td>
<td>【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)</td>
</tr>
<tr>
<td>aside</td>
<td>【可選】顯示側邊欄 (默認 true)</td>
</tr>
<tr>
<td>aplayer</td>
<td>【可選】在需要的頁面加載aplayer的js和css,請參考文章下面的<code>音樂</code> 配置</td>
</tr>
<tr>
<td>highlight_shrink</td>
<td>【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)</td>
</tr>
</tbody>
</table>
<h3 id="Post-Front-matter">Post Front-matter</h3>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title:</span><br><span class="line">date:</span><br><span class="line">updated:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">keywords:</span><br><span class="line">description:</span><br><span class="line">top<span class="emphasis">_img:</span></span><br><span class="line"><span class="emphasis">comments:</span></span><br><span class="line"><span class="emphasis">cover:</span></span><br><span class="line"><span class="emphasis">toc:</span></span><br><span class="line"><span class="emphasis">toc_</span>number:</span><br><span class="line">copyright:</span><br><span class="line">copyright<span class="emphasis">_author:</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:</span><br><span class="line">copyright<span class="emphasis">_info:</span></span><br><span class="line"><span class="emphasis">mathjax:</span></span><br><span class="line"><span class="emphasis">katex:</span></span><br><span class="line"><span class="emphasis">aplayer:</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:</span><br><span class="line"><span class="section">aside:</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">寫法</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">title</td>
<td>【必需】文章標題</td>
</tr>
<tr>
<td style="text-align:left">date</td>
<td>【必需】文章創建日期</td>
</tr>
<tr>
<td style="text-align:left">updated</td>
<td>【可選】文章更新日期</td>
</tr>
<tr>
<td style="text-align:left">tags</td>
<td>【可選】文章標籤</td>
</tr>
<tr>
<td style="text-align:left">categories</td>
<td>【可選】文章分類</td>
</tr>
<tr>
<td style="text-align:left">keywords</td>
<td>【可選】文章關鍵字</td>
</tr>
<tr>
<td style="text-align:left">description</td>
<td>【可選】文章描述</td>
</tr>
<tr>
<td style="text-align:left">top_img</td>
<td>【可選】文章頂部圖片</td>
</tr>
<tr>
<td style="text-align:left">cover</td>
<td>【可選】文章縮略圖(如果沒有設置top_img,文章頁頂部將顯示縮略圖，可設為false/圖片地址/留空)</td>
</tr>
<tr>
<td style="text-align:left">comments</td>
<td>【可選】顯示文章評論模塊(默認 true)</td>
</tr>
<tr>
<td style="text-align:left">toc</td>
<td>【可選】顯示文章TOC(默認為設置中toc的enable配置)</td>
</tr>
<tr>
<td style="text-align:left">toc_number</td>
<td>【可選】顯示toc_number(默認為設置中toc的number配置)</td>
</tr>
<tr>
<td style="text-align:left">copyright</td>
<td>【可選】顯示文章版權模塊(默認為設置中post_copyright的enable配置)</td>
</tr>
<tr>
<td style="text-align:left">copyright_author</td>
<td>【可選】文章版權模塊的<code>文章作者</code></td>
</tr>
<tr>
<td style="text-align:left">copyright_author_href</td>
<td>【可選】文章版權模塊的<code>文章作者</code>鏈接</td>
</tr>
<tr>
<td style="text-align:left">copyright_url</td>
<td>【可選】文章版權模塊的<code>文章連結</code>鏈接</td>
</tr>
<tr>
<td style="text-align:left">copyright_info</td>
<td>【可選】文章版權模塊的<code>版權聲明</code>文字</td>
</tr>
<tr>
<td style="text-align:left">mathjax</td>
<td>【可選】顯示mathjax(當設置mathjax的per_page: false時，才需要配置，默認 false)</td>
</tr>
<tr>
<td style="text-align:left">katex</td>
<td>【可選】顯示katex(當設置katex的per_page: false時，才需要配置，默認 false)</td>
</tr>
<tr>
<td style="text-align:left">aplayer</td>
<td>【可選】在需要的頁面加載aplayer的js和css,請參考文章下面的<code>音樂</code> 配置</td>
</tr>
<tr>
<td style="text-align:left">highlight_shrink</td>
<td>【可選】配置代碼框是否展開(true/false)(默認為設置中highlight_shrink的配置)</td>
</tr>
<tr>
<td style="text-align:left">aside</td>
<td>【可選】顯示側邊欄 (默認 true)</td>
</tr>
</tbody>
</table>
<h2 id="標籤頁">標籤頁</h2>
<ol>
<li>
<p>前往你的 Hexo 博客的根目錄</p>
</li>
<li>
<p>輸入<code>hexo new page tags</code></p>
</li>
<li>
<p>你會找到<code>source/tags/index.md</code>這個文件</p>
</li>
<li>
<p>修改這個文件：</p>
<p><strong>記得添加 <code>type: &quot;tags&quot;</code></strong></p>
</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 標籤</span><br><span class="line">date: 2018-01-05 00:00:00</span><br><span class="line"><span class="section">type: &quot;tags&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<h2 id="分類頁">分類頁</h2>
<ol>
<li>
<p>前往你的 Hexo 博客的根目錄</p>
</li>
<li>
<p>輸入<code>hexo new page categories</code></p>
</li>
<li>
<p>你會找到<code>source/categories/index.md</code>這個文件</p>
</li>
<li>
<p>修改這個文件：</p>
<p><strong>記得添加 <code>type: &quot;categories&quot;</code></strong></p>
</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分類</span><br><span class="line">date: 2018-01-05 00:00:00</span><br><span class="line"><span class="section">type: &quot;categories&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<h2 id="友情鏈接">友情鏈接</h2>
<p>為你的博客創建一個友情鏈接！</p>
<h3 id="創建友情鏈接頁面">創建友情鏈接頁面</h3>
<ol>
<li>
<p>前往你的 Hexo 博客的根目錄</p>
</li>
<li>
<p>輸入 <code>hexo new page link</code></p>
</li>
<li>
<p>你會找到<code>source/link/index.md</code>這個文件</p>
</li>
<li>
<p>修改這個文件：</p>
<p>記得添加 <code>type: &quot;link&quot;</code></p>
</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友情鏈接</span><br><span class="line">date: 2018-06-07 22:17:49</span><br><span class="line"><span class="section">type: &quot;link&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<h3 id="友情鏈接添加">友情鏈接添加</h3>
<p>在Hexo博客目錄中的<code>source/_data</code>（如果沒有 _data 文件夾，請自行創建），創建一個文件<code>link.yml</code></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">友情鏈接</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">那些人，那些事</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Hexo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://hexo.io/zh-tw/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">快速、簡單且強大的網誌框架</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">網站</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">值得推薦的網站</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Youtube</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.youtube.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">視頻網站</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Weibo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.weibo.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">中國最大社交分享平台</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Twitter</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://twitter.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">社交分享平台</span></span><br></pre></td></tr></table></figure>
<p><code>class_name</code>和<code>class_desc</code>支持html格式書寫，如不需要，也可以留空。</p>
<h3 id="友情鏈接界面設置">友情鏈接界面設置</h3>
<p>由 2.2.0 起，友情鏈接界面可以由用户自己自定義，只需要在友情鏈接的md檔設置就行，以普通的Markdown格式書寫。</p>
<h2 id="圖庫">圖庫</h2>
<p>圖庫頁面只是普通的頁面，你只需要<code>hexo n page xxxxx</code> 創建你的頁面就行</p>
<p>然後使用標簽外掛 <a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB">galleryGroup</a>，具體用法請查看對應的內容。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">&lt;div</span> <span class="string">class=&quot;gallery-group-main&quot;&gt;</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;壁紙&#x27;</span> <span class="string">&#x27;收藏的一些壁紙&#x27;</span> <span class="string">&#x27;/Gallery/wallpaper&#x27;</span> <span class="string">https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;漫威&#x27;</span> <span class="string">&#x27;關於漫威的圖片&#x27;</span> <span class="string">&#x27;/Gallery/marvel&#x27;</span> <span class="string">https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;OH MY GIRL&#x27;</span> <span class="string">&#x27;關於OH MY GIRL的圖片&#x27;</span> <span class="string">&#x27;/Gallery/ohmygirl&#x27;</span> <span class="string">https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
<div class="gallery-group-main">

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">壁紙</div>
  <p>收藏的一些壁紙</p>
  <a href='/Gallery/wallpaper'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">漫威</div>
  <p>關於漫威的圖片</p>
  <a href='/Gallery/marvel'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">OH MY GIRL</div>
  <p>關於OH MY GIRL的圖片</p>
  <a href='/Gallery/ohmygirl'></a>
  </figcaption>
  </figure>
  
</div>
<h3 id="子頁面">子頁面</h3>
<p>子頁面也是普通的頁面，你只需要<code>hexo n page xxxxx</code> 創建你的頁面就行</p>
<p>然後使用標簽外掛 <a href="/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A">gallery</a>，具體用法請查看對應的內容。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">gallery</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endgallery</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure>
<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>
          </div>
<div class="note pink icon flat"><i class="note-icon fas fa-sitemap"></i><p>如果你想要使用 <code>/photo/ohmygirl</code> 這樣的鏈接顯示你的圖片內容</p>
<p>你可以把創建好的 <code>ohmygirl</code>整個文件夾移到 <code>photo</code>文件夾裏去</p>
</div>
<h2 id="404頁面">404頁面</h2>
<p>主題內置了一個簡單的404頁面，可在設置中開啟</p>
<div class="note info flat"><p>本地預覽時，訪問出錯的網站是不會跳到404頁面的。</p>
<p>如需本地預覽，請訪問<code>http://localhost:4000/404.html</code></p>
</div>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># A simple 404 page</span></span><br><span class="line"><span class="attr">error_404:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&quot;頁面沒有找到&quot;</span></span><br><span class="line">  <span class="attr">background:</span> </span><br></pre></td></tr></table></figure>
<div class="gallery-group-main">

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">壁紙</div>
  <p>收藏的一些壁紙</p>
  <a href='/Gallery/wallpaper'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">漫威</div>
  <p>關於漫威的圖片</p>
  <a href='/Gallery/marvel'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">OH MY GIRL</div>
  <p>關於OH MY GIRL的圖片</p>
  <a href='/Gallery/ohmygirl'></a>
  </figcaption>
  </figure>
  
</div>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-error404.png" alt=""></p>
<a class="btn-beautify button--animated block pink right larger" href="/posts/4aa8abbe/" 
  title="🛠 Butterfly 安裝文檔(三) 主題配置"><i class="far fa-hand-point-right"></i><span>🛠 Butterfly 安裝文檔(三) 主題配置</span></a>]]></content>
      <categories>
        <category>Docs文檔</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 安裝文檔(五) 主題問答</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E5%AE%89%E8%A3%9D%E6%96%87%E6%AA%94-%E4%BA%94-%E4%B8%BB%E9%A1%8C%E5%95%8F%E7%AD%94/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2021 年 09 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p>
<p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/3.8.4">3.8.4</a></p>
</div>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>📚  文檔目錄</p>
<p><a href="#">Post not found: Butterfly-安裝文檔-一-快速開始 🚀 快速開始</a> - <a href="#">Post not found: Butterfly-安裝文檔-二-主題頁面 📑 主題頁面</a> - <a href="#">Post not found: Butterfly-安裝文檔-三-主題配置-1 🛠 主題配置-1</a> - <a href="#">Post not found: Butterfly-安裝文檔-四-主題配置-2 ⚔️ 主題配置-2</a> - <a href="#">Post not found: Butterfly-安裝文檔-五-主題問答 ❓ 主題問答</a> - <a href="#">Post not found: Butterfly-安裝文檔-六-進階教程 ⚡️ 進階教程</a> - <a href="#">Post not found: Butterfly-安裝文檔-七-更新日誌 ✨ 更新日誌</a> - <a href="#">Post not found: Butterfly-打賞 🤞 打賞</a></p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示</p>
</div>
<hr>
<p>以下是一些網友在安裝的過程中出現的問題。在提問題之前，先看有沒有解決方法。</p>
<h3 id="運行後網頁顯示代碼">運行後網頁顯示代碼</h3>
<p>頁面只顯示 <code>extends includes/layout.pug block content #recent-posts.recent-posts include includes/recent-posts.pug include includes/pagination.pug #aside_content.aside_content include includes/aside.pug</code></p>
<blockquote>
<p>請下載安裝：<code>npm install hexo-renderer-pug hexo-renderer-stylus --save</code> or `yarn add hexo-renderer-pug hexo-renderer-stylus</p>
</blockquote>
<h3 id="配置友情鏈接報錯">配置友情鏈接報錯</h3>
<p>配置友情鏈接頁面時出現報錯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ERROR D:\Desktop\orxing-blog\themes\Butterfly\layout\flink.pug:2</span><br><span class="line">    1| .flink</span><br><span class="line">  &gt; 2|   each i in site.data.link</span><br><span class="line">    3|     p.comment-word= i.class_name</span><br><span class="line">    4|     .post-cards</span><br><span class="line">    5|       ul.md-links</span><br><span class="line"></span><br><span class="line">Cannot read property &amp;#39;length&amp;#39; of undefined</span><br><span class="line">TypeError: D:\Desktop\orxing-blog\themes\Butterfly\layout\flink.pug:2</span><br><span class="line">    1| .flink</span><br><span class="line">  &gt; 2|   each i in site.data.link</span><br><span class="line">    3|     p.comment-word= i.class_name</span><br><span class="line">    4|     .post-cards</span><br><span class="line">    5|       ul.md-links</span><br><span class="line"></span><br><span class="line">Cannot read property &amp;#39;length&amp;#39; of undefined</span><br><span class="line">    at eval (eval at wrap (D:\Desktop\orxing-blog\node_modules\pug-runtime\wrap.js:6:10), &lt;anonymous&gt;:1890:32)</span><br><span class="line">    at eval (eval at wrap (D:\Desktop\orxing-blog\node_modules\pug-runtime\wrap.js:6:10), &lt;anonymous&gt;:2017:4)</span><br><span class="line">    at template (eval at wrap (D:\Desktop\orxing-blog\node_modules\pug-runtime\wrap.js:6:10), &lt;anonymous&gt;:10152:72)</span><br><span class="line">    at Theme._View.View._compiled (D:\Desktop\orxing-blog\node_modules\hexo\lib\theme\view.js:123:48)</span><br><span class="line">    at Theme._View.View.View.render (D:\Desktop\orxing-blog\node_modules\hexo\lib\theme\view.js:29:15)</span><br><span class="line">    at D:\Desktop\orxing-blog\node_modules\hexo\lib\hexo\index.js:349:21</span><br><span class="line">    at tryCatcher (D:\Desktop\orxing-blog\node_modules\bluebird\js\release\util.js:16:23)</span><br><span class="line">    at D:\Desktop\orxing-blog\node_modules\bluebird\js\release\method.js:15:34</span><br><span class="line">    at RouteStream._read (D:\Desktop\orxing-blog\node_modules\hexo\lib\hexo\router.js:123:3)</span><br><span class="line">    at RouteStream.Readable.read (_stream_readable.js:457:10)</span><br><span class="line">    at resume_ (_stream_readable.js:936:12)</span><br><span class="line">    at processTicksAndRejections (internal/process/task_queues.js:84:9)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>請檢查 <code>link.yml</code>文檔內代碼的空格</p>
</blockquote>
<h3 id="升級最新版後運行報錯">升級最新版後運行報錯</h3>
<p>升級最新版本hexo g後報錯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INFO  Deleted database.</span><br><span class="line">INFO  Start processing</span><br><span class="line">FATAL Something&amp;#39;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">TypeError: Cannot read property &amp;#39;enable&amp;#39; of undefined</span><br><span class="line">    at Hexo.&lt;anonymous&gt; (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/themes/Butterfly/scripts/post-lazyload.js:5:23)</span><br><span class="line">    at Hexo.tryCatcher (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Hexo.&lt;anonymous&gt; (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/method.js:15:34)</span><br><span class="line">    at /Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/hexo/lib/extend/filter.js:60:50</span><br><span class="line">    at tryCatcher (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Object.gotValue (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/reduce.js:155:18)</span><br><span class="line">    at Object.gotAccum (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/reduce.js:144:25)</span><br><span class="line">    at Object.tryCatcher (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at Promise._settlePromiseFromHandler (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/promise.js:517:31)</span><br><span class="line">    at Promise._settlePromise (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/promise.js:574:18)</span><br><span class="line">    at Promise._settlePromiseCtx (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/promise.js:611:10)</span><br><span class="line">    at _drainQueueStep (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:142:12)</span><br><span class="line">    at _drainQueue (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:131:9)</span><br><span class="line">    at Async._drainQueues (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:147:5)</span><br><span class="line">    at Immediate.Async.drainQueues [as _onImmediate] (/Users/qinkangdeid/Nextcloud/work/codes/personal/github/personal/qinkangdeid.github.io/node_modules/bluebird/js/release/async.js:17:14)</span><br><span class="line">    at processImmediate (internal/timers.js:439:21)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>請參照最新版的_config.yml, 比對後，把缺的配置複製到主題配置文件中去</p>
</blockquote>
<h3 id="wordcount-is-not-a-function-totalcount-is-not-a-function">wordcount is not a function / totalcount is not a function</h3>
<p>報錯<code>wordcount is not a function</code></p>
<blockquote>
<p>請檢查是否安裝了wordcount插件 <code>npm i --save hexo-wordcount</code></p>
</blockquote>
<h3 id="升級2-0-0後運行報錯">升級2.0.0後運行報錯</h3>
<p>舊版本升級到2.0.0後報錯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INFO Start processing</span><br><span class="line">FATAL Something’s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span><br><span class="line">Template render error: (unknown path)</span><br><span class="line">unexpected end of file</span><br><span class="line">at Object.prettifyError (F:\hexo\nodemodules\nunjucks\src\lib.js:36:11)</span><br><span class="line">at Template.render (F:\hexo\node_modules\nunjucks\src\environment.js:542:21)</span><br><span class="line">at Environment.renderString (F:\hexo\node_modules\nunjucks\src\environment.js:380:17)</span><br><span class="line">at Promise.fromCallback.cb (F:\hexo\node_modules\hexo\lib\extend\tag.js:123:48)</span><br><span class="line">at tryCatcher (F:\hexo\node_modules\bluebird\js\release\util.js:16:23)</span><br><span class="line">at Function.Promise.fromNode.Promise.fromCallback (F:\hexo\node_modules\bluebird\js\release\promise.js:185:30)</span><br><span class="line">at Tag.render (F:\hexo\node_modules\hexo\lib\extend\tag.js:123:18)</span><br><span class="line">at Object.onRenderEnd (F:\hexo\node_modules\hexo\lib\hexo\post.js:280:20)</span><br><span class="line">at Promise.then.then.result (F:\hexo\node_modules\hexo\lib\hexo\render.js:64:19)</span><br><span class="line">at tryCatcher (F:\hexo\node_modules\bluebird\js\release\util.js:16:23)</span><br><span class="line">at Promise.settlePromiseFromHandler (F:\hexo\nodemodules\bluebird\js\release\promise.js:517:31)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>2.0.0版本以上刪掉了gallery，而引入新的gallery。所以如果有使用舊版，需刪掉或者更改寫法。</p>
</blockquote>
<h3 id="代碼渲染與實際不同">代碼渲染與實際不同</h3>
<p>2.1.0 以下版本會出現的問題</p>
<p>代碼渲染與實際不同</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;aaa&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>渲染結果:</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/73515338-e6874d80-442f-11ea-9d07-725d37002985.png" alt=""></p>
<blockquote>
<p>cheerio版本錯誤，請安裝0.22.0版本</p>
<p>npm install cheerio@0.22.0 --save</p>
</blockquote>
<h3 id="搜索欄在底部">搜索欄在底部</h3>
<p>hexo deploy後搜索欄在頁面底部</p>
<blockquote>
<p>生成前先hexo clean</p>
</blockquote>
<h3 id="本地可以正常運行，但是push上去後出錯-缺失-無效">本地可以正常運行，但是push上去後出錯/缺失/無效</h3>
<blockquote>
<ol>
<li>清理瀏覽器緩存</li>
<li>如果1無效，請確認上傳時是否有運行 hexo clean</li>
</ol>
</blockquote>
<h3 id="已在Hexo的配置文件設置了語言，為什麼導航欄仍然是英文">已在Hexo的配置文件設置了語言，為什麼導航欄仍然是英文</h3>
<blockquote>
<p>請在導航的配置裏，自己修改成想要的中文</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">首頁:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line"><span class="string">時間軸:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line"><span class="string">標籤:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line"><span class="string">分類:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br></pre></td></tr></table></figure>
<h3 id="運行報錯-Cannot-read-property-‘bind’-of-undefined-full-url-for-is-not-function">運行報錯 Cannot read property ‘bind’ of undefined/full_url_for is not function</h3>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">TypeError: Cannot read property <span class="string">&#x27;bind&#x27;</span> of undefined</span><br></pre></td></tr></table></figure>
<blockquote>
<p>把Hexo升級到4.0以上版本</p>
</blockquote>
<h3 id="Cannot-read-property-‘appId’-of-undefined">Cannot read property ‘appId’ of undefined</h3>
<p>報錯</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">  &gt; <span class="number">1</span>| -</span><br><span class="line">    <span class="number">2</span>|   var algolia = <span class="string">&#x27;undefined&#x27;</span>;</span><br><span class="line">    <span class="number">3</span>|   var env = process.env;</span><br><span class="line">    <span class="number">4</span>|   <span class="keyword">if</span> (theme.algolia_search.enable) &#123;</span><br><span class="line"></span><br><span class="line">Cannot read property <span class="string">&#x27;appId&#x27;</span> of undefined</span><br><span class="line">    at eval (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">8</span>:<span class="number">49</span>)</span><br><span class="line">    at template (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">329</span>:<span class="number">53</span>)</span><br><span class="line">    at _View._compiledSync (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">132</span>:<span class="number">24</span>)</span><br><span class="line">    at _View.renderSync (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">59</span>:<span class="number">25</span>)</span><br><span class="line">    at F:\github\Blog\blog\node_modules\hexo\lib\plugins\helper\partial.js:<span class="number">31</span>:<span class="number">52</span></span><br><span class="line">    at Cache.apply (F:\github\Blog\blog\node_modules\hexo\node_modules\hexo<span class="literal">-util</span>\lib\cache.js:<span class="number">27</span>:<span class="number">46</span>)</span><br><span class="line">    at Object.fragmentCache (F:\github\Blog\blog\node_modules\hexo\lib\plugins\helper\fragment_cache.js:<span class="number">11</span>:<span class="number">34</span>)</span><br><span class="line">    at Object.partial (F:\github\Blog\blog\node_modules\hexo\lib\plugins\helper\partial.js:<span class="number">31</span>:<span class="number">17</span>)</span><br><span class="line">    at eval (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">149</span>:<span class="number">46</span>)</span><br><span class="line">    at template (eval at wrap (F:\github\Blog\blog\node_modules\pug<span class="literal">-runtime</span>\wrap.js:<span class="number">6</span>:<span class="number">10</span>), &lt;anonymous&gt;:<span class="number">5213</span>:<span class="number">93</span>)</span><br><span class="line">    at _View._compiled (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">136</span>:<span class="number">50</span>)</span><br><span class="line">    at _View.render (F:\github\Blog\blog\node_modules\hexo\lib\theme\view.js:<span class="number">39</span>:<span class="number">17</span>)</span><br><span class="line">    at F:\github\Blog\blog\node_modules\hexo\lib\hexo\index.js:<span class="number">64</span>:<span class="number">21</span></span><br><span class="line">    at tryCatcher (F:\github\Blog\blog\node_modules\hexo\node_modules\bluebird\js\release\util.js:<span class="number">16</span>:<span class="number">23</span>)</span><br><span class="line">    at F:\github\Blog\blog\node_modules\hexo\node_modules\bluebird\js\release\method.js:<span class="number">15</span>:<span class="number">34</span></span><br><span class="line">    at RouteStream._read (F:\github\Blog\blog\node_modules\hexo\lib\hexo\router.js:<span class="number">30</span>:<span class="number">5</span>)</span><br><span class="line">    at RouteStream.Readable.read (_stream_readable.js:<span class="number">490</span>:<span class="number">10</span>)</span><br><span class="line">    at resume_ (_stream_readable.js:<span class="number">975</span>:<span class="number">12</span>)</span><br><span class="line">    at processTicksAndRejections (internal/<span class="keyword">process</span>/task_queues.js:<span class="number">80</span>:<span class="number">21</span>) &#123;</span><br><span class="line">  path: <span class="string">&#x27;F:\\github\\Blog\\blog\\themes\\Butterfly\\layout\\includes\\head.pug&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>algolia 插件安裝後還需要配置<br>
查看插件文檔配置</p>
</blockquote>
<h3 id="頂部出現-Loading">頂部出現 Loading</h3>
<blockquote>
<p>生成前先 hexo clean</p>
</blockquote>
<a class="btn-beautify button--animated block orange right larger" href="/posts/4073eda/" 
  title="⚡️ Butterfly 安裝文檔(六) 進階教程"><i class="far fa-hand-point-right"></i><span>⚡️ Butterfly 安裝文檔(六) 進階教程</span></a>
<h3 id="點擊中文目錄報錯的問題">點擊中文目錄報錯的問題</h3>
<p>這種情況出現在主題為 <code>3.0.0</code>以下版本，升級主題就行</p>
]]></content>
      <categories>
        <category>Docs文檔</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 安裝文檔(六) 進階教程</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E5%AE%89%E8%A3%9D%E6%96%87%E6%AA%94-%E5%85%AD-%E9%80%B2%E9%9A%8E%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2021 年 09 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p>
<p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/3.8.4">3.8.4</a></p>
</div>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>📚  文檔目錄</p>
<p><a href="#">Post not found: Butterfly-安裝文檔-一-快速開始 🚀 快速開始</a> - <a href="#">Post not found: Butterfly-安裝文檔-二-主題頁面 📑 主題頁面</a> - <a href="#">Post not found: Butterfly-安裝文檔-三-主題配置-1 🛠 主題配置-1</a> - <a href="#">Post not found: Butterfly-安裝文檔-四-主題配置-2 ⚔️ 主題配置-2</a> - <a href="#">Post not found: Butterfly-安裝文檔-五-主題問答 ❓ 主題問答</a> - <a href="#">Post not found: Butterfly-安裝文檔-六-進階教程 ⚡️ 進階教程</a> - <a href="#">Post not found: Butterfly-安裝文檔-七-更新日誌 ✨ 更新日誌</a> - <a href="#">Post not found: Butterfly-打賞 🤞 打賞</a></p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示</p>
</div>
<hr>
<h2 id="建議">建議</h2>
<ol>
<li>不要把個人需要的文件/圖片放在主題<code>source</code>文件夾裏，因為在升級主題的過程中，可能會把文件覆蓋刪除了。<br>
在Hexo根目錄的<code>source</code>文件夾裏，創建一個文件夾來放置個人文件/圖片。<br>
引用文件直接為<code>/文件夾名稱/文件名</code></li>
</ol>
<h2 id="音樂">音樂</h2>
<p>音樂界面使用了插件 <code>hexo-tag-aplayer</code><br>
使用方法請參考插件<a href="https://github.com/MoePlayer/hexo-tag-aplayer/blob/master/docs/README-zh_cn.md">文檔</a></p>
<p>音樂頁面只是普通的page頁，按普通頁面操作生成就行。</p>
<blockquote>
<p>以下內容可供<strong>選擇</strong>配置</p>
<p>注意： 仍需要安裝插件<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a></p>
</blockquote>
<p>插件會在每一個文件都插入 js 和 css，為了避免這一情況，3.0 版本內置了 aplayer 需要的 css 和 js。</p>
<p>首先在Hexo根目錄<code>_config</code>裏配置<code>asset_inject</code>為<code>false</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>然後在你需要使用aplayer的頁面Front-matter添加</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">aplayer: true</span><br></pre></td></tr></table></figure>
<p>這樣只會在需要aplayer的頁面插入js和css。</p>
<p>如何添加全局 Aplayer 播放，請參考 <a href="/posts/507c070f/">這篇文章</a></p>
<h2 id="電影">電影</h2>
<p>電影界面使用了插件 <code>hexo-butterfly-douban</code><br>
使用方法請參考插件的<a href="https://github.com/jerryc127/butterfly-plugins/tree/main/hexo-butterfly-douban">文檔</a>。</p>
<p><strong>注意：</strong></p>
<ol>
<li>hexo-butterfly-douban 會主動生成頁面，所以不需要自己創建。</li>
<li>如遇到無法抓取問題，顯示 <code>INFO  0 movies have been loaded in xxx ms, because you are offline or your network is bad</code><br>
請過段時間再試試，這我也無能為力。</li>
</ol>
<h2 id="説説">説説</h2>
<h3 id="Artitalk">Artitalk</h3>
<p>安裝插件 <a href="https://www.npmjs.com/package/hexo-butterfly-artitalk">hexo-butterfly-artitalk</a></p>
<p>具體配置查看<a href="https://github.com/jerryc127/butterfly-plugins/tree/main/hexo-butterfly-artitalk">插件文檔</a></p>
<h3 id="HexoPlusPlus-Talk">HexoPlusPlus Talk</h3>
<p>安裝插件 <a href="https://www.npmjs.com/package/hexo-butterfly-hpptalk">hexo-butterfly-hpptalk</a></p>
<p>具體配置查看<a href="https://github.com/jerryc127/butterfly-plugins/tree/main/hexo-butterfly-hpptalk">插件文檔</a></p>
<h2 id="自定義代碼配色">自定義代碼配色</h2>
<a class="btn-beautify button--animated block blue" href="/posts/b37b5fe3/" 
  title="點擊前往"><i class="fas fa-code"></i><span>點擊前往</span></a>
<h2 id="自定義側邊欄">自定義側邊欄</h2>
<a class="btn-beautify button--animated block green" href="/posts/ea33ab97/" 
  title="點擊前往"><i class="fas fa-lightbulb"></i><span>點擊前往</span></a>
<h2 id="添加全局吸底Aplayer教程">添加全局吸底Aplayer教程</h2>
<a class="btn-beautify button--animated block pink" href="/posts/507c070f/" 
  title="點擊前往"><i class="fas fa-music"></i><span>點擊前往</span></a>
<h2 id="Icon">Icon</h2>
<p>Butterfly主題內置了<a href="https://fontawesome.com/">Font Awesome V5 </a>圖標，目前已更新到 5.13.0，總共有1,588個免費圖標。由於是國外的圖標網站，對於國內的一些網站Icon並不支持。如有需要，你可以引入其它的圖標服務商。</p>
<h3 id="iconfont">iconfont</h3>
<p>國內最出名的莫過於<a href="https://www.iconfont.cn/">iconfont</a>,功能很強大且圖標內容很豐富的矢量圖標庫。很多<code>Font Awesome</code>不支持的圖標都可以在這裏找到。同時，<a href="https://www.iconfont.cn/">iconfont</a>支持選擇需要的圖標生成css鏈接，減少不必要的CSS加載。</p>
<h4 id="註冊賬號">註冊賬號</h4>
<p>打開<a href="https://www.iconfont.cn/">iconfont</a>的網站，點擊導航欄的<code>人像</code>圖標，會跳出註冊界面，按要求註冊賬號。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont.png" alt="Snipaste_2020-05-28_21-12-01"></p>
<h4 id="添加圖標入庫">添加圖標入庫</h4>
<p>選擇自己需要的圖標，把鼠標移到圖標上，會顯示三個按鈕（依次是添加入庫、收藏和下載），而我們需要的是把圖標添加入庫</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-add.png" alt="image-20200528205401440"></p>
<p>添加入庫後，你可以看到網站右上角<code>購物車</code>圖標顯示了<code>1</code>字，代表圖標已經添加入庫，點擊<code>購物車</code>圖標，會彈出側邊欄顯示詳情。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-check.png" alt="image-20200528205925258"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-detail.png" alt="image-20200528210120442"></p>
<p>已選擇的圖標會顯示在上面，你可以重複上面的操作，把需要的圖標添加入庫，然後點擊<code>添加到項目</code>。</p>
<p>接下來會要求選擇項目名稱，沒有的自己創建一個。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-create.png" alt="image-20200528211624459"></p>
<h4 id="生成CSS鏈接">生成CSS鏈接</h4>
<p>在添加到項目之後，會跳到項目的詳情界面。點擊<code>Font class</code>，然後再點擊<code>暫無代碼，點擊生成</code>文字。網站會自動生成CSS鏈接，我們只需要複製鏈接就行。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-link.png" alt="image-20200528212301786"></p>
<h4 id="添加鏈接進主題配置文件">添加鏈接進主題配置文件</h4>
<p>打開<code>主題配置文件</code>，找到<code>inject</code>配置，按要求把鏈接填入</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-setting.png" alt="image-20200528212440743"></p>
<p>在我們需要使用的地方填入icon，例如<code>Menu</code>，圖片使用格式為<code>iconfont icon名字</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-setting-menu.png" alt="image-20200528213151304"></p>
<p>運行Butterfly之後，你就可以看到menu的圖標生效了</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-iconfont-show.png" alt="image-20200528213346338"></p>
<h4 id="其他添加方法">其他添加方法</h4>
<p>除了通過引入CSS鏈接使用圖標，iconfont也支持通過其它方法使用圖標，具體可查看<a href="https://www.iconfont.cn/help/detail?helptype=code">iconfont官方使用文檔</a></p>
<h3 id="其它圖標提供商">其它圖標提供商</h3>
<p>除了<a href="https://www.iconfont.cn/">iconfont</a>，還有<a href="https://github.com/Remix-Design/RemixIcon">RemixIcon</a>、<a href="https://www.flaticon.com/categories/seo-and-web">Flaticon</a>等等提供商，很多圖標可以選擇，具體使用方法請參考各自的文檔。</p>
<h2 id="圖片壓縮">圖片壓縮</h2>
<p>Butterfly主題需要使用到很多圖片。如果圖片太大，會嚴重拖慢網站的加載速度。</p>
<p>圖片壓縮能夠有效的緩解這個問題。</p>
<p>除了通過<code>gulp-imagemin</code>來壓縮圖片，還可以通過在綫壓縮網站和軟件來進行壓縮。以下兩款是我自己正在使用的工具。網上有很多這樣的工具，挑選一款適合自己的就行。</p>
<ul>
<li>
<p><a href="https://tinypng.com/">tinypng</a></p>
<p>一個在綫壓縮的網站。壓縮後的圖片也保留了很高的質量，在知乎上很多人推薦，不過免費版有限制。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-tinypng.png" alt="image-20200526173511503"></p>
</li>
<li>
<p><a href="https://saerasoft.com/caesium/">caesium</a></p>
<p>開源軟件，支持Windows和macOS。可以批量壓縮軟件，無限制。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-caesium.png" alt="image-20200526173316278"></p>
</li>
<li>
<p><a href="https://github.com/marketplace/imgbot">imgbot</a></p>
</li>
</ul>
<p>imgbot 是一款 Github 插件。</p>
<p>安裝後，你上傳圖片到 Github 去，imgbot 會自動壓縮圖片並推送 PR，我們只需要合併 PR 就行</p>
<p>你可以配置 imgbot 的偵測方法、壓縮方法（有損/無損），具體可以查看插件的文檔</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-enhance-imgbot.png" alt="image-20200830231742951"></p>
<h2 id="插件推薦">插件推薦</h2>
<ul>
<li>
<p><a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a></p>
<p>可以把鏈接permalink轉為數字的插件，配置容易，生成時自動轉為數字。</p>
</li>
<li>
<p><a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a></p>
<p>生成RSS文件的插件</p>
</li>
<li>
<p><a href="https://github.com/hexojs/hexo-filter-nofollow">hexo-filter-nofollow</a></p>
<p>為網站使用到的所有外鏈添加<code>rel=&quot;noopener external nofollow noreferrer&quot;</code>, 可以有效地加強網站SEO和防止權重流失</p>
</li>
<li>
<p><a href="https://github.com/hexojs/hexo-generator-sitemap">hexo-generator-sitemap</a></p>
<p>生成sitemap的插件</p>
</li>
<li>
<p><a href="https://github.com/coneycode/hexo-generator-baidu-sitemap">hexo-generator-baidu-sitemap</a></p>
<p>看名字就知道，是專門為百度生成sitemap的插件</p>
</li>
</ul>
<a class="btn-beautify button--animated block purple right larger" href="/posts/198a4240/" 
  title="✨ Butterfly 安裝文檔(七) 更新日誌"><i class="far fa-hand-point-right"></i><span>✨ Butterfly 安裝文檔(七) 更新日誌</span></a>]]></content>
      <categories>
        <category>Docs文檔</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 安裝文檔(四) 主題配置-2</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E5%AE%89%E8%A3%9D%E6%96%87%E6%AA%94-%E5%9B%9B-%E4%B8%BB%E9%A1%8C%E9%85%8D%E7%BD%AE-2/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2021 年 09 月 18 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p>
<p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/3.8.4">3.8.4</a></p>
</div>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>📚  文檔目錄</p>
<p><a href="#">Post not found: Butterfly-安裝文檔-一-快速開始 🚀 快速開始</a> - <a href="#">Post not found: Butterfly-安裝文檔-二-主題頁面 📑 主題頁面</a> - <a href="#">Post not found: Butterfly-安裝文檔-三-主題配置-1 🛠 主題配置-1</a> - <a href="#">Post not found: Butterfly-安裝文檔-四-主題配置-2 ⚔️ 主題配置-2</a> - <a href="#">Post not found: Butterfly-安裝文檔-五-主題問答 ❓ 主題問答</a> - <a href="#">Post not found: Butterfly-安裝文檔-六-進階教程 ⚡️ 進階教程</a> - <a href="#">Post not found: Butterfly-安裝文檔-七-更新日誌 ✨ 更新日誌</a> - <a href="#">Post not found: Butterfly-打賞 🤞 打賞</a></p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示</p>
</div>
<hr>
<h2 id="評論">評論</h2>
<div class="tabs" id="comments"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#comments-1">通用設置</button></li><li class="tab"><button type="button" data-href="#comments-2">Disqus</button></li><li class="tab"><button type="button" data-href="#comments-3">Disqusjs</button></li><li class="tab"><button type="button" data-href="#comments-4">livere（來必力）</button></li><li class="tab"><button type="button" data-href="#comments-5">Gitalk</button></li><li class="tab"><button type="button" data-href="#comments-6">Valine</button></li><li class="tab"><button type="button" data-href="#comments-7">Waline</button></li><li class="tab"><button type="button" data-href="#comments-8">Utterances</button></li><li class="tab"><button type="button" data-href="#comments-9">Facebook Comments</button></li><li class="tab"><button type="button" data-href="#comments-10">Twikoo</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="comments-1"><p>從3.0.0開始，開啟評論需要在<code>comments-use</code>中填寫你需要的評論。</p>
<p>支持雙評論顯示，只需要配置兩個評論（第一個為默認顯示）</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">comments:</span><br><span class="line">  # Up to two comments system, the first will be shown as default</span><br><span class="line">  # Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo</span><br><span class="line">  use:</span><br><span class="line"><span class="bullet">    -</span> Valine</span><br><span class="line">  text: true # Display the comment name next to the button</span><br><span class="line">  # lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span><br><span class="line">  # If you set it to true, the comment count will be invalid</span><br><span class="line">  lazyload: true</span><br><span class="line">  count: true # Display comment count in top<span class="emphasis">_img</span></span><br><span class="line"><span class="emphasis">  card_</span>post<span class="emphasis">_count: false # Display comment count in Home Page</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>參數</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>use</td>
<td>使用的評論（請注意，填寫的評論首字母需要大寫。最多支持兩個，如果不需要請留空）<br><em>注意：雙評論不能是 Disqus 和 Disqusjs 一起，由於其共用同一個 ID，會出錯</em></td>
</tr>
<tr>
<td>text</td>
<td>是否顯示評論服務商的名字</td>
</tr>
<tr>
<td>lazyload</td>
<td>是否為評論開啟lazyload，開啟後，只有滾動到評論位置時才會加載評論所需要的資源（開啟lazyload後，評論數將不顯示）</td>
</tr>
<tr>
<td>count</td>
<td>是否在文章頂部顯示評論數 <br/> livere 和 utterances 不支持評論數顯示</td>
</tr>
<tr>
<td>card_post_count</td>
<td>是否在首頁文章卡片顯示評論數<br/>gitalk、livere 和 utterances 不支持評論數顯示</td>
</tr>
</tbody>
</table>
<blockquote>
<p>單評論</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-single-comments.png" alt="image-20200731172506907"></p>
<blockquote>
<p>雙評論</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-double-comments.png" alt="image-20200731173006128"></p>
<blockquote>
<p>顯示text</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-double-comments.png" alt="image-20200731173006128"></p>
<blockquote>
<p>不顯示text</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-double-comments-not-text.png" alt="image-20200731173143712"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-2"><p>註冊 <a href="https://disqus.com/">disqus</a>，配置你自己的 disqus，然後在<code>Butterfly</code>裏開啟它。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">shortname:</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-disqus-new.png" alt="image-20201027211418161"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-3"><p>與Disqus一樣，但由於Disqus在中國大陸無法訪問， 使用Disqusjs可以在無法訪問Disqus時顯示評論。具體可參考<a href="https://github.com/SukkaW/DisqusJS">Disqusjs</a>。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">disqusjs:</span><br><span class="line">  shortname:</span><br><span class="line">  siteName:</span><br><span class="line">  apikey:</span><br><span class="line">  api:</span><br><span class="line">  nocomment: # display when a blog post or an article has no comment attached</span><br><span class="line">  admin:</span><br><span class="line">  adminLabel:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>當無法訪問 Disqus 時，會顯示</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-disqusjs-new.png" alt="image-20201027212543851"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-4"><p>註冊<a href="https://livere.com/">來必力</a>，配置你自己的來必力設置，然後在<code>Butterfly</code>裏開啟它。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">livere:</span></span><br><span class="line">  <span class="attr">uid:</span></span><br></pre></td></tr></table></figure>
<p>laibili 的 uid 你能在這裏找到:</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-laibili.jpg" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-laibili_2-new.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-5"><p>遵循 <a href="https://github.com/gitalk/gitalk">gitalk</a>的指示去獲取你的 github Oauth 應用的 client id 和 secret 值。以及查看它的相關配置説明。</p>
<p>然後修改 <code>主題配置文件</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="string">你的client</span> <span class="string">id</span> </span><br><span class="line">  <span class="attr">client_secret:</span> <span class="string">你的client</span> <span class="string">secret</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">你的github倉庫</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="string">你的github用户名</span></span><br><span class="line">  <span class="attr">admin:</span> <span class="string">該倉庫的擁有者或協作者</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-CN</span> <span class="comment"># en, zh-CN, zh-TW, es-ES, fr, ru</span></span><br><span class="line">  <span class="attr">perPage:</span> <span class="number">10</span> <span class="comment"># Pagination size, with maximum 100.</span></span><br><span class="line">  <span class="attr">distractionFreeMode:</span> <span class="literal">false</span> <span class="comment"># Facebook-like distraction free mode.</span></span><br><span class="line">  <span class="attr">pagerDirection:</span> <span class="string">last</span> <span class="comment"># Comment sorting direction, available values are last and first.</span></span><br><span class="line">  <span class="attr">createIssueManually:</span> <span class="literal">false</span> <span class="comment"># Gitalk will create a corresponding github issue for your every single page automatically</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-gitalk-new.png" alt="image-20201027212704930"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-6"><p>遵循 <a href="https://github.com/xCss/Valine">Valine</a>的指示去配置你的 LeanCloud 應用。以及查看相應的配置説明。</p>
<p>然後修改 <code>主題配置文件</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span>  <span class="comment"># leancloud application app id</span></span><br><span class="line">  <span class="attr">appKey:</span>  <span class="comment"># leancloud application app key</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># comment list page size</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">monsterid</span> <span class="comment"># gravatar style https://valine.js.org/#/avatar</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">en</span> <span class="comment"># i18n: zh-CN/zh-TW/en/ja</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">記得留下你的暱稱和郵箱....可以快速收到回復</span> <span class="comment"># valine comment input placeholder(like: Please leave your footprints )</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail,link</span> <span class="comment">#valine comment header info (nick/mail/link)</span></span><br><span class="line">  <span class="attr">recordIP:</span> <span class="literal">false</span> <span class="comment"># Record reviewer IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="string">/img/comment_bg.png</span> <span class="comment"># valine background</span></span><br><span class="line">  <span class="attr">emojiCDN:</span> <span class="comment"># emoji CDN</span></span><br><span class="line">  <span class="attr">enableQQ:</span> <span class="literal">false</span> <span class="comment"># enable the Nickname box to automatically get QQ Nickname and QQ Avatar</span></span><br><span class="line">  <span class="attr">requiredFields:</span> <span class="string">nick,mail</span> <span class="comment"># required fields (nick/mail)</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure>
<p>Valine於 v1.4.5 開始支持自定義表情，如果你需要自行配置，請在<code>emojiCDN</code>配置表情CDN。</p>
<p>同時在Hexo 工作目錄下的<code>source/_data/</code>創建一個json文件<code>valine.json</code>,等同於Valine需要配置的<code>emojiMaps</code>，<code>valine.json</code>配置方式可參考如下</p>
<blockquote>
<p>valine.json</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123; </span><br><span class="line"><span class="attr">&quot;tv_doge&quot;</span>: <span class="string">&quot;6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_親親&quot;</span>: <span class="string">&quot;a8111ad55953ef5e3be3327ef94eb4a39d535d06.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_偷笑&quot;</span>: <span class="string">&quot;bb690d4107620f1c15cff29509db529a73aee261.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_再見&quot;</span>: <span class="string">&quot;180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_冷漠&quot;</span>: <span class="string">&quot;b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_發怒&quot;</span>: <span class="string">&quot;34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_發財&quot;</span>: <span class="string">&quot;34db290afd2963723c6eb3c4560667db7253a21a.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_可愛&quot;</span>: <span class="string">&quot;9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_吐血&quot;</span>: <span class="string">&quot;09dd16a7aa59b77baa1155d47484409624470c77.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_呆&quot;</span>: <span class="string">&quot;fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_嘔吐&quot;</span>: <span class="string">&quot;9f996894a39e282ccf5e66856af49483f81870f3.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_困&quot;</span>: <span class="string">&quot;241ee304e44c0af029adceb294399391e4737ef2.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_壞笑&quot;</span>: <span class="string">&quot;1f0b87f731a671079842116e0991c91c2c88645a.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_大佬&quot;</span>: <span class="string">&quot;093c1e2c490161aca397afc45573c877cdead616.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_大哭&quot;</span>: <span class="string">&quot;23269aeb35f99daee28dda129676f6e9ea87934f.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_委屈&quot;</span>: <span class="string">&quot;d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_害羞&quot;</span>: <span class="string">&quot;a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_尷尬&quot;</span>: <span class="string">&quot;7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_微笑&quot;</span>: <span class="string">&quot;70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_思考&quot;</span>: <span class="string">&quot;90cf159733e558137ed20aa04d09964436f618a1.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_驚嚇&quot;</span>: <span class="string">&quot;0d15c7e2ee58e935adc6a7193ee042388adc22af.png&quot;</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-valine.png" alt=""></p>
<blockquote>
<p>default_avatar</p>
</blockquote>
<table>
<thead>
<tr>
<th>參數</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>留空（默認）</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000" alt=""></td>
</tr>
<tr>
<td>mp</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp" alt=""></td>
</tr>
<tr>
<td>identicon</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=identicon" alt=""></td>
</tr>
<tr>
<td>monsterid</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=monsterid" alt=""></td>
</tr>
<tr>
<td>wavatar</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=wavatar" alt=""></td>
</tr>
<tr>
<td>retro</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=retro" alt=""></td>
</tr>
<tr>
<td>robohash</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=robohash" alt=""></td>
</tr>
<tr>
<td>blank</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=blank&amp;f=y" alt=""></td>
</tr>
<tr>
<td>404</td>
<td><img src="https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&amp;f=y" alt=""></td>
</tr>
</tbody>
</table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-7"><p>Waline - 一款從 Valine 衍生的帶後端評論系統。可以將 Waline 等價成 With backend Valine。</p>
<p>具體配置可參考 <a href="https://waline.js.org/">waline 文檔</a></p>
<p>然後修改 <code>主題配置文件</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># waline - A simple comment system with backend support fork from Valine</span></span><br><span class="line"><span class="comment"># https://waline.js.org/</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">serverURL:</span>  <span class="comment"># Waline server address url</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">monsterid</span> <span class="comment"># gravatar style https://zh-tw.gravatar.com/site/implement/images/#default-image</span></span><br><span class="line">  <span class="attr">avatarCDN:</span> <span class="comment"># Gravatar CDN baseURL</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="string">/img/comment_bg.png</span> <span class="comment"># waline background</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure>
<p>由於 waline 將會逐步去掉 <code>emojiCDN</code> 和 <code>emojiMaps</code>, 舊的添加表情方法已被棄用（從 3.7.8 開始）</p>
<p>請參看 waline 的<a href="https://waline.js.org/guide/client/emoji.html">添加表情文檔</a>進行配置</p>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>以下添加表情方法已被棄用</span></div>
    <div class="hide-content"><p>如果你需要自定義表情，請在<code>emojiCDN</code>配置表情CDN。</p>
<p>同時在Hexo 工作目錄下的<code>source/_data/</code>創建一個json文件<code>waline.json</code>,等同於Waline需要配置的<code>emojiMaps</code>，<code>waline.json</code>配置方式可參考如下</p>
<blockquote>
<p>waline.json</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123; </span><br><span class="line"><span class="attr">&quot;tv_doge&quot;</span>: <span class="string">&quot;6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_親親&quot;</span>: <span class="string">&quot;a8111ad55953ef5e3be3327ef94eb4a39d535d06.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_偷笑&quot;</span>: <span class="string">&quot;bb690d4107620f1c15cff29509db529a73aee261.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_再見&quot;</span>: <span class="string">&quot;180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_冷漠&quot;</span>: <span class="string">&quot;b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_發怒&quot;</span>: <span class="string">&quot;34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_發財&quot;</span>: <span class="string">&quot;34db290afd2963723c6eb3c4560667db7253a21a.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_可愛&quot;</span>: <span class="string">&quot;9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_吐血&quot;</span>: <span class="string">&quot;09dd16a7aa59b77baa1155d47484409624470c77.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_呆&quot;</span>: <span class="string">&quot;fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_嘔吐&quot;</span>: <span class="string">&quot;9f996894a39e282ccf5e66856af49483f81870f3.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_困&quot;</span>: <span class="string">&quot;241ee304e44c0af029adceb294399391e4737ef2.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_壞笑&quot;</span>: <span class="string">&quot;1f0b87f731a671079842116e0991c91c2c88645a.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_大佬&quot;</span>: <span class="string">&quot;093c1e2c490161aca397afc45573c877cdead616.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_大哭&quot;</span>: <span class="string">&quot;23269aeb35f99daee28dda129676f6e9ea87934f.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_委屈&quot;</span>: <span class="string">&quot;d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_害羞&quot;</span>: <span class="string">&quot;a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_尷尬&quot;</span>: <span class="string">&quot;7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_微笑&quot;</span>: <span class="string">&quot;70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_思考&quot;</span>: <span class="string">&quot;90cf159733e558137ed20aa04d09964436f618a1.png&quot;</span>,</span><br><span class="line"><span class="attr">&quot;tv_驚嚇&quot;</span>: <span class="string">&quot;0d15c7e2ee58e935adc6a7193ee042388adc22af.png&quot;</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div></div>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-valine.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-8"><p>與Gitalk一樣，基於 GitHub issues 的評論工具。相對於Gitalk,其相對需要權限較少。具體配置可參考<a href="https://utteranc.es/">Utterances</a>。</p>
<p>修改 <code>主題配置文件</code>:</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">utterances:</span><br><span class="line">  repo:</span><br><span class="line">  # 可選 pathname/url/title/og:title</span><br><span class="line">  issue<span class="emphasis">_term: pathname</span></span><br><span class="line"><span class="emphasis">  # 可選 github-light/github-dark/github-dark-orange/icy-dark/dark-blue/photon-dark</span></span><br><span class="line"><span class="emphasis">  light_</span>theme: github-light</span><br><span class="line">  dark<span class="emphasis">_theme: photon-dark</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-Utterances.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-9"><p><code>Facebook Comments</code>是Facebook提供的評論插件，需要登陸Facebook才可評論。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># Facebook Comments Plugin</span></span><br><span class="line"><span class="section"># https://developers.facebook.com/docs/plugins/comments/</span></span><br><span class="line">facebook<span class="emphasis">_comments:</span></span><br><span class="line"><span class="emphasis">  app_</span>id: </span><br><span class="line">  user<span class="emphasis">_id: # optional</span></span><br><span class="line"><span class="emphasis">  pageSize: 10 # The number of comments to show</span></span><br><span class="line"><span class="emphasis">  order_</span>by: social # social/time/reverse<span class="emphasis">_time</span></span><br><span class="line"><span class="emphasis">  lang: en_</span>US # Language en<span class="emphasis">_US/zh_</span>CN/zh<span class="emphasis">_TW and so on</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-butterfly-docs-facebook-comments.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="comments-10"><p><code>Twikoo</code> 是一個簡潔、安全、無後端的靜態網站評論系統，基於<a href="https://curl.qcloud.com/KnnJtUom">騰訊雲開發</a>。</p>
<p>具體如何配置評論，請查看 <a href="https://twikoo.js.org/quick-start.html#%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96">Twikoo文檔</a></p>
<p>你只需要把獲取到的 <code>環境ID (envId)</code> 填寫到配置上去就行</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span></span><br><span class="line">  <span class="attr">region:</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>參數</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>envId</td>
<td>環境 ID</td>
</tr>
<tr>
<td>region</td>
<td>環境地域，默認為 ap-shanghai，如果您的環境地域不是上海，需傳此參數</td>
</tr>
<tr>
<td>visitor</td>
<td>是否顯示文章閲讀數</td>
</tr>
<tr>
<td>option</td>
<td>可選配置</td>
</tr>
</tbody>
</table>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-twikoo-comments.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="在綫聊天">在綫聊天</h2>
<p>從3.0開始，Butterfly主題內置了多種在綫聊天工具。你可以選擇開啟一種，方便你與訪客的交流。</p>
<div class="tabs" id="online-chat"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#online-chat-1">通用設置</button></li><li class="tab"><button type="button" data-href="#online-chat-2">chatra</button></li><li class="tab"><button type="button" data-href="#online-chat-3">tidio</button></li><li class="tab"><button type="button" data-href="#online-chat-4">daovoice</button></li><li class="tab"><button type="button" data-href="#online-chat-5">Gitter</button></li><li class="tab"><button type="button" data-href="#online-chat-6">crisp</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="online-chat-1"><p>這些工具都提供了一個按鈕可以打開/關閉聊天窗口。<br>
主題也提供了一個集合主題特色的按鈕來替換這些工具本身的按鈕，這個聊天按鈕將會出現在右下角裏。<br>
你只需要把<code>chat_btn</code>打開就行。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Chat Button [recommend]</span></span><br><span class="line"><span class="comment"># It will create a button in the bottom right corner of website, and hide the origin button</span></span><br><span class="line"><span class="attr">chat_btn:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-button.png" alt=""></p>
<p>為了不影響訪客的體驗，主題提供一個<code>chat_hide_show</code>配置<br>
設為<code>true</code>後，使用工具提供的按鈕時，只有向上滾動才會顯示聊天按鈕，向下滾動時會隱藏按鈕。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># The origin chat button is displayed when scrolling up, and the button is hidden when scrolling down</span></span><br><span class="line"><span class="attr">chat_hide_show:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>如果使用工具自帶的聊天按鈕，按鈕位置可能會遮擋右下角圖標，請配置<code>rightside-bottom</code>調正右下角圖標位置</p>
</div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-2"><p>配置chatra,需要知道<code>Public key</code></p>
<p>打開<a href="https://chatra.com/">chatra</a>並註冊賬號。<br>
你可以在<code>Preferences</code>中找到<code>Public key</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-chatra-id.png" alt=""></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># chatra</span></span><br><span class="line"><span class="comment"># https://chatra.io/</span></span><br><span class="line"><span class="attr">chatra:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">xxxxxxxx</span></span><br></pre></td></tr></table></figure>
<p><code>chatra</code>的樣式你可以<code>Chat Widget</code>自行配置</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-chatra-ui-settings.png" alt=""></p>
<blockquote>
<p>Demo</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-chatra-ui-demo.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-3"><p>配置tidio,需要知道<code>Public key</code></p>
<p>打開<a href="https://www.tidio.com/">tidio</a>並註冊賬號。<br>
你可以在<code>Preferences &gt; Developer</code>中找到<code>Public key</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-tidio-id.png" alt=""></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># tidio</span></span><br><span class="line"><span class="comment"># https://www.tidio.com/</span></span><br><span class="line"><span class="attr">tidio:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">public_key:</span> <span class="string">XXXX</span></span><br></pre></td></tr></table></figure>
<p><code>tidio</code>的樣式你可以<code>Channels</code>自行配置</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-tidio-setting.png" alt=""></p>
<blockquote>
<p>Demo</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-tidio-demo.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-4"><p>打開<a href="http://daovoice.io/">daovoice</a>和註冊帳號<br>
找到你的<code>app id</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-daovoice-appid.png" alt=""></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># daovoice</span></span><br><span class="line"><span class="comment"># http://daovoice.io/</span></span><br><span class="line"><span class="attr">daovoice:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="string">xxxxx</span></span><br></pre></td></tr></table></figure>
<p>可在<code>聊天設置</code>裏配置聊天按鈕等樣式</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-daovoice-ui.png" alt=""></p>
<blockquote>
<p>Demo</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-daovoice-demo.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-5"><p>打開<a href="https://gitter.im/">Gitter</a>和註冊賬號<br>
創建一個<code>community</code>或者<code>room</code>,複製名稱到設置去</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-gitter-setting.png" alt=""></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># gitter</span></span><br><span class="line"><span class="comment"># https://gitter.im/</span></span><br><span class="line"><span class="attr">gitter:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">room:</span> </span><br></pre></td></tr></table></figure>
<blockquote>
<p>Demo</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-chat-gitter-ui.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="online-chat-6"><p>打開<a href="https://crisp.chat/en/">crisp</a>並註冊帳號</p>
<p>找到需要的網站ID</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># crisp</span></span><br><span class="line"><span class="comment"># https://crisp.chat/en/</span></span><br><span class="line"><span class="attr">crisp:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">website_id:</span> <span class="string">xxxxxxxx</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-buttefly-docs-chat-crisp.png" alt="image-20200731183023863"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-crisp-demo.png" alt="image-20200731183444781"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="分享">分享</h2>
<blockquote>
<p>只能選擇一個分享服務商</p>
</blockquote>
<div class="tabs" id="分享"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分享-1">AddThis</button></li><li class="tab"><button type="button" data-href="#分享-2">Sharejs</button></li><li class="tab"><button type="button" data-href="#分享-3">Addtoany</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分享-1"><blockquote>
<p>訪問 <a href="https://www.addthis.com/">AddThis</a> 官網<br>
找到你的 pub-id</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-addthis.jpg" alt=""></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">addThis:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># or false</span></span><br><span class="line">  <span class="attr">pubid:</span> <span class="string">你的pub-id</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分享-2"><p>如果你不知道 <a href="https://github.com/overtrue/share.js/">sharejs</a>，看看它的説明。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">facebook,twitter,wechat,weibo,qq</span>  <span class="comment">#想要顯示的內容</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-sharejs.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分享-3"><p>可以到<a href="https://www.addtoany.com/">addtoany</a>查看使用説明</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">addtoany:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item:</span> <span class="string">facebook,twitter,wechat,sina_weibo,facebook_messenger,email,copy_link</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-addtoany.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="搜索系統">搜索系統</h2>
<div class="tabs" id="search"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#search-1"><i class="fab fa-algolia"></i>Algolia</button></li><li class="tab"><button type="button" data-href="#search-2"><i class="fas fa-search"></i>本地搜索</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="search-1"><blockquote>
<p>記得運行 hexo clean</p>
</blockquote>
<ol>
<li>
<p>你需要安裝 <a href="https://github.com/oncletom/hexo-algolia">hexo-algolia</a>或 <a href="https://github.com/LouisBarranqueiro/hexo-algoliasearch">hexo-algoliasearch</a>. 根據它們的説明文檔去做相應的配置。</p>
</li>
<li>
<p>修改 <code>主題配置文件</code></p>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="search-2"><blockquote>
<p>記得運行 hexo clean</p>
</blockquote>
<ol>
<li>
<p>你需要安裝 <a href="https://github.com/PaicHyperionDev/hexo-generator-search">hexo-generator-search</a>. 根據它的文檔去做相應配置。<strong>注意格式只支持 xml</strong>。</p>
</li>
<li>
<p>修改 <code>主題配置文件</code></p>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="網站驗證">網站驗證</h2>
<p>如果需要搜索引擎收錄網站，可能需要登錄對應搜索引擎的管理平台進行提交。<br>
各自的驗證碼可從各自管理平台拿到</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">site_verification:</span></span><br><span class="line">  <span class="comment"># - name: google_site_verification</span></span><br><span class="line">  <span class="comment">#   content: xxxxxx</span></span><br><span class="line">  <span class="comment"># - name: baidu_site_verification</span></span><br><span class="line">  <span class="comment">#   content: xxxxxxx</span></span><br></pre></td></tr></table></figure>
<h2 id="分析統計">分析統計</h2>
<div class="tabs" id="分析統計"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分析統計-1">百度統計</button></li><li class="tab"><button type="button" data-href="#分析統計-2">谷歌分析</button></li><li class="tab"><button type="button" data-href="#分析統計-3">騰訊分析</button></li><li class="tab"><button type="button" data-href="#分析統計-4">CNZZ分析</button></li><li class="tab"><button type="button" data-href="#分析統計-5">Cloudflare分析</button></li><li class="tab"><button type="button" data-href="#分析統計-6">Microsoft Clarity</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分析統計-1"><ol>
<li>
<p>登錄百度統計的<a href="https://tongji.baidu.com/web/welcome/login">官方網站</a></p>
</li>
<li>
<p>找到你百度統計的統計代碼</p>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-baidu-tongji.jpg" alt=""></p>
<ol start="3">
<li>修改 <code>主題配置文件</code></li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span> <span class="string">你的代碼</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-2"><ol>
<li>
<p>登錄谷歌分析的<a href="https://www.google.com/analytics/">官方網站</a></p>
</li>
<li>
<p>找到你的谷歌分析的跟蹤 ID</p>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-google-analytics.jpg" alt=""></p>
<ol start="3">
<li>修改 <code>主題配置文件</code></li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">google_analytics:</span> <span class="string">你的代碼</span> <span class="comment"># 通常以`UA-`打頭</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-3"><blockquote>
<p>由於騰訊分析將於20年12月關閉並遷移到騰訊移動分析,從 <code>3.1.0</code> 起，騰訊分析改為騰訊移動分析。</p>
</blockquote>
<ol>
<li>登錄騰訊移動分析的<a href="https://mta.qq.com/">官方網站</a></li>
<li>選擇 <code>WEB應用</code></li>
<li>找到你的站點ID</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-tencent-analysic.png" alt=""></p>
<ol start="4">
<li>修改 <code>主題配置文件</code></li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Tencent_analytics ID</span></span><br><span class="line"><span class="attr">tencent_analytics:</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-4"><ol>
<li>登錄CNZZ分析的<a href="https://www.umeng.com/">官方網站</a></li>
<li>找到 <code>站點設置 - 獲取代碼</code></li>
<li>找到你的 <code>web_id</code></li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-CNZZ-analysic.png" alt=""></p>
<ol start="4">
<li>修改 <code>主題配置文件</code></li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cnzz_analytics:</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-5"><ol>
<li>登錄 Cloudflare 分析的<a href="https://www.cloudflare.com/zh-tw/web-analytics/">官方網站</a></li>
<li>找到 <code>JavaScript 程式碼片段</code></li>
<li>找到你的 <code>token</code></li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cloudflare-analytics-id.png" alt="image-20201230195158742"></p>
<ol start="4">
<li>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Cloudflare Analytics</span></span><br><span class="line"><span class="comment"># https://www.cloudflare.com/zh-tw/web-analytics/</span></span><br><span class="line"><span class="attr">cloudflare_analytics:</span></span><br></pre></td></tr></table></figure>
</li>
</ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分析統計-6"><ol>
<li>
<p>登錄 Clarity 的<a href="https://clarity.microsoft.com/">官方網站</a></p>
</li>
<li>
<p>創建 <code>PROJECT</code></p>
</li>
<li>
<p>找到你的 <code>ID</code><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-clarity-id.png" alt="image-20201230195541443"></p>
</li>
<li>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Microsoft Clarity</span></span><br><span class="line"><span class="comment"># https://clarity.microsoft.com/</span></span><br><span class="line"><span class="attr">microsoft_clarity:</span></span><br></pre></td></tr></table></figure>
</li>
</ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="廣告">廣告</h2>
<div class="tabs" id="廣告"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#廣告-1">谷歌廣告</button></li><li class="tab"><button type="button" data-href="#廣告-2">手動廣告配置</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="廣告-1"><p>主題已集成谷歌廣告（自動廣告）</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">google_adsense:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_ads:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js</span></span><br><span class="line">  <span class="attr">client:</span> <span class="comment"># 填入個人識別碼</span></span><br><span class="line">  <span class="attr">enable_page_level_ads:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-google-adsense1.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="廣告-2"><p>主題預留了三個位置可供插入廣告，分別為主頁文章(每三篇文章出現廣告)/aside公告之後/文章頁打賞之後。<br>
把html代碼填寫到對應的位置</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ad:</span></span><br><span class="line">  <span class="attr">index:</span></span><br><span class="line">  <span class="attr">aside:</span></span><br><span class="line">  <span class="attr">post:</span></span><br></pre></td></tr></table></figure>
<p>例如:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">index:</span> <span class="string">&lt;ins</span> <span class="string">class=&quot;adsbygoogle&quot;</span> <span class="string">style=&quot;display:block&quot;</span> <span class="string">data-ad-format=&quot;fluid&quot;</span> <span class="string">data-ad-layout-key=&quot;xxxxxxxxxxxx&quot;</span> <span class="string">data-ad-client=&quot;ca-pub-xxxxxxxxxx&quot;</span> <span class="string">data-ad-slot=&quot;xxxxxxxxxx&quot;&gt;&lt;/ins&gt;&lt;script&gt;(adsbygoogle=window.adsbygoogle||[]).push(&#123;&#125;)&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-ad-post.png" alt=""><br>
<img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-ad-index.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="Math-數學">Math 數學</h2>
<div class="tabs" id="math"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#math-1">MathJax</button></li><li class="tab"><button type="button" data-href="#math-2">KaTeX</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="math-1"><blockquote>
<p>建議使用 KaTex 獲得更好的效果，下文有介紹！</p>
</blockquote>
<p>修改 <code>主題配置文件</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># true 表示每一頁都加載mathjax.js</span></span><br><span class="line">  <span class="comment"># false 需要時加載，須在使用的Markdown Front-matter 加上 mathjax: true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果<code>per_page</code>設為<code>true</code>,則每一頁都會加載Mathjax服務。設為<code>false</code>，則需要在文章<code>Front-matter</code>添加<code>mathjax: true</code>,對應的文章才會加載Mathjax服務。</p>
</blockquote>
<p>然後你需要修改一下默認的<code>markdown</code>渲染引擎來實現 MathJax 的效果。</p>
<p>查看: <a href="https://www.npmjs.com/package/hexo-renderer-kramed">hexo-renderer-kramed</a></p>
<p>以下操作在你 hexo 博客的目錄下 (<strong>不是 Butterfly 的目錄!</strong>):</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-mathjax.png" alt=""></p>
<p>效果：</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-mathjax-2.jpg" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="math-2"><p>首先禁用<code>MathJax</code>（如果你配置過 MathJax 的話），然後修改你的<code>主題配置文件</code>以便加載<code>katex.min.css</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">katex:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># true 表示每一頁都加載katex.js</span></span><br><span class="line">  <span class="comment"># false 需要時加載，須在使用的Markdown Front-matter 加上 katex: true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hide_scrollbar:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>你不需要添加<code>katex.min.js</code>來渲染數學方程。相應的你需要卸載你之前的 hexo 的 markdown 渲染器，然後安裝其它插件。</p>
<div class="tabs" id="katex-plugins"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#katex-plugins-1">hexo-renderer-markdown-it 【建議】</button></li><li class="tab"><button type="button" data-href="#katex-plugins-2">hexo-renderer-markdown-it-plus</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="katex-plugins-1"><p>卸載掉 marked 插件，安裝 <a href="https://github.com/hexojs/hexo-renderer-markdown-it">hexo-renderer-markdown-it</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save <span class="comment"># 如果有安裝這個的話，卸載</span></span><br><span class="line">npm un hexo-renderer-kramed --save <span class="comment"># 如果有安裝這個的話，卸載</span></span><br><span class="line"></span><br><span class="line">npm i hexo-renderer-markdown-it --save <span class="comment"># 需要安裝這個渲染插件</span></span><br><span class="line">npm install @neilsustc/markdown-it-katex --save <span class="comment">#需要安裝這個katex插件</span></span><br></pre></td></tr></table></figure>
<p>在 hexo 的根目錄的 <code>_config.yml</code> 中配置</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;@neilsustc/markdown-it-katex&#x27;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">strict:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>如需配置其它參數，請參考 <a href="https://katex.org/docs/options.html">katex 官網</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="katex-plugins-2"><blockquote>
<p>注意，此方法生成的 katex 沒有斜體</p>
</blockquote>
<p>卸載掉 marked 插件，然後安裝新的<code>hexo-renderer-markdown-it-plus</code>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 替換 `hexo-renderer-kramed` 或者 `hexo-renderer-marked` 等hexo的markdown渲染器</span></span><br><span class="line"><span class="comment"># 你可以在你的package.json裏找到hexo的markdwon渲染器，並將其卸載</span></span><br><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"></span><br><span class="line">npm un hexo-renderer-kramed --save</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 然後安裝 `hexo-renderer-markdown-it-plus`</span></span><br><span class="line">npm i @upupming/hexo-renderer-markdown-it-plus --save</span><br></pre></td></tr></table></figure>
<p>注意到 <a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus"><code>hexo-renderer-markdown-it-plus</code></a>已經無人持續維護, 所以我們使用 <a href="https://github.com/upupming/hexo-renderer-markdown-it-plus"><code>@upupming/hexo-renderer-markdown-it-plus</code></a>。 這份 fork 的代碼使用了 <a href="https://github.com/yzhang-gh/markdown-it-katex"><code>@neilsustc/markdown-it-katex</code></a>同時它也是 VSCode 的插件 <a href="https://github.com/yzhang-gh/vscode-markdown">Markdown All in One</a>所使用的, 所以我們可以獲得最新的 KaTex 功能例如 <code>\tag{}</code>。</p>
<p>你還可以通過 <a href="https://github.com/yzhang-gh/markdown-it-katex"><code>@neilsustc/markdown-it-katex</code></a>控制 KaTeX 的設置，所有可配置的選項參見 <a href="https://katex.org/docs/options.html%E3%80%82">https://katex.org/docs/options.html。</a> 比如你想要禁用掉 KaTeX 在命令行上輸出的宂長的警告信息，你可以在根目錄的 <code>_config.yml</code> 中使用下面的配置將 <code>strict</code> 設置為 false:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">markdown_it_plus:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;@neilsustc/markdown-it-katex&#x27;</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">strict:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>當然，你還可以利用這個特性來定義一些自己常用的 <code>macros</code>。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<p>因為 KaTeX 更快更輕量，因此沒有 MathJax 的功能多（比如右鍵菜單）。為那些使用 MathJax 的用户，主題也內置了 katex 的 <a href="https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex">複製</a> 功能。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-katex.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="美化-特效">美化/特效</h2>
<h3 id="自定義主題色">自定義主題色</h3>
<p>可以修改大部分UI顏色</p>
<p>修改 <code>主題配置文件</code>，比如：</p>
<blockquote>
<p>顏色值必須被雙引號包裹，就像<code>&quot;#000&quot;</code>而不是<code>#000</code>。否則將會在構建的時候報錯！</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">main:</span> <span class="string">&quot;#49B1F5&quot;</span></span><br><span class="line">  <span class="attr">paginator:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">button_hover:</span> <span class="string">&quot;#FF7242&quot;</span></span><br><span class="line">  <span class="attr">text_selection:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">link_color:</span> <span class="string">&quot;#99a9bf&quot;</span></span><br><span class="line">  <span class="attr">meta_color:</span> <span class="string">&quot;#858585&quot;</span></span><br><span class="line">  <span class="attr">hr_color:</span> <span class="string">&quot;#A4D8FA&quot;</span></span><br><span class="line">  <span class="attr">code_foreground:</span> <span class="string">&quot;#F47466&quot;</span></span><br><span class="line">  <span class="attr">code_background:</span> <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line">  <span class="attr">toc_color:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">blockquote_padding_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">blockquote_background_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-color_1.png" alt=""><br>
<img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-color_2.png" alt=""></p>
<h3 id="網站背景">網站背景</h3>
<p>默認顯示白色，可設置圖片或者顏色</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 圖片格式 url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="comment"># 顏色（HEX值/RGB值/顔色單詞/漸變色)</span></span><br><span class="line"><span class="comment"># 留空 不顯示背景</span></span><br><span class="line"><span class="attr">background:</span></span><br></pre></td></tr></table></figure>
<p><em>留意:</em> 如果你的網站根目錄不是’/',使用本地圖片時，需加上你的根目錄。<br>
例如：網站是 <code>https://yoursite.com/blog</code>,引用一張<code>img/xx.png</code>圖片，則設置background為 `url(/blog/img/xx.png)</p>
<blockquote>
<p>background:‘#49B202’</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-set-body-background-color.png" alt=""></p>
<blockquote>
<p>background: url(<a href="https://i.loli.net/2019/09/09/5oDRkWVKctx2b6A.png">https://i.loli.net/2019/09/09/5oDRkWVKctx2b6A.png</a>)</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-set-body-background-img.png" alt=""></p>
<h3 id="footer-背景">footer 背景</h3>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># footer是否顯示圖片背景(與top_img一致)</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>配置的值</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>留空/false</td>
<td>顯示默認的顔色</td>
</tr>
<tr>
<td>img鏈接</td>
<td>圖片的鏈接，顯示所配置的圖片</td>
</tr>
<tr>
<td>顔色(<br>HEX值 - #0000FF<br>RGB值 - rgb(0,0,255)<br>顔色單詞 - orange<br>漸變色 - linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)<br>）</td>
<td>對應的顔色</td>
</tr>
<tr>
<td>true</td>
<td>顯示跟 top_img 一樣</td>
</tr>
</tbody>
</table>
<blockquote>
<p>true</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-footer-img.png" alt=""></p>
<h3 id="打字效果">打字效果</h3>
<p>打字效果<a href="https://github.com/disjukr/activate-power-mode">activate-power-mode</a></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line"><span class="comment"># https://github.com/disjukr/activate-power-mode</span></span><br><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (冒光特效)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment">#  open shake (抖動特效)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-type-animation.gif" alt=""></p>
<h3 id="背景特效">背景特效</h3>
<div class="tabs" id="背景特效"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#背景特效-1">靜止綵帶</button></li><li class="tab"><button type="button" data-href="#背景特效-2">動態綵帶</button></li><li class="tab"><button type="button" data-href="#背景特效-3">canvas-nest</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="背景特效-1"><p>好看的綵帶背景，可設置每次刷新更換綵帶，或者每次點擊更換綵帶<br>
修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">150</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">click_to_change:</span> <span class="literal">false</span>  <span class="comment">#設置是否每次點擊都更換綵帶</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手機端不顯示 true 手機端顯示</span></span><br></pre></td></tr></table></figure>
<p>相關配置可查看<a href="https://github.com/hustcc/ribbon.js">canvas_ribbon</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-canvas-ribbon.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="背景特效-2"><p>好看的綵帶背景，會飄動<br>
修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">canvas_fluttering_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手機端不顯示 true 手機端顯示</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-canvas-ribbon-piao.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="背景特效-3"><p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&#x27;0,0,255&#x27;</span> <span class="comment">#color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).(<span class="doctag">note:</span> use &#x27;,&#x27; to separate.)</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.7</span> <span class="comment"># the opacity of line (0~1), default: 0.5.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background, default: -1.</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">99</span> <span class="comment"># the number of lines, default: 99.</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手機端不顯示 true 手機端顯示</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-canvas_nest.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h3 id="鼠標點擊效果">鼠標點擊效果</h3>
<div class="tabs" id="鼠標點擊效果"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#鼠標點擊效果-1"><i class="fas fa-fire-alt"></i>煙花</button></li><li class="tab"><button type="button" data-href="#鼠標點擊效果-2"><i class="fas fa-heart"></i>愛心</button></li><li class="tab"><button type="button" data-href="#鼠標點擊效果-3"><i class="fab fa-amilia"></i>文字</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="鼠標點擊效果-1"><p><code>zIndex</code>建議只在<code>-1</code>和<code>9999</code>上選<br>
<code>-1</code> 代表煙火效果在底部<br>
<code>9999</code> 代表煙火效果在前面</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span> <span class="comment"># -1 or 9999</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-firewall.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="鼠標點擊效果-2"><p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 點擊出現愛心</span></span><br><span class="line"><span class="attr">click_heart:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/click_love.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="鼠標點擊效果-3"><p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 點擊出現文字，文字可自行修改</span></span><br><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">text:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">I</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">LOVE</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">YOU</span></span><br><span class="line">  <span class="attr">fontSize:</span> <span class="string">15px</span></span><br><span class="line">  <span class="attr">random:</span> <span class="literal">false</span> <span class="comment"># 文字隨機顯示</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/click_word.gif" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h3 id="頁面美化">頁面美化</h3>
<p>會改變ol、ul、h1-h5的樣式</p>
<p><code>field</code>配置生效的區域</p>
<ul>
<li><code>post</code> 只在文章頁生效</li>
<li><code>site</code> 在全站生效</li>
</ul>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 美化頁面顯示</span></span><br><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="string">&#x27;\f0c1&#x27;</span></span><br><span class="line">  <span class="attr">title-prefix-icon-color:</span> <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>title-prefix-icon</code>填寫的是fontawesome的icon的Unicode數。<br>
<img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-fontwesome-unicode.png" alt=""></p>
<blockquote>
<p>未開啟美化</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-beautify.png" alt=""></p>
<blockquote>
<p>開啟美化</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-beautif.png" alt=""></p>
<h3 id="自定義字體和字體大小">自定義字體和字體大小</h3>
<h4 id="全局字體">全局字體</h4>
<p>可自行設置字體的<code>font-family</code><br>
<strong>如不需要配置，請留空</strong></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Global font settings</span></span><br><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改)</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span></span><br><span class="line">  <span class="attr">code-font-size:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">-apple-system,</span> <span class="string">BlinkMacSystemFont,</span> <span class="string">&quot;Segoe UI&quot;</span><span class="string">,</span> <span class="string">&quot;Helvetica Neue&quot;</span><span class="string">,</span> <span class="string">Lato,</span> <span class="string">Roboto,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">consolas,</span> <span class="string">Menlo,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure>
<h4 id="Blog-標題字體">Blog 標題字體</h4>
<p>可自行設置字體的<code>font-family</code><br>
<strong>如不需要配置，請留空。</strong><br>
<strong>如不需要使用網絡字體，只需要把font_link留空就行</strong></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Font settings for the site title and site subtitle</span></span><br><span class="line"><span class="comment"># 左上角網站名字 主頁居中網站名字</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span> <span class="string">https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">Titillium</span> <span class="string">Web,</span> <span class="string">&#x27;PingFang SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Hiragino Sans GB&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft JhengHei&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft YaHei&#x27;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure>
<h3 id="網站副標題">網站副標題</h3>
<p>可設置主頁中顯示的網站副標題或者喜歡的座右銘。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 主頁subtitle</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 打字效果</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 循環或者只打字一次</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># source調用第三方服務</span></span><br><span class="line">  <span class="comment"># source: false 關閉調用</span></span><br><span class="line">  <span class="comment"># source: 1  調用搏天api的隨機語錄（簡體） </span></span><br><span class="line">  <span class="comment"># source: 2  調用一言網的一句話（簡體） </span></span><br><span class="line">  <span class="comment"># source: 3  調用一句網（簡體） </span></span><br><span class="line">  <span class="comment"># source: 4  調用今日詩詞（簡體</span></span><br><span class="line">  <span class="comment"># subtitle 會先顯示 source , 再顯示 sub 的內容</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 如果有英文逗號&#x27; , &#x27;,請使用轉義字元 &amp;#44;</span></span><br><span class="line">  <span class="comment"># 如果有英文雙引號&#x27; &quot; &#x27;,請使用轉義字元 &amp;quot;</span></span><br><span class="line">  <span class="comment"># 開頭不允許轉義字元，如需要，請把整個句子用雙引號包住</span></span><br><span class="line">  <span class="comment"># 例如 ”&amp;quotNever put off till tomorrow what you can do today&amp;quot&quot;</span></span><br><span class="line">  <span class="comment"># 如果關閉打字效果，subtitle只會顯示sub的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">今日事&amp;#44;今日畢</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Never</span> <span class="string">put</span> <span class="string">off</span> <span class="string">till</span> <span class="string">tomorrow</span> <span class="string">what</span> <span class="string">you</span> <span class="string">can</span> <span class="string">do</span> <span class="string">today</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-index-subtitle.gif" alt=""></p>
<h3 id="主頁top-img顯示大小">主頁top_img顯示大小</h3>
<blockquote>
<p>適用於 版本號 &gt;= V1.2.0</p>
</blockquote>
<p>默認的顯示為全屏。site-info的區域會居中顯示</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 主頁設置</span></span><br><span class="line"><span class="comment"># 默認top_img全屏，site_info在中間</span></span><br><span class="line"><span class="comment"># 使用默認, 都無需填寫（建議默認）</span></span><br><span class="line"><span class="attr">index_site_info_top:</span> <span class="comment"># 主頁標題距離頂部距離  例如 300px/300em/300rem/10%</span></span><br><span class="line"><span class="attr">index_top_img_height:</span>  <span class="comment">#主頁top_img高度 例如 300px/300em/300rem  不能使用百分比</span></span><br></pre></td></tr></table></figure>
<p>注意：<code>index_top_img_height</code>的值不能使用百分比。<br>
2個都不填的話，會使用默認值</p>
<p>舉例，當</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">index_top_img_height:</span> <span class="string">400px</span></span><br></pre></td></tr></table></figure>
<p>效果</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-index-top-img-setting.png" alt=""></p>
<h3 id="頁面加載動畫preloader">頁面加載動畫preloader</h3>
<p>當進入網頁時，因為加載速度的問題，可能會導致top_img圖片出現斷層顯示，或者網頁加載不全而出現等待時間，開啟preloader後，會顯示加載動畫，等頁面加載完，加載動畫會消失。</p>
<p>配置<code>butterly.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 加載動畫 Loading Animation</span></span><br><span class="line"><span class="attr">preloader:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-preloader.gif" alt=""></p>
<h2 id="PWA">PWA</h2>
<p>要為<code>Butterfly</code>配上 PWA 特性, 你需要如下幾個步驟:</p>
<ol>
<li>
<p>打開 hexo 工作目錄</p>
</li>
<li>
<p><code>npm install hexo-offline --save</code> 或者 <code>yarn add hexo-offline</code></p>
</li>
<li>
<p>在根目錄創建 <code>hexo-offline.config.cjs</code> 文件，並增加以下內容。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// offline config passed to workbox-build.</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">globPatterns</span>: [<span class="string">&#x27;**/*.&#123;js,html,css,png,jpg,gif,svg,webp,eot,ttf,woff,woff2&#125;&#x27;</span>],</span><br><span class="line">  <span class="comment">// 靜態文件合集，如果你的站點使用了例如 webp 格式的文件，請將文件類型添加進去。</span></span><br><span class="line">  <span class="attr">globDirectory</span>: <span class="string">&#x27;public&#x27;</span>,</span><br><span class="line">  <span class="attr">swDest</span>: <span class="string">&#x27;public/service-worker.js&#x27;</span>,</span><br><span class="line">  <span class="attr">maximumFileSizeToCacheInBytes</span>: <span class="number">10485760</span>, <span class="comment">// 緩存的最大文件大小，以字節為單位。</span></span><br><span class="line">  <span class="attr">skipWaiting</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">clientsClaim</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">runtimeCaching</span>: [ <span class="comment">// 如果你需要加載 CDN 資源，請配置該選項，如果沒有，可以不配置。</span></span><br><span class="line">    <span class="comment">// CDNs - should be CacheFirst, since they should be used specific versions so should not change</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">urlPattern</span>: <span class="regexp">/^https:\/\/cdn\.example\.com\/.*/</span>, <span class="comment">// 可替換成你的 URL</span></span><br><span class="line">      handler: <span class="string">&#x27;CacheFirst&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更多內容請查看 <a href="https://github.com/JLHwung/hexo-offline">hexo-offline</a>的官方文檔</p>
<ol start="4">
<li>在<code>主題配置文件</code>中開啟 pwa 選項。</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pwa:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">manifest:</span> <span class="string">/img/pwa/manifest.json</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/img/pwa/apple-touch-icon.png</span></span><br><span class="line">  <span class="attr">favicon_32_32:</span> <span class="string">/img/pwa/32.png</span></span><br><span class="line">  <span class="attr">favicon_16_16:</span> <span class="string">/img/pwa/16.png</span></span><br><span class="line">  <span class="attr">mask_icon:</span> <span class="string">/img/pwa/safari-pinned-tab.svg</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>在創建<code>source/</code>目錄中創建<code>manifest.json</code>文件。</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;short_name&quot;</span>: <span class="string">&quot;Junzhou&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;theme_color&quot;</span>: <span class="string">&quot;#49b1f5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;background_color&quot;</span>: <span class="string">&quot;#49b1f5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;display&quot;</span>: <span class="string">&quot;standalone&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;scope&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start_url&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;icons&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;images/pwaicons/36.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;36x36&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;images/pwaicons/48.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;48x48&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;images/pwaicons/72.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;72x72&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;images/pwaicons/96.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;96x96&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;images/pwaicons/144.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;144x144&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;images/pwaicons/192.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;192x192&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;src&quot;</span>: <span class="string">&quot;images/pwaicons/512.png&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;sizes&quot;</span>: <span class="string">&quot;512x512&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;image/png&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;splash_pages&quot;</span>: <span class="literal">null</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>你也可以通過 <a href="https://app-manifest.firebaseapp.com/">Web App Manifest</a>快速創建<code>manifest.json</code>。（Web App Manifest 要求至少包含一個 512*512 像素的圖標）</p>
<ol start="6">
<li>
<p>可以通過<code>Chrome</code>插件<code>Lighthouse</code>檢查 PWA 配置是否生效以及配置是否正確。</p>
<ul>
<li>打開博客頁面</li>
<li>啟動<code>Lighthouse</code>插件 (<code>Lighthouse</code>插件要求至少包含一個 512*512 像素的圖標)</li>
</ul>
</li>
</ol>
<p>關於 PWA（漸進式增強 Web 應用）的更多內容請參閲 <a href="https://developers.google.com/web/tools/lighthouse/audits/address-bar">Google Tools for Web Developers</a></p>
<h2 id="字數統計">字數統計</h2>
<p>要為<code>Butterfly</code>配上字數統計特性, 你需要如下幾個步驟:</p>
<ol>
<li>
<p>打開 hexo 工作目錄</p>
</li>
<li>
<p><code>npm install hexo-wordcount --save</code> or <code>yarn add hexo-wordcount</code></p>
</li>
<li>
<p>修改 <code>主題配置文件</code>:</p>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-word-count.png" alt=""><br>
<img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-wordcount-totalcount.png" alt=""></p>
<h2 id="圖片大圖查看模式">圖片大圖查看模式</h2>
<div class="note info flat"><p>只能開啟一個</p>
</div>
<div class="tabs" id="圖片大圖查看模式"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#圖片大圖查看模式-1">fancybox</button></li><li class="tab"><button type="button" data-href="#圖片大圖查看模式-2">medium_zoom</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="圖片大圖查看模式-1"><p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># fancybox http://fancyapps.com/fancybox/3/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/fancybox.gif" alt="fancybox.gif"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="圖片大圖查看模式-2"><p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">medium_zoom:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/medium_zoom.gif" alt="medium_zoom.gif"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="Snackbar-彈窗">Snackbar 彈窗</h2>
<p>Snackbar 彈窗,根據自己愛好開啟</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Snackbar 彈窗</span></span><br><span class="line"><span class="comment"># https://github.com/polonel/SnackBar</span></span><br><span class="line"><span class="comment"># position 彈窗位置</span></span><br><span class="line"><span class="comment"># 可選 top-left / top-center / top-right / bottom-left / bottom-center / bottom-right</span></span><br><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">bottom-left</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment">#light mode時彈窗背景</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#2d3035&#x27;</span> <span class="comment">#dark mode時彈窗背景</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>未開啟Snackbar</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/snackbar_false.gif" alt="snackbar_false.gif"></p>
<blockquote>
<p>開啟Snackbar</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/snackbar_true.gif" alt="snackbar_true.gif"></p>
<h2 id="其它配置">其它配置</h2>
<h3 id="CSS-前綴">CSS 前綴</h3>
<p>有些 CSS 並不是所有瀏覽器都支持，需要增加對應的前綴才會生效。</p>
<p>開啟  <code>css_prefix</code> 後，會自動為一些 CSS 增加前綴。（會增加 20%的體積）</p>
<p>修改配置文件</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add the vendor prefixes to ensure compatibility</span></span><br><span class="line"><span class="attr">css_prefix:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="Open-Graph">Open Graph</h3>
<p>在 <code>head</code> 裏增加一些 meta 資料，例如縮略圖、標題、時間等等。當你分享網頁到一些平台時，平台會讀取 Open Graph 的內容，展示縮略圖，標題等等信息。</p>
<p>修改配置文件</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Open graph meta tags</span></span><br><span class="line"><span class="comment"># https://developers.facebook.com/docs/sharing/webmasters/</span></span><br><span class="line"><span class="attr">Open_Graph_meta:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="Instantpage">Instantpage</h3>
<p>當鼠標懸停到鏈接上超過 65 毫秒時，Instantpage 會對該鏈接進行預加載，可以提升訪問速度。</p>
<p>修改配置文件</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># https://instant.page/</span></span><br><span class="line"><span class="comment"># prefetch (預加載)</span></span><br><span class="line"><span class="attr">instantpage:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="Pangu">Pangu</h3>
<blockquote>
<p>如果你跟我一樣，每次看到網頁上的中文字和英文、數字、符號擠在一塊，就會坐立難安，忍不住想在它們之間加個空格。這個外掛正是你在網路世界走跳所需要的東西，它會自動替你在網頁中所有的中文字和半形的英文、數字、符號之間插入空白。</p>
</blockquote>
<p>修改配置文件</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># https://github.com/vinta/pangu.js</span></span><br><span class="line"><span class="comment"># Insert a space between Chinese character and English character (中英文之間添加空格)</span></span><br><span class="line"><span class="attr">pangu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># site/post</span></span><br></pre></td></tr></table></figure>
<p><code>field</code>只支持兩個參數，<code>post</code>(只在文章頁生效)和<code>site</code>(全站生效)</p>
<h2 id="Pjax">Pjax</h2>
<p>當用户點擊鏈接，通過ajax更新頁面需要變化的部分，然後使用HTML5的pushState修改瀏覽器的URL地址。</p>
<p>這樣可以不用重複加載相同的資源（css/js）， 從而提升網頁的加載速度。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Pjax [Beta]</span></span><br><span class="line"><span class="comment"># It may contain bugs and unstable, give feedback when you find the bugs.</span></span><br><span class="line"><span class="comment"># https://github.com/MoOx/pjax</span></span><br><span class="line"><span class="attr">pjax:</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/music/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/no-pjax/</span></span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>對於一些第三方插件，有些並不支持 pjax 。<br>
你可以把<strong>網頁</strong>加入到 <code>exclude</code> 裏，這個網頁會被 pjax 排除在外。<br>
點擊該網頁會重新加載網站</p>
<p>使用pjax後，一些自己DIY的js可能會無效，跳轉頁面時需要重新調用，請參考<a href="https://github.com/MoOx/pjax">Pjax文檔</a><br>
使用pjax後，一些個別頁面加載的js/css，將會改為所有頁面都加載</p>
</div>
<div class="note warning flat"><p>Butterfly的Pjax目前仍有一些問題，請留意</p>
<ul>
<li>使用谷歌廣告可能會報錯（例如自動廣告）</li>
</ul>
<p>如果你在使用中發現問題，歡迎反饋Bugs</p>
</div>
<h2 id="Inject">Inject</h2>
<blockquote>
<p>2.3.0以上支持</p>
</blockquote>
<p>如想添加額外的js/css/meta等等東西，可以在Inject裏添加，支持添加到head(<code>&lt;/body&gt;</code>標籤之前)和bottom(<code>&lt;/html&gt;</code>標籤之前)。</p>
<p>請注意：以標準的html格式添加內容</p>
<p>例如</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  	<span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/self.css&quot;&gt;</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">  	<span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<p><em>留意:</em> 如果你的網站根目錄不是’/',使用本地圖片時，需加上你的根目錄。<br>
例如：網站是 <code>https://yoursite.com/blog</code>,引用<code>css/xx.css</code>，則設置為<code>&lt;link rel=&quot;stylesheet&quot; href=&quot;/blog/css/xx.css&quot;&gt;</code></p>
<h2 id="CDN">CDN</h2>
<p>配置文件中最後一部分CDN，裏面是主題所引用到的文件，可自行配置CDN。（非必要請勿修改，配置後請確認鏈接是否能訪問）</p>
<p>以下是一些CDN提供商：</p>
<ul>
<li><a href="https://www.jsdelivr.com/">jsdelivr</a>   👍主題使用</li>
<li><a href="https://www.bootcdn.cn/">bootcdn</a></li>
<li><a href="https://cdnjs.com/">cdnjs</a></li>
<li>…</li>
</ul>
<a class="btn-beautify button--animated block green right larger" href="/posts/98d20436/" 
  title="❓ Butterfly 安裝文檔(五) 主題問答"><i class="far fa-hand-point-right"></i><span>❓ Butterfly 安裝文檔(五) 主題問答</span></a>
]]></content>
      <categories>
        <category>Docs文檔</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 安裝文檔(三) 主題配置-1</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E5%AE%89%E8%A3%9D%E6%96%87%E6%AA%94-%E4%B8%89-%E4%B8%BB%E9%A1%8C%E9%85%8D%E7%BD%AE-1/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>📖  本教程更新於 2021 年 02 月 04 日，教程的內容針對最新<strong>穩定版</strong>而更新（如果你是舊版，教程會有些出入，請留意）</p>
<p>🦋  Butterfly 已經更新到 <a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/3.6.2">3.6.2</a></p>
</div>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>📚  文檔目錄</p>
<p><a href="#">Post not found: Butterfly-安裝文檔-一-快速開始 🚀 快速開始</a> - <a href="#">Post not found: Butterfly-安裝文檔-二-主題頁面 📑 主題頁面</a> - <a href="#">Post not found: Butterfly-安裝文檔-三-主題配置-1 🛠 主題配置-1</a> - <a href="#">Post not found: Butterfly-安裝文檔-四-主題配置-2 ⚔️ 主題配置-2</a> - <a href="#">Post not found: Butterfly-安裝文檔-五-主題問答 ❓ 主題問答</a> - <a href="#">Post not found: Butterfly-安裝文檔-六-進階教程 ⚡️ 進階教程</a> - <a href="#">Post not found: Butterfly-安裝文檔-七-更新日誌 ✨ 更新日誌</a> - <a href="#">Post not found: Butterfly-打賞 🤞 打賞</a></p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-magic"></i><p>你可以通過右下角的 <strong>簡</strong> 按鈕切換為簡體顯示</p>
</div>
<hr>
<h2 id="語言">語言</h2>
<p>修改站點配置文件 <code>_config.yml</code></p>
<p>默認語言是 en</p>
<p>主題支持三種語言</p>
<ul>
<li>default(en)</li>
<li>zh-CN (簡體中文)</li>
<li>zh-TW (繁體中文)</li>
</ul>
<h2 id="網站資料">網站資料</h2>
<p>修改網站各種資料，例如標題、副標題和郵箱等個人資料，請修改博客根目錄的<code>_config.yml</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/20191120000444.png" alt=""></p>
<h2 id="導航菜單">導航菜單</h2>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">Home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line"><span class="attr">Archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line"><span class="attr">Tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line"><span class="attr">Categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line"><span class="string">List||fas</span> <span class="attr">fa-list:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line"><span class="attr">Link:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line"><span class="attr">About:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure>
<p>必須是 <code>/xxx/</code>，後面<code>||</code>分開，然後寫圖標名。</p>
<p>如果不希望顯示圖標，圖標名可不寫</p>
<p><strong>注意：</strong> 導航的文字可自行更改</p>
<p>例如：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  首頁: / || fas fa-home</span><br><span class="line">  時間軸: /archives/ || fas fa-archive</span><br><span class="line">  標籤: /tags/ || fas fa-tags</span><br><span class="line">  分類: /categories/ || fas fa-folder-open</span><br><span class="line">  清單||fa fa-heartbeat:</span><br><span class="line"><span class="code">    音樂: /music/ || fas fa-music</span></span><br><span class="line"><span class="code">    照片: /Gallery/ || fas fa-images</span></span><br><span class="line"><span class="code">    電影: /movies/ || fas fa-video</span></span><br><span class="line"><span class="code">  友鏈: /link/ || fas fa-link</span></span><br><span class="line"><span class="code">  關於: /about/ || fas fa-heart</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-menu.png" alt=""></p>
<h2 id="代碼">代碼</h2>
<div class="note info flat"><p>代碼塊中的所有功能只適用於 Hexo 自帶的代碼渲染</p>
<p>如果使用第三方的渲染器，不一定會有效</p>
</div>
<h3 id="代碼高亮主題">代碼高亮主題</h3>
<div class="tabs" id="highlight-theme"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#highlight-theme-1">默認主題</button></li><li class="tab"><button type="button" data-href="#highlight-theme-2">自定義主題</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="highlight-theme-1"><p><code>Butterfly</code> 支持6種代碼高亮樣式：</p>
<ul>
<li>darker</li>
<li>pale night</li>
<li>light</li>
<li>ocean</li>
<li>mac</li>
<li>mac light</li>
</ul>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="string">light</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>darker</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-darker.png" alt=""></p>
<blockquote>
<p>pale night</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-pale-night.png" alt=""></p>
<blockquote>
<p>light</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-light.png" alt=""></p>
<blockquote>
<p>ocean</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-ocean.png" alt=""></p>
<blockquote>
<p>mac</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-mac.png" alt=""></p>
<blockquote>
<p>mac light</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-mac-light.png" alt="image-20200731175026827"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="highlight-theme-2"><p>主題從3.0開始，支持使用自定義的代碼顔色。</p>
<p>如何自定義主題，請查看下面這篇文章。</p>
<p><a href="#">Post not found: 自定義代碼配色 自定義代碼配色</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h3 id="代碼複製">代碼複製</h3>
<p>主題支持代碼複製功能</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-copy.png" alt=""></p>
<h3 id="代碼框展開-關閉">代碼框展開/關閉</h3>
<p>在默認情況下，代碼框自動展開，可設置是否所有代碼框都關閉狀態，點擊<code>&gt;</code>可展開代碼</p>
<ul>
<li>true 全部代碼框不展開，需點擊<code>&gt;</code>打開</li>
<li>false 代碼狂展開，有<code>&gt;</code>點擊按鈕</li>
<li>none 不顯示<code>&gt;</code>按鈕</li>
</ul>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">true</span> <span class="comment">#代碼框不展開，需點擊 &#x27;&gt;&#x27; 打開</span></span><br></pre></td></tr></table></figure>
<div class="note info flat"><p>你也可以在post/page頁對應的markdown文件front-matter添加highlight_shrink來獨立配置。</p>
<p>當<strong>主題配置文件中</strong>的 <code>highlight_shrink </code>設為true時，可在front-matter添加<code>highlight_shrink: false</code>來單獨配置文章展開代碼框。</p>
<p>當<strong>主題配置文件中</strong>的 <code>highlight_shrink </code>設為false時，可在front-matter添加<code>highlight_shrink: true</code>來單獨配置文章收縮代碼框。</p>
</div>
<p><code>highlight_shrink: true</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-shrink-true.png" alt=""></p>
<p><code>highlight_shrink: false</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-shrink-false.png" alt=""></p>
<p><code>highlight_shrink: none</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-highlight-shirk-none.png" alt=""></p>
<h3 id="代碼換行">代碼換行</h3>
<p>在默認情況下，Hexo 在編譯的時候不會實現代碼自動換行。如果你不希望在代碼塊的區域裏有橫向滾動條的話，那麼你可以考慮開啟這個功能。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>如果你是使用 highlight 渲染，需要找到你站點的 Hexo 配置文件<code>_config.yml</code>，將<code>line_number</code>改成<code>false</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># &lt;- 改這裏</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br></pre></td></tr></table></figure>
<p>如果你是使用 prismjs 渲染，需要找到你站點的 Hexo 配置文件<code>_config.yml</code>，將<code>line_number</code>改成<code>false</code>:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># &lt;- 改這裏</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>設置<code>code_word_wrap</code>之前:</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-word-wrap-before.png" alt=""></p>
<blockquote>
<p>設置<code>code_word_wrap</code>之後:</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-code-word-wrap-after.png" alt=""></p>
<h3 id="代碼高度限制">代碼高度限制</h3>
<blockquote>
<p>3.7.0 及以上支持</p>
</blockquote>
<p>可配置代碼高度限制，超出的部分會隱藏，並顯示展開按鈕。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ol>
<li>
<p>單位是 <code>px</code>，直接添加數字，如 200</p>
</li>
<li>
<p>實際限制高度為 <code>highlight_height_limit + 30 px</code> ，多增加 30px 限制，目的是避免代碼高度只超出highlight_height_limit 一點時，出現展開按鈕，展開沒內容。</p>
</li>
<li>
<p>不適用於隱藏後的代碼塊（ css 設置 display: none）</p>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-theme-butterfly-docs-highlight-heigh-limit.gif" alt="hexo-theme-butterfly-docs-highlight-heigh-limit"></p>
<h2 id="社交圖標">社交圖標</h2>
<p>Butterfly支持 <a href="https://fontawesome.com/icons?from=io">font-awesome v5</a>圖標.</p>
<p>書寫格式 <code>圖標名：url || 描述性文字</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/xxxxx</span> <span class="string">||</span> <span class="string">Github</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:xxxxxx@gmail.com</span> <span class="string">||</span> <span class="string">Email</span></span><br></pre></td></tr></table></figure>
<p>圖標名可在這尋找</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-fontawesome.png" alt=""></p>
<p>PC:</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-social-icon-pc.png" alt=""></p>
<p>Mobile:</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-socila-icon-mobile.png" alt="1560603353743"></p>
<h2 id="主頁文章節選-自動節選和文章頁description">主頁文章節選(自動節選和文章頁description)</h2>
<p>因為主題UI的關係，<code>主頁文章節選</code>只支持<code>自動節選</code>和<code>文章頁description</code>。</p>
<p>在<code>butterfly</code>裏，有四種可供選擇</p>
<ol>
<li><strong>description：</strong> 只顯示description</li>
<li><strong>both：</strong> 優先選擇description，如果沒有配置description，則顯示自動節選的內容</li>
<li>**auto_excerpt：**只顯示自動節選</li>
<li><strong>false：</strong> 不顯示文章內容</li>
</ol>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure>
<p><code>description</code>在front-matter裏添加</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-description.png" alt=""></p>
<h2 id="頂部圖">頂部圖</h2>
<div class="note info flat"><p>如果不要顯示頂部圖，可直接配置 <code>disable_top_img: true</code></p>
</div>
<p>配置中的值：</p>
<table>
<thead>
<tr>
<th>配置</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>index_img</td>
<td>主頁的 top_img</td>
</tr>
<tr>
<td>default_top_img</td>
<td>默認的 top_img，當頁面的 top_img 沒有配置時，會顯示 default_top_img</td>
</tr>
<tr>
<td>archive_img</td>
<td>歸檔頁面的 top_img</td>
</tr>
<tr>
<td>tag_img</td>
<td>tag 子頁面 的 默認 top_img</td>
</tr>
<tr>
<td>tag_per_img</td>
<td>tag 子頁面的 top_img，可配置每個 tag 的 top_img</td>
</tr>
<tr>
<td>category_img</td>
<td>category 子頁面 的 默認 top_img</td>
</tr>
<tr>
<td>category_per_img</td>
<td>category 子頁面的 top_img，可配置每個 category 的 top_img</td>
</tr>
</tbody>
</table>
<p>其它頁面 （tags/categories/自建頁面）和 文章頁 的 <code>top_img</code> ，請到對應的 md 頁面設置<code>front-matter</code>中的<code>top_img</code></p>
<p>以上所有的 top_img 可配置以下值</p>
<blockquote>
<p><strong>3.2.0 以下</strong>版本的配置只支持</p>
<ul>
<li>留空，true 和 false - 顯示默認的顔色</li>
<li>img鏈接 - 顯示所配置的圖片</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>配置的值</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>留空</td>
<td>顯示默認的top_img（如有），否則顯示默認的顔色<br>（文章頁top_img留空的話，會顯示 cover 的值）</td>
</tr>
<tr>
<td>img鏈接</td>
<td>圖片的鏈接，顯示所配置的圖片</td>
</tr>
<tr>
<td>顔色(<br>HEX值 - #0000FF<br>RGB值 - rgb(0,0,255)<br>顔色單詞 - orange<br>漸變色 - linear-gradient( 135deg, #E2B0FF 10%, #9F44D3 100%)<br>）</td>
<td>對應的顔色</td>
</tr>
<tr>
<td>transparent</td>
<td>透明</td>
</tr>
<tr>
<td>false</td>
<td>不顯示 top_img</td>
</tr>
</tbody>
</table>
<p><code>tag_per_img</code> 和 <code>category_per_img</code> 是 3.2.0 新增的內容，可對 tag 和 category 進行單獨的配置</p>
<p>並不推薦為每個 tag 和每個 category 都配置不同的頂部圖，因為配置太多會拖慢生成速度</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">tag_per_img：</span></span><br><span class="line">  <span class="attr">aplayer:</span> <span class="string">https://xxxxxx.png</span></span><br><span class="line">  <span class="attr">android:</span> <span class="string">ddddddd.png</span></span><br><span class="line">  </span><br><span class="line"><span class="string">category_per_img：</span></span><br><span class="line">  <span class="string">隨想:</span> <span class="string">hdhdh.png</span></span><br><span class="line">  <span class="string">推薦:</span> <span class="string">ddjdjdjd.png</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>top_img: false</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-page-top-img-false.png" alt="image-20200924224536013"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-post-top-img-false-new.png" alt="image-20201027210949089"></p>
<blockquote>
<p>top_img: orange</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-top-img-orange.png" alt="image-20200924225024153"></p>
<blockquote>
<p>top_img: ‘linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)’</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-top-img-color.png" alt="image-20200924225300934"></p>
<h2 id="文章置頂">文章置頂</h2>
<p>【推薦】<a href="https://github.com/hexojs/hexo-generator-index"><code>hexo-generator-index</code></a>從 2.0.0 開始，已經支持文章置頂功能。你可以直接在文章的<code>front-matter</code>區域裏添加<code>sticky: 1</code>屬性來把這篇文章置頂。數值越大，置頂的優先級越大。</p>
<h2 id="文章封面">文章封面</h2>
<p>文章的markdown文檔上,在<code>Front-matter</code>添加<code>cover</code>,並填上要顯示的圖片地址。<br>
如果不配置<code>cover</code>,可以設置顯示默認的cover.</p>
<p>如果不想在首頁顯示cover,可以設置為<code>false</code></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># 是否顯示文章封面</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 封面顯示的位置</span></span><br><span class="line">  <span class="comment"># 三個值可配置 left , right , both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># 當沒有設置cover時，默認的封面顯示</span></span><br><span class="line">  <span class="attr">default_cover:</span> </span><br></pre></td></tr></table></figure>
<p>當配置多張圖片時,會隨機選擇一張作為cover.此時寫法應為</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">default_cover:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg2.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-cover.png" alt=""><br>
<img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-cover-show.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-false.png" alt=""></p>
<blockquote>
<p>left</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-left.png" alt=""></p>
<blockquote>
<p>right</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-right.png" alt=""></p>
<blockquote>
<p>both</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-cover-both.png" alt=""></p>
<h2 id="文章頁相關配置">文章頁相關配置</h2>
<h3 id="文章meta顯示">文章meta顯示</h3>
<p>這個選項是用來顯示文章的相關信息的。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>主頁</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-page-meta.png" alt=""></p>
<blockquote>
<p>文章頁</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-info.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-tag.png" alt=""></p>
<p><code>date_format</code>  是 3.2.0 新增的內容，配置時間顯示明確時間還是相對時間</p>
<blockquote>
<p>相對時間</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-relative-time.png" alt="image-20200928201701560"></p>
<blockquote>
<p>明確時間</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/theme-butterfly-docs-full-date.png" alt="image-20200928201911032"></p>
<h3 id="文章版權">文章版權</h3>
<p>為你的博客文章展示文章版權和許可協議。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">decode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br></pre></td></tr></table></figure>
<p>由於<code>Hexo 4.1</code>開始，默認對網址進行解碼，以至於如果是中文網址，會被解碼，可設置<code>decode: true</code>來顯示中文網址。</p>
<p>如果有文章（例如：轉載文章）不需要顯示版權，可以在文章Front-matter單獨設置</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">copyright:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>從<code>3.0.0</code>開始，支持對單獨文章設置版權信息，可以在文章Front-matter單獨設置</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">copyright<span class="emphasis">_author: xxxx</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href: https://xxxxxx.com</span></span><br><span class="line"><span class="emphasis">copyright_</span>url: https://xxxxxx.com</span><br><span class="line">copyright<span class="emphasis">_info: 此文章版權歸xxxxx所有，如有轉載，請註明來自原作者</span></span><br></pre></td></tr></table></figure>
<p><strong>版權顯示截圖</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-copyright.png" alt="image-20210130161913121"></p>
<h3 id="文章打賞">文章打賞</h3>
<p>在你每篇文章的結尾，可以添加打賞按鈕。相關二維碼可以自行配置。</p>
<p>對於沒有提供二維碼的，可配置一張軟件的icon圖片，然後在link上添加相應的打賞鏈接。用户點擊圖片就會跳轉到鏈接去。</p>
<p>link可以不寫，會默認為圖片的鏈接。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/wechat.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">微信</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/alipay.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">支付寶</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-post-donate.png" alt=""></p>
<h3 id="TOC">TOC</h3>
<p>在文章頁，會有一個目錄，用於顯示TOC。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>屬性</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>enable</td>
<td>是否顯示TOC</td>
</tr>
<tr>
<td>number</td>
<td>是否顯示章節數</td>
</tr>
<tr>
<td>style_simple</td>
<td>簡潔模式（側邊欄<strong>只</strong>顯示TOC）</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Toc PC</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-toc-pc-new.png" alt=""></p>
<blockquote>
<p>Toc Mobile</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-toc-mobile-new.png" alt=""></p>
<blockquote>
<p>style_simple: true</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-toc-style-simple.png" alt="image-20201209232104167"></p>
<h4 id="為特定的文章配置">為特定的文章配置</h4>
<p>在你的文章<code>md</code>文件的頭部，加入<code>toc_number</code>和<code>toc</code>，並配置<code>true</code>或者<code>false</code>即可。</p>
<p>主題會優先判斷文章Markdown的Front-matter是否有配置，如有，則以Front-matter的配置為準。否則，以<strong>主題配置文件中</strong>的配置為準</p>
<h3 id="相關文章">相關文章</h3>
<p>相關文章推薦的原理是根據文章tags的比重來推薦</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># 顯示推薦文章數目</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated 文章日期顯示創建日或者更新日</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-releatedpost.png" alt=""></p>
<h3 id="文章錨點">文章錨點</h3>
<p>開啟文章錨點後，當你在文章頁進行滾動時，文章鏈接會根據標題ID進行替換<br>
(注意: 每替換一次，會留下一個歷史記錄。所以如果一篇文章有很多錨點的話，網頁的歷史記錄會很多。)</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># anchor</span></span><br><span class="line"><span class="comment"># when you scroll in post , the url will update according to header id.</span></span><br><span class="line"><span class="attr">anchor:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="文章過期提醒">文章過期提醒</h3>
<p>可設置是否顯示文章過期提醒，以更新時間為基準。</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># Displays outdated notice for a post (文章過期提醒)</span></span><br><span class="line">noticeOutdate:</span><br><span class="line">  enable: true</span><br><span class="line">  style: flat # style: simple/flat</span><br><span class="line">  limit<span class="emphasis">_day: 365 # When will it be shown</span></span><br><span class="line"><span class="emphasis">  position: top # position: top/bottom</span></span><br><span class="line"><span class="emphasis">  message_</span>prev: It has been</span><br><span class="line">  message<span class="emphasis">_next: days since the last update, the content of the article may be outdated.</span></span><br></pre></td></tr></table></figure>
<p><code> limit_day</code>： 距離更新時間多少天才顯示文章過期提醒</p>
<p><code>message_prev</code> ： 天數之前的文字</p>
<p><code>message_next</code>：天數之後的文字</p>
<blockquote>
<p>style: flat</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butteffly-docs-outdate-flat.png" alt="image-20200731175909296"></p>
<blockquote>
<p>style: simple</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-outdated-simple.png" alt="image-20200731180037968"></p>
<h3 id="文章編輯按鈕">文章編輯按鈕</h3>
<p>在文章標題旁邊顯示一個編輯按鈕，點擊會跳轉到對應的鏈接去。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Post edit</span></span><br><span class="line"><span class="comment"># Easily browse and edit blog source code online.</span></span><br><span class="line"><span class="attr">post_edit:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># url: https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/</span></span><br><span class="line">  <span class="comment"># For example: https://github.com/jerryc127/butterfly.js.org/edit/main/source/</span></span><br><span class="line">  <span class="attr">url:</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-post-edit.png" alt="image-20210130160108360"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-post-edit-2.png" alt="image-20210130160208436"></p>
<h3 id="文章分頁按鈕">文章分頁按鈕</h3>
<p>可設置分頁的邏輯，也可以關閉分頁顯示</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># post_pagination (分頁)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="comment"># 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>參數</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>post_pagination: false</td>
<td>關閉分頁按鈕</td>
</tr>
<tr>
<td>post_pagination: 1</td>
<td>下一篇顯示的是舊文章</td>
</tr>
<tr>
<td>post_pagination: 2</td>
<td>下一篇顯示的是新文章</td>
</tr>
</tbody>
</table>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-post-pagination.png" alt="image-20210130161545100"></p>
<h2 id="頭像">頭像</h2>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/avatar.png</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># 頭像會一直轉圈</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-avatar.png" alt=""></p>
<h2 id="圖片描述">圖片描述</h2>
<p>可開啟圖片Figcaption描述文字顯示</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">photofigcaption:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-photo-figcaption.png" alt=""></p>
<h2 id="複製相關配置">複製相關配置</h2>
<p>可配置網站是否可以複製、複製的內容是否添加版權信息</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># copy settings</span></span><br><span class="line"><span class="section"># copyright: Add the copyright information after copied content (複製的內容後面加上版權信息)</span></span><br><span class="line">copy:</span><br><span class="line">  enable: true</span><br><span class="line">  copyright:</span><br><span class="line"><span class="code">    enable: true</span></span><br><span class="line"><span class="code">    limit_count: 50</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>配置</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>enable</td>
<td>是否開啟網站複製權限</td>
</tr>
<tr>
<td>copyright</td>
<td>複製的內容後面加上版權信息</td>
</tr>
<tr>
<td>enable</td>
<td>是否開啟複製版權信息添加</td>
</tr>
<tr>
<td>limit_count</td>
<td>字數限制，當複製文字大於這個字數限制時，將在複製的內容後面加上版權信息</td>
</tr>
</tbody>
</table>
<blockquote>
<p>添加版權信息後</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Lorem ipsum dolor sit amet, test link consectetur adipiscing elit. Strong text pellentesque ligula commodo viverra vehicula. Italic text at ullamcorper enim. Morbi a euismod nibh. Underline text non elit nisl. Deleted text tristique, sem id condimentum tempus, metus lectus venenatis mauris, sit amet semper lorem felis a eros. Fusce egestas nibh at sagittis auctor. Sed ultricies ac arcu quis molestie. Donec dapibus nunc in nibh egestas, vitae volutpat sem iaculis. Curabitur sem tellus, elementum nec quam id, fermentum laoreet mi. Ut mollis ullamcorper turpis, vitae facilisis velit ultricies sit amet. Etiam laoreet dui odio, id tempus justo tincidunt id. Phasellus scelerisque nunc sed nunc ultricies accumsan.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">作者: Jerry</span><br><span class="line">連結: http://localhost:4000/posts/bd3c650b/#Paragraph</span><br><span class="line">來源: Butterfly</span><br><span class="line">著作權歸作者所有。商業轉載請聯絡作者獲得授權，非商業轉載請註明出處。</span><br></pre></td></tr></table></figure>
<h2 id="Footer-設置">Footer 設置</h2>
<h3 id="博客年份">博客年份</h3>
<p><code>since</code>是一個來展示你站點起始時間的選項。它位於頁面的最底部。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2018</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-since.png" alt=""></p>
<h3 id="頁腳自定義文本">頁腳自定義文本</h3>
<p><code>custom_text</code>是一個給你用來在頁腳自定義文本的選項。通常你可以在這裏寫聲明文本等。支持 HTML。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">Hi,</span> <span class="string">welcome</span> <span class="string">to</span> <span class="string">my</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://butterfly.js.org/&quot;&gt;blog&lt;/a&gt;!</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-footer-text.png" alt=""></p>
<p>對於部分人需要寫 ICP 的，也可以寫在 <code>custom_text</code>裏</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">&lt;a</span> <span class="string">href=&quot;icp鏈接&quot;&gt;&lt;img</span> <span class="string">class=&quot;icp-icon&quot;</span> <span class="string">src=&quot;icp圖片&quot;&gt;&lt;span&gt;備案號：xxxxxx&lt;/span&gt;&lt;/a&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="右下角按鈕">右下角按鈕</h2>
<h3 id="簡繁轉換">簡繁轉換</h3>
<p>簡體繁體互換</p>
<p>右下角會有簡繁轉換按鈕。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 默認按鈕顯示文字(網站是簡體，應設置為&#x27;default: 繁&#x27;)</span></span><br><span class="line">  <span class="attr">default:</span> <span class="string">簡</span></span><br><span class="line">  <span class="comment">#網站默認語言，1: 繁體中文, 2: 簡體中文</span></span><br><span class="line">  <span class="attr">defaultEncoding:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment">#延遲時間,若不在前, 要設定延遲翻譯時間, 如100表示100ms,默認為0</span></span><br><span class="line">  <span class="attr">translateDelay:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment">#當文字是簡體時，按鈕顯示的文字</span></span><br><span class="line">  <span class="attr">msgToTraditionalChinese:</span> <span class="string">&quot;繁&quot;</span></span><br><span class="line">  <span class="comment">#當文字是繁體時，按鈕顯示的文字</span></span><br><span class="line">  <span class="attr">msgToSimplifiedChinese:</span> <span class="string">&quot;簡&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>簡體</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-simp.png" alt=""></p>
<blockquote>
<p>繁體</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-tranditional.png" alt=""></p>
<h3 id="夜間模式">夜間模式</h3>
<p>右下角會有夜間模式按鈕</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># dark mode</span></span><br><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># dark mode和 light mode切換按鈕</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-dark-mode-1.png" alt="image-20201230201029381"></p>
<div class="note info flat"><p>V2.0.0 開始增加一個選項，可開啟自動切換light mode 和 dark mode</p>
<p>autoChangeMode: 1  跟隨系統而變化，不支持的瀏覽器/系統將按照時間晚上6點到早上6點之間切換為 dark mode</p>
<p>autoChangeMode: 2  只按照時間 晚上6點到早上6點之間切換為 dark mode,其餘時間為light mode</p>
<p>autoChangeMode: false 取消自動切換</p>
</div>
<h3 id="閲讀模式">閲讀模式</h3>
<p>閲讀模式下會去掉除文章外的內容，避免幹擾閲讀。</p>
<p>只會出現在文章頁面，右下角會有閲讀模式按鈕。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-read-mode.png" alt=""></p>
<h3 id="字體大小">字體大小</h3>
<p>可以改變字體大小（最小隻能到 10px，最大隻能到 20px）</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Change font size</span></span><br><span class="line"><span class="attr">change_font_size:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="側邊欄設置">側邊欄設置</h2>
<h3 id="側邊排版">側邊排版</h3>
<p>可自行決定哪個項目需要顯示，可決定位置，也可以設置不顯示側邊欄。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># 手機頁面（ 顯示寬度 &lt; 768px ）是否顯示aside內容</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">	  <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">Github</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/jerryc127/hexo-theme-butterfly</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">my</span> <span class="string">Blog</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>position: left</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-aside-left.png" alt=""></p>
<blockquote>
<p>position: right</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-aside-right.png" alt=""></p>
<blockquote>
<p>card_tags color: false</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/20200426182730.png" alt=""></p>
<blockquote>
<p>card_tags color: true</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/20200426183025.png" alt=""></p>
<blockquote>
<p>aside button</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-aside-button.gif" alt=""></p>
<h3 id="訪問人數-busuanzi-UV-和-PV">訪問人數 busuanzi (UV 和 PV)</h3>
<p>訪問 busuanzi 的<a href="http://busuanzi.ibruce.info/">官方網站</a>查看更多的介紹。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-busuanzi-site-pv.png" alt=""></p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-pv.png" alt=""></p>
<h3 id="運行時間">運行時間</h3>
<p>網頁已運行時間</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">6</span><span class="string">/7/2018</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br><span class="line">  <span class="comment">##網頁開通時間</span></span><br><span class="line">  <span class="comment">#格式: 月/日/年 時間</span></span><br><span class="line">  <span class="comment">#也可以寫成 年/月/日 時間</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-runtime.png" alt=""></p>
<h3 id="最新評論">最新評論</h3>
<blockquote>
<p>3.1.0 起支持</p>
</blockquote>
<div class="note primary flat"><p>最新評論只會在刷新時才會去讀取，並不會實時變化</p>
<p>由於 API 有 訪問次數限制，為了避免調用太多，主題默認存取期限為 10 分鐘。也就是説，調用後資料會存在 <em>localStorage</em> 裏，10分鐘內刷新網站只會去 <em>localStorage</em> 讀取資料。 10 分鐘期限一過，刷新頁面時才會去調取 API 讀取新的數據。（ 3.6.0 新增了 <code>storage</code> 配置，可自行配置緩存時間）</p>
</div>
<p>在側邊欄顯示最新評論板塊</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"># Aside widget - Newest Comments</span><br><span class="line"><span class="attr">newest_comments</span>:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order</span>: # Don<span class="string">&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"><span class="string">  limit: 6</span></span><br><span class="line"><span class="string">  storage: 10 # unit: mins, save data to localStorage</span></span><br><span class="line"><span class="string">  avatar: true</span></span><br></pre></td></tr></table></figure>
<p>部分配置解釋：</p>
<table>
<thead>
<tr>
<th>配置</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>limit</td>
<td>顯示的數量</td>
</tr>
<tr>
<td>storage</td>
<td>設置緩存時間，單位 分鐘</td>
</tr>
<tr>
<td>avatar</td>
<td>是否顯示頭像</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Demo</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-newest-comments.png" alt="image-20200830223037320"></p>
<h3 id="自定義添加欄目">自定義添加欄目</h3>
<a class="btn-beautify button--animated block green" href="/posts/ea33ab97/" 
  title="點擊前往"><i class="fas fa-lightbulb"></i><span>點擊前往</span></a>
<h2 id="標籤外掛（Tag-Plugins）">標籤外掛（Tag Plugins）</h2>
<div class="note info flat"><p>標籤外掛是Hexo獨有的功能，並不是標準的Markdown格式。</p>
<p>以下的寫法，只適用於Butterfly主題，用在其它主題上不會有效果，甚至可能會報錯。使用前請留意</p>
</div>
<div class="note warning flat"><p>標籤外掛雖然能為主題帶來一些額外的功能和UI方面的強化，但是，標籤外掛也有明顯的限制，使用時請留意。</p>
</div>
<h3 id="Note-Bootstrap-Callout">Note (Bootstrap Callout)</h3>
<div class="tabs" id="note"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#note-1">通用設置</button></li><li class="tab"><button type="button" data-href="#note-2">用法 1</button></li><li class="tab"><button type="button" data-href="#note-3">用法 2（自定義 icon）</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="note-1"><p>移植於next主題，並進行修改。</p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">simple</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p><code>icons</code>和<code>light_bg_offset</code>只對<em>方法一</em>生效</p>
<p>Note 標籤外掛有兩種用法</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="note-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>名稱</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td>【可選】標識，不同的標識有不同的配色<br>（ default / primary / success / info / warning / danger ）</td>
</tr>
<tr>
<td>no-icon</td>
<td>【可選】不顯示 icon</td>
</tr>
<tr>
<td>style</td>
<td>【可選】可以覆蓋配置中的 style <br>（simple/modern/flat/disabled）</td>
</tr>
</tbody>
</table>
<blockquote>
<p>simple</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note simple %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note simple"><p>默認 提示塊標籤</p>
</div>
<div class="note default simple"><p>default 提示塊標籤</p>
</div>
<div class="note primary simple"><p>primary 提示塊標籤</p>
</div>
<div class="note success simple"><p>success 提示塊標籤</p>
</div>
<div class="note info simple"><p>info 提示塊標籤</p>
</div>
<div class="note warning simple"><p>warning 提示塊標籤</p>
</div>
<div class="note danger simple"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>modern</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note modern %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note modern"><p>默認 提示塊標籤</p>
</div>
<div class="note default modern"><p>default 提示塊標籤</p>
</div>
<div class="note primary modern"><p>primary 提示塊標籤</p>
</div>
<div class="note success modern"><p>success 提示塊標籤</p>
</div>
<div class="note info modern"><p>info 提示塊標籤</p>
</div>
<div class="note warning modern"><p>warning 提示塊標籤</p>
</div>
<div class="note danger modern"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>flat</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note flat %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note flat"><p>默認 提示塊標籤</p>
</div>
<div class="note default flat"><p>default 提示塊標籤</p>
</div>
<div class="note primary flat"><p>primary 提示塊標籤</p>
</div>
<div class="note success flat"><p>success 提示塊標籤</p>
</div>
<div class="note info flat"><p>info 提示塊標籤</p>
</div>
<div class="note warning flat"><p>warning 提示塊標籤</p>
</div>
<div class="note danger flat"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>disabled</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note disabled %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note disabled"><p>默認 提示塊標籤</p>
</div>
<div class="note default disabled"><p>default 提示塊標籤</p>
</div>
<div class="note primary disabled"><p>primary 提示塊標籤</p>
</div>
<div class="note success disabled"><p>success 提示塊標籤</p>
</div>
<div class="note info disabled"><p>info 提示塊標籤</p>
</div>
<div class="note warning disabled"><p>warning 提示塊標籤</p>
</div>
<div class="note danger disabled"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>no-icon</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note no-icon flat"><p>默認 提示塊標籤</p>
</div>
<div class="note default no-icon flat"><p>default 提示塊標籤</p>
</div>
<div class="note primary no-icon flat"><p>primary 提示塊標籤</p>
</div>
<div class="note success no-icon flat"><p>success 提示塊標籤</p>
</div>
<div class="note info no-icon flat"><p>info 提示塊標籤</p>
</div>
<div class="note warning no-icon flat"><p>warning 提示塊標籤</p>
</div>
<div class="note danger no-icon flat"><p>danger 提示塊標籤</p>
</div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="note-3"><blockquote>
<p>3.2.0 以上版本支</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>名稱</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>color</td>
<td>【可選】顔色 <br>(default / blue / pink / red / purple / orange / green)</td>
</tr>
<tr>
<td>icon</td>
<td>【可選】可配置自定義 icon (只支持 fontawesome 圖標, 也可以配置 no-icon )</td>
</tr>
<tr>
<td>style</td>
<td>【可選】可以覆蓋配置中的 style<br/>（simple/modern/flat/disabled）</td>
</tr>
</tbody>
</table>
<blockquote>
<p>simple</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon simple"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon simple"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>modern</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon modern"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon modern"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>flat</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon flat"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon flat"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>disabled</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon disabled"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon disabled"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>no-icon</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue no-icon %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink no-icon %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red no-icon %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple no-icon %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green no-icon %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note no-icon flat"><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue no-icon flat"><p>2021年快到了…</p>
</div>
<div class="note pink no-icon flat"><p>小心開車 安全至上</p>
</div>
<div class="note red no-icon flat"><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange no-icon flat"><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple no-icon flat"><p>剪刀石頭布</p>
</div>
<div class="note green no-icon flat"><p>前端最討厭的瀏覽器</p>
</div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h3 id="Gallery相冊圖庫">Gallery相冊圖庫</h3>
<blockquote>
<p>2.2.0以上提供</p>
</blockquote>
<p>一個圖庫集合。</p>
<p>寫法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>name：圖庫名字</li>
<li>description：圖庫描述</li>
<li>link：連接到對應相冊的地址</li>
<li>img-url：圖庫封面的地址</li>
</ul>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;gallery-group-main&quot;&gt;</span><br><span class="line">&#123;% galleryGroup &#x27;壁紙&#x27; &#x27;收藏的一些壁紙&#x27; &#x27;/Gallery/wallpaper&#x27; https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;漫威&#x27; &#x27;關於漫威的圖片&#x27; &#x27;/Gallery/marvel&#x27; https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;OH MY GIRL&#x27; &#x27;關於OH MY GIRL的圖片&#x27; &#x27;/Gallery/ohmygirl&#x27; https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<div class="gallery-group-main">

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">壁紙</div>
  <p>收藏的一些壁紙</p>
  <a href='/Gallery/wallpaper'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">漫威</div>
  <p>關於漫威的圖片</p>
  <a href='/Gallery/marvel'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">OH MY GIRL</div>
  <p>關於OH MY GIRL的圖片</p>
  <a href='/Gallery/ohmygirl'></a>
  </figcaption>
  </figure>
  
</div>
<h3 id="Gallery相冊">Gallery相冊</h3>
<blockquote>
<p>2.0.0以上提供</p>
</blockquote>
<p>區別於舊版的Gallery相冊,新的Gallery相冊會自動根據圖片長度進行排版，書寫也更加方便，與markdown格式一樣。可根據需要插入到相應的md。</p>
<p>寫法:</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown 圖片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure>
<p>例如</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span><br><span class="line">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure>
<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>
          </div>
<h3 id="tag-hide">tag-hide</h3>
<div class="note warning flat"><p>2.2.0以上提供</p>
<p>請注意，tag-hide內的標簽外掛content內都不建議有h1 - h6 等標題。因為Toc會把隱藏內容標題也顯示出來，而且當滾動屏幕時，如果隱藏內容沒有顯示出來，會導致Toc的滾動出現異常。</p>
</div>
<p>如果你想把一些文字、內容隱藏起來，並提供按鈕讓用户點擊顯示。可以使用這個標籤外掛。</p>
<div class="tabs" id="tag-hide"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#tag-hide-1">Inline</button></li><li class="tab"><button type="button" data-href="#tag-hide-2">Block</button></li><li class="tab"><button type="button" data-href="#tag-hide-3">Toggle</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="tag-hide-1"><p><code>inline</code> 在文本里面添加按鈕隱藏內容，只限文字</p>
<p>( content不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideInline content,display,bg,color %&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>content: 文本內容</p>
</li>
<li>
<p>display: 按鈕顯示的文字(可選)</p>
</li>
<li>
<p>bg: 按鈕的背景顏色(可選)</p>
</li>
<li>
<p>color: 按鈕文字的顏色(可選)</p>
</li>
</ul>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">哪個英文字母最酷？ &#123;% hideInline 因為西裝褲(C裝酷),查看答案,#FF7242,#fff %&#125;</span><br><span class="line"></span><br><span class="line">門裏站着一個人? &#123;% hideInline 閃 %&#125;</span><br></pre></td></tr></table></figure>
<p>哪個英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button button--animated" style="background-color: #FF7242;color: #fff">查看答案<br>
</button><span class="hide-content">因為西裝褲(C裝酷)</span></span></p>
<p>門裏站着一個人? <span class="hide-inline"><button type="button" class="hide-button button--animated" style="">Click<br>
</button><span class="hide-content">閃</span></span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tag-hide-2"><p><code>block</code>獨立的block隱藏內容，可以隱藏很多內容，包括圖片，代碼塊等等</p>
<p>( display 不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>content: 文本內容</li>
<li>display: 按鈕顯示的文字(可選)</li>
<li>bg: 按鈕的背景顏色(可選)</li>
<li>color: 按鈕文字的顏色(可選)</li>
</ul>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">查看答案</span><br><span class="line">&#123;% hideBlock 查看答案 %&#125;</span><br><span class="line">傻子，怎麼可能有答案</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure>
<p>查看答案</p>
<div class="hide-block"><button type="button" class="hide-button button--animated" style="">查看答案
    </button><div class="hide-content"><p>傻子，怎麼可能有答案</p>
</div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tag-hide-3"><blockquote>
<p>2.3.0以上支持</p>
</blockquote>
<p>如果你需要展示的內容太多，可以把它隱藏在收縮框裏，需要時再把它展開。</p>
<p>( display 不能包含英文逗號，可用<code>&amp;sbquo;</code>)</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideToggle Butterfly安裝方法 %&#125;</span><br><span class="line">在你的博客根目錄裏</span><br><span class="line"></span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">如果想要安裝比較新的dev分支，可以</span><br><span class="line"></span><br><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br><span class="line"></span><br><span class="line">&#123;% endhideToggle %&#125;</span><br></pre></td></tr></table></figure>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>Butterfly安裝方法</span></div>
    <div class="hide-content"><p>在你的博客根目錄裏</p>
<p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p>
<p>如果想要安裝比較新的dev分支，可以</p>
<p>git clone -b dev <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p>
</div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h3 id="mermaid">mermaid</h3>
<div class="note warning flat"><p>mermaid標籤不允許嵌套於一些隱藏屬性的標籤外掛，例如: tag-hide內的標籤外掛和tabs標籤外掛，這會導致mermaid圖示無法正常顯示，使用時請留意。</p>
<p><strong>請不要壓縮html代碼，不然會導致mermaid顯示異常</strong></p>
</div>
<p>使用mermaid標籤可以繪製Flowchart（流程圖）、Sequence diagram（時序圖 ）、Class Diagram（類別圖）、State Diagram（狀態圖）、Gantt（甘特圖）和Pie Chart（圓形圖），具體可以查看<a href="https://mermaid-js.github.io/mermaid/#/">mermaid文檔</a></p>
<p>修改 <code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mermaid:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># built-in themes: default/forest/dark/neutral</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">default</span></span><br></pre></td></tr></table></figure>
<p>寫法：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">內容</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid %&#125;</span><br><span class="line">pie</span><br><span class="line"><span class="code">    title Key elements in Product X</span></span><br><span class="line"><span class="code">    &quot;Calcium&quot; : 42.96</span></span><br><span class="line"><span class="code">    &quot;Potassium&quot; : 50.05</span></span><br><span class="line"><span class="code">    &quot;Magnesium&quot; : 10.01</span></span><br><span class="line"><span class="code">    &quot;Iron&quot; :  5</span></span><br><span class="line"><span class="code">&#123;% endmermaid %&#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-docs-mermaid.png" alt=""></p>
<h3 id="Tabs">Tabs</h3>
<p>移植於next主題</p>
<p>使用方法</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br><span class="line"></span><br><span class="line">Unique name   : Unique name of tabs block tag without comma.</span><br><span class="line"><span class="code">                Will be used in #id&#x27;s as prefix for each tab with their index numbers.</span></span><br><span class="line"><span class="code">                If there are whitespaces in name, for generate #id all whitespaces will replaced by dashes.</span></span><br><span class="line"><span class="code">                Only for current url of post/page must be unique!</span></span><br><span class="line"><span class="code">[index]       : Index number of active tab.</span></span><br><span class="line"><span class="code">                If not specified, first tab (1) will be selected.</span></span><br><span class="line"><span class="code">                If index is -1, no tab will be selected. It&#x27;s will be something like spoiler.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br><span class="line"><span class="code">[Tab caption] : Caption of current tab.</span></span><br><span class="line"><span class="code">                If not caption specified, unique name with tab index suffix will be used as caption of tab.</span></span><br><span class="line"><span class="code">                If not caption specified, but specified icon, caption will empty.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br><span class="line"><span class="code">[@icon]       : FontAwesome icon name (full-name, look like &#x27;fas fa-font&#x27;)</span></span><br><span class="line"><span class="code">                Can be specified with or without space; e.g. &#x27;Tab caption @icon&#x27; similar to &#x27;Tab caption@icon&#x27;.</span></span><br><span class="line"><span class="code">                Optional parameter.</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Demo 1 - 預設選擇第一個【默認】</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<blockquote>
<p>Demo 2 - 預設選擇tabs</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<blockquote>
<p>Demo 3 - 沒有預設值</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<blockquote>
<p>Demo 4 - 自定義Tab名 + 只有icon + icon和Tab名</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一個Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字為第一個Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有圖標 沒有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸彈@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">第一個Tab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>炸彈</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字為第一個Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>只有圖標 沒有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h3 id="Button">Button</h3>
<blockquote>
<p>3.0以上適用</p>
</blockquote>
<p>使用方法：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btn [url],[text],[icon],[color] [style] [layout] [position] [size] %&#125;</span><br><span class="line"></span><br><span class="line">[url]         : 鏈接</span><br><span class="line">[text]        : 按鈕文字</span><br><span class="line">[icon]        : [可選] 圖標</span><br><span class="line">[color]       : [可選] 按鈕背景顔色(默認style時）</span><br><span class="line"><span class="code">                      按鈕字體和邊框顔色(outline時)</span></span><br><span class="line"><span class="code">                      default/blue/pink/red/purple/orange/green</span></span><br><span class="line"><span class="code">[style]       : [可選] 按鈕樣式 默認實心</span></span><br><span class="line"><span class="code">                      outline/留空</span></span><br><span class="line"><span class="code">[layout]      : [可選] 按鈕佈局 默認為line</span></span><br><span class="line"><span class="code">                      block/留空</span></span><br><span class="line"><span class="code">[position]    : [可選] 按鈕位置 前提是設置了layout為block 默認為左邊</span></span><br><span class="line"><span class="code">                      center/right/留空</span></span><br><span class="line"><span class="code">[size]        : [可選] 按鈕大小</span></span><br><span class="line"><span class="code">                      larger/留空</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,,outline %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br></pre></td></tr></table></figure>
<p>This is my website, click the button <a class="btn-beautify button--animated " href="https://butterfly.js.org/" 
  title="Butterfly"><span>Butterfly</span></a><br>
This is my website, click the button <a class="btn-beautify button--animated " href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><br>
This is my website, click the button <a class="btn-beautify button--animated outline" href="https://butterfly.js.org/" 
  title="Butterfly"><span>Butterfly</span></a><br>
This is my website, click the button <a class="btn-beautify button--animated outline" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a><br>
This is my website, click the button <a class="btn-beautify button--animated larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block center larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,block right outline larger %&#125;</span><br></pre></td></tr></table></figure>
<a class="btn-beautify button--animated block" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated block center larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated block right outline larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<p><strong>more than one button in center</strong></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,green larger %&#125;</span><br></pre></td></tr></table></figure>
<a class="btn-beautify button--animated larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated blue larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated pink larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated red larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated purple larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated orange larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated green larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-center&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org/&#x27;,Butterfly,far fa-hand-point-right,outline green larger %&#125;</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<div class="btn-center">
<a class="btn-beautify button--animated outline larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline blue larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline pink larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline red larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline purple larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline orange larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline green larger" href="https://butterfly.js.org/" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
</div>
<h3 id="inlineImg">inlineImg</h3>
<p>主題中的圖片都是默認以<code>塊級元素</code>顯示，如果你想以<code>內聯元素</code>顯示，可以使用這個標簽外掛。</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% inlineImg [src] [height] %&#125;</span><br><span class="line"></span><br><span class="line">[src]      :    圖片鏈接</span><br><span class="line">[height]   ：   圖片高度限制【可選】</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">你看我長得漂亮不</span><br><span class="line"></span><br><span class="line">![](https://i.loli.net/2021/03/19/2P6ivUGsdaEXSFI.png)</span><br><span class="line"></span><br><span class="line">我覺得很漂亮 &#123;% inlineImg https://i.loli.net/2021/03/19/5M4jUB3ynq7ePgw.png 150px %&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@m2/img/hexo-theme-butterfly-docs-inlineimg.png" alt="image-20210319001204045"></p>
<h3 id="label">label</h3>
<blockquote>
<p>3.7.5 及以上版本適用</p>
</blockquote>
<p>高亮所需的文字</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>參數</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>text</td>
<td>文字</td>
</tr>
<tr>
<td>color</td>
<td>【可選】背景顏色，默認為 <code>default</code><br />default/blue/pink/red/purple/orange/green</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;創業未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此誠&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈於內；&#123;% label 忠志之士 purple %&#125;，忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣；不宜妄自菲薄，引喻失義，以塞忠諫之路也。</span><br><span class="line">宮中、府中，俱為一體；陟罰臧否，不宜異同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及為忠善者，宜付有司，論其刑賞，以昭陛下平明之治；不宜偏私，使內外異法也。</span><br></pre></td></tr></table></figure>
<p>臣亮言：<mark class="hl-label default">先帝</mark> 創業未半，而<mark class="hl-label blue">中道崩殂</mark> 。今天下三分，<mark class="hl-label pink">益州疲敝</mark> ，此誠<mark class="hl-label red">危急存亡之秋</mark> 也！然侍衞之臣，不懈於內；<mark class="hl-label purple">忠志之士</mark> ，忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣；不宜妄自菲薄，引喻失義，以塞忠諫之路也。</p>
<p>宮中、府中，俱為一體；陟罰臧否，不宜異同。若有<mark class="hl-label orange">作奸</mark> 、<mark class="hl-label green">犯科</mark> ，及為忠善者，宜付有司，論其刑賞，以昭陛下平明之治；不宜偏私，使內外異法也。</p>
<a class="btn-beautify button--animated block red right larger" href="/posts/ceeb73f/" 
  title="⚔️ Butterfly-安裝文檔-四-主題配置-2"><i class="far fa-hand-point-right"></i><span>⚔️ Butterfly-安裝文檔-四-主題配置-2</span></a>]]></content>
      <categories>
        <category>Docs文檔</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 打賞</title>
    <url>/2020/05/28/%E6%96%87%E7%AB%A0Butterfly/Butterfly-%E6%89%93%E8%B3%9E/</url>
    <content><![CDATA[<div class="note orange icon flat"><i class="note-icon fas fa-mug-hot"></i><p>非常感謝以下網友的打賞</p>
<p>更新於 2021-08-23</p>
</div>
<div class="tabs" id="coffee"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#coffee-1"><i class="fab fa-weixin"></i>微信</button></li><li class="tab"><button type="button" data-href="#coffee-2"><i class="fab fa-alipay"></i>支付寶</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="coffee-1"><table>
<thead>
<tr>
<th>名字</th>
<th>金額</th>
</tr>
</thead>
<tbody>
<tr>
<td>B*X</td>
<td>2.33</td>
</tr>
<tr>
<td>A*.</td>
<td>0.01</td>
</tr>
<tr>
<td>*虎</td>
<td>3</td>
</tr>
<tr>
<td>*、</td>
<td>5</td>
</tr>
<tr>
<td>*林</td>
<td>3.75</td>
</tr>
<tr>
<td>*雪</td>
<td>10</td>
</tr>
<tr>
<td>O*r</td>
<td>15</td>
</tr>
<tr>
<td>*泥</td>
<td>0.01</td>
</tr>
<tr>
<td>*嗎</td>
<td>5</td>
</tr>
<tr>
<td>*鋒</td>
<td>10</td>
</tr>
<tr>
<td>*強</td>
<td>5</td>
</tr>
<tr>
<td>K*n</td>
<td>6.66</td>
</tr>
<tr>
<td>*1</td>
<td>2.22</td>
</tr>
<tr>
<td>圖*_</td>
<td>5</td>
</tr>
<tr>
<td>B*e</td>
<td>6.66</td>
</tr>
<tr>
<td>n*l</td>
<td>6.66</td>
</tr>
<tr>
<td>*仔</td>
<td>5</td>
</tr>
<tr>
<td>M*5</td>
<td>2</td>
</tr>
<tr>
<td>w*r</td>
<td>18.88</td>
</tr>
<tr>
<td>*龍</td>
<td>1.6</td>
</tr>
<tr>
<td>*一</td>
<td>5</td>
</tr>
<tr>
<td>*晨</td>
<td>6.66</td>
</tr>
<tr>
<td>*隨</td>
<td>8.88</td>
</tr>
<tr>
<td>*忘</td>
<td>10</td>
</tr>
<tr>
<td>*想</td>
<td>6.66</td>
</tr>
<tr>
<td>*喜</td>
<td>2.5</td>
</tr>
<tr>
<td>*喜</td>
<td>2.5</td>
</tr>
<tr>
<td>*傑</td>
<td>8.88</td>
</tr>
<tr>
<td>*雨</td>
<td>10</td>
</tr>
<tr>
<td>T*r</td>
<td>10</td>
</tr>
<tr>
<td>T*n</td>
<td>2.88</td>
</tr>
<tr>
<td>s*n</td>
<td>2</td>
</tr>
<tr>
<td>*o</td>
<td>9.99</td>
</tr>
<tr>
<td>m*o</td>
<td>2.5</td>
</tr>
<tr>
<td>張*i</td>
<td>0.3</td>
</tr>
<tr>
<td>*斌</td>
<td>2.88</td>
</tr>
<tr>
<td>q*n</td>
<td>20</td>
</tr>
<tr>
<td>*唯</td>
<td>8.88</td>
</tr>
<tr>
<td>H*n</td>
<td>5</td>
</tr>
<tr>
<td>I*U</td>
<td>3.65</td>
</tr>
<tr>
<td>*白</td>
<td>6</td>
</tr>
<tr>
<td>*猪</td>
<td>6.66</td>
</tr>
<tr>
<td>h*i</td>
<td>10</td>
</tr>
<tr>
<td>B*g</td>
<td>5</td>
</tr>
<tr>
<td>J*R</td>
<td>3</td>
</tr>
<tr>
<td>*夜</td>
<td>6.66</td>
</tr>
<tr>
<td>等*.</td>
<td>12.5</td>
</tr>
<tr>
<td>n*l</td>
<td>1.68</td>
</tr>
<tr>
<td>M*.</td>
<td>38</td>
</tr>
<tr>
<td>R*n</td>
<td>1.68</td>
</tr>
<tr>
<td>W*u</td>
<td>4.91</td>
</tr>
<tr>
<td>k*n</td>
<td>58.8</td>
</tr>
<tr>
<td>*呕</td>
<td>88.8</td>
</tr>
</tbody>
</table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="coffee-2"><table>
<thead>
<tr>
<th>名字</th>
<th>金額</th>
</tr>
</thead>
<tbody>
<tr>
<td>iMIGw0</td>
<td>10</td>
</tr>
<tr>
<td>百事可樂</td>
<td>10</td>
</tr>
<tr>
<td>KT</td>
<td>5</td>
</tr>
<tr>
<td>JVxie</td>
<td>8.88</td>
</tr>
<tr>
<td>Coolkk</td>
<td>10</td>
</tr>
<tr>
<td>Sirius</td>
<td>10</td>
</tr>
<tr>
<td>惴繞</td>
<td>1.11</td>
</tr>
<tr>
<td>Jiang慢慢</td>
<td>8.88</td>
</tr>
<tr>
<td>tjj</td>
<td>28.88</td>
</tr>
<tr>
<td>無風引漩</td>
<td>10</td>
</tr>
<tr>
<td>忘我楊</td>
<td>50</td>
</tr>
<tr>
<td>小虎</td>
<td>10</td>
</tr>
<tr>
<td>無殤雨露</td>
<td>10</td>
</tr>
<tr>
<td>Rhythm~</td>
<td>10</td>
</tr>
<tr>
<td>小樣</td>
<td>36</td>
</tr>
<tr>
<td>SunnyWS</td>
<td>20</td>
</tr>
<tr>
<td>ZFour</td>
<td>8.88</td>
</tr>
<tr>
<td>JeM_緘默</td>
<td>0.14</td>
</tr>
<tr>
<td>小張</td>
<td>5</td>
</tr>
<tr>
<td>書生</td>
<td>6.88</td>
</tr>
<tr>
<td>王青陽</td>
<td>5</td>
</tr>
<tr>
<td>趙碧寒</td>
<td>10</td>
</tr>
<tr>
<td>對好的就這樣</td>
<td>6</td>
</tr>
<tr>
<td>雨辰</td>
<td>5</td>
</tr>
</tbody>
</table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      <categories>
        <category>Thx</category>
      </categories>
      <tags>
        <tag>butterfly</tag>
        <tag>打賞</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly添加全局吸底Aplayer教程</title>
    <url>/2020/07/31/%E6%96%87%E7%AB%A0Butterfly/Butterfly%E6%B7%BB%E5%8A%A0Aplayer%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<div class="note info flat"><p>以下文章只是教程<br>
如果遇到使用問題，请仔细查看插件文档，或者到插件那裏反饋</p>
</div>
<h2 id="前言">前言</h2>
<p>如果你想使用aplayer，很多人都會推薦安裝<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>這款插件。這款插件通過Hexo獨有的標籤外掛，我們可以很方便的寫入一些參數，插件就會幫我們生成對應的html。如果你只是使用一些簡單的功能，其實無需使用到這個插件，只需以html格式書寫就行，不用插件去轉換。</p>
<p>例如：</p>
<p>如果使用插件，在markdown中要這樣寫</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% meting &quot;000PeZCQ1i4XVs&quot; &quot;tencent&quot; &quot;artist&quot; &quot;theme:#3F51B5&quot; &quot;mutex:true&quot; &quot;preload:auto&quot; %&#125;</span><br></pre></td></tr></table></figure>
<p>其會被插件渲染為</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;aplayer-uxAIfEUs&quot;</span> <span class="attr">class</span>=<span class="string">&quot;aplayer aplayer-tag-marker meting-tag-marker&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;000PeZCQ1i4XVs&quot;</span> <span class="attr">data-server</span>=<span class="string">&quot;tencent&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;artist&quot;</span> <span class="attr">data-mode</span>=<span class="string">&quot;circulation&quot;</span> <span class="attr">data-autoplay</span>=<span class="string">&quot;false&quot;</span> <span class="attr">data-mutex</span>=<span class="string">&quot;true&quot;</span> <span class="attr">data-listmaxheight</span>=<span class="string">&quot;340px&quot;</span> <span class="attr">data-preload</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">data-theme</span>=<span class="string">&quot;#3F51B5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果我們不想使用插件，就需要在markdown中用html的格式書寫，同時把主題配置文件中的<code>aplayerInject</code>開啟</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aplayer&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;000PeZCQ1i4XVs&quot;</span> <span class="attr">data-server</span>=<span class="string">&quot;tencent&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;artist&quot;</span> <span class="attr">data-mutex</span>=<span class="string">&quot;true&quot;</span> <span class="attr">data-preload</span>=<span class="string">&quot;auto&quot;</span> <span class="attr">data-theme</span>=<span class="string">&quot;#3F51B5&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>這樣我們就可以不用使用多一個插件，當然這種東西見仁見智，選自己喜歡的就行。</p>
<p>回到正題，這篇文章將教大家如何在Butterfly上使用全局吸底Aplayer</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-aplayer-xidi.gif" alt="aplayer"></p>
<h2 id="關閉-asset-inject">關閉 <code>asset_inject</code></h2>
<div class="note info flat"><p>此步驟適用於安裝了<code>hexo-tag-aplayer</code>插件的人</p>
</div>
<p>由於需要全局都插入aplayer和meting資源，為了防止插入重複的資源，需要把asset_inject設為<code>false</code></p>
<p>在Hexo的配置文件中</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="開啟主題的aplayerInject">開啟主題的<code>aplayerInject</code></h2>
<p>在主題的配置文件中，<code>enable</code>設為<code>true</code>和<code>per_page</code>設為<code>true</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Inject the css and script (aplayer/meting)</span></span><br><span class="line"><span class="attr">aplayerInject:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="插入Aplayer-html">插入Aplayer html</h2>
<p>為了適配hexo-tag-aplayer，主題內置的Meting js 仍為1.2版本，並非最新的2.x版本。</p>
<p>Aplayer html 例子：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aplayer no-destroy&quot;</span> <span class="attr">data-id</span>=<span class="string">&quot;000PeZCQ1i4XVs&quot;</span> <span class="attr">data-server</span>=<span class="string">&quot;tencent&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;artist&quot;</span> <span class="attr">data-fixed</span>=<span class="string">&quot;true&quot;</span> <span class="attr">data-mini</span>=<span class="string">&quot;true&quot;</span> <span class="attr">data-listFolded</span>=<span class="string">&quot;false&quot;</span> <span class="attr">data-order</span>=<span class="string">&quot;random&quot;</span> <span class="attr">data-preload</span>=<span class="string">&quot;none&quot;</span> <span class="attr">data-autoplay</span>=<span class="string">&quot;true&quot;</span> <span class="attr">muted</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>參數解釋</p>
<table>
<thead>
<tr>
<th>option</th>
<th>default</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data-id</td>
<td><strong>require</strong></td>
<td>song id / playlist id / album id / search keyword</td>
</tr>
<tr>
<td>data-server</td>
<td><strong>require</strong></td>
<td>music platform: <code>netease</code>, <code>tencent</code>, <code>kugou</code>, <code>xiami</code>, <code>baidu</code></td>
</tr>
<tr>
<td>data-type</td>
<td><strong>require</strong></td>
<td><code>song</code>, <code>playlist</code>, <code>album</code>, <code>search</code>, <code>artist</code></td>
</tr>
<tr>
<td>data-fixed</td>
<td><code>false</code></td>
<td>enable fixed mode</td>
</tr>
<tr>
<td>data-mini</td>
<td><code>false</code></td>
<td>enable mini mode</td>
</tr>
<tr>
<td>data-autoplay</td>
<td><code>false</code></td>
<td>audio autoplay</td>
</tr>
<tr>
<td>data-theme</td>
<td><code>#2980b9</code></td>
<td>main color</td>
</tr>
<tr>
<td>data-loop</td>
<td><code>all</code></td>
<td>player loop play, values: ‘all’, ‘one’, ‘none’</td>
</tr>
<tr>
<td>data-order</td>
<td><code>list</code></td>
<td>player play order, values: ‘list’, ‘random’</td>
</tr>
<tr>
<td>data-preload</td>
<td><code>auto</code></td>
<td>values: ‘none’, ‘metadata’, ‘auto’</td>
</tr>
<tr>
<td>data-volume</td>
<td><code>0.7</code></td>
<td>default volume, notice that player will remember user setting, default volume will not work after user set volume themselves</td>
</tr>
<tr>
<td>data-mutex</td>
<td><code>true</code></td>
<td>prevent to play multiple player at the same time, pause other players when this player start play</td>
</tr>
<tr>
<td>data-lrctype</td>
<td><code>0</code></td>
<td>lyric type</td>
</tr>
<tr>
<td>data-listfolded</td>
<td><code>false</code></td>
<td>indicate whether list should folded at first</td>
</tr>
<tr>
<td>data-listmaxheight</td>
<td><code>340px</code></td>
<td>list max height</td>
</tr>
<tr>
<td>data-storagename</td>
<td><code>metingjs</code></td>
<td>localStorage key that store player setting</td>
</tr>
</tbody>
</table>
<div class="note info flat"><p><code>require</code>代表着這些參數是必須要使用的，其它的參數則可以根據自己需要配置。</p>
<p>配置全局吸底，<code>data-fixed</code>和<code>data-mini</code>也必須配置，配置為<code>true</code></p>
<p>如果使用Pjax，則在class裏需添加<code>no-destroy</code>，這樣防止切換頁面時Aplayer被銷毀</p>
</div>
<p>把<code>aplayer代碼</code>插入到主題配置文件的<code>inject.bottom</code>去</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;div</span> <span class="string">class=&quot;aplayer</span> <span class="literal">no</span><span class="string">-destroy&quot;</span> <span class="string">data-id=&quot;000PeZCQ1i4XVs&quot;</span> <span class="string">data-server=&quot;tencent&quot;</span> <span class="string">data-type=&quot;artist&quot;</span> <span class="string">data-fixed=&quot;true&quot;</span> <span class="string">data-mini=&quot;true&quot;</span> <span class="string">data-listFolded=&quot;false&quot;</span> <span class="string">data-order=&quot;random&quot;</span> <span class="string">data-preload=&quot;none&quot;</span> <span class="string">data-autoplay=&quot;true&quot;</span> <span class="string">muted&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
<p>運行Hexo就可以看到網頁左下角出現了Aplayer</p>
<p>最後，如果你想切換頁面時，音樂不會中斷。請把主題配置文件的<code>pjax</code>設為<code>true</code></p>
<h2 id="UI-調整">UI 調整</h2>
<p>按照上面的步驟設置完成后，瀏覽器左下角會出現Aplayer。打開文章頁面時，你會發現打開Toc目錄的按鈕被遮擋了。我們需要修改CSS來改變按鈕的位置。<br>
位置怎麽移動根據自己需求決定，這裏列出2種方法。</p>
<h3 id="向上調整">向上調整</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#toggle-sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">80px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-add-aplayer-css-bottom.gif" alt="aplayer1"></p>
<p>在主題配置文件中，添加到<code>inject</code>去</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;&lt;style type=&quot;text/css&quot;&gt;#toggle-sidebar &#123;bottom: 80px&#125;&lt;/style&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="向右調整">向右調整</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#toggle-sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">100px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-add-aplayer-left.gif" alt="butterfly-add-aplayer-left"></p>
<p>在主題配置文件中，添加到<code>inject</code>去</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;&lt;style type=&quot;text/css&quot;&gt;#toggle-sidebar &#123;left:100px&#125;&lt;/style&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>進階教程</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
        <tag>Aplayer</tag>
      </tags>
  </entry>
  <entry>
    <title>Butterfly 美化/優化/魔改 教程合集</title>
    <url>/2021/01/02/%E6%96%87%E7%AB%A0Butterfly/butterfly-collection/</url>
    <content><![CDATA[<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>以下教程並未經過測試，如過遇到問題，請聯係相應的作者。不建議沒 DIY 經驗的使用者操作。</p>
</div>
<div class="note green icon flat"><i class="note-icon fab fa-octopus-deploy"></i><p>如果你想加入自己的文章到表格，你可以</p>
<ol>
<li>確保你的文章跟 Butterfly 主題有關</li>
<li>點擊這個<a href="https://github.com/jerryc127/butterfly.js.org/edit/main/source/_posts/butterfly-collection.md">鏈接</a></li>
<li>按要求新增 作者 + 文章連結 <code>| Jerry | [教程a](https://butterfly.js.org)</code></li>
<li>點擊下面的 <code>Commit changes</code> ，合併到 <a href="http://butterfly.js.org">butterfly.js.org</a> 倉庫</li>
</ol>
</div>
<hr>
<table>
<thead>
<tr>
<th style="text-align:center">作者</th>
<th style="text-align:center">連結</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Jerry</td>
<td style="text-align:center"><a href="https://butterfly.js.org/posts/ea33ab97/">自定義側邊欄</a></td>
</tr>
<tr>
<td style="text-align:center">小康</td>
<td style="text-align:center"><a href="https://www.antmoe.com/posts/a811d614/index.html">优雅魔改</a></td>
</tr>
<tr>
<td style="text-align:center">Lete 乐特</td>
<td style="text-align:center"><a href="https://butterfly.lete114.top/article/Butterfly-config.html">Butterfly主题美化-无修改源码 (持续更新中…)</a></td>
</tr>
<tr>
<td style="text-align:center">Akilar</td>
<td style="text-align:center"><a href="https://akilar.top/posts/7c16c4bb/">Hexo博客访问优化日记</a></td>
</tr>
<tr>
<td style="text-align:center">Akilar</td>
<td style="text-align:center"><a href="https://akilar.top/posts/f99b208/">基于Butterfly主题的美化日记</a></td>
</tr>
<tr>
<td style="text-align:center">Akilar</td>
<td style="text-align:center"><a href="https://akilar.top/posts/bbf68ad4/">平滑升级魔改后的Hexo主题</a></td>
</tr>
<tr>
<td style="text-align:center">小冰博客</td>
<td style="text-align:center"><a href="https://zfe.space/post/hexo-butterfly-orchid.html">小冰插件包 butterfly-orchid 1.0</a></td>
</tr>
<tr>
<td style="text-align:center">小嘉的部落格</td>
<td style="text-align:center"><a href="https://blog.imzjw.cn/posts/b74f504f/">关于我 Butterfly 主题的所有美化</a></td>
</tr>
<tr>
<td style="text-align:center">唐先森の博客</td>
<td style="text-align:center"><a href="https://ethant.top/articles/hexo541u/">Hexo+Butterfly主题美化</a></td>
</tr>
<tr>
<td style="text-align:center">guole’s Blog</td>
<td style="text-align:center"><a href="https://guole.fun/posts/butterfly-custom/">Butterfly美化日记/页面美化/插件美化/踩坑经历</a></td>
</tr>
<tr>
<td style="text-align:center">guole’s Blog</td>
<td style="text-align:center"><a href="https://guole.fun/posts/18158/">使用 Charts 插件给 Butterfly 增加统计图表</a></td>
</tr>
<tr>
<td style="text-align:center">guole’s Blog</td>
<td style="text-align:center"><a href="https://guole.fun/posts/41887/">使用 Hexo-tag-map 插件，给文章插入高德百度谷歌地图</a></td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>合集</category>
      </categories>
      <tags>
        <tag>Butterfly</tag>
        <tag>美化</tag>
        <tag>優化</tag>
        <tag>魔改</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo Built-in Tag Plugins (Hexo內置標籤外掛)</title>
    <url>/2020/05/12/%E6%96%87%E7%AB%A0Butterfly/Hexo-Built-in-Tag-Plugins/</url>
    <content><![CDATA[<p>Tag plugins are different from post tags. They are ported from Octopress and provide a useful way for you to quickly add specific content to your posts.</p>
<h2 id="Block-Quote">Block Quote</h2>
<p>Perfect for adding quotes to your post, with optional author, source and title information.</p>
<p><strong>Alias:</strong> quote</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Examples">Examples</h3>
<p><strong>No arguments. Plain blockquote.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.</p>
</blockquote>
<p><strong>Quote from a book</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote David Levithan, Wide Awake %&#125;</span><br><span class="line">Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.</p>
<footer><strong>David Levithan</strong><cite>Wide Awake</cite></footer></blockquote>
<p><strong>Quote from Twitter</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote @DevDocs https://twitter.com/devdocs/status/356095192085962752 %&#125;</span><br><span class="line">NEW: DevDocs now comes with syntax highlighting. http://devdocs.io</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>NEW: DevDocs now comes with syntax highlighting. <a href="http://devdocs.io">http://devdocs.io</a></p>
<footer><strong>@DevDocs</strong><cite><a href="https://twitter.com/devdocs/status/356095192085962752">twitter.com/devdocs/status/356095192085962752</a></cite></footer></blockquote>
<p><strong>Quote from an article on the web</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% blockquote Seth Godin http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html Welcome to Island Marketing %&#125;</span><br><span class="line">Every interaction is both precious and an opportunity to delight.</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote><p>Every interaction is both precious and an opportunity to delight.</p>
<footer><strong>Seth Godin</strong><cite><a href="http://sethgodin.typepad.com/seths_blog/2009/07/welcome-to-island-marketing.html">Welcome to Island Marketing</a></cite></footer></blockquote>
<h2 id="Code-Block">Code Block</h2>
<p>Useful feature for adding code snippets to your post.</p>
<p><strong>Alias:</strong> code</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock [title] [lang:language] [url] [link text] [additional options] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<p>Specify additional options in <code>option:value</code> format, e.g. <code>line_number:false first_line:5</code>.</p>
<table>
<thead>
<tr>
<th>Extra Options</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>line_number</code></td>
<td>Show line number</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>highlight</code></td>
<td>Enable code highlighting</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>first_line</code></td>
<td>Specify the first line number</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>mark</code></td>
<td>Line highlight specific line(s), each value separated by a comma. Specify number range using a dash<br>Example: <code>mark:1,4-7,10</code> will mark line 1, 4 to 7 and 10.</td>
<td></td>
</tr>
<tr>
<td><code>wrap</code></td>
<td>Wrap the code block in <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table"><code>&lt;table&gt;</code></a></td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<h3 id="Examples-2">Examples</h3>
<p><strong>A plain code block</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock %&#125;</span><br><span class="line">alert(&#x27;Hello World!&#x27;);</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alert(&#x27;Hello World!&#x27;);</span><br></pre></td></tr></table></figure>
<p><strong>Specifying the language</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock lang:objc %&#125;</span><br><span class="line">[rectangle setX: 10 y: 10 width: 20 height: 20];</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">[rectangle setX: <span class="number">10</span> y: <span class="number">10</span> width: <span class="number">20</span> height: <span class="number">20</span>];</span><br></pre></td></tr></table></figure>
<p><strong>Adding a caption to the code block</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock Array.map %&#125;</span><br><span class="line">array.map(callback[, thisArg])</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><figcaption><span>Array.map</span></figcaption><table><tr><td class="code"><pre><span class="line">array.map(callback[, thisArg])</span><br></pre></td></tr></table></figure>
<p><strong>Adding a caption and a URL</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock _.compact http://underscorejs.org/#compact Underscore.js %&#125;</span><br><span class="line">_.compact([0, 1, false, 2, &#x27;&#x27;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><figcaption><span>_.compact</span><a href="http://underscorejs.org/#compact">Underscore.js</a></figcaption><table><tr><td class="code"><pre><span class="line">_.compact([0, 1, false, 2, &#x27;&#x27;, 3]);</span><br><span class="line">=&gt; [1, 2, 3]</span><br></pre></td></tr></table></figure>
<h2 id="Backtick-Code-Block">Backtick Code Block</h2>
<p>This is identical to using a code block, but instead uses three backticks to delimit the block.</p>

&#96`` [language] [title] [url] [link text]
code snippet
&#96;``

<h2 id="Pull-Quote">Pull Quote</h2>
<p>To add pull quotes to your posts:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% pullquote [class] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Left">Left</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% pullquote left %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote class="pullquote left"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</blockquote>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas tempus molestie arcu, et fringilla mauris placerat ac. Nullam luctus bibendum risus. Ut cursus sed ipsum feugiat egestas. Suspendisse elementum, velit eu consequat consequat, augue lorem dapibus libero, eget pulvinar dolor est sit amet nulla. Suspendisse a porta tortor, et posuere mi. Pellentesque ultricies, mi quis volutpat malesuada, erat felis vulputate nisl, ac congue ante tortor ut ante. Proin aliquam sem vel mauris tincidunt, eget scelerisque tortor euismod. Nulla tincidunt enim nec commodo dictum. Mauris id sapien et orci gravida luctus id ut dui. In vel vulputate odio. Duis vel turpis molestie, scelerisque enim eu, lobortis eros. Cras at ipsum gravida, sagittis ante vel, viverra tellus. Nunc mauris turpis, elementum ullamcorper nisl pretium, ultrices cursus justo. Mauris porttitor commodo eros, ac ornare orci interdum in. Cras fermentum cursus leo sed mattis. In dignissim lorem sem, sit amet elementum mauris venenatis ac.</p>
<h3 id="Right">Right</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% pullquote right %&#125;</span><br><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span><br><span class="line">&#123;% endpullquote %&#125;</span><br></pre></td></tr></table></figure>
<blockquote class="pullquote right"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
</blockquote>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ligula justo, lobortis sit amet semper vel, dignissim sit amet libero. Praesent ac tempus ligula. Maecenas at gravida odio. Etiam tristique volutpat lacus eu faucibus. Donec non tempus arcu. Phasellus adipiscing, mauris nec mollis egestas, ipsum nunc auctor velit, et rhoncus lorem ipsum at ante. Praesent et sem in velit volutpat auctor. Duis vel mauris nulla. Maecenas mattis interdum ante, quis sagittis nibh cursus et. Nulla facilisi. Morbi convallis gravida tortor, ut fermentum enim gravida et. Nunc vel dictum nisl, non ultrices libero. Proin vestibulum felis eget orci consectetur lobortis. Vestibulum augue nulla, iaculis vitae augue vehicula, dignissim ultrices libero. Sed imperdiet urna et quam ultrices tincidunt nec ac magna. Etiam vel pharetra elit.</p>
<h2 id="jsFiddle">jsFiddle</h2>
<p>To embed a jsFiddle snippet:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% jsfiddle shorttag [tabs] [skin] [width] [height] %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% jsfiddle ccWP7 %&#125;</span><br></pre></td></tr></table></figure>
<iframe scrolling="no" width="100%" height="300" src="https://jsfiddle.net/ccWP7/embedded/js,resources,html,css,result/light" frameborder="0" loading="lazy" allowfullscreen></iframe>
<h2 id="Gist">Gist</h2>
<p>To embed a Gist snippet:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% gist gist_id [filename] %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% gist 996818 %&#125;</span><br></pre></td></tr></table></figure>
<script src="//gist.github.com/996818.js"></script>
<h2 id="iframe">iframe</h2>
<p>To embed an iframe:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% iframe url [width] [height] %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% iframe &#x27;https://butterfly.js.org/&#x27; 100% 300px %&#125;</span><br></pre></td></tr></table></figure>
<iframe src="https://butterfly.js.org/" width="100%" height="300px" frameborder="0" loading="lazy" allowfullscreen></iframe>
<h2 id="Image">Image</h2>
<p>Inserts an image with specified size.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% img [class names] /path/to/image [width] [height] &#x27;&quot;title text&quot; &quot;alt text&quot;&#x27; %&#125;</span><br></pre></td></tr></table></figure>
<img src="/img/avatar.png" class="test">
<h2 id="Link">Link</h2>
<p>Inserts a link with <code>target=&quot;_blank&quot;</code> attribute.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% link text url [external] [title] %&#125;</span><br></pre></td></tr></table></figure>
<a href="https://butterfly.js.org/" title="" target="">Docs</a>
<h2 id="Include-Code">Include Code</h2>
<p>Inserts code snippets in <code>source/downloads/code</code> folder. The folder location can be specified through the <code>code_dir</code> option in the config.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% include_code [title] [lang:language] [from:line] [to:line] path/to/file %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Examples-3">Examples</h3>
<p><strong>Embed the whole content of test.js</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript test.js %&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Embed line 3 only</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:3 to:3 test.js %&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Embed line 5 to 8</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:5 to:8 test.js %&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Embed line 5 to the end of file</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript from:5 test.js %&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Embed line 1 to 8</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% include_code lang:javascript to:8 test.js %&#125;</span><br></pre></td></tr></table></figure>
<h2 id="YouTube">YouTube</h2>
<p>Inserts a YouTube video.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% youtube video_id %&#125;</span><br></pre></td></tr></table></figure>
<div class="video-container"><iframe src="https://www.youtube.com/embed/iDjQSdN_ig8" frameborder="0" loading="lazy" allowfullscreen></iframe></div>
<h2 id="Vimeo">Vimeo</h2>
<p>Inserts a responsive or specified size Vimeo video.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% vimeo video_id [width] [height] %&#125;</span><br></pre></td></tr></table></figure>
<div class="video-container"><iframe src="https://player.vimeo.com/video/124876737" frameborder="0" loading="lazy" allowfullscreen></iframe></div>
<h2 id="Include-Posts">Include Posts</h2>
<p>Include links to other posts.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% post_path filename %&#125;</span><br><span class="line">&#123;% post_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure>
<p>You can ignore permalink and folder information, like languages and dates, when using this tag.</p>
<p>For instance: <code>{% post_link how-to-bake-a-cake %}</code>.</p>
<p>This will work as long as the filename of the post is <code>how-to-bake-a-cake.md</code>, even if the post is located at <code>source/posts/2015-02-my-family-holiday</code> and has permalink <code>2018/en/how-to-bake-a-cake</code>.</p>
<p>You can customize the text to display, instead of displaying the post’s title. Using <code>post_path</code> inside Markdown syntax <code>[]()</code> is not supported.</p>
<p>Post’s title and custom text are escaped by default. You can use the <code>escape</code> option to disable escaping.</p>
<p>For instance:</p>
<p><strong>Display title of the post.</strong></p>
<p><code>{% post_link 標籤外掛-Tag-Plugins %}</code></p>
<a href="#">Post not found: 標籤外掛-Tag-Plugins</a>
<p><strong>Display custom text.</strong></p>
<p><code>{% post_link 標籤外掛-Tag-Plugins 'Link to a post' %}</code></p>
<a href="#">Post not found: 標籤外掛-Tag-Plugins Link to a post</a>
<p><strong>Escape title.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% post_link 標籤外掛-Tag-Plugins &#x27;How to use &lt;b&gt; tag in title&#x27; %&#125;</span><br></pre></td></tr></table></figure>
<a href="#">Post not found: 標籤外掛-Tag-Plugins How to use <b> tag in title</a>
<p><strong>Do not escape title.</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% post_link 標籤外掛-Tag-Plugins &#x27;&lt;b&gt;bold&lt;/b&gt; custom title&#x27; false %&#125;</span><br></pre></td></tr></table></figure>
<a href="#">Post not found: 標籤外掛-Tag-Plugins <b>bold</b> custom title false</a>
<h2 id="Include-Assets">Include Assets</h2>
<p>Include post assets.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% asset_path filename %&#125;</span><br><span class="line">&#123;% asset_img filename [title] %&#125;</span><br><span class="line">&#123;% asset_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Raw">Raw</h2>
<p>If certain content is causing processing issues in your posts, wrap it with the <code>raw</code> tag to avoid rendering errors.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Demo</category>
      </categories>
      <tags>
        <tag>標籤外掛</tag>
      </tags>
  </entry>
  <entry>
    <title>Code Highlight Style test</title>
    <url>/2019/07/25/%E6%96%87%E7%AB%A0Butterfly/code-highlight/</url>
    <content><![CDATA[<p>Make sure all the code blocks highlighted correctly. All the code samples are come from the demo of <a href="https://highlightjs.org">https://highlightjs.org</a></p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#x27;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</span><br></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">enum</span> <span class="title">State</span></span> &#123;</span><br><span class="line">    Start,</span><br><span class="line">    Transient,</span><br><span class="line">    Closed,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="built_in">From</span>&lt;&amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span>&gt; <span class="keyword">for</span> State &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">from</span></span>(s: &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span>) -&gt; <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">match</span> s &#123;</span><br><span class="line">            <span class="string">&quot;start&quot;</span> =&gt; State::Start,</span><br><span class="line">            <span class="string">&quot;closed&quot;</span> =&gt; State::Closed,</span><br><span class="line">            _ =&gt; <span class="built_in">unreachable!</span>(),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;apples&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;count&quot;</span>: [<span class="number">12000</span>, <span class="number">20000</span>],</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: &#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;...&quot;</span>, <span class="attr">&quot;sensitive&quot;</span>: <span class="literal">false</span>&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;oranges&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;count&quot;</span>: [<span class="number">17500</span>, <span class="literal">null</span>],</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>: &#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;...&quot;</span>, <span class="attr">&quot;sensitive&quot;</span>: <span class="literal">false</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@requires_authorization</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">somefunc</span>(<span class="params">param1=<span class="string">&#x27;&#x27;</span>, param2=<span class="number">0</span></span>):</span></span><br><span class="line">    <span class="string">r&#x27;&#x27;&#x27;A docstring&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> param1 &gt; param2: <span class="comment"># interesting</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Gre\&#x27;ater&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> (param2 - param1 + <span class="number">1</span> + <span class="number">0b10l</span>) <span class="keyword">or</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">&#x27;&#x27;&#x27;interpreter</span></span><br><span class="line"><span class="string"><span class="meta">... </span>prompt&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"><span class="selector-tag">body</span> &#123;<span class="attribute">width</span>: <span class="number">500px</span>;&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;application/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">$init</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="literal">true</span>;&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">checked</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span> <span class="attr">id</span>=<span class="string">&#x27;title&#x27;</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- here goes the rest of the page --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">$initHighlight</span>(<span class="params">block, cls</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cls.search(<span class="regexp">/\bno\-highlight\b/</span>) != -<span class="number">1</span>)</span><br><span class="line">      <span class="keyword">return</span> process(block, <span class="literal">true</span>, <span class="number">0x0F</span>) +</span><br><span class="line">             <span class="string">` class=&quot;<span class="subst">$&#123;cls&#125;</span>&quot;`</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">/* handle exception */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span> / <span class="number">2</span>; i &lt; classes.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (checkCondition(classes[i]) === <span class="literal">undefined</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;undefined&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">web-component</span>&gt;</span>&#123;block&#125;<span class="tag">&lt;/<span class="name">web-component</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> $initHighlight;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* An annoying &quot;Hello World&quot; example */</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; <span class="number">0xFFFF</span>; i++)</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">char</span> c = <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">  unordered_map &lt;string, vector&lt;string&gt; &gt; m;</span><br><span class="line">  m[<span class="string">&quot;key&quot;</span>] = <span class="string">&quot;\\\\&quot;</span>; <span class="comment">// this is an error</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">-2e3</span> + <span class="number">12l</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &quot;topic&quot; (</span><br><span class="line">    &quot;id&quot; serial <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    &quot;forum_id&quot; <span class="type">integer</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    &quot;subject&quot; <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> &quot;topic&quot;</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> forum_id <span class="keyword">FOREIGN</span> KEY (&quot;forum_id&quot;)</span><br><span class="line"><span class="keyword">REFERENCES</span> &quot;forum&quot; (&quot;id&quot;);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Initials</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> &quot;topic&quot; (&quot;forum_id&quot;, &quot;subject&quot;)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">2</span>, <span class="string">&#x27;D&#x27;&#x27;artagnian&#x27;</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&quot;Dependency.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">WorldDataSource</span></span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line">- (<span class="built_in">NSString</span>*)worldName;</span><br><span class="line"><span class="keyword">@required</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)allowsToLive;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *title;</span><br><span class="line">- (<span class="keyword">IBAction</span>) show;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> John Smith &lt;john.smith@example.com&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> l2f.gameserver.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">L2Char</span> <span class="keyword">extends</span> <span class="title">L2Object</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Short ERROR = <span class="number">0x0001</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">moveTo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span> </span>&#123;</span><br><span class="line">    _ai = <span class="keyword">null</span>;</span><br><span class="line">    log(<span class="string">&quot;Should not be called&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">1</span> &gt; <span class="number">5</span>) &#123; <span class="comment">// wtf!?</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">@objc</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span>: <span class="title">Entity</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span>!</span><br><span class="line">  <span class="keyword">var</span> age:  <span class="type">Int</span>!</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>)</span> &#123;</span><br><span class="line">    <span class="comment">/* <span class="comment">/* ... */</span> */</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Return a descriptive string for this person</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">description</span>(<span class="params">offset</span>: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span>)</span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">\(name)</span> is <span class="subst">\(age <span class="operator">+</span> offset)</span> years old&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: Chunkfive; <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;Chunkfive.otf&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span>, <span class="selector-class">.usertext</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#F0F0F0</span>; <span class="attribute">background</span>: <span class="number">#600</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Chunkfive, sans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> url(print.css);</span><br><span class="line"><span class="keyword">@media</span> print &#123;</span><br><span class="line">  <span class="selector-tag">a</span><span class="selector-attr">[href^=http]</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(href)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># The Greeter class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeter</span></span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(name)</span></span></span><br><span class="line">    <span class="variable">@name</span> = name.capitalize</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">salute</span></span></span><br><span class="line">    puts <span class="string">&quot;Hello <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>!&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">g = Greeter.new(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">g.salute</span><br></pre></td></tr></table></figure>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Makefile</span></span><br><span class="line"></span><br><span class="line">BUILDDIR      = _build</span><br><span class="line">EXTRAS       ?= <span class="variable">$(BUILDDIR)</span>/extras</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="meta-keyword">.PHONY</span>: main clean</span></span><br><span class="line"></span><br><span class="line"><span class="section">main:</span></span><br><span class="line">	@echo <span class="string">&quot;Building main facility...&quot;</span></span><br><span class="line">	build_main <span class="variable">$(BUILDDIR)</span></span><br><span class="line"></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -rf <span class="variable">$(BUILDDIR)</span>/*</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">float64</span>)</span><br><span class="line">    ch &lt;- <span class="number">1.0e10</span>    <span class="comment">// magic number</span></span><br><span class="line">    x, ok := &lt;- ch</span><br><span class="line">    <span class="keyword">defer</span> fmt.Println(<span class="string">`exitting now\`</span>)</span><br><span class="line">    <span class="keyword">go</span> <span class="built_in">println</span>(<span class="built_in">len</span>(<span class="string">&quot;hello world!&quot;</span>))</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###### CONFIG</span></span><br><span class="line">ACCEPTED_HOSTS=<span class="string">&quot;/root/.hag_accepted.conf&quot;</span></span><br><span class="line">BE_VERBOSE=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$UID</span>&quot;</span> -ne 0 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Superuser rights required&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">genApacheConf</span></span>()&#123;</span><br><span class="line">  <span class="built_in">echo</span> -e <span class="string">&quot;# Host <span class="variable">$&#123;HOME_DIR&#125;</span><span class="variable">$1</span>/<span class="variable">$2</span> :&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment">; boilerplate</span></span><br><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;some_name&quot;</span></span><br><span class="line"><span class="attr">authors</span> = [<span class="string">&quot;Author&quot;</span>]</span><br><span class="line"><span class="attr">description</span> = <span class="string">&quot;This is \</span></span><br><span class="line"><span class="string">a description&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[lib]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="variable">$&#123;NAME&#125;</span></span><br><span class="line"><span class="attr">default</span> = <span class="literal">True</span></span><br><span class="line"><span class="attr">auto</span> = <span class="literal">no</span></span><br><span class="line"><span class="attr">counter</span> = <span class="number">1_000</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Demo</category>
      </categories>
      <tags>
        <tag>highlight</tag>
      </tags>
  </entry>
  <entry>
    <title>no cover</title>
    <url>/2020/03/10/%E6%96%87%E7%AB%A0Butterfly/no-cover/</url>
    <content><![CDATA[<p>This post no cover</p>
]]></content>
      <categories>
        <category>Demo</category>
      </categories>
      <tags>
        <tag>demo</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown Style test</title>
    <url>/2018/07/24/%E6%96%87%E7%AB%A0Butterfly/markdown/</url>
    <content><![CDATA[<p>This post is originated from <a href="https://gist.github.com/apackeer/4159268">here</a> and is used for testing markdown style. This post contains nearly every markdown usage. Make sure all the markdown elements below show up correctly.</p>
<span id="more"></span>
<hr>
<h2 id="Headers">Headers</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br><span class="line"></span><br><span class="line">Alternatively, for H1 and H2, an underline-ish style:</span><br><span class="line"></span><br><span class="line"><span class="section">Alt-H1</span></span><br><span class="line"><span class="section">======</span></span><br><span class="line"></span><br><span class="line"><span class="section">Alt-H2</span></span><br><span class="line"><span class="section">------</span></span><br></pre></td></tr></table></figure>
<h1>H1</h1>
<h2 id="H2">H2</h2>
<h3 id="H3">H3</h3>
<h4 id="H4">H4</h4>
<h5 id="H5">H5</h5>
<h6 id="H6">H6</h6>
<p>Alternatively, for H1 and H2, an underline-ish style:</p>
<h1>Alt-H1</h1>
<h2 id="Alt-H2">Alt-H2</h2>
<h2 id="Emphasis">Emphasis</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Emphasis, aka italics, with <span class="emphasis">*asterisks*</span> or <span class="emphasis">_underscores_</span>.</span><br><span class="line"></span><br><span class="line">Strong emphasis, aka bold, with <span class="strong">**asterisks**</span> or <span class="strong">__underscores__</span>.</span><br><span class="line"></span><br><span class="line">Combined emphasis with <span class="strong">**asterisks and <span class="emphasis">_underscores_</span>**</span>.</span><br><span class="line"></span><br><span class="line">Strikethrough uses two tildes. ~~Scratch this.~~</span><br></pre></td></tr></table></figure>
<p>Emphasis, aka italics, with <em>asterisks</em> or <em>underscores</em>.</p>
<p>Strong emphasis, aka bold, with <strong>asterisks</strong> or <strong>underscores</strong>.</p>
<p>Combined emphasis with <strong>asterisks and <em>underscores</em></strong>.</p>
<p>Strikethrough uses two tildes. <s>Scratch this.</s></p>
<h2 id="Lists">Lists</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">1.</span> First ordered list item</span><br><span class="line"><span class="bullet">2.</span> Another item</span><br><span class="line"><span class="bullet">  *</span> Unordered sub-list.</span><br><span class="line"><span class="bullet">1.</span> Actual numbers don&#x27;t matter, just that it&#x27;s a number</span><br><span class="line"><span class="bullet">  1.</span> Ordered sub-list</span><br><span class="line"><span class="bullet">4.</span> And another item.</span><br><span class="line"></span><br><span class="line">   You can have properly indented paragraphs within list items. Notice the blank line above, and the leading spaces (at least one, but we&#x27;ll use three here to also align the raw Markdown).</span><br><span class="line"></span><br><span class="line">   To have a line break without a paragraph, you will need to use two trailing spaces.  </span><br><span class="line">   Note that this line is separate, but within the same paragraph.  </span><br><span class="line">   (This is contrary to the typical GFM line break behaviour, where trailing spaces are not required.)</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> Unordered list can use asterisks</span><br><span class="line"><span class="bullet">-</span> Or minuses</span><br><span class="line"><span class="bullet">+</span> Or pluses</span><br><span class="line"><span class="bullet">-</span> Paragraph In unordered list</span><br><span class="line"></span><br><span class="line">  For example like this.</span><br><span class="line"></span><br><span class="line">Common Paragraph with some text.</span><br><span class="line">And more text.</span><br></pre></td></tr></table></figure>
<ol>
<li>First ordered list item</li>
<li>Another item</li>
</ol>
<ul>
<li>Unordered sub-list.</li>
</ul>
<ol>
<li>
<p>Actual numbers don’t matter, just that it’s a number</p>
</li>
<li>
<p>Ordered sub-list</p>
</li>
<li>
<p>And another item.</p>
<p>You can have properly indented paragraphs within list items. Notice the blank line above, and the leading spaces (at least one, but we’ll use three here to also align the raw Markdown).</p>
<p>To have a line break without a paragraph, you will need to use two trailing spaces.<br>
Note that this line is separate, but within the same paragraph.<br>
(This is contrary to the typical GFM line break behaviour, where trailing spaces are not required.)</p>
</li>
</ol>
<ul>
<li>Unordered list can use asterisks</li>
</ul>
<ul>
<li>Or minuses</li>
</ul>
<ul>
<li>Or pluses</li>
</ul>
<ul>
<li>
<p>Paragraph In unordered list</p>
<p>For example like this.</p>
</li>
</ul>
<p>Common Paragraph with some text.<br>
And more text.</p>
<h2 id="Inline-HTML">Inline HTML</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span>To reboot your computer, press <span class="xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>ctrl<span class="xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>alt<span class="xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>del<span class="xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>.<span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>To reboot your computer, press <kbd>ctrl</kbd>+<kbd>alt</kbd>+<kbd>del</kbd>.</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;dt&gt;Definition list&lt;/dt&gt;</span></span><br><span class="line"><span class="code">    &lt;dd&gt;Is something people use sometimes.&lt;/dd&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line"><span class="code">    &lt;dt&gt;Markdown in HTML&lt;/dt&gt;</span></span><br><span class="line"><span class="code">    &lt;dd&gt;Does *not* work **very** well. Use HTML &lt;em&gt;tags&lt;/em&gt;.&lt;/dd&gt;</span></span><br><span class="line"><span class="code">&lt;/dl&gt;</span></span><br></pre></td></tr></table></figure>
<dl>
    <dt>Definition list</dt>
    <dd>Is something people use sometimes.</dd>
<pre><code>&lt;dt&gt;Markdown in HTML&lt;/dt&gt;
&lt;dd&gt;Does *not* work **very** well. Use HTML &lt;em&gt;tags&lt;/em&gt;.&lt;/dd&gt;
</code></pre>
</dl>
<h2 id="Links">Links</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="string">I&#x27;m an inline-style link</span>](<span class="link">https://www.google.com</span>)</span><br><span class="line"></span><br><span class="line">[<span class="string">I&#x27;m an inline-style link with title</span>](<span class="link">https://www.google.com &quot;Google&#x27;s Homepage&quot;</span>)</span><br><span class="line"></span><br><span class="line">[<span class="string">I&#x27;m a reference-style link</span>][<span class="symbol">Arbitrary case-insensitive reference text</span>]</span><br><span class="line"></span><br><span class="line">[<span class="string">I&#x27;m a relative reference to a repository file</span>](<span class="link">../blob/master/LICENSE</span>)</span><br><span class="line"></span><br><span class="line">[<span class="string">You can use numbers for reference-style link definitions</span>][<span class="symbol">1</span>]</span><br><span class="line"></span><br><span class="line">Or leave it empty and use the [link text itself]</span><br><span class="line"></span><br><span class="line">Some text to show that the reference links can follow later.</span><br><span class="line"></span><br><span class="line">[<span class="symbol">arbitrary case-insensitive reference text</span>]: <span class="link">https://hexo.io</span></span><br><span class="line">[<span class="symbol">1</span>]: <span class="link">https://hexo.io/docs/</span></span><br><span class="line">[<span class="symbol">link text itself</span>]: <span class="link">https://hexo.io/api/</span></span><br></pre></td></tr></table></figure>
<p><a href="https://www.google.com">I’m an inline-style link</a></p>
<p><a href="https://www.google.com" title="Google's Homepage">I’m an inline-style link with title</a></p>
<p><a href="https://hexo.io">I’m a reference-style link</a></p>
<p><a href="../blob/master/LICENSE">I’m a relative reference to a repository file</a></p>
<p><a href="https://hexo.io/docs/">You can use numbers for reference-style link definitions</a></p>
<p>Or leave it empty and use the <a href="https://hexo.io/api/">link text itself</a></p>
<p>Some text to show that the reference links can follow later.</p>
<h2 id="Images">Images</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">hover to see the title text:</span><br><span class="line"></span><br><span class="line">Inline-style:</span><br><span class="line"></span><br><span class="line">![<span class="string">alt text</span>](<span class="link">https://hexo.io/icon/favicon-196x196.png &quot;Logo Title Text 1&quot;</span>)</span><br><span class="line"></span><br><span class="line">Reference-style:</span><br><span class="line">![<span class="string">alt text</span>][<span class="symbol">logo</span>]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">logo</span>]: <span class="link">https://hexo.io/icon/favicon-196x196.png &quot;Logo Title Text 2&quot;</span></span><br></pre></td></tr></table></figure>
<p>hover to see the title text:</p>
<p>Inline-style:</p>
<p><img src="https://hexo.io/icon/favicon-196x196.png" alt="alt text" title="Logo Title Text 1"></p>
<p>Reference-style:<br>
<img src="https://hexo.io/icon/favicon-196x196.png" alt="alt text" title="Logo Title Text 2"></p>
<h2 id="Code-and-Syntax-Highlighting">Code and Syntax Highlighting</h2>
<p>Inline <code>code</code> has <code>back-ticks around</code> it.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">&quot;JavaScript syntax highlighting&quot;</span>;</span><br><span class="line">alert(s);</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;Python syntax highlighting&quot;</span></span><br><span class="line"><span class="built_in">print</span> s</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">No language indicated, so no syntax highlighting.</span><br><span class="line">But let&#x27;s throw in a &lt;b&gt;tag&lt;/b&gt;.</span><br></pre></td></tr></table></figure>
<h2 id="Tables">Tables</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">|                |ASCII                          |HTML                         |</span><br><span class="line">|----------------|-------------------------------|-----------------------------|</span><br><span class="line">|Single backticks|<span class="code">`&#x27;Isn&#x27;t this fun?&#x27;`</span>            |&#x27;Isn&#x27;t this fun?&#x27;            |</span><br><span class="line">|Quotes          |<span class="code">`&quot;Isn&#x27;t this fun?&quot;`</span>            |&quot;Isn&#x27;t this fun?&quot;            |</span><br><span class="line">|Dashes          |<span class="code">`-- is en-dash, --- is em-dash`</span>|-- is en-dash, --- is em-dash|</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>ASCII</th>
<th>HTML</th>
</tr>
</thead>
<tbody>
<tr>
<td>Single backticks</td>
<td><code>'Isn't this fun?'</code></td>
<td>‘Isn’t this fun?’</td>
</tr>
<tr>
<td>Quotes</td>
<td><code>&quot;Isn't this fun?&quot;</code></td>
<td>“Isn’t this fun?”</td>
</tr>
<tr>
<td>Dashes</td>
<td><code>-- is en-dash, --- is em-dash</code></td>
<td>– is en-dash, — is em-dash</td>
</tr>
</tbody>
</table>
<p>Colons can be used to align columns.</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">| Tables        | Are           | Cool  |</span><br><span class="line">| ------------- |:-------------:| -----:|</span><br><span class="line">| col 3 is      | right-aligned |  |</span><br><span class="line">| col 2 is      | centered      |    |</span><br><span class="line">| zebra stripes | are neat      |   </span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">Are</th>
<th style="text-align:right">Cool</th>
</tr>
</thead>
<tbody>
<tr>
<td>col 3 is</td>
<td style="text-align:center">right-aligned</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>col 2 is</td>
<td style="text-align:center">centered</td>
<td style="text-align:right"></td>
</tr>
<tr>
<td>zebra stripes</td>
<td style="text-align:center">are neat</td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>
<p>The outer pipes (|) are optional, and you don’t need to make the raw Markdown line up prettily. You can also use inline Markdown.</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Markdown | Less | Pretty</span><br><span class="line">--- | --- | ---</span><br><span class="line"><span class="emphasis">*Still*</span> | <span class="code">`renders`</span> | <span class="strong">**nicely**</span></span><br><span class="line">1 | 2 | 3</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Markdown</th>
<th>Less</th>
<th>Pretty</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>Still</em></td>
<td><code>renders</code></td>
<td><strong>nicely</strong></td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
</tbody>
</table>
<blockquote>
<p>You can find more information about <strong>LaTeX</strong> mathematical expressions <a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">here</a>.</p>
</blockquote>
<h2 id="Blockquotes">Blockquotes</h2>
<blockquote>
<p>Blockquotes are very handy in email to emulate reply text.<br>
This line is part of the same quote.</p>
</blockquote>
<p>Quote break.</p>
<blockquote>
<p>This is a very long line that will still be quoted properly when it wraps. Oh boy let’s keep writing to make sure this is long enough to actually wrap for everyone. Oh, you can <em>put</em> <strong>Markdown</strong> into a blockquote.</p>
</blockquote>
<h2 id="Horizontal-Rule">Horizontal Rule</h2>
<p>Three or more…</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line"></span><br><span class="line">Hyphens</span><br><span class="line"></span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong">Asterisks</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"><span class="strong">__<span class="emphasis">_</span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"><span class="emphasis"><span class="strong"></span></span></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"><span class="emphasis"><span class="strong">Underscores</span></span></span></span></span><br></pre></td></tr></table></figure>
<hr>
<p>Hyphens</p>
<hr>
<p>Asterisks</p>
<hr>
<p>Underscores</p>
<h2 id="Line-Breaks">Line Breaks</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Here&#x27;s a line for us to start with.</span><br><span class="line"></span><br><span class="line">This line is separated from the one above by two newlines, so it will be a <span class="emphasis">*separate paragraph*</span>.</span><br><span class="line"></span><br><span class="line">This line is also a separate paragraph, but...</span><br><span class="line">This line is only separated by a single newline, so it&#x27;s a separate line in the <span class="emphasis">*same paragraph*</span>.</span><br></pre></td></tr></table></figure>
<p>Here’s a line for us to start with.</p>
<p>This line is separated from the one above by two newlines, so it will be a <em>separate paragraph</em>.</p>
<p>This line is also a separate paragraph, but…<br>
This line is only separated by a single newline, so it’s a separate line in the <em>same paragraph</em>.</p>
<hr>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">This is a regular paragraph.</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="code">    &lt;tr&gt;</span></span><br><span class="line"><span class="code">        &lt;td&gt;Foo&lt;/td&gt;</span></span><br><span class="line"><span class="code">    &lt;/tr&gt;</span></span><br><span class="line"><span class="code">&lt;/table&gt;</span></span><br><span class="line"><span class="code"></span></span><br><span class="line">This is another regular paragraph.</span><br></pre></td></tr></table></figure>
<p>This is a regular paragraph.</p>
<table>
    <tr>
        <td>Foo</td>
    </tr>
</table>
<p>This is another regular paragraph.</p>
<h2 id="Youtube-videos">Youtube videos</h2>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.youtube.com/watch?feature=player_embedded&amp;v=ARted4RniaU</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="xml">&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img.youtube.com/vi/ARted4RniaU/0.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">alt</span>=<span class="string">&quot;IMAGE ALT TEXT HERE&quot;</span> <span class="attr">width</span>=<span class="string">&quot;240&quot;</span> <span class="attr">height</span>=<span class="string">&quot;180&quot;</span> <span class="attr">border</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">Pure markdown version:</span><br><span class="line"></span><br><span class="line">[<span class="string">![IMAGE ALT TEXT HERE</span>](<span class="link">https://img.youtube.com/vi/ARted4RniaU/0.jpg</span>)](<span class="link">https://www.youtube.com/watch?v=ARted4RniaU</span>)</span><br></pre></td></tr></table></figure>
<p><a href="https://www.youtube.com/watch?feature=player_embedded&v=ARted4RniaU
" target="_blank"><img src="https://img.youtube.com/vi/ARted4RniaU/0.jpg"
alt="IMAGE ALT TEXT HERE" width="240" height="180" border="10" /></a></p>
<p>Pure markdown version:</p>
<p><a href="https://www.youtube.com/watch?v=ARted4RniaU"><img src="https://img.youtube.com/vi/ARted4RniaU/0.jpg" alt="IMAGE ALT TEXT HERE"></a></p>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>highlight</tag>
        <tag>Bar</tag>
      </tags>
  </entry>
  <entry>
    <title>當設置 top_img 為 false 時</title>
    <url>/2020/10/28/%E6%96%87%E7%AB%A0Butterfly/when-set-the-top-img-to-false/</url>
    <content><![CDATA[<p>當設置 top_img 為 false 時，不顯示頂部圖</p>
]]></content>
      <categories>
        <category>Demo</category>
      </categories>
      <tags>
        <tag>butterfly</tag>
        <tag>top_img</tag>
      </tags>
  </entry>
  <entry>
    <title>自定義代碼配色</title>
    <url>/2020/06/13/%E6%96%87%E7%AB%A0Butterfly/%E8%87%AA%E5%AE%9A%E7%BE%A9%E4%BB%A3%E7%A2%BC%E9%85%8D%E8%89%B2/</url>
    <content><![CDATA[<p>在<a href="http://butterfly.js.org/posts/4aa8abbe/#%E4%BB%A3%E7%A2%BC%E9%AB%98%E4%BA%AE%E4%B8%BB%E9%A1%8C">Butterfly-安裝文檔-三-主題配置</a>中已經介紹瞭如何使用自定義代碼配色。</p>
<p>這篇文章是使用自定義代碼配色的實例教程。</p>
<h2 id="Highlight">Highlight</h2>
<p>以使用<code>Kimbie dark</code>主題配色為例子</p>
<h3 id="配置hljs為true">配置<code>hljs</code>為<code>true</code></h3>
<p>修改Hexo根目錄下的<code>_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line"> <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line"> <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line"> <span class="attr">tab_replace:</span></span><br><span class="line"> <span class="attr">hljs:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="配置highlight-theme為false">配置<code>highlight_theme</code>為<code>false</code></h3>
<p>修改<code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="下載和修改CSS文件">下載和修改CSS文件</h3>
<p>在<a href="https://github.com/highlightjs/highlight.js/blob/master/src/styles/kimbie.dark.css">Github</a>上找到這個CSS</p>
<p>在Hexo的根目錄<code>source</code>文件夾下創立一個<code>self</code>文件夾，在<code>self</code>文件夾創建一個<code>Kimbiedark.css</code>文件</p>
<p>把Github上<code>Kimbie dark</code>的CSS代碼複製到<code>Kimbiedark.css</code>去。（你也可以直接從Github上下載這個CSS）</p>
<p><strong>Kimbiedark.css</strong>代碼如下</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Name:     Kimbie (dark)</span></span><br><span class="line"><span class="comment">    Author:   Jan T. Sott</span></span><br><span class="line"><span class="comment">    License:  Creative Commons Attribution-ShareAlike 4.0 Unported License</span></span><br><span class="line"><span class="comment">    URL:      https://github.com/idleberg/Kimbie-highlight.js</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Comment */</span></span><br><span class="line"><span class="selector-class">.hljs-comment</span>,</span><br><span class="line"><span class="selector-class">.hljs-quote</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d6baad</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Red */</span></span><br><span class="line"><span class="selector-class">.hljs-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-template-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-id</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-class</span>,</span><br><span class="line"><span class="selector-class">.hljs-regexp</span>,</span><br><span class="line"><span class="selector-class">.hljs-meta</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#dc3958</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Orange */</span></span><br><span class="line"><span class="selector-class">.hljs-number</span>,</span><br><span class="line"><span class="selector-class">.hljs-built_in</span>,</span><br><span class="line"><span class="selector-class">.hljs-builtin-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-literal</span>,</span><br><span class="line"><span class="selector-class">.hljs-type</span>,</span><br><span class="line"><span class="selector-class">.hljs-params</span>,</span><br><span class="line"><span class="selector-class">.hljs-deletion</span>,</span><br><span class="line"><span class="selector-class">.hljs-link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f79a32</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Yellow */</span></span><br><span class="line"><span class="selector-class">.hljs-title</span>,</span><br><span class="line"><span class="selector-class">.hljs-section</span>,</span><br><span class="line"><span class="selector-class">.hljs-attribute</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f06431</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Green */</span></span><br><span class="line"><span class="selector-class">.hljs-string</span>,</span><br><span class="line"><span class="selector-class">.hljs-symbol</span>,</span><br><span class="line"><span class="selector-class">.hljs-bullet</span>,</span><br><span class="line"><span class="selector-class">.hljs-addition</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#889b4a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Purple */</span></span><br><span class="line"><span class="selector-class">.hljs-keyword</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-function</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#98676a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">overflow-x</span>: auto;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#221a0f</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d3af86</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-emphasis</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-strong</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改這個CSS文件為</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Name:     Kimbie (dark)</span></span><br><span class="line"><span class="comment">    Author:   Jan T. Sott</span></span><br><span class="line"><span class="comment">    License:  Creative Commons Attribution-ShareAlike 4.0 Unported License</span></span><br><span class="line"><span class="comment">    URL:      https://github.com/idleberg/Kimbie-highlight.js</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 新添加的內容</span></span><br><span class="line"><span class="comment">  ------------------------------------- </span></span><br><span class="line"><span class="comment">  --hl-color                  代碼框字體顔色 【必須】 (把下面.hljs的 color複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hl-bg                     代碼框背景色 【必須】 (把下面.hljs的 background複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hltools-bg: #321a0f       代碼框頂部工具欄背景色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hltools-color: #fff       代碼框頂部工具欄字體顔色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hlnumber-bg: #221a0f      代碼框行數背景色 【可選】(如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlnumber-color: #fff      代碼框行數字體顔色 【可選】 (如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlscrollbar-bg: #d3af86   代碼框滾動條顔色 【可選】（默認為主題主顔色）</span></span><br><span class="line"><span class="comment">  --hlexpand-bg: #d3af86      代碼框底部展開背景色 【可選】(如果已經關掉 highlight_height_limit,可以不用配置這個)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  --hl-<span class="attribute">color</span>: <span class="number">#d3af86</span>;</span><br><span class="line">  --hl-bg: <span class="number">#221a0f</span>;</span><br><span class="line">  --hltools-bg: <span class="number">#321a0f</span>;</span><br><span class="line">  --hltools-<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  --hlnumber-bg: <span class="number">#221a0f</span>;</span><br><span class="line">  --hlnumber-<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  --hlscrollbar-bg: <span class="number">#d3af86</span>;</span><br><span class="line">  --hlexpand-bg: <span class="number">#d3af86</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Comment */</span></span><br><span class="line"><span class="selector-class">.hljs-comment</span>,</span><br><span class="line"><span class="selector-class">.hljs-quote</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d6baad</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Red */</span></span><br><span class="line"><span class="selector-class">.hljs-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-template-variable</span>,</span><br><span class="line"><span class="selector-class">.hljs-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-id</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-class</span>,</span><br><span class="line"><span class="selector-class">.hljs-regexp</span>,</span><br><span class="line"><span class="selector-class">.hljs-meta</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#dc3958</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Orange */</span></span><br><span class="line"><span class="selector-class">.hljs-number</span>,</span><br><span class="line"><span class="selector-class">.hljs-built_in</span>,</span><br><span class="line"><span class="selector-class">.hljs-builtin-name</span>,</span><br><span class="line"><span class="selector-class">.hljs-literal</span>,</span><br><span class="line"><span class="selector-class">.hljs-type</span>,</span><br><span class="line"><span class="selector-class">.hljs-params</span>,</span><br><span class="line"><span class="selector-class">.hljs-deletion</span>,</span><br><span class="line"><span class="selector-class">.hljs-link</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f79a32</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Yellow */</span></span><br><span class="line"><span class="selector-class">.hljs-title</span>,</span><br><span class="line"><span class="selector-class">.hljs-section</span>,</span><br><span class="line"><span class="selector-class">.hljs-attribute</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f06431</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Green */</span></span><br><span class="line"><span class="selector-class">.hljs-string</span>,</span><br><span class="line"><span class="selector-class">.hljs-symbol</span>,</span><br><span class="line"><span class="selector-class">.hljs-bullet</span>,</span><br><span class="line"><span class="selector-class">.hljs-addition</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#889b4a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Kimbie Purple */</span></span><br><span class="line"><span class="selector-class">.hljs-keyword</span>,</span><br><span class="line"><span class="selector-class">.hljs-selector-tag</span>,</span><br><span class="line"><span class="selector-class">.hljs-function</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#98676a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 更改的內容 把.hljs改為 #article-container figure.highlight .hljs *、</span></span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"><span class="selector-id">#article-container</span> <span class="selector-tag">figure</span><span class="selector-class">.highlight</span> <span class="selector-class">.hljs</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">overflow-x</span>: auto;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#221a0f</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#d3af86</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-emphasis</span> &#123;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hljs-strong</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="引入文件">引入文件</h3>
<p>修改<code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/self/Kimbiedark.css&quot;&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="運行Hexo">運行Hexo</h3>
<p>運行Hexo後，應該可以看到修改的效果</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/hexo-theme-butterfly-doc-highlight-self-css.png" alt=""></p>
<h2 id="Prismjs">Prismjs</h2>
<p>以使用<code>prism-duotone-light</code>主題配色為例子</p>
<h3 id="配置highlight-theme為false-2">配置<code>highlight_theme</code>為<code>false</code></h3>
<p>修改<code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="下載和修改CSS文件-2">下載和修改CSS文件</h3>
<p>在<a href="https://github.com/PrismJS/prism-themes/blob/master/themes/prism-duotone-light.css">Github</a>上找到這個CSS</p>
<p>在 Hexo 的根目錄<code>source</code>文件夾下創立一個<code>self</code>文件夾，在<code>self</code>文件夾創建一個<code>duotone.css</code>文件</p>
<p>把Github上<code>prism-duotone-light</code>的 CSS 代碼複製到``duotone.css`去。（你也可以直接從Github上下載這個CSS）</p>
<p><strong>prism-duotone-light</strong>代碼如下</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Name:   Duotone Light</span></span><br><span class="line"><span class="comment">Author: Simurai, adapted from DuoTone themes for Atom (http://simurai.com/projects/2016/01/01/duotone-themes)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Conversion: Bram de Haan (http://atelierbram.github.io/Base2Tone-prism/output/prism/prism-base2tone-morning-light.css)</span></span><br><span class="line"><span class="comment">Generated with Base16 Builder (https://github.com/base16-builder/base16-builder)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>,</span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">font-family</span>: Consolas, Menlo, Monaco, <span class="string">&quot;Andale Mono WT&quot;</span>, <span class="string">&quot;Andale Mono&quot;</span>, <span class="string">&quot;Lucida Console&quot;</span>, <span class="string">&quot;Lucida Sans Typewriter&quot;</span>, <span class="string">&quot;DejaVu Sans Mono&quot;</span>, <span class="string">&quot;Bitstream Vera Sans Mono&quot;</span>, <span class="string">&quot;Liberation Mono&quot;</span>, <span class="string">&quot;Nimbus Mono L&quot;</span>, <span class="string">&quot;Courier New&quot;</span>, Courier, monospace;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">1.375</span>;</span><br><span class="line">	<span class="attribute">direction</span>: ltr;</span><br><span class="line">	<span class="attribute">text-align</span>: left;</span><br><span class="line">	<span class="attribute">white-space</span>: pre;</span><br><span class="line">	<span class="attribute">word-spacing</span>: normal;</span><br><span class="line">	<span class="attribute">word-break</span>: normal;</span><br><span class="line"></span><br><span class="line">	-moz-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line">	-o-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line">	<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">	-webkit-<span class="attribute">hyphens</span>: none;</span><br><span class="line">	-moz-<span class="attribute">hyphens</span>: none;</span><br><span class="line">	-ms-<span class="attribute">hyphens</span>: none;</span><br><span class="line">	<span class="attribute">hyphens</span>: none;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>::-moz-selection, pre[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection,</span><br><span class="line">code[class*=<span class="string">&quot;language-&quot;</span>]::-moz-selection, code[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection &#123;</span><br><span class="line">	text-shadow: none;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">	<span class="attribute">text-shadow</span>: none;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Code blocks */</span></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">	<span class="attribute">margin</span>: .<span class="number">5em</span> <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Inline code */</span></span><br><span class="line"><span class="selector-pseudo">:not</span>(pre) &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">padding</span>: .<span class="number">1em</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: .<span class="number">3em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.comment</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.prolog</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.doctype</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.cdata</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.punctuation</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.namespace</span> &#123;</span><br><span class="line">	<span class="attribute">opacity</span>: .<span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.operator</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.number</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#063289</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.property</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.function</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#b29762</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag-id</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.selector</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule-id</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#2d2006</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-javascript</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-name</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-css</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-scss</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.boolean</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.url</span>,</span><br><span class="line"><span class="selector-class">.language-css</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.language-scss</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.style</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-value</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.keyword</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.control</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.directive</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.unit</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.statement</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.regex</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.placeholder</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.variable</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#93abdc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.deleted</span> &#123;</span><br><span class="line">	<span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.inserted</span> &#123;</span><br><span class="line">	<span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted <span class="number">#2d2006</span>;</span><br><span class="line">	<span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.italic</span> &#123;</span><br><span class="line">	<span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.bold</span> &#123;</span><br><span class="line">	<span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span> &#123;</span><br><span class="line">	<span class="attribute">cursor</span>: help;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">	<span class="attribute">outline</span>: .<span class="number">4em</span> solid <span class="number">#896724</span>;</span><br><span class="line">	<span class="attribute">outline-offset</span>: .<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Numbers plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-numbers/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-numbers</span> <span class="selector-class">.line-numbers-rows</span> &#123;</span><br><span class="line">	<span class="attribute">border-right-color</span>: <span class="number">#ece8de</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.line-numbers-rows</span> &gt; <span class="selector-tag">span</span>:before &#123;</span><br><span class="line">	color: <span class="number">#cdc4b1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Highlight plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-highlight/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-highlight</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>);</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改這個CSS文件為</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 新添加的內容</span></span><br><span class="line"><span class="comment">  ------------------------------------- </span></span><br><span class="line"><span class="comment">  --hl-color                  代碼框字體顔色 【必須】 (把下面 pre[class*=&quot;language-&quot;]的 color 複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hl-bg                     代碼框背景色 【必須】 (把下面 pre[class*=&quot;language-&quot;]的 background複製到這裏來)</span></span><br><span class="line"><span class="comment">  --hltools-bg: #321a0f       代碼框頂部工具欄背景色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hltools-color: #fff       代碼框頂部工具欄字體顔色 【可選】(如果你關掉了 copy、lang 和 shrink,可不用配置這個）</span></span><br><span class="line"><span class="comment">  --hlnumber-bg: #221a0f      代碼框行數背景色 【可選】(如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlnumber-color: #fff      代碼框行數字體顔色 【可選】 (如果已經關掉 line_number,可以不用配置這個)</span></span><br><span class="line"><span class="comment">  --hlscrollbar-bg: #d3af86   代碼框滾動條顔色 【可選】（默認為主題主顔色）</span></span><br><span class="line"><span class="comment">  --hlexpand-bg: #d3af86      代碼框底部展開背景色 【可選】(如果已經關掉 highlight_height_limit,可以不用配置這個)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  --hl-<span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">  --hl-bg: <span class="number">#faf8f5</span>;</span><br><span class="line">  --hltools-bg: xxxxxxx;</span><br><span class="line">  --hltools-<span class="attribute">color</span>: xxxxxxx;</span><br><span class="line">  --hlnumber-bg: xxxxxxx;</span><br><span class="line">  --hlnumber-<span class="attribute">color</span>: xxxxxxxx;</span><br><span class="line">  --hlscrollbar-bg: xxxxx;</span><br><span class="line">  --hlexpand-bg: xxxxxxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 這些可以刪除（可留着，如果有衝突，請刪除） */</span></span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>,</span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">font-family</span>: Consolas, Menlo, Monaco, <span class="string">&quot;Andale Mono WT&quot;</span>, <span class="string">&quot;Andale Mono&quot;</span>, <span class="string">&quot;Lucida Console&quot;</span>, <span class="string">&quot;Lucida Sans Typewriter&quot;</span>, <span class="string">&quot;DejaVu Sans Mono&quot;</span>, <span class="string">&quot;Bitstream Vera Sans Mono&quot;</span>, <span class="string">&quot;Liberation Mono&quot;</span>, <span class="string">&quot;Nimbus Mono L&quot;</span>, <span class="string">&quot;Courier New&quot;</span>, Courier, monospace;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">1.375</span>;</span><br><span class="line">	<span class="attribute">direction</span>: ltr;</span><br><span class="line">	<span class="attribute">text-align</span>: left;</span><br><span class="line">	<span class="attribute">white-space</span>: pre;</span><br><span class="line">	<span class="attribute">word-spacing</span>: normal;</span><br><span class="line">	<span class="attribute">word-break</span>: normal;</span><br><span class="line"></span><br><span class="line">	-moz-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line">	-o-<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line">	<span class="attribute">tab-size</span>: <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">	-webkit-<span class="attribute">hyphens</span>: none;</span><br><span class="line">	-moz-<span class="attribute">hyphens</span>: none;</span><br><span class="line">	-ms-<span class="attribute">hyphens</span>: none;</span><br><span class="line">	<span class="attribute">hyphens</span>: none;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span>::-moz-selection, pre[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection,</span><br><span class="line">code[class*=<span class="string">&quot;language-&quot;</span>]::-moz-selection, code[class*=<span class="string">&quot;language-&quot;</span>] ::-moz-selection &#123;</span><br><span class="line">	text-shadow: none;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span><span class="selector-pseudo">::selection</span>, <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> <span class="selector-pseudo">::selection</span> &#123;</span><br><span class="line">	<span class="attribute">text-shadow</span>: none;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#faf8f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Code blocks */</span></span><br><span class="line">pre<span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">padding</span>: <span class="number">1em</span>;</span><br><span class="line">	<span class="attribute">margin</span>: .<span class="number">5em</span> <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Inline code */</span></span><br><span class="line"><span class="selector-pseudo">:not</span>(pre) &gt; <span class="selector-tag">code</span><span class="selector-attr">[class*=<span class="string">&quot;language-&quot;</span>]</span> &#123;</span><br><span class="line">	<span class="attribute">padding</span>: .<span class="number">1em</span>;</span><br><span class="line">	<span class="attribute">border-radius</span>: .<span class="number">3em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ------------------------------------- */</span></span><br><span class="line"><span class="comment">/* 到這裏為止，可以刪除 */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.comment</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.prolog</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.doctype</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.cdata</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.punctuation</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#b6ad9a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.namespace</span> &#123;</span><br><span class="line">	<span class="attribute">opacity</span>: .<span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.operator</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.number</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#063289</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.property</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.function</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#b29762</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.tag-id</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.selector</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule-id</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#2d2006</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-javascript</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-name</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-css</span>,</span><br><span class="line"><span class="selector-tag">code</span><span class="selector-class">.language-scss</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.boolean</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.url</span>,</span><br><span class="line"><span class="selector-class">.language-css</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.language-scss</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.style</span> <span class="selector-class">.token</span><span class="selector-class">.string</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.attr-value</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.keyword</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.control</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.directive</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.unit</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.statement</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.regex</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.atrule</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#728fcb</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.placeholder</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.variable</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#93abdc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.deleted</span> &#123;</span><br><span class="line">	<span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.inserted</span> &#123;</span><br><span class="line">	<span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted <span class="number">#2d2006</span>;</span><br><span class="line">	<span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.italic</span> &#123;</span><br><span class="line">	<span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span>,</span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.bold</span> &#123;</span><br><span class="line">	<span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.important</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#896724</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.token</span><span class="selector-class">.entity</span> &#123;</span><br><span class="line">	<span class="attribute">cursor</span>: help;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pre &gt; <span class="selector-tag">code</span><span class="selector-class">.highlight</span> &#123;</span><br><span class="line">	<span class="attribute">outline</span>: .<span class="number">4em</span> solid <span class="number">#896724</span>;</span><br><span class="line">	<span class="attribute">outline-offset</span>: .<span class="number">4em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Numbers plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-numbers/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-numbers</span> <span class="selector-class">.line-numbers-rows</span> &#123;</span><br><span class="line">	<span class="attribute">border-right-color</span>: <span class="number">#ece8de</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.line-numbers-rows</span> &gt; <span class="selector-tag">span</span>:before &#123;</span><br><span class="line">	color: <span class="number">#cdc4b1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* overrides color-values for the Line Highlight plugin</span></span><br><span class="line"><span class="comment"> * http://prismjs.com/plugins/line-highlight/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.line-highlight</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>);</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0.2</span>) <span class="number">70%</span>, <span class="built_in">rgba</span>(<span class="number">45</span>, <span class="number">32</span>, <span class="number">6</span>, <span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="引入文件-2">引入文件</h3>
<p>修改<code>主題配置文件</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/self/duotone.css&quot;&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="運行Hexo-2">運行Hexo</h3>
<p>運行Hexo後，應該可以看到修改的效果</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/butterfly-custom-code-color-prismjs.png" alt="image-20200831000324474"></p>
]]></content>
      <categories>
        <category>進階教程</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>標籤外掛(Tag Plugins)</title>
    <url>/2020/01/05/%E6%96%87%E7%AB%A0Butterfly/%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B-Tag-Plugins/</url>
    <content><![CDATA[<h2 id="Tabs">Tabs</h2>
<div class="tabs" id="tags"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#tags-1">出師表</button></li><li class="tab"><button type="button" data-href="#tags-2">圖庫</button></li><li class="tab"><button type="button" data-href="#tags-3">李白</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="tags-1"><p>臣亮言：先帝創業未半而中道崩殂，今天下三分，益州疲弊，此誠危急存亡之秋也。然侍衞之臣不懈於內，忠志之士忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣，不宜妄自菲薄，引喻失義，以塞忠諫之路也。<br>
宮中府中，俱為一體；陟罰臧否，不宜異同：若有作奸犯科及為忠善者，宜付有司論其刑賞，以昭陛下平明之理；不宜偏私，使內外異法也。<br>
侍中、侍郎郭攸之、費禕、董允等，此皆良實，志慮忠純，是以先帝簡拔以遺陛下：愚以為宮中之事，事無大小，悉以諮之，然後施行，必能裨補闕漏，有所廣益。<br>
將軍向寵，性行淑均，曉暢軍事，試用於昔日，先帝稱之曰“能”，是以眾議舉寵為督：愚以為營中之事，悉以諮之，必能使行陣和睦，優劣得所。<br>
親賢臣，遠小人，此先漢所以興隆也；親小人，遠賢臣，此後漢所以傾頹也。先帝在時，每與臣論此事，未嘗不歎息痛恨於桓、靈也。侍中、尚書、長史、參軍，此悉貞良死節之臣，願陛下親之、信之，則漢室之隆，可計日而待也。<br>
臣本布衣，躬耕於南陽，苟全性命於亂世，不求聞達於諸侯。先帝不以臣卑鄙，猥自枉屈，三顧臣於草廬之中，諮臣以當世之事，由是感激，遂許先帝以驅馳。後值傾覆，受任於敗軍之際，奉命於危難之間：爾來二十有一年矣。<br>
先帝知臣謹慎，故臨崩寄臣以大事也。受命以來，夙夜憂歎，恐託付不效，以傷先帝之明；故五月渡瀘，深入不毛。今南方已定，兵甲已足，當獎率三軍，北定中原，庶竭駑鈍，攘除奸兇，興復漢室，還於舊都。此臣所以報先帝而忠陛下之職分也。至於斟酌損益，進盡忠言，則攸之、禕、允之任也。<br>
願陛下託臣以討賊興復之效，不效，則治臣之罪，以告先帝之靈。若無興德之言，則責攸之、禕、允等之慢，以彰其咎；陛下亦宜自謀，以諮諏善道，察納雅言，深追先帝遺詔。臣不勝受恩感激。<br>
今當遠離，臨表涕零，不知所言。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tags-2"><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Jj8FXuKVlOea4Ec.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/eqBGrXx9tWsZOao.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/LjW2CfNSD7OaY4v.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/pGIhaPjxtl438U9.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/hzjJBR2x5SEmsbC.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ucNDmUqQkrFfAWv.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/oj1wAnGSKtFvXIJ.jpg" alt=""></p>
          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tags-3"><p>李白（701年5月19日－762年11月30日），字太白，號青蓮居士，中國唐朝詩人，自言祖籍隴西成紀（今甘肅省天水市秦安縣），先世西涼武昭王李暠之後，與李唐皇室同宗。幼時內遷，寄籍劍南道綿州（今四川省江油市青蓮鎮）。另外，郭沫若研究認為李白出生於吉爾吉斯碎葉河上的碎葉城，屬唐安西都護府（今楚河州托克馬克市），該説有一定影響。有「詩仙」、「詩俠」、「酒仙」、「謫仙人」等稱呼，活躍於盛唐，為傑出的浪漫主義詩人。與杜甫合稱「李杜」。被賀知章驚呼為「天上謫仙」。</p>
<div class="tabs" id="李白詩集"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#李白詩集-1">行路難</button></li><li class="tab"><button type="button" data-href="#李白詩集-2">將進酒</button></li><li class="tab"><button type="button" data-href="#李白詩集-3">清平調</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="李白詩集-1"><p>金樽清酒鬥十千，玉盤珍羞值萬錢。<br>
停杯投箸不能食，拔劍四顧心茫然。<br>
欲渡黃河冰塞川，將登太行雪暗天。<br>
閒來垂釣碧溪上，忽復乘舟夢日邊。<br>
行路難，行路難，多歧路，今安在？<br>
長風破浪會有時，直掛雲帆濟滄海。<br>
大道如青天，我獨不得出。<br>
羞逐長安社中兒，赤雞白狗賭梨慄。<br>
彈劍作歌奏苦聲，曳裾王門不稱情。<br>
淮陰市井笑韓信，漢朝公卿忌賈生。<br>
君不見昔時燕家重郭隗，擁篲折節無嫌猜。<br>
劇辛樂毅感恩分，輸肝剖膽效英才。<br>
昭王白骨縈蔓草，誰人更掃黃金台？<br>
行路難，歸去來！<br>
有耳莫洗潁川水，有口莫食首陽蕨。<br>
含光混世貴無名，何用孤高比雲月？<br>
吾觀自古賢達人，功成不退皆殞身。<br>
子胥既棄吳江上，屈原終投湘水濱。<br>
陸機雄才豈自保，李斯税駕苦不早。<br>
華亭鶴唳詎可聞，上蔡蒼鷹何足道。<br>
君不見吳中張翰稱達生，秋風忽憶江東行。<br>
且樂生前一杯酒，何須身後千載名！</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="李白詩集-2"><p>君不見，黃河之水天上來，<br>
奔流到海不復回？<br>
君不見，高堂明鏡悲白髮，<br>
朝如青絲暮成雪？<br>
人生得意須盡歡，<br>
莫使金樽空對月。<br>
天生我材必有用，<br>
千金散盡還復來。<br>
烹羊宰牛且為樂，<br>
會須一飲三百杯。<br>
岑夫子，丹丘生，<br>
將進酒，君莫停。<br>
與君歌一曲，<br>
請君為我側耳聽：<br>
鐘鼓饌玉不足貴，<br>
但願長醉不願醒。<br>
古來聖賢皆寂寞，<br>
惟有飲者留其名。<br>
陳王昔時宴平樂，<br>
斗酒十千恣歡謔。<br>
主人何為言小錢？<br>
徑須沽取對君酌。<br>
五花馬，千金裘。<br>
呼兒將出換美酒，<br>
與爾同銷萬古愁。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="李白詩集-3"><p>《清平調詞三首》是唐代大詩人李白的組詩作品，共三首七言樂府詩。第一首從空間角度寫，以牡丹花比楊貴妃的美豔；第二首從時間角度寫，表現楊貴妃的受寵幸；第三首總承一、二兩首，把牡丹和楊貴妃與君王糅合，融為一體。全詩構思精巧，辭藻豔麗，將花與人渾融在一起寫，描繪出人花交映、迷離恍惚的景象，顯示了詩人高超的藝術功力。</p>
<div class="tabs" id="清平調"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#清平調-1">清平調(一)</button></li><li class="tab"><button type="button" data-href="#清平調-2">清平調(二)</button></li><li class="tab"><button type="button" data-href="#清平調-3">清平調(三)</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="清平調-1"><p>雲想衣裳花想容，春風拂檻露華濃；<br>
　<br>
若非羣玉山頭見，會向瑤台月下逢。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="清平調-2"><p>一枝紅豔露凝香，雲雨巫山空斷腸。<br>
　<br>
借問漢宮誰得似？可憐飛燕倚新粧。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="清平調-3"><p>名花傾國兩相歡，常得君王帶笑看。<br>
　<br>
解識春風無限恨，沉香亨北倚闌千。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
<h2 id="Button">Button</h2>
<h3 id="Inline">Inline</h3>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly %&#125;</span><br><span class="line">This is my website, click the button &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,,outline%&#125;</span><br></pre></td></tr></table></figure>
<p>This is my website, click the button <a class="btn-beautify button--animated " href="https://butterfly.js.org" 
  title="Butterfly"><span>Butterfly</span></a></p>
<p>This is my website, click the button <a class="btn-beautify button--animated outline" href="https://butterfly.js.org" 
  title="Butterfly"><span>Butterfly</span></a></p>
<h3 id="Block">Block</h3>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">This is my website, click the button  &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,block larger %&#125;</span><br><span class="line">This is my website, click the button  &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,block center larger %&#125;</span><br><span class="line">This is my website, click the button  &#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,block right blue larger %&#125;</span><br></pre></td></tr></table></figure>
<a class="btn-beautify button--animated block larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated block center larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated block right blue larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<h3 id="option">option</h3>
<blockquote>
<p>more than one button in center</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-center&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,green larger %&#125;</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<div class="btn-center">
<a class="btn-beautify button--animated larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated blue larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated pink larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated red larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated purple larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated orange larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated green larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
</div>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-center&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline blue larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline pink larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline red larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline purple larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline orange larger %&#125;</span><br><span class="line">&#123;% btn &#x27;https://butterfly.js.org&#x27;,Butterfly,far fa-hand-point-right,outline green larger %&#125;</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<div class="btn-center">
<a class="btn-beautify button--animated outline larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline blue larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline pink larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline red larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline purple larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline orange larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
<a class="btn-beautify button--animated outline green larger" href="https://butterfly.js.org" 
  title="Butterfly"><i class="far fa-hand-point-right"></i><span>Butterfly</span></a>
</div>
<h2 id="mermaid">mermaid</h2>
<div class="mermaid-wrap"><pre class="mermaid-src" hidden>
  pie
    title Key elements in Product X
    &quot;Calcium&quot; : 42.96
    &quot;Potassium&quot; : 50.05
    &quot;Magnesium&quot; : 10.01
    &quot;Iron&quot; :  5
  </pre></div>
<div class="mermaid-wrap"><pre class="mermaid-src" hidden>
  gantt
    title A Gantt Diagram
    dateFormat  YYYY-MM-DD
    section Section
    A task           :a1, 2014-01-01, 30d
    Another task     :after a1  , 20d
    section Another
    Task in sec      :2014-01-12  , 12d
    another task      : 24d
  </pre></div>
<div class="mermaid-wrap"><pre class="mermaid-src" hidden>
  gantt
    title A Gantt Diagram
    dateFormat  YYYY-MM-DD
    section Section
    A task           :a1, 2014-01-01, 30d
    Another task     :after a1  , 20d
    section Another
    Task in sec      :2014-01-12  , 12d
    another task      : 24d
  </pre></div>
<h2 id="Note-Bootstrap-Callout">Note (Bootstrap Callout)</h2>
<h3 id="方法一">方法一</h3>
<blockquote>
<p>simple</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note simple %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note flat"><p>默認 提示塊標籤</p>
</div>
<div class="note default flat"><p>default 提示塊標籤</p>
</div>
<div class="note primary flat"><p>primary 提示塊標籤</p>
</div>
<div class="note success flat"><p>success 提示塊標籤</p>
</div>
<div class="note info flat"><p>info 提示塊標籤</p>
</div>
<div class="note warning flat"><p>warning 提示塊標籤</p>
</div>
<div class="note danger flat"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>modern</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note modern %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note modern"><p>默認 提示塊標籤</p>
</div>
<div class="note default modern"><p>default 提示塊標籤</p>
</div>
<div class="note primary modern"><p>primary 提示塊標籤</p>
</div>
<div class="note success modern"><p>success 提示塊標籤</p>
</div>
<div class="note info modern"><p>info 提示塊標籤</p>
</div>
<div class="note warning modern"><p>warning 提示塊標籤</p>
</div>
<div class="note danger modern"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>flat</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note flat %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note flat"><p>默認 提示塊標籤</p>
</div>
<div class="note default flat"><p>default 提示塊標籤</p>
</div>
<div class="note primary flat"><p>primary 提示塊標籤</p>
</div>
<div class="note success flat"><p>success 提示塊標籤</p>
</div>
<div class="note info flat"><p>info 提示塊標籤</p>
</div>
<div class="note warning flat"><p>warning 提示塊標籤</p>
</div>
<div class="note danger flat"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>disabled</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note disabled %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note disabled"><p>默認 提示塊標籤</p>
</div>
<div class="note default disabled"><p>default 提示塊標籤</p>
</div>
<div class="note primary disabled"><p>primary 提示塊標籤</p>
</div>
<div class="note success disabled"><p>success 提示塊標籤</p>
</div>
<div class="note info disabled"><p>info 提示塊標籤</p>
</div>
<div class="note warning disabled"><p>warning 提示塊標籤</p>
</div>
<div class="note danger disabled"><p>danger 提示塊標籤</p>
</div>
<blockquote>
<p>no-icon</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">默認 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;</span><br><span class="line">default 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;</span><br><span class="line">primary 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;</span><br><span class="line">success 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;</span><br><span class="line">info 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;</span><br><span class="line">warning 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;</span><br><span class="line">danger 提示塊標籤</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note no-icon flat"><p>默認 提示塊標籤</p>
</div>
<div class="note default no-icon flat"><p>default 提示塊標籤</p>
</div>
<div class="note primary no-icon flat"><p>primary 提示塊標籤</p>
</div>
<div class="note success no-icon flat"><p>success 提示塊標籤</p>
</div>
<div class="note info no-icon flat"><p>info 提示塊標籤</p>
</div>
<div class="note warning no-icon flat"><p>warning 提示塊標籤</p>
</div>
<div class="note danger no-icon flat"><p>danger 提示塊標籤</p>
</div>
<h3 id="方法二">方法二</h3>
<blockquote>
<p>simple</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon simple"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon simple"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>modern</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon modern"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon modern"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>flat</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon flat"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon flat"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>disabled</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note icon disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue icon disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p>
</div>
<div class="note pink icon disabled"><i class="note-icon fas fa-car-crash"></i><p>小心開車 安全至上</p>
</div>
<div class="note red icon disabled"><i class="note-icon fas fa-fan"></i><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange icon disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple icon disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石頭布</p>
</div>
<div class="note green icon disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最討厭的瀏覽器</p>
</div>
<blockquote>
<p>no-icon</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note blue no-icon %&#125;</span><br><span class="line">2021年快到了....</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note pink no-icon %&#125;</span><br><span class="line">小心開車 安全至上</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note red no-icon %&#125;</span><br><span class="line">這是三片呢？還是四片？</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note orange no-icon %&#125;</span><br><span class="line">你是刷 Visa 還是 UnionPay</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note purple no-icon %&#125;</span><br><span class="line">剪刀石頭布</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line">&#123;% note green no-icon %&#125;</span><br><span class="line">前端最討厭的瀏覽器</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<div class="note no-icon flat"><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note blue no-icon flat"><p>2021年快到了…</p>
</div>
<div class="note pink no-icon flat"><p>小心開車 安全至上</p>
</div>
<div class="note red no-icon flat"><p>這是三片呢？還是四片？</p>
</div>
<div class="note orange no-icon flat"><p>你是刷 Visa 還是 UnionPay</p>
</div>
<div class="note purple no-icon flat"><p>剪刀石頭布</p>
</div>
<div class="note green no-icon flat"><p>前端最討厭的瀏覽器</p>
</div>
<h2 id="Gallery-相冊圖庫">Gallery 相冊圖庫</h2>
<div class="gallery-group-main">

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">壁紙</div>
  <p>收藏的一些壁紙</p>
  <a href='/Gallery/wallpaper'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">漫威</div>
  <p>關於漫威的圖片</p>
  <a href='/Gallery/marvel'></a>
  </figcaption>
  </figure>
  

  <figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">OH MY GIRL</div>
  <p>關於OH MY GIRL的圖片</p>
  <a href='/Gallery/ohmygirl'></a>
  </figcaption>
  </figure>
  
</div>
<h2 id="Gallery-相冊">Gallery 相冊</h2>
<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Jj8FXuKVlOea4Ec.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/eqBGrXx9tWsZOao.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/LjW2CfNSD7OaY4v.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/pGIhaPjxtl438U9.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/hzjJBR2x5SEmsbC.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ucNDmUqQkrFfAWv.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/oj1wAnGSKtFvXIJ.jpg" alt=""></p>
          </div>
<h2 id="tag-hide">tag-hide</h2>
<p>隱藏文字，點擊顯示文章</p>
<h3 id="hide-inline">hide-inline</h3>
<p>哪個英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button button--animated" style="background-color: #FF7242;color: #fff">查看答案
  </button><span class="hide-content">因為西裝褲(C裝酷)</span></span></p>
<p>門裡站著一個人? <span class="hide-inline"><button type="button" class="hide-button button--animated" style="">Click
  </button><span class="hide-content">閃</span></span></p>
<h3 id="hide-block">hide-block</h3>
<p>美女</p>
<div class="hide-block"><button type="button" class="hide-button button--animated" style="">查看答案
    </button><div class="hide-content"><div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>
          </div></div></div>
<h3 id="hide-toggle">hide-toggle</h3>
<div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>Butterfly安裝方法</span></div>
    <div class="hide-content"><p>在你的博客根目錄裏</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br></pre></td></tr></table></figure>
<p>如果想要安裝比較新的dev分支，可以</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone -b dev https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br></pre></td></tr></table></figure>
<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>
          </div>
</div></div>]]></content>
      <categories>
        <category>Demo</category>
      </categories>
      <tags>
        <tag>標籤外掛</tag>
      </tags>
  </entry>
  <entry>
    <title>自定義側邊欄</title>
    <url>/2020/12/30/%E6%96%87%E7%AB%A0Butterfly/%E8%87%AA%E5%AE%9A%E7%BE%A9%E5%81%B4%E9%82%8A%E6%AC%84/</url>
    <content><![CDATA[<div class="note info flat"><p>適用於 &gt;= 3.8.0</p>
</div>
<p>側邊欄現在支持自定義了，可以添加自己喜歡的 widget。</p>
<p>可添加自己的 widget，也可以對現有的 widget 進行排序（<code>博客資料</code>和 <code>公告</code>這兩個固定，其它的能排序）</p>
<h2 id="widget-排序">widget 排序</h2>
<p>只需要配置 <code>sort_order</code>就行。（使用了 <code>Flex</code> 佈局的 <code>order</code> 屬性，具體可查看 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Ordering_Flex_Items">mozilla 文檔</a>。簡單來講，就是配置<strong>數字</strong>來實現排序，如果不配置，則默認為 0。數字越小，排序越靠前。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line"> <span class="string">...</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"></span><br><span class="line"><span class="attr">newest_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br></pre></td></tr></table></figure>
<h2 id="自定義-widget">自定義 widget</h2>
<p>如果你想添加自己的內容到側邊欄去，你可以自定義。</p>
<h3 id="創建-widget-yml">創建 widget.yml</h3>
<p>在Hexo博客目錄中的<code>source/_data</code>（如果沒有 _data 文件夾，請自行創建），創建一個文件 <code>widget.yml</code></p>
<h3 id="格式">格式</h3>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">top:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">html:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">bottom:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">class_name:</span></span><br><span class="line">    <span class="attr">id_name:</span></span><br><span class="line">    <span class="attr">name:</span></span><br><span class="line">    <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">order:</span></span><br><span class="line">    <span class="attr">html:</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>參數詳解</p>
</blockquote>
<p><strong>top</strong>:  創建的 widget 會出現在非 sticky 區域（即所有頁面都會顯示)</p>
<p><strong>bottom</strong>:  創建的 widget 會出現在 sticky 區域（除了文章頁都會顯示)</p>
<table>
<thead>
<tr>
<th>參數</th>
<th>解釋</th>
</tr>
</thead>
<tbody>
<tr>
<td>class_name</td>
<td>所創建的 widget  父類 class 名 （可選）</td>
</tr>
<tr>
<td>id_name</td>
<td>所創建的 widget  父類 id 名（可選）</td>
</tr>
<tr>
<td>name</td>
<td>所創建的 widget 標題</td>
</tr>
<tr>
<td>icon</td>
<td>所創建的 widget 圖標</td>
</tr>
<tr>
<td>order</td>
<td>所創建的 widget 排序 （可選）</td>
</tr>
<tr>
<td>html</td>
<td>所創建的 widget 相關代碼</td>
</tr>
</tbody>
</table>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/adside-diy-parameter.png" alt="image-20201230223506507"></p>
<p>生成的 代碼 為</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-widget 所寫的 class_name&quot;</span> <span class="attr">id</span>=<span class="string">&quot;所寫的 id_name&quot;</span> <span class="attr">style</span>=<span class="string">&quot;order: 所寫的 order&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-headline&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;所寫的 icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>所寫的 name<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-content&quot;</span>&gt;</span></span><br><span class="line">        所寫的 html</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果你需要對添加的 widget 進行 UI 調整，請自行添加 css 到 inject 去。</p>
<h3 id="例子">例子</h3>
<p>以  <a href="https://clustrmaps.com/profile/1b7ep/widget/code/globe">訪客地圖</a> 為例子</p>
<ol>
<li>
<p>獲取訪客地圖的 html 代碼</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;clstr_globe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//clustrmaps.com/globe.js?d=5V2tOKp8qAdRM-i8eu7ETTO9ugt5uKbbG-U7Yj8uMl8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>創建 widget.yml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">bottom:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">user-map</span></span><br><span class="line">      <span class="attr">id_name:</span> <span class="string">user-map</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">訪客地圖</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-heartbeat</span></span><br><span class="line">      <span class="attr">order:</span></span><br><span class="line">      <span class="attr">html:</span> <span class="string">&#x27;&lt;script type=&quot;text/javascript&quot; id=&quot;clstr_globe&quot; src=&quot;//clustrmaps.com/globe.js?d=5V2tOKp8qAdRM-i8eu7ETTO9ugt5uKbbG-U7Yj8uMl8&quot;&gt;&lt;/script&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>運行 hexo</p>
<p><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/aside-diy-sample.png" alt="image-20201230224442356"></p>
</li>
</ol>
]]></content>
      <categories>
        <category>進階教程</category>
      </categories>
      <tags>
        <tag>教程</tag>
        <tag>Hexo</tag>
        <tag>主題</tag>
        <tag>butterfly</tag>
      </tags>
  </entry>
  <entry>
    <title>DOM查找网页分类实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/DOM%E6%9F%A5%E6%89%BE%E7%BD%91%E9%A1%B5%E5%88%86%E7%B1%BB%E5%AE%9E%E6%88%98-2021-11-07%2023:01:34/</url>
    <content><![CDATA[<h1>DOM查找网页分类实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--导入jsoup库</span></span><br><span class="line">import<span class="string">&#x27;org.jsoup.*&#x27;</span></span><br><span class="line"><span class="comment">--定义链接</span></span><br><span class="line">url = <span class="string">&#x27;http://dh.hfybbs.vip/cn/index.html&#x27;</span></span><br><span class="line"><span class="comment">--这里使用Http方法先获取到网页源码再解析。</span></span><br><span class="line"><span class="comment">--因为jsoup自带的connect方法是同步加载，会影响程序加载速度</span></span><br><span class="line">Http.get(url,<span class="function"><span class="keyword">function</span><span class="params">(code,content)</span></span></span><br><span class="line">  <span class="keyword">if</span> code==<span class="number">200</span> <span class="keyword">then</span><span class="comment">--判断网站状态</span></span><br><span class="line">    doc = Jsoup.parse(content)<span class="comment">--使用jsoup解析网页</span></span><br><span class="line">    classification = doc.getElementsByClass(<span class="string">&#x27;text-gray&#x27;</span>)<span class="comment">--查找到所有class为text-gray的网页元素</span></span><br><span class="line">    classification = luajava.astable(classification)<span class="comment">--将其转换成table表</span></span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(classification) <span class="keyword">do</span><span class="comment">--循环打印输出</span></span><br><span class="line">      <span class="built_in">print</span>(v.text())</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;无法访问&#x27;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>String基础概述</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/String%E5%9F%BA%E7%A1%80%E6%A6%82%E8%BF%B0-2021-11-07%2023:02:56/</url>
    <content><![CDATA[<h1>String基础概述</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">爬虫，这是一个大学问，厉害的爬虫可以用同一个网站的相同数据，</span><br><span class="line">做出更突出的效果，可以将杂乱无章的数据，处理成系统的，分类好的数据来进行复用。</span><br><span class="line">当然，这些都是厉害的，工程量十分大的，而我们只需要简单的处理页面数据就可以了。</span><br><span class="line">首先熟悉下Lua的字符串操作</span><br><span class="line">字符串由一对双引号或单引号来表示。</span><br><span class="line"></span><br><span class="line">string1 = <span class="string">&quot;this is string1&quot;</span></span><br><span class="line">string2 = <span class="string">&#x27;this is string2&#x27;</span></span><br><span class="line"></span><br><span class="line">在对一个数字字符串上进行算术操作时，Lua 会尝试将这个数字字符串转成一个数字，字符串连接使用的是 ..如：</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a&quot;</span> .. <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"><span class="comment">--输出(ab)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">157</span> .. <span class="number">428</span>)</span><br><span class="line"><span class="comment">--输出(157428)</span></span><br><span class="line"></span><br><span class="line">使用 # 来计算字符串的长度，放在字符串前面，如下实例：</span><br><span class="line"></span><br><span class="line"><span class="built_in">len</span> = <span class="string">&quot;www.androlua.com&quot;</span></span><br><span class="line"><span class="built_in">print</span>(#<span class="built_in">len</span>)</span><br><span class="line"><span class="comment">--输出(16)</span></span><br><span class="line"></span><br><span class="line">字符串的截取操作：</span><br><span class="line">strings=<span class="string">&quot;左中右&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--取字符串左边</span></span><br><span class="line">左=strings:<span class="built_in">match</span>(<span class="string">&quot;(.+)中&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--取字符串中间</span></span><br><span class="line">中=strings:<span class="built_in">match</span>(<span class="string">&quot;左(.-)右&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--取字符串右边</span></span><br><span class="line">右=strings:<span class="built_in">match</span>(<span class="string">&quot;中(.+)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--替换</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">gsub</span>(原字符串,替换的字符串,替换成的字符串)</span><br><span class="line"></span><br><span class="line"><span class="comment">--匹配子串位置</span></span><br><span class="line">起始位置,结束位置=<span class="built_in">string</span>.<span class="built_in">find</span>(字符串,子串)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--按位置捕获字符串</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">sub</span>(字符串,子串起始位置,子串结束位置)</span><br><span class="line"></span><br><span class="line">需要一提得是，Lua中使用来进行转义，例如：</span><br><span class="line">n 换行(LF) ，将当前位置移到下一行开头</span><br><span class="line">r 回车(CR) ，将当前位置移到本行开头</span><br><span class="line">t 水平制表(HT) （跳到下一个TAB位置）</span><br><span class="line">\ 代表一个反斜线字符</span><br><span class="line"><span class="string">&#x27; 代表一个单引号（撇号）字符</span></span><br><span class="line"><span class="string">&quot; 代表一个双引号字符</span></span><br><span class="line"><span class="string">0 空字符(NULL)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Lua中字符串操作api：</span></span><br><span class="line"><span class="string">string.upper(argument) 字符串全部转为大写字母。</span></span><br><span class="line"><span class="string">string.lower(argument) 字符串全部转为小写字母。</span></span><br><span class="line"><span class="string">string.gsub(mainString,findString,replaceString,num) 在字符串中替换,mainString为要替换的字符串， findString 为被替换的字符，replaceString 要替换的字符，num 替换次数（可以忽略，则全部替换）</span></span><br><span class="line"><span class="string">string.find (str, substr, [init, [end]]) 在一个指定的目标字符串中搜索指定的内容(第三个参数为索引),返回其具体位置。不存在则返回 nil。</span></span><br><span class="line"><span class="string">string.reverse(arg) 字符串反转</span></span><br><span class="line"><span class="string">string.format(...) 返回一个类似printf的格式化字符串</span></span><br><span class="line"><span class="string">string.char(arg) 和 string.byte(arg[,int]) char 将整型数字转成字符并连接， byte 转换字符为整数值(可以指定某个字符，默认第一个字符)。</span></span><br><span class="line"><span class="string">string.len(arg) 计算字符串长度。</span></span><br><span class="line"><span class="string">string.rep(string, n) 返回字符串string的n个拷贝</span></span><br><span class="line"><span class="string">.. 链接两个字符串</span></span><br><span class="line"><span class="string">string.gmatch(str, pattern) 回一个迭代器函数，每一次调用这个函数，返回一个在字符串 str 找到的下一个符合 pattern 描述的子串。如果参数 pattern 描述的字符串没有找到，迭代函数返回nil。</span></span><br><span class="line"><span class="string">string.match(str, pattern, init) string.match()只寻找源字串str中的第一个配对. 参数init可选, 指定搜寻过程的起点, 默认为1。 </span></span><br><span class="line"><span class="string">在成功配对时, 函数将返回配对表达式中的所有捕获结果; 如果没有设置捕获标记, 则返回整个配对字符串. 当没有成功的配对时, 返回nil。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">其中string.format()有以下转义码：</span></span><br><span class="line"><span class="string">%c - 接受一个数字, 并将其转化为ASCII码表中对应的字符</span></span><br><span class="line"><span class="string">%d, %i - 接受一个数字并将其转化为有符号的整数格式</span></span><br><span class="line"><span class="string">%o - 接受一个数字并将其转化为八进制数格式</span></span><br><span class="line"><span class="string">%u - 接受一个数字并将其转化为无符号整数格式</span></span><br><span class="line"><span class="string">%x - 接受一个数字并将其转化为十六进制数格式, 使用小写字母</span></span><br><span class="line"><span class="string">%X - 接受一个数字并将其转化为十六进制数格式, 使用大写字母</span></span><br><span class="line"><span class="string">%e - 接受一个数字并将其转化为科学记数法格式, 使用小写字母e</span></span><br><span class="line"><span class="string">%E - 接受一个数字并将其转化为科学记数法格式, 使用大写字母E</span></span><br><span class="line"><span class="string">%f - 接受一个数字并将其转化为浮点数格式</span></span><br><span class="line"><span class="string">%g(%G) - 接受一个数字并将其转化为%e(%E, 对应%G)及%f中较短的一种格式</span></span><br><span class="line"><span class="string">%q - 接受一个字符串并将其转化为可安全被Lua编译器读入的格式</span></span><br><span class="line"><span class="string">%s - 接受一个字符串并按照给定的参数格式化该字符串</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Lua的匹配模式：</span></span><br><span class="line"><span class="string">.(点): 与任何字符配对</span></span><br><span class="line"><span class="string">%a: 与任何字母配对</span></span><br><span class="line"><span class="string">%c: 与任何控制符配对(例如n)</span></span><br><span class="line"><span class="string">%d: 与任何数字配对</span></span><br><span class="line"><span class="string">%l: 与任何小写字母配对</span></span><br><span class="line"><span class="string">%p: 与任何标点(punctuation)配对</span></span><br><span class="line"><span class="string">%s: 与空白字符配对</span></span><br><span class="line"><span class="string">%u: 与任何大写字母配对</span></span><br><span class="line"><span class="string">%w: 与任何字母/数字配对</span></span><br><span class="line"><span class="string">%x: 与任何十六进制数配对</span></span><br><span class="line"><span class="string">%z: 与任何代表0的字符配对</span></span><br><span class="line"><span class="string">%x(此处x是非字母非数字字符): 与字符x配对. 主要用来处理表达式中有功能的字符(^()%.[]*+-?)的配对问题, 例如%%与%配对</span></span><br><span class="line"><span class="string">[数个字符类]: 与任何[]中包含的字符类配对. 例如[%w_]与任何字母/数字, 或下划线符号(_)配对</span></span><br><span class="line"><span class="string">[^数个字符类]: 与任何不包含在[]中的字符类配对. 例如[^%s]与任何非空白字符配对</span></span><br><span class="line"><span class="string">单个字符类匹配该类别中任意单个字符；</span></span><br><span class="line"><span class="string">单个字符类跟一个 &#x27;</span>*<span class="string">&#x27;， 将匹配零或多个该类的字符。 这个条目总是匹配尽可能长的串；</span></span><br><span class="line"><span class="string">单个字符类跟一个 &#x27;</span>+<span class="string">&#x27;， 将匹配一或更多个该类的字符。 这个条目总是匹配尽可能长的串；</span></span><br><span class="line"><span class="string">单个字符类跟一个 &#x27;</span>-<span class="string">&#x27;， 将匹配零或更多个该类的字符。 和 &#x27;</span>*<span class="string">&#x27; 不同， 这个条目总是匹配尽可能短的串；</span></span><br><span class="line"><span class="string">单个字符类跟一个 &#x27;</span>?<span class="string">&#x27;， 将匹配零或一个该类的字符。 只要有可能，它会匹配一个；</span></span><br><span class="line"><span class="string">%n， 这里的 n 可以从 1 到 9； 这个条目匹配一个等于 n 号捕获物（后面有描述）的子串。</span></span><br><span class="line"><span class="string">%bxy， 这里的 x 和 y 是两个明确的字符； 这个条目匹配以 x 开始 y 结束， 且其中 x 和 y 保持 平衡 的字符串。 意思是，如果从左到右读这个字符串，对每次读到一个 x 就 +1 ，读到一个 y 就 -1， 最终结束处的那个 y 是第一个记数到 0 的 y。 举个例子，条目 %b() 可以匹配到括号平衡的表达式。</span></span><br><span class="line"><span class="string">%f[set]， 指 边境模式； 这个条目会匹配到一个位于 set 内某个字符之前的一个空串， 且这个位置的前一个字符不属于 set 。 集合 set 的含义如前面所述。 匹配出的那个空串之开始和结束点的计算就看成该处有个字符 &#x27;</span><span class="number">0</span><span class="string">&#x27; 一样。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">常用正则(Lua中需要将换成%)：</span></span><br><span class="line"><span class="string">非负整数：^d+</span></span><br><span class="line"><span class="string">正整数：^[0-9]*[1-9][0-9]*</span></span><br><span class="line"><span class="string">非正整数：^((-d+)|(0+))</span></span><br><span class="line"><span class="string">负整数：^-[0-9]*[1-9][0-9]*</span></span><br><span class="line"><span class="string">整数：^-?d+</span></span><br><span class="line"><span class="string">非负浮点数：^d+(.d+)?</span></span><br><span class="line"><span class="string">正浮点数 : ^((0-9)+.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*.[0-9]+)|([0-9]*[1-9][0-9]*)</span></span><br><span class="line"><span class="string">非正浮点数：^((-d+.d+)?)|(0+(.0+)?))</span></span><br><span class="line"><span class="string">负浮点数：^(-((正浮点数正则式)))</span></span><br><span class="line"><span class="string">英文字符串：^[A-Za-z]+</span></span><br><span class="line"><span class="string">英文大写串：^[A-Z]+</span></span><br><span class="line"><span class="string">英文小写串：^[a-z]+</span></span><br><span class="line"><span class="string">英文字符数字串：^[A-Za-z0-9]+</span></span><br><span class="line"><span class="string">英数字加下划线串：^w+</span></span><br><span class="line"><span class="string">E-mail地址：^[w-]+(.[w-]+)*@[w-]+(.[w-]+)+</span></span><br><span class="line"><span class="string">URL：^[a-zA-Z]+://(w+(-w+)*)(.(w+(-w+)*))*(?s*)? </span></span><br><span class="line"><span class="string">或：^http://[A-Za-z0-9]+.[A-Za-z0-9]+[/=?%-&amp;_~`@[]&#x27;</span>:+!]*([^&lt;&gt;<span class="string">&quot;&quot;</span>])*</span><br><span class="line">邮政编码：^[<span class="number">1</span><span class="number">-9</span>]d&#123;<span class="number">5</span>&#125;</span><br><span class="line">中文：^[u0391-uFFE5]+</span><br><span class="line">电话号码：^(((d&#123;<span class="number">2</span>,<span class="number">3</span>&#125;))|(d&#123;<span class="number">3</span>&#125;-))?((<span class="number">0</span>d&#123;<span class="number">2</span>,<span class="number">3</span>&#125;)|<span class="number">0</span>d&#123;<span class="number">2</span>,<span class="number">3</span>&#125;-)?[<span class="number">1</span><span class="number">-9</span>]d&#123;<span class="number">6</span>,<span class="number">7</span>&#125;(-d&#123;<span class="number">1</span>,<span class="number">4</span>&#125;)?</span><br><span class="line">手机号码：^(((d&#123;<span class="number">2</span>,<span class="number">3</span>&#125;))|(d&#123;<span class="number">3</span>&#125;-))?<span class="number">13</span>d&#123;<span class="number">9</span>&#125;</span><br><span class="line">双字节字符(包括汉字在内)：^x00-xff</span><br><span class="line">匹配首尾空格：(^s*)|(s*)（像vbscript那样的trim函数）</span><br><span class="line">匹配HTML标记：&lt;(.*)&gt;.*&lt;/<span class="number">1</span>&gt;|&lt;(.*) /&gt;</span><br><span class="line">匹配空行：n[s| ]*r</span><br><span class="line">提取信息中的网络链接：(h|H)(r|R)(e|E)(f|F) *= *(<span class="string">&#x27;|&quot;)?(w|\|/|.)+(&#x27;</span>|<span class="string">&quot;| *|&gt;)?</span></span><br><span class="line"><span class="string">提取信息中的邮件地址：w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*</span></span><br><span class="line"><span class="string">提取信息中的图片链接：(s|S)(r|R)(c|C) *= *(&#x27;|&quot;</span>)?(w|\|/|.)+(<span class="string">&#x27;|&quot;| *|&gt;)?</span></span><br><span class="line"><span class="string">提取信息中的IP地址：(d+).(d+).(d+).(d+)</span></span><br><span class="line"><span class="string">提取信息中的中国手机号码：(86)*0*13d&#123;9&#125;</span></span><br><span class="line"><span class="string">提取信息中的中国固定电话号码：((d&#123;3,4&#125;)|d&#123;3,4&#125;-|s)?d&#123;8&#125;</span></span><br><span class="line"><span class="string">提取信息中的中国电话号码（包括移动和固定电话）：((d&#123;3,4&#125;)|d&#123;3,4&#125;-|s)?d&#123;7,14&#125;</span></span><br><span class="line"><span class="string">提取信息中的中国邮政编码：[1-9]&#123;1&#125;(d+)&#123;5&#125;</span></span><br><span class="line"><span class="string">提取信息中的浮点数（即小数）：(-?d*).?d+</span></span><br><span class="line"><span class="string">提取信息中的任何数字 ：(-?d*)(.d+)? </span></span><br><span class="line"><span class="string">IP：(d+).(d+).(d+).(d+)</span></span><br><span class="line"><span class="string">电话区号：/^0d&#123;2,3&#125;/</span></span><br><span class="line"><span class="string">腾讯QQ号：^[1-9]*[1-9][0-9]*</span></span><br><span class="line"><span class="string">帐号(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;</span></span><br><span class="line"><span class="string">中文、英文、数字及下划线：^[u4e00-u9fa5_a-zA-Z0-9]+</span></span><br><span class="line"><span class="string">匹配中文字符的正则表达式： [u4e00-u9fa5]</span></span><br><span class="line"><span class="string">匹配双字节字符(包括汉字在内)：[^x00-xff]</span></span><br><span class="line"><span class="string">匹配空行的正则表达式：n[s| ]*r</span></span><br><span class="line"><span class="string">匹配HTML标记的正则表达式：/&lt;(.*)&gt;.*&lt;/1&gt;|&lt;(.*) /&gt;/</span></span><br><span class="line"><span class="string">sql语句：^(select|drop|delete|create|update|insert).*</span></span><br><span class="line"><span class="string">匹配首尾空格的正则表达式：(^s*)|(s*)</span></span><br><span class="line"><span class="string">匹配Email地址的正则表达式：w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>jsoup概述</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/jsoup%E6%A6%82%E8%BF%B0-2021-11-07%2023:01:59/</url>
    <content><![CDATA[<h1>jsoup概述</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">此篇教程必须最新版盒子才能正常运行！</span><br><span class="line">jsoup概述：</span><br><span class="line">jsoup是java里的一个普遍使用的html解析器，其的逻辑简单，语法容易，且功能强大。</span><br><span class="line">(此篇教程我不会再用中文变量，中文太别扭。。。。。。)</span><br><span class="line"></span><br><span class="line">但androlua中并没有自带这个模块，我们需要将其导入</span><br><span class="line">dex库下载链接：http://<span class="number">47.107</span><span class="number">.34</span><span class="number">.109</span>:<span class="number">8000</span>/d/c8f7ecb09db940de9725/</span><br><span class="line">使用方法：工程目录下创建libs目录，将jsoup开头的dex文件放入,在程序开头加入 import<span class="string">&#x27;org.jsoup.*&#x27;</span>即可</span><br><span class="line"></span><br><span class="line">jsoup API：</span><br><span class="line">从String解析文档</span><br><span class="line">html = <span class="string">&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;First parse&lt;/title&gt;&lt;/head&gt;&quot;</span></span><br><span class="line">+ <span class="string">&quot;&lt;body&gt;&lt;p&gt;Parsed HTML into a doc.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span></span><br><span class="line">doc = Jsoup.parse(html)</span><br><span class="line"></span><br><span class="line">解析一个网页碎片</span><br><span class="line">html = <span class="string">&quot;&lt;div&gt;&lt;p&gt;Lorem ipsum.&lt;/p&gt;&quot;</span></span><br><span class="line">doc = Jsoup.parseBodyFragment(html)</span><br><span class="line">body = doc.body()</span><br><span class="line"></span><br><span class="line">从URL加载文档</span><br><span class="line">doc = Jsoup.connect(<span class="string">&quot;http://example.com/&quot;</span>).get()</span><br><span class="line">title = doc.title()</span><br><span class="line"></span><br><span class="line">高级url请求</span><br><span class="line">doc = Jsoup.connect(<span class="string">&quot;http://example.com&quot;</span>)</span><br><span class="line">.data(<span class="string">&quot;query&quot;</span>, <span class="string">&quot;Java&quot;</span>)</span><br><span class="line">.userAgent(<span class="string">&quot;Mozilla&quot;</span>)</span><br><span class="line">.cookie(<span class="string">&quot;auth&quot;</span>, <span class="string">&quot;token&quot;</span>)</span><br><span class="line">.timeout(<span class="number">3000</span>)</span><br><span class="line">.post()</span><br><span class="line"></span><br><span class="line">从文件加载文档</span><br><span class="line"><span class="built_in">input</span> = new File(<span class="string">&quot;/tmp/input.html&quot;</span>)</span><br><span class="line">doc = Jsoup.parse(<span class="built_in">input</span>, <span class="string">&quot;UTF-8&quot;</span>, <span class="string">&quot;http://example.com/&quot;</span>)</span><br><span class="line"></span><br><span class="line">使用DOM方法导航文档</span><br><span class="line">寻找元素</span><br><span class="line">getElementById(String id)</span><br><span class="line">getElementsByTag(String tag)</span><br><span class="line">getElementsByClass(String className)</span><br><span class="line">getElementsByAttribute(String key) （及相关方法）</span><br><span class="line">元素的兄弟姐妹：siblingElements()，firstElementSibling()，lastElementSibling()，nextElementSibling()，previousElementSibling()</span><br><span class="line">图：parent()，children()，child(int index)</span><br><span class="line">元素数据</span><br><span class="line">attr(String key)获取和attr(String key, String value)设置属性</span><br><span class="line">attributes() 获得所有属性</span><br><span class="line">id()，className()和classNames()</span><br><span class="line">text()获取和text(String value)设置文本内容</span><br><span class="line">html()获取和html(String value)设置内部HTML内容</span><br><span class="line">outerHtml() 获取外部HTML值</span><br><span class="line">data()获取数据内容（例如script和style标签）</span><br><span class="line">tag() 和 tagName()</span><br><span class="line">处理HTML和文本</span><br><span class="line">append(String html)， prepend(String html)</span><br><span class="line">appendText(String text)， prependText(String text)</span><br><span class="line">appendElement(String tagName)， prependElement(String tagName)</span><br><span class="line">html(String value)</span><br><span class="line"></span><br><span class="line">使用selector-syntax查找元素</span><br><span class="line">选择器概述</span><br><span class="line">tagname：按标签查找元素，例如 a</span><br><span class="line">ns|tag：在命名空间中按标记fb|name查找&lt;fb:name&gt;元素，例如查找元素</span><br><span class="line">#id：按ID查找元素，例如 #logo</span><br><span class="line">.class：按类名查找元素，例如 .masthead</span><br><span class="line">[attribute]：具有属性的元素，例如 [href]</span><br><span class="line">[^attr]：具有属性名称前缀的[^data-]元素，例如查找具有HTML5数据集属性的元素</span><br><span class="line">[attr=value]：具有属性值的元素，例如[width=<span class="number">500</span>]（也是可引用的[data-name=<span class="string">&#x27;launch sequence&#x27;</span>]）</span><br><span class="line">[attr^=value]，[attr=value]，[attr*=value]：用与启动属性，以结束，或包含所述的值，例如元素[href*=/<span class="built_in">path</span>/]</span><br><span class="line">[attr~=regex]：具有与正则表达式匹配的属性值的元素; 例如img[src~=(?i).(png|jpe?g)]</span><br><span class="line">*：所有元素，例如 *</span><br><span class="line">选择器组合</span><br><span class="line">el#id：具有ID的元素，例如 div#logo</span><br><span class="line">el.class：带有类的元素，例如 div.masthead</span><br><span class="line">el[attr]：具有属性的元素，例如 a[href]</span><br><span class="line">任何组合，例如 a[href].highlight</span><br><span class="line">ancestor child：从祖先下降的子元素，例如在类“body”的块下的任何位置.body p查找p元素</span><br><span class="line">parent &gt; child：直接从父级下降的子元素，例如div.content &gt; p查找p元素; 并body &gt; *找到body标签的直接子节点</span><br><span class="line">siblingA + siblingB：找到兄弟B元素之后紧接着兄弟A，例如 div.head + div</span><br><span class="line">siblingA ~ siblingX：找到兄弟A前面的兄弟X元素，例如 h1 ~ p</span><br><span class="line">el, el, el：对多个选择器进行分组，找到与任何选择器匹配的唯一元素; 例如div.masthead, div.logo</span><br><span class="line">伪选择器</span><br><span class="line">:lt(n)：找到其兄弟索引（即它在DOM树中相对于其父节点的位置）小于的元素n; 例如td:lt(<span class="number">3</span>)</span><br><span class="line">:gt(n)：查找兄弟索引大于的元素n; 例如div p:gt(<span class="number">2</span>)</span><br><span class="line">:eq(n)：查找兄弟索引等于的元素n; 例如form <span class="built_in">input</span>:eq(<span class="number">1</span>)</span><br><span class="line">:has(selector)：查找包含与选择器匹配的元素的元素; 例如div:has(p)</span><br><span class="line">:<span class="keyword">not</span>(selector)：查找与选择器不匹配的元素; 例如div:<span class="keyword">not</span>(.logo)</span><br><span class="line">:contains(text)：查找包含给定文本的元素。搜索不区分大小写; 例如p:contains(jsoup)</span><br><span class="line">:containsOwn(text)：查找直接包含给定文本的元素</span><br><span class="line">:matches(regex)：查找文本与指定正则表达式匹配的元素; 例如div:matches((?i)login)</span><br><span class="line">:matchesOwn(regex)：查找自己的文本与指定正则表达式匹配的元素</span><br><span class="line">注意，上面的索引伪选择器是基于<span class="number">0</span>的，即第一个元素是索引<span class="number">0</span>，第二个元素是<span class="number">1</span></span><br><span class="line"></span><br><span class="line">从元素中提取属性，文本和HTML</span><br><span class="line">要获取属性的值，请使用该Node.attr(String key)方法</span><br><span class="line">对于元素（及其组合子元素）上的文本，请使用 Element.text()</span><br><span class="line">对于HTML，使用Element.html()或Node.outerHtml()</span><br><span class="line">上述方法是元素数据访问方法的核心。还有其他人：</span><br><span class="line">Element.id()</span><br><span class="line">Element.tagName()</span><br><span class="line">Element.className() 和 Element.hasClass(String className)</span><br><span class="line">所有这些访问器方法都有相应的setter方法来更改数据。</span><br><span class="line"></span><br><span class="line">设置属性值</span><br><span class="line">使用属性setter方法Element.attr(String key, String value)，和Elements.attr(String key, String value)。</span><br><span class="line">如果需要修改class元素的属性，请使用Element.addClass(String className)和Element.removeClass(String className)方法。</span><br><span class="line"></span><br><span class="line">设置元素的HTML</span><br><span class="line">div = doc.<span class="built_in">select</span>(<span class="string">&quot;div&quot;</span>).first()</span><br><span class="line">div.html(<span class="string">&quot;&lt;p&gt;lorem ipsum&lt;/p&gt;&quot;</span>)</span><br><span class="line">div.prepend(<span class="string">&quot;&lt;p&gt;First&lt;/p&gt;&quot;</span>)</span><br><span class="line">div.append(<span class="string">&quot;&lt;p&gt;Last&lt;/p&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line">Element span = doc.<span class="built_in">select</span>(<span class="string">&quot;span&quot;</span>).first()</span><br><span class="line">span.<span class="built_in">wrap</span>(<span class="string">&quot;&lt;li&gt;&lt;a href=&#x27;http://example.com/&#x27;&gt;&lt;/a&gt;&lt;/li&gt;&quot;</span>)</span><br><span class="line"></span><br><span class="line">设置元素的文本内容</span><br><span class="line">Element div = doc.<span class="built_in">select</span>(<span class="string">&quot;div&quot;</span>).first()</span><br><span class="line">div.text(<span class="string">&quot;five &gt; four&quot;</span>)</span><br><span class="line">div.prepend(<span class="string">&quot;First &quot;</span>)</span><br><span class="line">div.append(<span class="string">&quot; Last&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>jsoup爬取网页标题实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/jsoup%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E6%A0%87%E9%A2%98%E5%AE%9E%E6%88%98-2021-11-07%2023:02:16/</url>
    <content><![CDATA[<h1>jsoup爬取网页标题实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--导入jsoup库</span></span><br><span class="line">import<span class="string">&#x27;org.jsoup.*&#x27;</span></span><br><span class="line"><span class="comment">--定义链接</span></span><br><span class="line">url = <span class="string">&#x27;http://dh.hfybbs.vip&#x27;</span></span><br><span class="line"><span class="comment">--这里使用Http方法先获取到网页源码再解析。</span></span><br><span class="line"><span class="comment">--因为jsoup自带的connect方法是同步加载，会影响程序加载速度</span></span><br><span class="line">Http.get(url,<span class="function"><span class="keyword">function</span><span class="params">(code,content)</span></span></span><br><span class="line">  <span class="keyword">if</span> code==<span class="number">200</span> <span class="keyword">then</span><span class="comment">--判断网站状态</span></span><br><span class="line">    doc = Jsoup.parse(content)<span class="comment">--使用jsoup解析网页</span></span><br><span class="line">    <span class="built_in">print</span>(doc.title())<span class="comment">--使用jsoup方法获取到网页标题</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;无法访问&#x27;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>抓取aj ax数据实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E6%8A%93%E5%8F%96aj%20ax%E6%95%B0%E6%8D%AE%E5%AE%9E%E6%88%98-2021-11-07%2023:03:23/</url>
    <content><![CDATA[<h1>抓取aj ax数据实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--首先创建一个布局，为教程提供良好的可视化</span></span><br><span class="line"><span class="comment">--导入cjson包</span></span><br><span class="line">import<span class="string">&#x27;cjson&#x27;</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">  &#123;</span><br><span class="line">    ScrollView;<span class="comment">--纵向滚动</span></span><br><span class="line">    layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--宽</span></span><br><span class="line">    layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--高</span></span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">      Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">      layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">      layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">      background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">      gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--设置居中</span></span><br><span class="line">      &#123;</span><br><span class="line">        TextView;<span class="comment">--文本控件</span></span><br><span class="line">        id=<span class="string">&#x27;文本&#x27;</span>;<span class="comment">--绑定ID</span></span><br><span class="line">        layout_margin=<span class="string">&#x27;5%w&#x27;</span>;<span class="comment">--布局外边距</span></span><br><span class="line">        layout_width=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">        layout_height=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">        Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">        textColor=<span class="string">&#x27;#000000&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">        text=<span class="string">&#x27;爬取内容中&#x27;</span>;<span class="comment">--显示的文本</span></span><br><span class="line">        textSize=<span class="string">&#x27;18sp&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--将布局添加至窗口</span></span><br><span class="line"><span class="comment">--设置需要爬取的网站，可以随意更换</span></span><br><span class="line"><span class="comment">--这个链接是百度热搜的接口</span></span><br><span class="line">url = <span class="string">&#x27;https://www.anyknew.com/api/v1/sites/baidu&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用Http访问该网站，获取网页源码</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">  <span class="comment">--判断返回状态码，确定网站的正常运行</span></span><br><span class="line">  <span class="keyword">if</span> 状态码 ==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--使用cjson库将获取到的json数据table化</span></span><br><span class="line">    数据 = cjson.decode(网页源码)</span><br><span class="line">    <span class="comment">--取出需要的数据</span></span><br><span class="line">    数据列表 = 数据.data.site.subs[<span class="number">1</span>].items</span><br><span class="line">    <span class="comment">--定义一个空文本用于显示数据</span></span><br><span class="line">    标题 = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="comment">--遍历爬取到的数据</span></span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(数据列表) <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--将数据逐个取出，累加进字符串进行显示</span></span><br><span class="line">      标题 =标题.. <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&#x27;标题%d：%s&#x27;</span>,k,v.title)..<span class="string">&#x27;n&#x27;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--设置文本显示，显示爬取效果</span></span><br><span class="line">    文本.setText(标题)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    文本.setText(<span class="string">&#x27;获取内容失败&#x27;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>正则使用</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E6%AD%A3%E5%88%99%E4%BD%BF%E7%94%A8-2021-11-07%2023:02:35/</url>
    <content><![CDATA[<h1>正则使用</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">.(点): 与任何字符配对</span><br><span class="line">%a: 与任何字母配对</span><br><span class="line">%c: 与任何控制符配对(例如n)</span><br><span class="line">%d: 与任何数字配对</span><br><span class="line">%l: 与任何小写字母配对</span><br><span class="line">%p: 与任何标点(punctuation)配对</span><br><span class="line">%s: 与空白字符配对</span><br><span class="line">%u: 与任何大写字母配对</span><br><span class="line">%w: 与任何字母/数字配对</span><br><span class="line">%x: 与任何十六进制数配对</span><br><span class="line">%z: 与任何代表<span class="number">0</span>的字符配对</span><br><span class="line">%x(此处x是非字母非数字字符): 与字符x配对. 主要用来处理表达式中有功能的字符(^()%.[]*+-?)的配对问题, 例如%%与%配对[数个字符类]: 与任何[]中包含的字符类配对. 例如[%w_]与任何字母/数字, 或下划线符号(_)配对[^数个字符类]: 与任何不包含在[]中的字符类配对. 例如[^%s]与任何非空白字符配对</span><br><span class="line"></span><br><span class="line">当上述的字符类用大写书写时, 表示与非此字符类的任何字符配对. 例如, %S表示与任何非空白字符配对.</span><br><span class="line"></span><br><span class="line">%a  星期简写</span><br><span class="line">%A  星期大写</span><br><span class="line">%b  月份简写</span><br><span class="line">%B  月份大写</span><br><span class="line">%c  日期时间</span><br><span class="line">%d  月份天数</span><br><span class="line">%H  小时[<span class="number">24</span>进制]</span><br><span class="line">%I  小时[<span class="number">12</span>进制]</span><br><span class="line">%j  年中第几天</span><br><span class="line">%m  月份</span><br><span class="line">%M 分钟</span><br><span class="line">%p  am或pm</span><br><span class="line">%S  秒数</span><br><span class="line">%w  星期</span><br><span class="line">%W  第几周</span><br><span class="line">%x  日期</span><br><span class="line">%X  时间</span><br><span class="line">%y  两位数的月份</span><br><span class="line">%Y 完整的月份</span><br><span class="line">%z  时区</span><br><span class="line">%% 百分号</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%c - 接受一个数字, 并将其转化为ASCII码表中对应的字符</span><br><span class="line">%d, %i - 接受一个数字并将其转化为有符号的整数格式</span><br><span class="line">%o - 接受一个数字并将其转化为八进制数格式</span><br><span class="line">%u - 接受一个数字并将其转化为无符号整数格式</span><br><span class="line">%x - 接受一个数字并将其转化为十六进制数格式, 使用小写字母</span><br><span class="line">%X - 接受一个数字并将其转化为十六进制数格式, 使用大写字母</span><br><span class="line">%e - 接受一个数字并将其转化为科学记数法格式, 使用小写字母e</span><br><span class="line">%E - 接受一个数字并将其转化为科学记数法格式, 使用大写字母E</span><br><span class="line">%f - 接受一个数字并将其转化为浮点数格式</span><br><span class="line">%g(%G) - 接受一个数字并将其转化为%e(%E, 对应%G)及%f中较短的一种格式</span><br><span class="line">%q - 接受一个字符串并将其转化为可安全被Lua编译器读入的格式</span><br><span class="line">%s - 接受一个字符串并按照给定的参数格式化该字符串</span><br><span class="line">为进一步细化格式, 可以在%号后添加参数. 参数将以如下的顺序读入:</span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>) 符号: 一个+号表示其后的数字转义符将让正数显示正号. 默认情况下只有负数显示符号.</span><br><span class="line">(<span class="number">2</span>) 占位符: 一个<span class="number">0</span>, 在后面指定了字串宽度时占位用. 不填时的默认占位符是空格.</span><br><span class="line">(<span class="number">3</span>) 对齐标识: 在指定了字串宽度时, 默认为右对齐, 增加-号可以改为左对齐.</span><br><span class="line">(<span class="number">4</span>) 宽度数值</span><br><span class="line">(<span class="number">5</span>) 小数位数/字串裁切: 在宽度数值后增加的小数部分n, 若后接f(浮点数转义符, 如%<span class="number">6.3</span>f)则设定该浮点数的小数只保留n位, 若后接s(字符串转义符, 如%<span class="number">5.3</span>s)则设定该字符串只显示前n位.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">实例</span><br><span class="line">string1 = <span class="string">&quot;Lua&quot;</span></span><br><span class="line">string2 = <span class="string">&quot;Tutorial&quot;</span></span><br><span class="line">number1 = <span class="number">10</span></span><br><span class="line">number2 = <span class="number">20</span></span><br><span class="line"><span class="comment">-- 基本字符串格式化</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;基本格式化 %s %s&quot;</span>,string1,string2))</span><br><span class="line"><span class="comment">-- 日期格式化</span></span><br><span class="line"><span class="built_in">date</span> = <span class="number">2</span>; month = <span class="number">1</span>; year = <span class="number">2014</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;日期格式化 %02d/%02d/%03d&quot;</span>, <span class="built_in">date</span>, month, year))</span><br><span class="line"><span class="comment">-- 十进制格式化</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.4f&quot;</span>,<span class="number">1</span>/<span class="number">3</span>))</span><br><span class="line">以上代码执行结果为：</span><br><span class="line"></span><br><span class="line">基本格式化 Lua Tutorial</span><br><span class="line">日期格式化 <span class="number">02</span>/<span class="number">01</span>/<span class="number">2014</span></span><br><span class="line"><span class="number">0.3333</span></span><br><span class="line">其他例子：</span><br><span class="line"></span><br><span class="line">实例</span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%c&quot;</span>, <span class="number">83</span>)                 <span class="comment">-- 输出S</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%+d&quot;</span>, <span class="number">17.0</span>)              <span class="comment">-- 输出+17</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%05d&quot;</span>, <span class="number">17</span>)               <span class="comment">-- 输出00017</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%o&quot;</span>, <span class="number">17</span>)                 <span class="comment">-- 输出21</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%u&quot;</span>, <span class="number">3.14</span>)               <span class="comment">-- 输出3</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%x&quot;</span>, <span class="number">13</span>)                 <span class="comment">-- 输出d</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%X&quot;</span>, <span class="number">13</span>)                 <span class="comment">-- 输出D</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%e&quot;</span>, <span class="number">1000</span>)               <span class="comment">-- 输出1.000000e+03</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%E&quot;</span>, <span class="number">1000</span>)               <span class="comment">-- 输出1.000000E+03</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%6.3f&quot;</span>, <span class="number">13</span>)              <span class="comment">-- 输出13.000</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, <span class="string">&quot;OnenTwo&quot;</span>)         <span class="comment">-- 输出&quot;One</span></span><br><span class="line">                                        <span class="comment">-- 　　Two&quot;</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)           <span class="comment">-- 输出monkey</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%10s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)         <span class="comment">-- 输出    monkey</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%5.3s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)        <span class="comment">-- 输出  mon</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>爬取Fusion Club论坛实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E7%88%AC%E5%8F%96Fusion%20Club%E8%AE%BA%E5%9D%9B%E5%AE%9E%E6%88%98-2021-11-07%2023:03:48/</url>
    <content><![CDATA[<h1>爬取Fusion Club论坛实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--创建一个布局，为教程提供良好的可视化</span></span><br><span class="line"><span class="comment">--做一个爬虫，前期的分析网页工作需要做好</span></span><br><span class="line"><span class="comment">--明确目标，明白只需要哪些数据，以及如何处理数据</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">  &#123;</span><br><span class="line">    ScrollView;<span class="comment">--纵向滚动</span></span><br><span class="line">    layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--宽</span></span><br><span class="line">    layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--高</span></span><br><span class="line">    &#123;</span><br><span class="line">      TextView;<span class="comment">--文本控件</span></span><br><span class="line">      id=<span class="string">&#x27;显示文本&#x27;</span>;<span class="comment">--绑定ID</span></span><br><span class="line">      layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">      layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">      Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">      textColor=<span class="string">&#x27;#000000&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">      text=<span class="string">&#x27;爬取中...&#x27;</span>;<span class="comment">--显示的文本</span></span><br><span class="line">      textSize=<span class="string">&#x27;16sp&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--将布局添加至窗口</span></span><br><span class="line"></span><br><span class="line">url=<span class="string">&quot;https://yum5.cn&quot;</span><span class="comment">--论坛网址</span></span><br><span class="line"><span class="comment">--HTTP请求网页源码</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">  <span class="comment">--判断网站的访问情况</span></span><br><span class="line">  <span class="keyword">if</span> 状态码 == <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--获取到帖子标题数据</span></span><br><span class="line">    帖子标题迭代器 = 网页源码:<span class="built_in">gmatch</span>(<span class="string">&#x27;&lt;a href=&quot;thread.-htm&quot;&gt;(.-)&lt;/a&gt;&#x27;</span>)</span><br><span class="line">    <span class="comment">--创建帖子标题表</span></span><br><span class="line">    帖子标题 = &#123;&#125;</span><br><span class="line">    <span class="comment">--遍历帖子标题数据，将数据存入表</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> 帖子标题迭代器 <span class="keyword">do</span></span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">insert</span>(帖子标题,i)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--获取帖子链接数据</span></span><br><span class="line">    帖子链接迭代器 = 网页源码:<span class="built_in">gmatch</span>(<span class="string">&#x27;&lt;a href=&quot;(thread.-htm)&quot;&gt;.-&lt;/a&gt;&#x27;</span>)</span><br><span class="line">    <span class="comment">--创建帖子链接表</span></span><br><span class="line">    帖子链接 = &#123;&#125;</span><br><span class="line">    <span class="comment">--遍历帖子链接数据，将其存入表</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> 帖子链接迭代器 <span class="keyword">do</span></span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">insert</span>(帖子链接,i)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--定义一个空字符串，后面将数据展示到布局</span></span><br><span class="line">    爬取内容 = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="comment">--遍历所有数据</span></span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,#帖子标题 <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--累加字符串，使显示效果良好</span></span><br><span class="line">      爬取内容 = 爬取内容..<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&#x27;帖子标题：%sn帖子链接：https://yum5.cn/%sn&#x27;</span>,帖子标题[i],帖子链接[i])</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--将数据显示</span></span><br><span class="line">    显示文本.setText(爬取内容)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    显示文本.setText(<span class="string">&#x27;网站无法访问&#x27;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>爬取ip与地理位置实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E7%88%AC%E5%8F%96ip%E4%B8%8E%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E5%AE%9E%E6%88%98-2021-11-07%2023:04:13/</url>
    <content><![CDATA[<h1>爬取ip与地理位置实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--创建布局，显示爬取效果</span></span><br><span class="line">shamrock=</span><br><span class="line"><span class="comment">--布局请写在这里</span></span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">  Gravity=<span class="string">&quot;center&quot;</span>;<span class="comment">--设置居中</span></span><br><span class="line">  &#123;</span><br><span class="line">    TextView;<span class="comment">--文本控件</span></span><br><span class="line">    id=<span class="string">&quot;显示文本&quot;</span>;<span class="comment">--绑定id</span></span><br><span class="line">    layout_width=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">    layout_height=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">    Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">    textColor=<span class="string">&#x27;#000000&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">    text=<span class="string">&#x27;正在查询中&#x27;</span>;<span class="comment">--显示的文本</span></span><br><span class="line">    textSize=<span class="string">&#x27;16sp&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--将布局添加至窗口</span></span><br><span class="line">url=<span class="string">&quot;https://ip.cn/&quot;</span><span class="comment">--设置爬取链接</span></span><br><span class="line"><span class="comment">--设置爬取请求头</span></span><br><span class="line">header=&#123;</span><br><span class="line">  [<span class="string">&quot;User-Agent&quot;</span>]= <span class="string">&quot;Mozilla/5.0 (Linux; U; Android 2.3.7; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">--请求网页源码</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&quot;utf8&quot;</span>,header,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">  <span class="comment">--判断网站状态</span></span><br><span class="line">  <span class="keyword">if</span> 状态码==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--根据网页，分析出筛选规则</span></span><br><span class="line">    ip地址=网页源码:<span class="built_in">match</span>(<span class="string">&#x27;您现在的 IP：&lt;code&gt;(.-)&lt;/code&gt;&#x27;</span>)</span><br><span class="line">    地理位置=网页源码:<span class="built_in">match</span>(<span class="string">&#x27;所在地理位置：&lt;code&gt;(.-)&lt;/code&gt;&#x27;</span>)</span><br><span class="line">    <span class="comment">--设置文本进行显示</span></span><br><span class="line">    文本=<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;您现在的 IP：%sn您所在地理位置：%s&quot;</span>,ip地址,地理位置)</span><br><span class="line">    显示文本.setText(文本)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    显示文本.setText(<span class="string">&quot;网站无法访问&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>爬取必应壁纸实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E7%88%AC%E5%8F%96%E5%BF%85%E5%BA%94%E5%A3%81%E7%BA%B8%E5%AE%9E%E6%88%98-2021-11-07%2023:04:39/</url>
    <content><![CDATA[<h1>爬取必应壁纸实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--创建布局，用于显示爬取的图片</span></span><br><span class="line"><span class="comment">--由于考虑到学习成本的问题，所以我没有用适配器写图片展示</span></span><br><span class="line"><span class="comment">--用了较简单的循环添加布局</span></span><br><span class="line"><span class="comment">--提示:图片爬虫显示较吃性能，所以本教程可能导致程序闪退。</span></span><br><span class="line"><span class="comment">--由于网站和循环布局原因，所以爬取会比较慢，请耐心等待。</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">  &#123;</span><br><span class="line">    ScrollView;<span class="comment">--纵向滚动</span></span><br><span class="line">    layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--宽</span></span><br><span class="line">    layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--高</span></span><br><span class="line">    &#123;</span><br><span class="line">      LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">      id=<span class="string">&quot;壁纸&quot;</span>;<span class="comment">--绑定ID</span></span><br><span class="line">      Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">      layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">      layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">      background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--将布局添加至窗口</span></span><br><span class="line"><span class="comment">--创建等待窗口提示</span></span><br><span class="line">dialog3 = ProgressDialog.show(this, <span class="string">&quot;提示&quot;</span>, <span class="string">&quot;正在爬取中&quot;</span>,<span class="literal">false</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="comment">--将等待窗口美化(设置圆角)</span></span><br><span class="line">import <span class="string">&quot;android.graphics.drawable.GradientDrawable&quot;</span></span><br><span class="line"><span class="keyword">local</span> radiu=<span class="number">25</span></span><br><span class="line">dialog3.getWindow().setBackgroundDrawable(GradientDrawable().setCornerRadii(&#123;radiu,radiu,radiu,radiu,radiu,radiu,radiu,radiu&#125;).setColor(<span class="number">0xffffffff</span>))</span><br><span class="line"><span class="comment">--定义爬取链接</span></span><br><span class="line">url=<span class="string">&quot;https://bing.ioliu.cn/&quot;</span></span><br><span class="line"><span class="comment">--Http请求源码</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&quot;utf8&quot;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">  <span class="comment">--等待窗口隐藏</span></span><br><span class="line">  dialog3.hide()</span><br><span class="line">  <span class="comment">--判断状态码，确认网站可访问</span></span><br><span class="line">  <span class="keyword">if</span> 状态码==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--筛选图片链接数据</span></span><br><span class="line">    图片链接迭代器=网页源码:<span class="built_in">gmatch</span>(<span class="string">&#x27;src=&quot;(https://h1.ioliu.cn/bing/.-jpg)&quot;&#x27;</span>)</span><br><span class="line">    <span class="comment">--创建图片链接表，用于存储抓取到的图片链接</span></span><br><span class="line">    图片链接=&#123;&#125;</span><br><span class="line">    <span class="comment">--迭代抓取到的图片链接</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> 图片链接迭代器 <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--将图片链接存入表中</span></span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">insert</span>(图片链接,i)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--遍历图片链接表</span></span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(图片链接) <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--创建布局，用于显示每一张图片</span></span><br><span class="line">      单张壁纸=&#123;</span><br><span class="line">        LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">        Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">        layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">        layout_height=<span class="string">&#x27;50%w&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">        background=<span class="string">&#x27;&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">        Gravity=<span class="string">&quot;center&quot;</span>;</span><br><span class="line">        &#123;</span><br><span class="line">          CardView;<span class="comment">--卡片控件</span></span><br><span class="line">          layout_margin=<span class="string">&#x27;10&#x27;</span>;<span class="comment">--卡片边距</span></span><br><span class="line">          layout_gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">          Elevation=<span class="string">&#x27;0&#x27;</span>;<span class="comment">--阴影属性</span></span><br><span class="line">          layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--卡片宽度</span></span><br><span class="line">          layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--卡片高度</span></span><br><span class="line">          radius=<span class="string">&#x27;20&#x27;</span>;<span class="comment">--卡片圆角</span></span><br><span class="line">          CardBackgroundColor=<span class="string">&#x27;&#x27;</span>;<span class="comment">--卡片背景颜色</span></span><br><span class="line">          &#123;</span><br><span class="line">            ImageView;<span class="comment">--图片控件</span></span><br><span class="line">            id=<span class="string">&quot;图片&quot;</span>;</span><br><span class="line">            src=<span class="string">&quot;&quot;</span>;<span class="comment">--图片路径</span></span><br><span class="line">            layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--图片宽度</span></span><br><span class="line">            layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--图片高度</span></span><br><span class="line">            layout_gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="comment">--将布局添加至主布局</span></span><br><span class="line">      壁纸.addView(loadlayout(单张壁纸))</span><br><span class="line">      <span class="comment">--设置在线图片显示</span></span><br><span class="line">      图片.setImageBitmap(LuaBitmap.getHttpBitmap(v))</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;无法访问&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>爬取网页分类实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%E5%88%86%E7%B1%BB%E5%AE%9E%E6%88%98-2021-11-07%2023:04:59/</url>
    <content><![CDATA[<h1>爬取网页分类实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--首先创建一个布局，为教程提供良好的可视化</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">  Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--设置居中</span></span><br><span class="line">  &#123;</span><br><span class="line">    TextView;<span class="comment">--文本控件</span></span><br><span class="line">    id=<span class="string">&#x27;文本&#x27;</span>;<span class="comment">--绑定ID</span></span><br><span class="line">    layout_margin=<span class="string">&#x27;5%w&#x27;</span>;<span class="comment">--布局外边距</span></span><br><span class="line">    layout_width=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">    layout_height=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">    Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">    textColor=<span class="string">&#x27;#000000&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">    text=<span class="string">&#x27;爬取内容中&#x27;</span>;<span class="comment">--显示的文本</span></span><br><span class="line">    textSize=<span class="string">&#x27;18sp&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))</span><br><span class="line"><span class="comment">--设置需要爬取的网站，可以随意更换</span></span><br><span class="line">url = <span class="string">&#x27;http://dh.hfybbs.vip/cn/index.html&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用Http访问该网站，获取网页源码</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">  <span class="comment">--判断返回状态码，确定网站的正常运行</span></span><br><span class="line">  <span class="keyword">if</span> 状态码 ==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--分析网页源码，使用gmatch筛选出所有符合条件的内容，gamtch返回的是迭代器</span></span><br><span class="line">    网页框架 = 网页源码:<span class="built_in">gmatch</span>(<span class="string">&#x27;&lt;ul.-&gt;(.-)&lt;/ul&gt;&#x27;</span>)</span><br><span class="line">    <span class="comment">--定义一个空表，用来存储获取的网页数据</span></span><br><span class="line">    网页框架表 = &#123;&#125;</span><br><span class="line">    <span class="comment">--将gmatch函数返回的迭代器进行遍历，取出数据，然后存进网页框架表表</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> 网页框架 <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--判断是否可以筛选需要爬取的内容，可以才存放进网页框架表</span></span><br><span class="line">      <span class="keyword">if</span> i:<span class="built_in">match</span>(<span class="string">&#x27;&lt;span.-&gt;(.-)&lt;/span&gt;&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(网页框架表,i:<span class="built_in">match</span>(<span class="string">&#x27;&lt;span.-&gt;(.-)&lt;/span&gt;&#x27;</span>))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--定义一个空字符串，用于显示效果</span></span><br><span class="line">    显示文本 = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="comment">--遍历表，将爬取到的数据取出</span></span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(网页框架表) <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--累加文本，将表内数据形成可视化</span></span><br><span class="line">      显示文本=显示文本..<span class="string">&#x27;n&#x27;</span>..<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&#x27;分类%d：%s&#x27;</span>,k,v)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--设置文本显示，显示爬取效果</span></span><br><span class="line">    文本.setText(显示文本)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    文本.setText(<span class="string">&#x27;获取内容失败&#x27;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>打印</title>
    <url>/2021/11/07/AndroLuax+%E5%9F%BA%E7%A1%80/%E6%89%93%E5%8D%B0-2021-11-07%2020:59:52/</url>
    <content><![CDATA[<h1>打印</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span><span class="string">&quot;Hello World！&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>AndroLuax+基础</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>翻页爬取论坛实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E7%BF%BB%E9%A1%B5%E7%88%AC%E5%8F%96%E8%AE%BA%E5%9D%9B%E5%AE%9E%E6%88%98-2021-11-07%2023:05:21/</url>
    <content><![CDATA[<h1>翻页爬取论坛实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--创建布局，用于显示爬取效果</span></span><br><span class="line"><span class="comment">--翻页爬取的思路是：</span></span><br><span class="line"><span class="comment">--获取网页的翻页所有链接，然后循环请求爬取</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">  &#123;</span><br><span class="line">    ScrollView;<span class="comment">--纵向滚动</span></span><br><span class="line">    layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--宽</span></span><br><span class="line">    layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--高</span></span><br><span class="line">    &#123;</span><br><span class="line">      TextView;<span class="comment">--文本控件</span></span><br><span class="line">      id=<span class="string">&#x27;显示文本&#x27;</span>;<span class="comment">--绑定ID</span></span><br><span class="line">      layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">      layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">      Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">      textColor=<span class="string">&#x27;#000000&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">      text=<span class="string">&#x27;正在爬取中&#x27;</span>;<span class="comment">--显示的文本</span></span><br><span class="line">      textSize=<span class="string">&#x27;16sp&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--将布局添加至窗口</span></span><br><span class="line"><span class="comment">--定义爬取翻页链接的网址</span></span><br><span class="line">url = <span class="string">&#x27;https://yum5.cn&#x27;</span></span><br><span class="line"><span class="comment">--请求链接</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">  <span class="comment">--判断网站状态</span></span><br><span class="line">  <span class="keyword">if</span> 状态码 == <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--获取所有页数链接</span></span><br><span class="line">    页数迭代器 = 网页源码:<span class="built_in">gmatch</span>(<span class="string">&#x27;&lt;a href=&quot;index.-htm&quot; class=&quot;page.-&quot;&gt;(.-)&lt;/a&gt;&#x27;</span>)</span><br><span class="line">    <span class="comment">--新建表，存放爬取数据</span></span><br><span class="line">    页数=&#123;&#125;</span><br><span class="line">    <span class="comment">--迭代页数迭代器，将数据存入表</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> 页数迭代器 <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--这里筛选数字，因为部分数据是杂乱的</span></span><br><span class="line">      <span class="keyword">if</span> i:<span class="built_in">find</span>(<span class="string">&#x27;%d&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">table</span>.<span class="built_in">insert</span>(页数,i:<span class="built_in">match</span>(<span class="string">&#x27;(%d.*)&#x27;</span>))</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">--获取到页数</span></span><br><span class="line">    末尾页数 = tointeger(页数[#页数])</span><br><span class="line">    <span class="comment">--新建表，存放帖子标题</span></span><br><span class="line">    帖子标题 = &#123;&#125;</span><br><span class="line">    <span class="comment">--循环页数</span></span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,末尾页数 <span class="keyword">do</span></span><br><span class="line">      <span class="comment">--将页数拼接进链接</span></span><br><span class="line">      url = <span class="string">&#x27;https://yum5.cn/index-&#x27;</span>..i..<span class="string">&#x27;.htm&#x27;</span></span><br><span class="line">      <span class="comment">--请求网页</span></span><br><span class="line">      Http.get(url,<span class="literal">nil</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">        <span class="comment">--判断网站状态</span></span><br><span class="line">        <span class="keyword">if</span> 状态码 == <span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">          <span class="comment">--显示当前爬取页数</span></span><br><span class="line">          <span class="built_in">table</span>.<span class="built_in">insert</span>(帖子标题,<span class="string">&#x27;第&#x27;</span>..i..<span class="string">&#x27;页:nn&#x27;</span>)</span><br><span class="line">          <span class="comment">--爬取帖子标题信息</span></span><br><span class="line">          帖子标题迭代器 = 网页源码:<span class="built_in">gmatch</span>(<span class="string">&#x27;&lt;a href=&quot;thread.-htm&quot;&gt;(.-)&lt;/a&gt;&#x27;</span>)</span><br><span class="line">          <span class="comment">--迭代帖子标题迭代器，将数据存入表</span></span><br><span class="line">          <span class="keyword">for</span> v <span class="keyword">in</span> 帖子标题迭代器 <span class="keyword">do</span></span><br><span class="line">            <span class="built_in">table</span>.<span class="built_in">insert</span>(帖子标题,v)</span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">          <span class="comment">--定义空文本，用于显示数据</span></span><br><span class="line">          文本=<span class="string">&#x27;&#x27;</span></span><br><span class="line">          <span class="comment">--遍历表，取出数据</span></span><br><span class="line">          <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(帖子标题) <span class="keyword">do</span></span><br><span class="line">            <span class="comment">--将数据文本累加</span></span><br><span class="line">            文本=文本..k..<span class="string">&#x27;：&#x27;</span>..v..<span class="string">&#x27;n&#x27;</span></span><br><span class="line">          <span class="keyword">end</span></span><br><span class="line">          <span class="comment">--展示数据</span></span><br><span class="line">          显示文本.setText(文本)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          显示文本.setText(<span class="string">&#x27;无法访问&#x27;</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">      <span class="keyword">end</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    显示文本.setText(<span class="string">&#x27;无法访问&#x27;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>获取网页标题实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E8%8E%B7%E5%8F%96%E7%BD%91%E9%A1%B5%E6%A0%87%E9%A2%98%E5%AE%9E%E6%88%98-2021-11-07%2023:05:40/</url>
    <content><![CDATA[<h1>获取网页标题实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--首先创建一个布局，为教程提供良好的可视化</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或者图片路径)</span></span><br><span class="line">  Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--设置居中</span></span><br><span class="line">  &#123;</span><br><span class="line">    TextView;<span class="comment">--文本控件</span></span><br><span class="line">    id=<span class="string">&#x27;文本&#x27;</span>;<span class="comment">--绑定ID</span></span><br><span class="line">    layout_margin=<span class="string">&#x27;5%w&#x27;</span>;<span class="comment">--布局外边距</span></span><br><span class="line">    layout_width=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">    layout_height=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">    Gravity=<span class="string">&#x27;center&#x27;</span>;<span class="comment">--重力属性</span></span><br><span class="line">    textColor=<span class="string">&#x27;#000000&#x27;</span>;<span class="comment">--文本颜色</span></span><br><span class="line">    text=<span class="string">&#x27;查询网站标题中&#x27;</span>;<span class="comment">--显示的文本</span></span><br><span class="line">    textSize=<span class="string">&#x27;18sp&#x27;</span>;<span class="comment">--文本大小</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))</span><br><span class="line"><span class="comment">--设置需要爬取的网站，可以随意更换</span></span><br><span class="line">url = <span class="string">&#x27;http://dh.hfybbs.vip&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--使用Http访问该网站，获取网页源码</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&#x27;utf8&#x27;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(状态码,网页源码)</span></span></span><br><span class="line">  <span class="comment">--判断返回状态码，确定网站的正常运行</span></span><br><span class="line">  <span class="keyword">if</span> 状态码 ==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--分析网页结构，发现标题在title标签内，所以进行截取</span></span><br><span class="line">    title = 网页源码:<span class="built_in">match</span>(<span class="string">&#x27;&lt;title&gt;(.-)&lt;/title&gt;&#x27;</span>)</span><br><span class="line">    <span class="comment">--将截取到的标题设置至文本显示</span></span><br><span class="line">    文本.setText(title)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    文本.setText(<span class="string">&#x27;该网站无法访问&#x27;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>讯飞远程更新实战</title>
    <url>/2021/11/07/%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/%E8%AE%AF%E9%A3%9E%E8%BF%9C%E7%A8%8B%E6%9B%B4%E6%96%B0%E5%AE%9E%E6%88%98-2021-11-07%2023:06:02/</url>
    <content><![CDATA[<h1>讯飞远程更新实战</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">很多同学似乎还不会远程更新，其实所谓讯飞远程更新也就是爬虫的</span></span><br><span class="line"><span class="comment">一种运用方式，结合前面所学和查看下面的链接的网页结构</span></span><br><span class="line"><span class="comment">你就能写出属于你的远程更新。</span></span><br><span class="line"><span class="comment">]]</span></span><br><span class="line">SorrowClover=<span class="comment">--随便写的一个布局，没有任何意义。</span></span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(SorrowClover))<span class="comment">--显示布局</span></span><br><span class="line"><span class="comment">--定义一个你的讯飞远程链接</span></span><br><span class="line"><span class="comment">--可以复制到浏览器看看网页结构</span></span><br><span class="line">url=<span class="string">&quot;http://www.iyuji.cn/iyuji/s/akc1ZDNSKyt5RW9nUlA3MW5CNzJ1UT09/1562658886677508&quot;</span></span><br><span class="line"><span class="comment">--使用http获取网页源码</span></span><br><span class="line">Http.get(url,<span class="literal">nil</span>,<span class="string">&quot;utf8&quot;</span>,<span class="literal">nil</span>,<span class="function"><span class="keyword">function</span><span class="params">(code,content)</span></span></span><br><span class="line">  <span class="comment">--判断网页状态 </span></span><br><span class="line">  <span class="keyword">if</span> code==<span class="number">200</span> <span class="keyword">then</span></span><br><span class="line">    <span class="comment">--获取当前应用包名</span></span><br><span class="line">    包名=activity.getPackageName()</span><br><span class="line">    <span class="comment">--利用包名获取到当前版本号</span></span><br><span class="line">    当前版本=<span class="built_in">tonumber</span>(activity.getPackageManager().getPackageInfo(包名, <span class="number">0</span>).versionName)</span><br><span class="line">    <span class="comment">--获取远程更新版本号</span></span><br><span class="line">    更新版本=<span class="built_in">tonumber</span>(content:<span class="built_in">match</span>(<span class="string">&quot;【版本】(.-)【版本】&quot;</span>))</span><br><span class="line">    <span class="comment">--比较版本号</span></span><br><span class="line">    <span class="keyword">if</span> 更新版本 &gt; 当前版本 <span class="keyword">then</span></span><br><span class="line">      <span class="comment">--制作对话框，显示更新提示</span></span><br><span class="line">      更新说明=content:<span class="built_in">match</span>(<span class="string">&quot;【更新说明】(.-)【更新说明】&quot;</span>)</span><br><span class="line">      更新链接=content:<span class="built_in">match</span>(<span class="string">&quot;【更新链接】(.-)【更新链接】&quot;</span>)</span><br><span class="line">      AlertDialog.Builder(this)</span><br><span class="line">      .setTitle(<span class="string">&quot;你有新版本更新&quot;</span>)</span><br><span class="line">      .setMessage(更新说明)</span><br><span class="line">      .setPositiveButton(<span class="string">&quot;更新&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">          import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">          import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">          url=更新链接</span><br><span class="line">          viewIntent = Intent(<span class="string">&quot;android.intent.action.VIEW&quot;</span>,Uri.parse(url))</span><br><span class="line">          activity.startActivity(viewIntent)</span><br><span class="line">        <span class="keyword">end</span>&#125;)</span><br><span class="line">      .setNegativeButton(<span class="string">&quot;取消&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">      .show()</span><br><span class="line">      <span class="comment">--判断正版软件</span></span><br><span class="line">    <span class="keyword">elseif</span> 更新版本 &lt; 当前版本 <span class="keyword">then</span></span><br><span class="line">      更新链接=content:<span class="built_in">match</span>(<span class="string">&quot;【更新链接】(.-)【更新链接】&quot;</span>)</span><br><span class="line">      AlertDialog.Builder(this)</span><br><span class="line">      .setTitle(<span class="string">&quot;非正版警告&quot;</span>)</span><br><span class="line">      .setMessage(<span class="string">&quot;你的软件版本远远高于正式版，被人非法修改，属于盗版行为，请支持正版！&quot;</span>)</span><br><span class="line">      .setPositiveButton(<span class="string">&quot;下载正版&quot;</span>,&#123;onClick=<span class="function"><span class="keyword">function</span><span class="params">(v)</span></span></span><br><span class="line">          import <span class="string">&quot;android.content.Intent&quot;</span></span><br><span class="line">          import <span class="string">&quot;android.net.Uri&quot;</span></span><br><span class="line">          url=更新链接</span><br><span class="line">          viewIntent = Intent(<span class="string">&quot;android.intent.action.VIEW&quot;</span>,Uri.parse(url))</span><br><span class="line">          activity.startActivity(viewIntent)</span><br><span class="line">        <span class="keyword">end</span>&#125;)</span><br><span class="line">      .setNegativeButton(<span class="string">&quot;取消&quot;</span>,<span class="literal">nil</span>)</span><br><span class="line">      .show()</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;已是最新版本&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;检测更新失败&quot;</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>爬虫教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>仿微信加载动态绘制</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E4%BB%BF%E5%BE%AE%E4%BF%A1%E5%8A%A0%E8%BD%BD%E5%8A%A8%E6%80%81%E7%BB%98%E5%88%B6-2021-11-08%2013:15:52/</url>
    <content><![CDATA[<h1>仿微信加载动态绘制</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&#x27;android.graphics.Color&#x27;</span></span><br><span class="line">import <span class="string">&#x27;android.graphics.RectF&#x27;</span></span><br><span class="line">SorrowClover=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">background=<span class="string">&#x27;#ffffff&#x27;</span>;<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">gravity=<span class="string">&#x27;center&#x27;</span>;</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">layout_width=<span class="string">&#x27;100dp&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;100dp&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;dra&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(SorrowClover))</span><br><span class="line"><span class="function"><span class="keyword">function</span> 绘制<span class="params">(角度)</span></span></span><br><span class="line">dra.setBackgroundDrawable(LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(canvs,paint,draw)</span></span></span><br><span class="line">paint.setAntiAlias(<span class="literal">true</span>)</span><br><span class="line">paint.setColor(Color.BLUE)</span><br><span class="line">canvs.drawArc(RectF(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>),<span class="number">180</span>,角度,<span class="literal">true</span>,paint)</span><br><span class="line">draw.invalidateSelf()</span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">0</span>,<span class="number">360</span> <span class="keyword">do</span></span><br><span class="line">task(<span class="number">10</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">绘制(i)</span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>游戏摇杆</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E6%B8%B8%E6%88%8F%E6%91%87%E6%9D%86-2021-11-08%2013:20:11/</url>
    <content><![CDATA[<h1>游戏摇杆</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;import&quot;</span></span><br><span class="line">import <span class="string">&quot;android.app.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.os.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.widget.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.view.*&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.*&quot;</span></span><br><span class="line"><span class="comment">--activity.setTitle(&#x27;AndroLua+&#x27;)</span></span><br><span class="line"><span class="comment">--activity.setTheme(android.R.style.Theme_Holo_Light)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--@名字isABane 2737420368</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">布局=&#123;</span><br><span class="line">  FrameLayout,</span><br><span class="line">  layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  id=<span class="string">&quot;底层&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    View,</span><br><span class="line">    layout_width=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">    layout_height=<span class="string">&quot;fill&quot;</span>,</span><br><span class="line">    id=<span class="string">&quot;图层&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    TextView;<span class="comment">--文本控件</span></span><br><span class="line">    layout_width=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本宽度</span></span><br><span class="line">    layout_height=<span class="string">&#x27;wrap&#x27;</span>;<span class="comment">--文本高度</span></span><br><span class="line">    textColor=<span class="string">&#x27;#FF000000&#x27;</span>;<span class="comment">--文字颜色</span></span><br><span class="line">    text=<span class="string">&#x27;&#x27;</span>;<span class="comment">--显示的文字</span></span><br><span class="line">    textSize=<span class="string">&#x27;30&#x27;</span>;<span class="comment">--文字大小</span></span><br><span class="line">    id=<span class="string">&quot;文字&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">activity.setContentView(loadlayout(布局))</span><br><span class="line"></span><br><span class="line">data=[<span class="number">500</span>,<span class="number">1000</span>,<span class="comment">--点击坐标 建议初始一个位置</span></span><br><span class="line"><span class="literal">nil</span>,<span class="number">0</span>,<span class="comment">--滑动坐标</span></span><br><span class="line"><span class="number">0</span>,<span class="number">0</span>,<span class="comment">--松开坐标</span></span><br><span class="line"><span class="number">0</span>,<span class="number">0</span>,<span class="comment">--mCanvas画布坐标</span></span><br><span class="line"><span class="number">1</span>,<span class="number">1</span>,<span class="comment">--mCanvas画布方法缩小</span></span><br><span class="line"><span class="number">5</span>,<span class="comment">--圈线粗细</span></span><br><span class="line"><span class="number">150</span>,<span class="comment">--摇杆外圈半径</span></span><br><span class="line"><span class="number">50</span>,<span class="comment">--摇杆大小</span></span><br><span class="line"><span class="number">0</span>,<span class="number">0</span>,<span class="comment">--按钮在外圈坐标 --14.15</span></span><br><span class="line"><span class="number">170</span>,<span class="comment">--摇杆最外圈</span></span><br><span class="line"><span class="number">2</span>,<span class="comment">--设置模式 1 摇杆在松手后回归指定位置 2 摇杆停在松手位置 3 摇杆停在点击位置</span></span><br><span class="line"><span class="number">300</span>,<span class="number">500</span>,<span class="comment">--摇杆回归指定位置 18 19</span></span><br><span class="line"><span class="literal">nil</span>,<span class="comment">--只能与模式1 2混合用 存在则 只有点击到摇杆内部才能启动摇杆 不存在 则摇杆跟随且直接启动</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">图层.setBackground(LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(mCanvas,mPaint,mDrawable)</span></span><span class="comment">--框选绘制</span></span><br><span class="line">  mPaint=Paint();</span><br><span class="line">  mPaint.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔</span></span><br><span class="line">  mPaint.setStyle(Paint.Style.STROKE);<span class="comment">--画线画法</span></span><br><span class="line">  mPaint.setStrokeWidth(data[<span class="number">11</span>])<span class="comment">--设置粗细</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">--mPaint.setAntiAlias(true)--抗锯齿</span></span><br><span class="line">  <span class="comment">--mPaint.setDither(true)--: 设定是否使用图像抖动处理，会使绘制出来的图片颜色更加平滑和饱满，图像更加清晰</span></span><br><span class="line">  画笔=Paint();</span><br><span class="line">  画笔.setColor(<span class="number">0xffff0000</span>)<span class="comment">--设置画笔</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(mCanvas)</span></span></span><br><span class="line">    <span class="comment">--Thread.sleep(16)</span></span><br><span class="line">    mCanvas.translate(data[<span class="number">7</span>],data[<span class="number">8</span>])<span class="comment">--画布偏移</span></span><br><span class="line">    mCanvas.scale(data[<span class="number">9</span>],data[<span class="number">10</span>])<span class="comment">--画布扩缩</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> data[<span class="number">3</span>] <span class="keyword">then</span><span class="comment">--滑动后绘制</span></span><br><span class="line">      mCanvas.drawCircle(data[<span class="number">14</span>],data[<span class="number">15</span>],data[<span class="number">13</span>],mPaint)<span class="comment">--摇杆按钮</span></span><br><span class="line">      mCanvas.drawLine(data[<span class="number">1</span>],data[<span class="number">2</span>],data[<span class="number">14</span>],data[<span class="number">15</span>],mPaint)<span class="comment">--摇杆连线</span></span><br><span class="line">      mCanvas.drawCircle(data[<span class="number">1</span>],data[<span class="number">2</span>],data[<span class="number">12</span>],mPaint)<span class="comment">--摇杆外圈</span></span><br><span class="line">      mCanvas.drawCircle(data[<span class="number">1</span>],data[<span class="number">2</span>],data[<span class="number">16</span>],mPaint)<span class="comment">--摇杆最外圈</span></span><br><span class="line"></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      mCanvas.drawCircle(data[<span class="number">1</span>],data[<span class="number">2</span>],data[<span class="number">13</span>],mPaint)<span class="comment">--静止摇杆按钮</span></span><br><span class="line">      mCanvas.drawCircle(data[<span class="number">1</span>],data[<span class="number">2</span>],data[<span class="number">12</span>],mPaint)<span class="comment">--摇杆外圈</span></span><br><span class="line">      mCanvas.drawCircle(data[<span class="number">1</span>],data[<span class="number">2</span>],data[<span class="number">16</span>],mPaint)<span class="comment">--摇杆最外圈</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    mDrawable.invalidateSelf()<span class="comment">--重新画图</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">底层.onTouch=<span class="function"><span class="keyword">function</span><span class="params">(v,event)</span></span><span class="comment">--手势滑动</span></span><br><span class="line">  <span class="comment">--文字.setText(tostring(event.getAction()))</span></span><br><span class="line">  <span class="keyword">if</span> event.getAction()==MotionEvent.ACTION_DOWN <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> data[<span class="number">20</span>] <span class="keyword">then</span><span class="comment">--用最外圈判断</span></span><br><span class="line">      <span class="keyword">if</span> data[<span class="number">16</span>]-两点间距离(data[<span class="number">1</span>],data[<span class="number">2</span>],event.getRawX(),event.getRawY()) &gt; <span class="number">0</span> <span class="keyword">then</span><span class="comment">--在圈内                     </span></span><br><span class="line">       <span class="keyword">else</span><span class="comment">--圈外      </span></span><br><span class="line">        <span class="keyword">if</span> data[<span class="number">17</span>]==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">          data[<span class="number">1</span>],data[<span class="number">2</span>]=data[<span class="number">18</span>],data[<span class="number">19</span>]</span><br><span class="line">         <span class="keyword">elseif</span> data[<span class="number">17</span>]==<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">          data[<span class="number">1</span>],data[<span class="number">2</span>]=event.getRawX(),event.getRawY()         </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">      data[<span class="number">1</span>] = event.getRawX()</span><br><span class="line">      data[<span class="number">2</span>] = event.getRawY()</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    x=event.getRawX()</span><br><span class="line">    y=event.getRawY()</span><br><span class="line">   <span class="keyword">elseif</span> event.getAction()==<span class="number">261</span> <span class="keyword">then</span><span class="comment">--多指点击 262有手撤出</span></span><br><span class="line">    <span class="comment">--获取第二个点击</span></span><br><span class="line">    ont=<span class="built_in">math</span>.<span class="built_in">abs</span>(y-event.getRawY(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">   <span class="keyword">elseif</span> event.getAction()==MotionEvent.ACTION_MOVE <span class="keyword">then</span><span class="comment">--手指有滑动行为</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> event.getPointerCount() &gt; <span class="number">1</span> <span class="keyword">then</span><span class="comment">--多指滑动</span></span><br><span class="line">      <span class="comment">--data[7]=data[7] + (event.getRawX() - x)</span></span><br><span class="line">      <span class="comment">--data[8]=data[8] + (event.getRawY() - y)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="keyword">else</span><span class="comment">--单指滑动</span></span><br><span class="line">      data[<span class="number">3</span>],data[<span class="number">4</span>] = 计算坐标函数(event.getRawX(),event.getRawY(),data[<span class="number">7</span>],data[<span class="number">8</span>],data[<span class="number">9</span>],data[<span class="number">10</span>])</span><br><span class="line">      data[<span class="number">14</span>],data[<span class="number">15</span>] = 计算(data[<span class="number">1</span>],data[<span class="number">2</span>],event.getRawX(),event.getRawY(),data[<span class="number">12</span>])<span class="comment">--cos(200,角度,data[1]),sin(200,角度,data[2])</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    文字.setText(event.getRawX()..<span class="string">&quot;n&quot;</span>..<span class="string">&quot;&quot;</span>..<span class="string">&quot;n&quot;</span>..<span class="string">&quot;&quot;</span>..<span class="string">&quot;n&quot;</span>..<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">elseif</span> event.getAction()==MotionEvent.ACTION_UP <span class="keyword">then</span><span class="comment">--手指抬起</span></span><br><span class="line">    data[<span class="number">5</span>] = (event.getRawX()-data[<span class="number">7</span>])*(<span class="number">1</span>/data[<span class="number">9</span>])</span><br><span class="line">    data[<span class="number">6</span>] = (event.getRawY()-data[<span class="number">8</span>])*(<span class="number">1</span>/data[<span class="number">10</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> data[<span class="number">17</span>]==<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">      data[<span class="number">1</span>],data[<span class="number">2</span>]=data[<span class="number">18</span>],data[<span class="number">19</span>]</span><br><span class="line">     <span class="keyword">elseif</span> data[<span class="number">17</span>]==<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">      data[<span class="number">1</span>],data[<span class="number">2</span>]=event.getRawX(),event.getRawY()</span><br><span class="line">     <span class="keyword">elseif</span> data[<span class="number">17</span>]==<span class="number">3</span> <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    data[<span class="number">3</span>]=<span class="literal">nil</span><span class="comment">--重置滑动判断</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 计算坐标函数<span class="params">(x,y,x2,y2,x3,y3)</span></span></span><br><span class="line">  <span class="comment">--x,y相对屏幕坐标</span></span><br><span class="line">  <span class="comment">--x2,y2相对屏幕画布偏移坐标</span></span><br><span class="line">  <span class="comment">--x3,y3画布x,y轴放大缩小倍数</span></span><br><span class="line">  <span class="keyword">return</span> (x-x2)/x3,(y-y2)/y3</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 计算<span class="params">(x,y,x1,y1,斜边)</span></span></span><br><span class="line">  <span class="keyword">local</span> k=(y-y1)/(x-x1)<span class="comment">--斜率</span></span><br><span class="line">  <span class="comment">-- local b=y-(x*k)</span></span><br><span class="line">  <span class="keyword">local</span> t=<span class="built_in">math</span>.<span class="built_in">atan</span>(k)<span class="comment">--弧度</span></span><br><span class="line">  <span class="keyword">if</span> x1-x &gt;<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    x2=斜边*<span class="built_in">math</span>.<span class="built_in">cos</span>(t)+x</span><br><span class="line">    y2=斜边*<span class="built_in">math</span>.<span class="built_in">sin</span>(t)+y</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    x2=x-斜边*<span class="built_in">math</span>.<span class="built_in">cos</span>(t)</span><br><span class="line">    y2=y-斜边*<span class="built_in">math</span>.<span class="built_in">sin</span>(t)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">return</span> x2,y2</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 两点间距离<span class="params">(x,y,x1,y1)</span></span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">math</span>.<span class="built_in">sqrt</span>( <span class="built_in">math</span>.<span class="built_in">pow</span>((x-x1),<span class="number">2</span>)+<span class="built_in">math</span>.<span class="built_in">pow</span>((y-y1),<span class="number">2</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制圆实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E5%9C%86%E5%AE%9E%E4%BE%8B-2021-11-08%2013:16:43/</url>
    <content><![CDATA[<h1>绘制圆实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔</span></span><br><span class="line">画布.drawCircle(<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,画笔)<span class="comment">--画布绘制圆</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制三角形</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E4%B8%89%E8%A7%92%E5%BD%A2-2021-11-08%2013:16:08/</url>
    <content><![CDATA[<h1>绘制三角形</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&#x27;android.graphics.Path&#x27;</span></span><br><span class="line">import <span class="string">&#x27;android.graphics.Paint&#x27;</span></span><br><span class="line">SorrowClover=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">BackgroundDrawable=LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(canvas,paint,draw)</span></span></span><br><span class="line">paint.setColor(<span class="number">0xff333333</span>)</span><br><span class="line">paint.setStyle(Paint.Style.STROKE)</span><br><span class="line">paint.setStrokeWidth(<span class="number">30</span>)</span><br><span class="line"><span class="built_in">path</span> = Path()</span><br><span class="line"><span class="built_in">path</span>.moveTo(<span class="number">100</span>,<span class="number">200</span>)</span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">200</span>,<span class="number">100</span>)</span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">300</span>,<span class="number">200</span>)</span><br><span class="line"><span class="built_in">path</span>.<span class="built_in">close</span>()</span><br><span class="line">canvas.drawPath(<span class="built_in">path</span>,paint)</span><br><span class="line"><span class="keyword">end</span>);<span class="comment">--布局背景颜色(或图片路径)</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(SorrowClover))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制圆角矩形实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E5%9C%86%E8%A7%92%E7%9F%A9%E5%BD%A2%E5%AE%9E%E4%BE%8B-2021-11-08%2013:16:58/</url>
    <content><![CDATA[<h1>绘制圆角矩形实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.RectF&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔</span></span><br><span class="line">画布.drawRoundRect(RectF(<span class="number">10</span>,<span class="number">10</span>,<span class="number">210</span>,<span class="number">110</span>),<span class="number">15</span>,<span class="number">15</span>,画笔)<span class="comment">--画布绘制圆角矩形</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制弧形实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E5%BC%A7%E5%BD%A2%E5%AE%9E%E4%BE%8B-2021-11-08%2013:17:32/</url>
    <content><![CDATA[<h1>绘制弧形实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.RectF&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔</span></span><br><span class="line">画布.drawArc(RectF(<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>,<span class="number">100</span>),<span class="number">0</span>,<span class="number">90</span>,<span class="literal">false</span>,画笔)<span class="comment">--画布绘制弧</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制文字教程</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E6%96%87%E5%AD%97%E6%95%99%E7%A8%8B-2021-11-08%2013:17:50/</url>
    <content><![CDATA[<h1>绘制文字教程</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)</span><br><span class="line">画布.drawText(<span class="string">&quot;AndroLuaBOX Welcome&quot;</span>,<span class="number">100</span>,<span class="number">100</span>,画笔)<span class="comment">--画布绘制</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制旋转文字实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E6%97%8B%E8%BD%AC%E6%96%87%E5%AD%97%E5%AE%9E%E4%BE%8B-2021-11-08%2013:18:07/</url>
    <content><![CDATA[<h1>绘制旋转文字实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.Path&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔颜色</span></span><br><span class="line"><span class="built_in">path</span> = Path()<span class="comment">--初始化路径</span></span><br><span class="line"><span class="built_in">path</span>.moveTo(<span class="number">50</span>,<span class="number">50</span>)<span class="comment">--移动路径</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">200</span>, <span class="number">200</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">300</span>, <span class="number">300</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">400</span>, <span class="number">400</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.<span class="built_in">close</span>()<span class="comment">--闭合路径</span></span><br><span class="line">画布.drawTextOnPath(<span class="string">&quot;AndroLuaBOX Welcome&quot;</span>, <span class="built_in">path</span>, <span class="number">50</span>, <span class="number">50</span>,画笔)<span class="comment">--画布绘制</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制椭圆实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E6%A4%AD%E5%9C%86%E5%AE%9E%E4%BE%8B-2021-11-08%2013:18:25/</url>
    <content><![CDATA[<h1>绘制椭圆实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.RectF&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔</span></span><br><span class="line">画布.drawOval(RectF(<span class="number">0</span>,<span class="number">0</span>,<span class="number">200</span>,<span class="number">300</span>),画笔)<span class="comment">--画布绘制椭圆</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制水滴</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E6%B0%B4%E6%BB%B4-2021-11-08%2013:19:48/</url>
    <content><![CDATA[<h1>绘制水滴</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.Path&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">  LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">  Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">  layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">  layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">  id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">  画布.translate(activity.getWidth()/<span class="number">2</span>,activity.getHeight()/<span class="number">2.5</span>)<span class="comment">--移动画布到中央</span></span><br><span class="line">  画布.rotate(<span class="number">90</span>)<span class="comment">--旋转画布</span></span><br><span class="line">  画布.save()<span class="comment">--保存画布状态</span></span><br><span class="line">  画笔.setColor(<span class="number">0xff7e5cf8</span>)</span><br><span class="line">  路径 = Path() </span><br><span class="line">  <span class="keyword">local</span> 水滴长,水滴宽=<span class="number">250</span>,<span class="number">120</span></span><br><span class="line">  路径.quadTo(水滴长,水滴宽,水滴长,<span class="number">0</span>)<span class="comment">--绘制水滴</span></span><br><span class="line">  路径.moveTo(<span class="number">0</span>,<span class="number">0</span>)<span class="comment">--移动</span></span><br><span class="line">  路径.lineTo(<span class="number">120</span>,<span class="number">120</span>)</span><br><span class="line">  路径.moveTo(<span class="number">0</span>,<span class="number">0</span>)<span class="comment">--移动</span></span><br><span class="line">  路径.quadTo(水滴长,-水滴宽,水滴长,<span class="number">0</span>)<span class="comment">--绘制水滴</span></span><br><span class="line"></span><br><span class="line">  路径.<span class="built_in">close</span>()<span class="comment">--闭合路径</span></span><br><span class="line">  画布.drawPath(路径,画笔)<span class="comment">--画布绘制</span></span><br><span class="line">  画布.rotate(<span class="number">90</span>)<span class="comment">--旋转画布</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制矩形实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E7%9F%A9%E5%BD%A2%E5%AE%9E%E4%BE%8B-2021-11-08%2013:18:42/</url>
    <content><![CDATA[<h1>绘制矩形实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔</span></span><br><span class="line">画布.drawRect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">300</span>,<span class="number">300</span>,画笔)<span class="comment">--画布绘制矩形</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制自定义图形实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%BE%E5%BD%A2%E5%AE%9E%E4%BE%8B-2021-11-08%2013:19:05/</url>
    <content><![CDATA[<h1>绘制自定义图形实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.Path&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Paint&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.Color&quot;</span></span><br><span class="line">import <span class="string">&quot;android.graphics.RectF&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line"><span class="comment">--绘制表盘</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔颜色</span></span><br><span class="line">画笔.setStyle(Paint.Style.STROKE)<span class="comment">--设置画笔样式</span></span><br><span class="line">画布.translate(画布.getWidth()/<span class="number">2</span>, <span class="number">200</span>)<span class="comment">--移动画布</span></span><br><span class="line">画布.drawCircle(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, 画笔)<span class="comment">--绘制圆</span></span><br><span class="line">画布.save()<span class="comment">--保存画布</span></span><br><span class="line">画布.translate(<span class="number">-75</span>, <span class="number">-75</span>)<span class="comment">--移动画布</span></span><br><span class="line"><span class="comment">--绘制文字</span></span><br><span class="line"><span class="built_in">path</span> = Path()<span class="comment">--初始化路径</span></span><br><span class="line"><span class="built_in">path</span>.addArc(RectF(<span class="number">0</span>,<span class="number">0</span>,<span class="number">150</span>,<span class="number">150</span>), <span class="number">-180</span>, <span class="number">180</span>)<span class="comment">--绘制弧</span></span><br><span class="line">citePaint = Paint(画笔)<span class="comment">--定义新画笔</span></span><br><span class="line">citePaint.setTextSize(<span class="number">14</span>)<span class="comment">--绘制文字的大小</span></span><br><span class="line">citePaint.setStrokeWidth(<span class="number">1</span>)<span class="comment">--绘制文字的粗细</span></span><br><span class="line">画布.drawTextOnPath(<span class="string">&quot;绘制表盘~&quot;</span>, <span class="built_in">path</span>, <span class="number">28</span>, <span class="number">0</span>, citePaint)<span class="comment">--绘制文字</span></span><br><span class="line">画布.restore()<span class="comment">--恢复画布</span></span><br><span class="line">tmpPaint = Paint(画笔)<span class="comment">--定义新画笔</span></span><br><span class="line">tmpPaint.setStrokeWidth(<span class="number">1</span>)<span class="comment">--设置粗细</span></span><br><span class="line"><span class="comment">--绘制刻度</span></span><br><span class="line">y=<span class="number">100</span><span class="comment">--定义变量</span></span><br><span class="line">count = <span class="number">60</span><span class="comment">--定义变量</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">0</span>,count <span class="keyword">do</span><span class="comment">--循环</span></span><br><span class="line"><span class="keyword">if</span> i%<span class="number">5</span>==<span class="number">0</span> <span class="keyword">then</span><span class="comment">--判断</span></span><br><span class="line">画布.drawLine(<span class="number">0</span>, y, <span class="number">0</span>, y+<span class="number">12</span>, 画笔)<span class="comment">--绘制直线</span></span><br><span class="line">画布.drawText(<span class="built_in">tostring</span>(i/<span class="number">5</span>+<span class="number">1</span>), <span class="number">-4</span>, y+<span class="number">25</span>, tmpPaint)<span class="comment">--绘制文字</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">画布.drawLine(<span class="number">0</span>, y, <span class="number">0</span>, y +<span class="number">5</span>, tmpPaint)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">画布.rotate(<span class="number">360</span>/count,<span class="number">0</span>,<span class="number">0</span>)<span class="comment">--选择画布</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--绘制指针</span></span><br><span class="line">tmpPaint.setColor(Color.GRAY)<span class="comment">--设置画笔颜色</span></span><br><span class="line">tmpPaint.setStrokeWidth(<span class="number">4</span>)<span class="comment">--设置粗细</span></span><br><span class="line">画布.drawCircle(<span class="number">0</span>, <span class="number">0</span>, <span class="number">7</span>, tmpPaint)<span class="comment">--绘制圆</span></span><br><span class="line">tmpPaint.setStyle(Paint.Style.FILL)<span class="comment">--设置画笔样式</span></span><br><span class="line">tmpPaint.setColor(Color.YELLOW)<span class="comment">--设置画笔颜色</span></span><br><span class="line">画布.drawCircle(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, tmpPaint)<span class="comment">--绘制圆</span></span><br><span class="line">画布.drawLine(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">-65</span>, 画笔)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘图测试</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%9B%BE%E6%B5%8B%E8%AF%95-2021-11-08%2013:15:34/</url>
    <content><![CDATA[<h1>绘图测试</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">--绘图测试</span></span><br><span class="line">import <span class="string">&#x27;android.graphics.Color&#x27;</span></span><br><span class="line">SorrowClover=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">id=<span class="string">&#x27;main_canvas&#x27;</span>;</span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(SorrowClover))</span><br><span class="line">e_table = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onTouchEvent</span><span class="params">(e)</span></span></span><br><span class="line">code = e.getAction()</span><br><span class="line"><span class="keyword">if</span>(code==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(e_table,e.getX())</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(e_table,e.getY())</span><br><span class="line"><span class="keyword">elseif</span>(code==<span class="number">2</span>) <span class="keyword">then</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(e_table,e.getX())</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(e_table,e.getY())</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(e_table,e.getX())</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(e_table,e.getY())</span><br><span class="line">main_canvas.setBackgroundDrawable(LuaDrawable(<span class="function"><span class="keyword">function</span><span class="params">(canvas,paint,draw)</span></span></span><br><span class="line">paint.setColor(Color.BLUE)</span><br><span class="line">canvas.drawLines(e_table,paint)</span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>自绘制方法概述</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E8%87%AA%E7%BB%98%E5%88%B6%E6%96%B9%E6%B3%95%E6%A6%82%E8%BF%B0-2021-11-08%2013:19:34/</url>
    <content><![CDATA[<h1>自绘制方法概述</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">我们绘制将会用到LuaDrawable方法：</span><br><span class="line">构建方法</span><br><span class="line">draw=LuaDrawable(func)</span><br><span class="line">func 绘制函数，在每次绘制时调用</span><br><span class="line">传入<span class="number">3</span>个参数</span><br><span class="line">canvas 画布，paint 画笔，drawable 当前实例。</span><br><span class="line">这里不懂得可以看外面的示例</span><br><span class="line"></span><br><span class="line">相关方法：</span><br><span class="line">Paint(画笔):</span><br><span class="line">setARGB(int a,int r,int g,int b): 设置绘制的颜色，a代表透明度，r，g，b代表颜色值。</span><br><span class="line">setAlpha(int a): 设置绘制图形的透明度。</span><br><span class="line">setColor(int color): 设置绘制的颜色，使用颜色值来表示，该颜色值包括透明度和RGB颜色。</span><br><span class="line">setAntiAlias(boolean aa): 设置是否使用抗锯齿功能，会消耗较大资源，绘制图形速度会变慢。</span><br><span class="line">setDither(boolean dither): 设定是否使用图像抖动处理，会使绘制出来的图片颜色更加平滑和饱满，图像更加清晰</span><br><span class="line">setFilterBitmap(boolean filter)： 如果该项设置为<span class="literal">true</span>，则图像在动画进行中会滤掉对Bitmap图像的优化操作， 加快显示速度，本设置项依赖于dither和xfermode的设置</span><br><span class="line">setMaskFilter(MaskFilter maskfilter)： 设置MaskFilter，可以用不同的MaskFilter实现滤镜的效果，如滤化，立体等</span><br><span class="line">setColorFilter(ColorFilter colorfilter)： 设置颜色过滤器，可以在绘制颜色时实现不用颜色的变换效果</span><br><span class="line">setPathEffect(PathEffect effect) 设置绘制路径的效果，如点画线等</span><br><span class="line">setShader(Shader shader)： 设置图像效果，使用Shader可以绘制出各种渐变效果</span><br><span class="line">setShadowLayer(float radius ,float dx,float dy,int color)：在图形下面设置阴影层，产生阴影效果， radius为阴影的角度，dx和dy为阴影在x轴和y轴上的距离，color为阴影的颜色</span><br><span class="line">setStyle(Paint.Style style)： 设置画笔的样式，为FILL，FILL_OR_STROKE，或STROKE</span><br><span class="line">setStrokeCap(Paint.Cap cap)： 当画笔样式为STROKE或FILL_OR_STROKE时，设置笔刷的图形样式， 如圆形样Cap.ROUND,或方形样式Cap.SQUARE</span><br><span class="line">setSrokeJoin(Paint.Join join)： 设置绘制时各图形的结合方式，如平滑效果等</span><br><span class="line">setStrokeWidth(float width)： 当画笔样式为STROKE或FILL_OR_STROKE时，设置笔刷的粗细度</span><br><span class="line">setXfermode(Xfermode xfermode)： 设置图形重叠时的处理方式，如合并，取交集或并集，经常用来制作橡皮的擦除效果</span><br><span class="line">setFakeBoldText(boolean fakeBoldText)： 模拟实现粗体文字，设置在小字体上效果会非常差</span><br><span class="line">setSubpixelText(boolean subpixelText)： 设置该项为<span class="literal">true</span>，将有助于文本在LCD屏幕上的显示效果</span><br><span class="line">setTextAlign(Paint.Align align)： 设置绘制文字的对齐方向</span><br><span class="line">setTextScaleX(float scaleX)： 设置绘制文字x轴的缩放比例，可以实现文字的拉伸的效果</span><br><span class="line">setTextSize(float textSize)： 设置绘制文字的字号大小</span><br><span class="line">setTextSkewX(float skewX)： 设置斜体文字，skewX为倾斜弧度</span><br><span class="line">setTypeface(Typeface typeface)： 设置Typeface对象，即字体风格，包括粗体，斜体以及衬线体，非衬线体等</span><br><span class="line">setUnderlineText(boolean underlineText)： 设置带有下划线的文字效果</span><br><span class="line">setStrikeThruText(boolean strikeThruText)： 设置带有删除线的效果</span><br><span class="line">setStrokeJoin(Paint.Join join)： 设置结合处的样子，Miter:结合处为锐角， Round:结合处为圆弧：BEVEL：结合处为直线</span><br><span class="line">setStrokeMiter(float miter)：设置画笔倾斜度</span><br><span class="line">setStrokeCap (Paint.Cap cap)：设置转弯处的风格 其他常用方法：</span><br><span class="line">float ascent( )：测量baseline之上至字符最高处的距离</span><br><span class="line">float descent()：baseline之下至字符最低处的距离</span><br><span class="line">int breakText(<span class="built_in">char</span>[] text, int index, int count, float maxWidth, float[] measuredWidth)： 检测一行显示多少文字</span><br><span class="line">clearShadowLayer( )：清除阴影层 </span><br><span class="line"></span><br><span class="line">Canvas(画布):</span><br><span class="line">drawRect(RectF rect, Paint paint) ：绘制区域，参数一为RectF一个区域</span><br><span class="line">drawPath(Path <span class="built_in">path</span>, Paint paint) ：绘制一个路径，参数一为Path路径对象</span><br><span class="line">drawBitmap(Bitmap bitmap, Rect src, Rect dst, Paint paint) ： 贴图，参数一就是我们常规的Bitmap对象，参数二是源区域(这里是bitmap)， 参数三是目标区域(应该在canvas的位置和大小)，参数四是Paint画刷对象， 因为用到了缩放和拉伸的可能，当原始Rect不等于目标Rect时性能将会有大幅损失。</span><br><span class="line">drawLine(float startX, float startY, float stopX, float stopY, Paintpaint) ： 画线，参数一起始点的x轴位置，参数二起始点的y轴位置，参数三终点的x轴水平位置， 参数四y轴垂直位置，最后一个参数为Paint 画刷对象。</span><br><span class="line">drawPoint(float x, float y, Paint paint)： 画点，参数一水平x轴，参数二垂直y轴，第三个参数为Paint对象。</span><br><span class="line">drawText(String text, float x, floaty, Paint paint) ： 渲染文本，Canvas类除了上面的还可以描绘文字，参数一是String类型的文本， 参数二x轴，参数三y轴，参数四是Paint对象。</span><br><span class="line">drawOval(RectF oval, Paint paint)：画椭圆，参数一是扫描区域，参数二为paint对象；</span><br><span class="line">drawCircle(float cx, float cy, float radius,Paint paint)： 绘制圆，参数一是中心点的x轴，参数二是中心点的y轴，参数三是半径，参数四是paint对象；</span><br><span class="line">drawArc(RectF oval, float startAngle, float sweepAngle, boolean useCenter, Paint paint)： 画弧，参数一是RectF对象，一个矩形区域椭圆形的界限用于定义在形状、大小、电弧，参数二是起始角 (度)在电弧的开始，参数三扫描角(度)开始顺时针测量的，参数四是如果这是真的话,包括椭圆中心的电 弧,并关闭它,如果它是假这将是一个弧线,参数五是Paint对象；</span><br><span class="line">clipXXX()方法族:在当前的画图区域裁剪(clip)出一个新的画图区域，这个画图区域就是canvas 对象的当前画图区域了。比如：clipRect(new Rect())，那么该矩形区域就是canvas的当前画图区域</span><br><span class="line">save()和restore()方法： save( )：用来保存Canvas的状态。save之后，可以调用Canvas的平移、放缩、旋转、错切、裁剪等操作！ restore（）：用来恢复Canvas之前保存的状态。防止save后对Canvas执行的操作对后续的绘制有影响。 save()和restore()要配对使用(restore可以比save少,但不能多)，若restore调用次数比save多,会报错！</span><br><span class="line">translate(float dx, float dy)： 平移，将画布的坐标原点向左右方向移动x，向上下方向移动y.canvas的默认位置是在（<span class="number">0</span>,<span class="number">0</span>）</span><br><span class="line">scale(float sx, float sy)：扩大，x为水平方向的放大倍数，y为竖直方向的放大倍数</span><br><span class="line">rotate(float degrees)：旋转，angle指旋转的角度，顺时针旋转</span><br><span class="line"></span><br><span class="line">Path(路径):</span><br><span class="line">addArc(RectF oval, float startAngle, float sweepAngle：为路径添加一个多边形</span><br><span class="line">addCircle(float x, float y, float radius, Path.Direction dir)：给<span class="built_in">path</span>添加圆圈</span><br><span class="line">addOval(RectF oval, Path.Direction dir)：添加椭圆形</span><br><span class="line">addRect(RectF rect, Path.Direction dir)：添加一个区域</span><br><span class="line">addRoundRect(RectF rect, float[] radii, Path.Direction dir)：添加一个圆角区域</span><br><span class="line">isEmpty()：判断路径是否为空</span><br><span class="line">transform(Matrix matrix)：应用矩阵变换</span><br><span class="line">transform(Matrix matrix, Path dst)：应用矩阵变换并将结果放到新的路径中，即第二个参数。</span><br><span class="line">moveTo(float x, float y)：不会进行绘制，只用于移动移动画笔</span><br><span class="line">lineTo(float x, float y)：用于直线绘制，默认从(<span class="number">0</span>，<span class="number">0</span>)开始绘制，用moveTo移动！ 比如 mPath.lineTo(<span class="number">300</span>, <span class="number">300</span>); canvas.drawPath(mPath, mPaint);</span><br><span class="line">quadTo(float x1, float y1, float x2, float y2)： 用于绘制圆滑曲线，即贝塞尔曲线</span><br><span class="line">rCubicTo(float x1, float y1, float x2, float y2, float x3, float y3) 同样是用来实现贝塞尔曲线的。 (x1,y1) 为控制点，(x2,y2)为控制点，(x3,y3) 为结束点。</span><br><span class="line">arcTo(RectF oval, float startAngle, float sweepAngle)： 绘制弧线（实际是截取圆或椭圆的一部分）ovalRectF为椭圆的矩形，startAngle 为开始角度， sweepAngle 为结束角度。</span><br><span class="line"></span><br><span class="line">Drawable常用方法：</span><br><span class="line">invalidateSelf()：重绘制</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>Marvel</title>
    <url>/2019/12/25/Gallery/marvel/index/</url>
    <content><![CDATA[<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Jj8FXuKVlOea4Ec.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/eqBGrXx9tWsZOao.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/LjW2CfNSD7OaY4v.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/pGIhaPjxtl438U9.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/hzjJBR2x5SEmsbC.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ucNDmUqQkrFfAWv.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/oj1wAnGSKtFvXIJ.jpg" alt=""></p>
          </div>]]></content>
  </entry>
  <entry>
    <title>壁紙</title>
    <url>/2019/12/25/Gallery/wallpaper/index/</url>
    <content><![CDATA[<div class="fj-gallery"><p><img src="https://i.loli.net/2019/11/10/lP3rLNUBaGtSVzc.png" alt="material-1.png"><br><img src="https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png" alt="material-8.png"><br><img src="https://i.loli.net/2019/11/10/53eTB2uiNRlXwFP.png" alt="material-6.png"><br><img src="https://i.loli.net/2019/11/10/xthHmnbdNerWOqP.png" alt="material-10.png"><br><img src="https://i.loli.net/2019/11/10/rJbFpE65tmxPv7R.png" alt="material-3.png"><br><img src="https://i.loli.net/2019/11/10/bEJsXxewpOGuRD8.png" alt="material-4.png"><br><img src="https://i.loli.net/2019/11/10/71wgohfPHqXRbG9.png" alt="material-7.png"><br><img src="https://i.loli.net/2019/11/10/gcnavZbmepS8d4u.png" alt="material-2.png"><br><img src="https://i.loli.net/2019/11/10/3wkO7fuQpgda6vz.png" alt="material-5.png"><br><img src="https://i.loli.net/2019/11/10/egVhFWopA5mP2Hk.png" alt="material-9.png"></p>
          </div>]]></content>
  </entry>
  <entry>
    <title>ohmygirl</title>
    <url>/2019/12/25/Gallery/ohmygirl/index/</url>
    <content><![CDATA[<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg" alt=""></p>
          </div>]]></content>
  </entry>
  <entry>
    <title>绘制多边形实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%AE%9E%E4%BE%8B-2021-11-08%2013:17:15/</url>
    <content><![CDATA[<h1>绘制多边形实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.Path&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)</span><br><span class="line"><span class="built_in">path</span> = Path()</span><br><span class="line"><span class="built_in">path</span>.moveTo(<span class="number">10</span>, <span class="number">10</span>) <span class="comment">--移动到 坐标10,10</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">100</span>, <span class="number">50</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">200</span>,<span class="number">40</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">300</span>, <span class="number">20</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">200</span>, <span class="number">10</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">100</span>, <span class="number">70</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.lineTo(<span class="number">50</span>, <span class="number">40</span>)<span class="comment">--绘制直线</span></span><br><span class="line"><span class="built_in">path</span>.<span class="built_in">close</span>()<span class="comment">--闭合路径</span></span><br><span class="line">画布.drawPath(<span class="built_in">path</span>,画笔)<span class="comment">--画布绘制</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
  <entry>
    <title>绘制四分之一圆实例</title>
    <url>/2021/11/08/%E8%87%AA%E7%BB%98%E5%88%B6%E6%95%99%E7%A8%8B/%E7%BB%98%E5%88%B6%E5%9B%9B%E5%88%86%E4%B9%8B%E4%B8%80%E5%9C%86%E5%AE%9E%E4%BE%8B-2021-11-08%2013:16:27/</url>
    <content><![CDATA[<h1>绘制四分之一圆实例</h1>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">import <span class="string">&quot;android.graphics.RectF&quot;</span><span class="comment">--导入依赖包</span></span><br><span class="line"><span class="comment">--创建示例布局</span></span><br><span class="line">shamrock=</span><br><span class="line">&#123;</span><br><span class="line">LinearLayout;<span class="comment">--线性布局</span></span><br><span class="line">Orientation=<span class="string">&#x27;vertical&#x27;</span>;<span class="comment">--布局方向</span></span><br><span class="line">layout_width=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局宽度</span></span><br><span class="line">layout_height=<span class="string">&#x27;fill&#x27;</span>;<span class="comment">--布局高度</span></span><br><span class="line">id=<span class="string">&#x27;布局画布&#x27;</span>;<span class="comment">--绑定id</span></span><br><span class="line">&#125;;</span><br><span class="line">activity.setContentView(loadlayout(shamrock))<span class="comment">--显示布局</span></span><br><span class="line">布局画布.setBackground(<span class="comment">--设置背景</span></span><br><span class="line">LuaDrawable(<span class="comment">--设置自绘制</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(画布,画笔)</span></span><span class="comment">--绘制函数</span></span><br><span class="line">画笔.setColor(<span class="number">0xff7e5cf8</span>)<span class="comment">--设置画笔</span></span><br><span class="line">画布.drawArc(RectF(<span class="number">0</span>,<span class="number">0</span>,<span class="number">100</span>,<span class="number">100</span>),<span class="number">0</span>,<span class="number">90</span>,<span class="literal">true</span>,画笔)<span class="comment">--画布绘制弧</span></span><br><span class="line"><span class="keyword">end</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>自绘制教程</category>
      </categories>
      <tags>
        <tag>tags</tag>
      </tags>
  </entry>
</search>
